<html lang="en">
<head>
<title>automake</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="automake">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual is for GNU Automake (version 1.12.4,
16 September 2012), a program that creates GNU standards-compliant
Makefiles from template files.

Copyright (C) 1995-2012 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with no Front-Cover texts,
     and with no Back-Cover Texts.  A copy of the license is included
     in the section entitled "GNU Free Documentation License."

   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<h1 class="settitle">automake</h1>
   <div class="contents">
<h2>Table of Contents</h2>
<ul>
<li><a name="toc_Top" href="#Top">GNU Automake</a>
<li><a name="toc_Introduction" href="#Introduction">1 Introduction</a>
<li><a name="toc_Autotools-Introduction" href="#Autotools-Introduction">2 An Introduction to the Autotools</a>
<ul>
<li><a href="#GNU-Build-System">2.1 Introducing the GNU Build System</a>
<li><a href="#Use-Cases">2.2 Use Cases for the GNU Build System</a>
<ul>
<li><a href="#Basic-Installation">2.2.1 Basic Installation</a>
<li><a href="#Standard-Targets">2.2.2 Standard <samp><span class="file">Makefile</span></samp> Targets</a>
<li><a href="#Standard-Directory-Variables">2.2.3 Standard Directory Variables</a>
<li><a href="#Standard-Configuration-Variables">2.2.4 Standard Configuration Variables</a>
<li><a href="#config_002esite">2.2.5 Overriding Default Configuration Setting with <samp><span class="file">config.site</span></samp></a>
<li><a href="#VPATH-Builds">2.2.6 Parallel Build Trees (a.k.a. VPATH Builds)</a>
<li><a href="#Two_002dPart-Install">2.2.7 Two-Part Installation</a>
<li><a href="#Cross_002dCompilation">2.2.8 Cross-Compilation</a>
<li><a href="#Renaming">2.2.9 Renaming Programs at Install Time</a>
<li><a href="#DESTDIR">2.2.10 Building Binary Packages Using DESTDIR</a>
<li><a href="#Preparing-Distributions">2.2.11 Preparing Distributions</a>
<li><a href="#Dependency-Tracking">2.2.12 Automatic Dependency Tracking</a>
<li><a href="#Nested-Packages">2.2.13 Nested Packages</a>
</li></ul>
<li><a href="#Why-Autotools">2.3 How Autotools Help</a>
<li><a href="#Hello-World">2.4 A Small Hello World</a>
<ul>
<li><a href="#Creating-amhello">2.4.1 Creating <samp><span class="file">amhello-1.0.tar.gz</span></samp></a>
<li><a href="#amhello_0027s-configure_002eac-Setup-Explained">2.4.2 <code>amhello</code>'s <samp><span class="file">configure.ac</span></samp> Setup Explained</a>
<li><a href="#amhello_0027s-Makefile_002eam-Setup-Explained">2.4.3 <code>amhello</code>'s <samp><span class="file">Makefile.am</span></samp> Setup Explained</a>
</li></ul>
</li></ul>
<li><a name="toc_Generalities" href="#Generalities">3 General ideas</a>
<ul>
<li><a href="#General-Operation">3.1 General Operation</a>
<li><a href="#Strictness">3.2 Strictness</a>
<li><a href="#Uniform">3.3 The Uniform Naming Scheme</a>
<li><a href="#Length-Limitations">3.4 Staying below the command line length limit</a>
<li><a href="#Canonicalization">3.5 How derived variables are named</a>
<li><a href="#User-Variables">3.6 Variables reserved for the user</a>
<li><a href="#Auxiliary-Programs">3.7 Programs automake might require</a>
</li></ul>
<li><a name="toc_Examples" href="#Examples">4 Some example packages</a>
<ul>
<li><a href="#Complete">4.1 A simple example, start to finish</a>
<li><a href="#true">4.2 Building true and false</a>
</li></ul>
<li><a name="toc_automake-Invocation" href="#automake-Invocation">5 Creating a <samp><span class="file">Makefile.in</span></samp></a>
<li><a name="toc_configure" href="#configure">6 Scanning <samp><span class="file">configure.ac</span></samp>, using <samp><span class="command">aclocal</span></samp></a>
<ul>
<li><a href="#Requirements">6.1 Configuration requirements</a>
<li><a href="#Optional">6.2 Other things Automake recognizes</a>
<li><a href="#aclocal-Invocation">6.3 Auto-generating aclocal.m4</a>
<ul>
<li><a href="#aclocal-Options">6.3.1 aclocal Options</a>
<li><a href="#Macro-Search-Path">6.3.2 Macro Search Path</a>
<li><a href="#Extending-aclocal">6.3.3 Writing your own aclocal macros</a>
<li><a href="#Local-Macros">6.3.4 Handling Local Macros</a>
<li><a href="#Serials">6.3.5 Serial Numbers</a>
<li><a href="#Future-of-aclocal">6.3.6 The Future of <samp><span class="command">aclocal</span></samp></a>
</li></ul>
<li><a href="#Macros">6.4 Autoconf macros supplied with Automake</a>
<ul>
<li><a href="#Public-Macros">6.4.1 Public Macros</a>
<li><a href="#Obsolete-Macros">6.4.2 Obsolete Macros</a>
<li><a href="#Private-Macros">6.4.3 Private Macros</a>
</li></ul>
</li></ul>
<li><a name="toc_Directories" href="#Directories">7 Directories</a>
<ul>
<li><a href="#Subdirectories">7.1 Recursing subdirectories</a>
<li><a href="#Conditional-Subdirectories">7.2 Conditional Subdirectories</a>
<ul>
<li><a href="#SUBDIRS-vs-DIST_005fSUBDIRS">7.2.1 <code>SUBDIRS</code> vs. <code>DIST_SUBDIRS</code></a>
<li><a href="#Subdirectories-with-AM_005fCONDITIONAL">7.2.2 Subdirectories with <code>AM_CONDITIONAL</code></a>
<li><a href="#Subdirectories-with-AC_005fSUBST">7.2.3 Subdirectories with <code>AC_SUBST</code></a>
<li><a href="#Unconfigured-Subdirectories">7.2.4 Unconfigured Subdirectories</a>
</li></ul>
<li><a href="#Alternative">7.3 An Alternative Approach to Subdirectories</a>
<li><a href="#Subpackages">7.4 Nesting Packages</a>
</li></ul>
<li><a name="toc_Programs" href="#Programs">8 Building Programs and Libraries</a>
<ul>
<li><a href="#A-Program">8.1 Building a program</a>
<ul>
<li><a href="#Program-Sources">8.1.1 Defining program sources</a>
<li><a href="#Linking">8.1.2 Linking the program</a>
<li><a href="#Conditional-Sources">8.1.3 Conditional compilation of sources</a>
<li><a href="#Conditional-Programs">8.1.4 Conditional compilation of programs</a>
</li></ul>
<li><a href="#A-Library">8.2 Building a library</a>
<li><a href="#A-Shared-Library">8.3 Building a Shared Library</a>
<ul>
<li><a href="#Libtool-Concept">8.3.1 The Libtool Concept</a>
<li><a href="#Libtool-Libraries">8.3.2 Building Libtool Libraries</a>
<li><a href="#Conditional-Libtool-Libraries">8.3.3 Building Libtool Libraries Conditionally</a>
<li><a href="#Conditional-Libtool-Sources">8.3.4 Libtool Libraries with Conditional Sources</a>
<li><a href="#Libtool-Convenience-Libraries">8.3.5 Libtool Convenience Libraries</a>
<li><a href="#Libtool-Modules">8.3.6 Libtool Modules</a>
<li><a href="#Libtool-Flags">8.3.7 <code>_LIBADD</code>, <code>_LDFLAGS</code>, and <code>_LIBTOOLFLAGS</code></a>
<li><a href="#LTLIBOBJS">8.3.8 <code>LTLIBOBJS</code> and <code>LTALLOCA</code></a>
<li><a href="#Libtool-Issues">8.3.9 Common Issues Related to Libtool's Use</a>
<ul>
<li><a href="#Error-required-file-ltmain_002esh-not-found">8.3.9.1 Error: &lsquo;<samp><span class="samp">required file `./ltmain.sh' not found</span></samp>&rsquo;</a>
<li><a href="#Objects-created-both-with-libtool-and-without">8.3.9.2 Objects &lsquo;<samp><span class="samp">created with both libtool and without</span></samp>&rsquo;</a>
</li></ul>
</li></ul>
<li><a href="#Program-and-Library-Variables">8.4 Program and Library Variables</a>
<li><a href="#Default-_005fSOURCES">8.5 Default <code>_SOURCES</code></a>
<li><a href="#LIBOBJS">8.6 Special handling for <code>LIBOBJS</code> and <code>ALLOCA</code></a>
<li><a href="#Program-Variables">8.7 Variables used when building a program</a>
<li><a href="#Yacc-and-Lex">8.8 Yacc and Lex support</a>
<li><a href="#C_002b_002b-Support">8.9 C++ Support</a>
<li><a href="#Objective-C-Support">8.10 Objective C Support</a>
<li><a href="#Objective-C_002b_002b-Support">8.11 Objective C++ Support</a>
<li><a href="#Unified-Parallel-C-Support">8.12 Unified Parallel C Support</a>
<li><a href="#Assembly-Support">8.13 Assembly Support</a>
<li><a href="#Fortran-77-Support">8.14 Fortran 77 Support</a>
<ul>
<li><a href="#Preprocessing-Fortran-77">8.14.1 Preprocessing Fortran 77</a>
<li><a href="#Compiling-Fortran-77-Files">8.14.2 Compiling Fortran 77 Files</a>
<li><a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">8.14.3 Mixing Fortran 77 With C and C++</a>
<ul>
<li><a href="#How-the-Linker-is-Chosen">8.14.3.1 How the Linker is Chosen</a>
</li></ul>
</li></ul>
<li><a href="#Fortran-9x-Support">8.15 Fortran 9x Support</a>
<ul>
<li><a href="#Compiling-Fortran-9x-Files">8.15.1 Compiling Fortran 9x Files</a>
</li></ul>
<li><a href="#Java-Support-with-gcj">8.16 Compiling Java sources using gcj</a>
<li><a href="#Vala-Support">8.17 Vala Support</a>
<li><a href="#Support-for-Other-Languages">8.18 Support for Other Languages</a>
<li><a href="#Dependencies">8.19 Automatic dependency tracking</a>
<li><a href="#EXEEXT">8.20 Support for executable extensions</a>
</li></ul>
<li><a name="toc_Other-Objects" href="#Other-Objects">9 Other Derived Objects</a>
<ul>
<li><a href="#Scripts">9.1 Executable Scripts</a>
<li><a href="#Headers">9.2 Header files</a>
<li><a href="#Data">9.3 Architecture-independent data files</a>
<li><a href="#Sources">9.4 Built Sources</a>
<ul>
<li><a href="#Built-Sources-Example">9.4.1 Built Sources Example</a>
</li></ul>
</li></ul>
<li><a name="toc_Other-GNU-Tools" href="#Other-GNU-Tools">10 Other GNU Tools</a>
<ul>
<li><a href="#Emacs-Lisp">10.1 Emacs Lisp</a>
<li><a href="#gettext">10.2 Gettext</a>
<li><a href="#Libtool">10.3 Libtool</a>
<li><a href="#Java">10.4 Java bytecode compilation (deprecated)</a>
<li><a href="#Python">10.5 Python</a>
</li></ul>
<li><a name="toc_Documentation" href="#Documentation">11 Building documentation</a>
<ul>
<li><a href="#Texinfo">11.1 Texinfo</a>
<li><a href="#Man-Pages">11.2 Man Pages</a>
</li></ul>
<li><a name="toc_Install" href="#Install">12 What Gets Installed</a>
<ul>
<li><a href="#Basics-of-Installation">12.1 Basics of Installation</a>
<li><a href="#The-Two-Parts-of-Install">12.2 The Two Parts of Install</a>
<li><a href="#Extending-Installation">12.3 Extending Installation</a>
<li><a href="#Staged-Installs">12.4 Staged Installs</a>
<li><a href="#Install-Rules-for-the-User">12.5 Install Rules for the User</a>
</li></ul>
<li><a name="toc_Clean" href="#Clean">13 What Gets Cleaned</a>
<li><a name="toc_Dist" href="#Dist">14 What Goes in a Distribution</a>
<ul>
<li><a href="#Basics-of-Distribution">14.1 Basics of Distribution</a>
<li><a href="#Fine_002dgrained-Distribution-Control">14.2 Fine-grained Distribution Control</a>
<li><a href="#The-dist-Hook">14.3 The dist Hook</a>
<li><a href="#Checking-the-Distribution">14.4 Checking the Distribution</a>
<li><a href="#The-Types-of-Distributions">14.5 The Types of Distributions</a>
</li></ul>
<li><a name="toc_Tests" href="#Tests">15 Support for test suites</a>
<ul>
<li><a href="#Generalities-about-Testing">15.1 Generalities about Testing</a>
<li><a href="#Simple-Tests">15.2 Simple Tests</a>
<ul>
<li><a href="#Scripts_002dbased-Testsuites">15.2.1 Scripts-based Testsuites</a>
<li><a href="#Serial-Test-Harness">15.2.2 Serial Test Harness</a>
<li><a href="#Parallel-Test-Harness">15.2.3 Parallel Test Harness</a>
</li></ul>
<li><a href="#Custom-Test-Drivers">15.3 Custom Test Drivers</a>
<ul>
<li><a href="#Overview-of-Custom-Test-Drivers-Support">15.3.1 Overview of Custom Test Drivers Support</a>
<li><a href="#Declaring-Custom-Test-Drivers">15.3.2 Declaring Custom Test Drivers</a>
<li><a href="#API-for-Custom-Test-Drivers">15.3.3 API for Custom Test Drivers</a>
<ul>
<li><a href="#Command_002dline-arguments-for-test-drivers">15.3.3.1 Command-line arguments for test drivers</a>
<li><a href="#Log-files-generation-and-test-results-recording">15.3.3.2 Log files generation and test results recording</a>
<li><a href="#Testsuite-progress-output">15.3.3.3 Testsuite progress output</a>
</li></ul>
</li></ul>
<li><a href="#Using-the-TAP-test-protocol">15.4 Using the TAP test protocol</a>
<ul>
<li><a href="#Introduction-to-TAP">15.4.1 Introduction to TAP</a>
<li><a href="#Use-TAP-with-the-Automake-test-harness">15.4.2 Use TAP with the Automake test harness</a>
<li><a href="#Incompatibilities-with-other-TAP-parsers-and-drivers">15.4.3 Incompatibilities with other TAP parsers and drivers</a>
<li><a href="#Links-and-external-resources-on-TAP">15.4.4 Links and external resources on TAP</a>
</li></ul>
<li><a href="#DejaGnu-Tests">15.5 DejaGnu Tests</a>
<li><a href="#Install-Tests">15.6 Install Tests</a>
</li></ul>
<li><a name="toc_Rebuilding" href="#Rebuilding">16 Rebuilding Makefiles</a>
<li><a name="toc_Options" href="#Options">17 Changing Automake's Behavior</a>
<ul>
<li><a href="#Options-generalities">17.1 Options generalities</a>
<li><a href="#List-of-Automake-options">17.2 List of Automake options</a>
</li></ul>
<li><a name="toc_Miscellaneous" href="#Miscellaneous">18 Miscellaneous Rules</a>
<ul>
<li><a href="#Tags">18.1 Interfacing to <samp><span class="command">etags</span></samp></a>
<li><a href="#Suffixes">18.2 Handling new file extensions</a>
</li></ul>
<li><a name="toc_Include" href="#Include">19 Include</a>
<li><a name="toc_Conditionals" href="#Conditionals">20 Conditionals</a>
<ul>
<li><a href="#Usage-of-Conditionals">20.1 Usage of Conditionals</a>
<li><a href="#Limits-of-Conditionals">20.2 Limits of Conditionals</a>
</li></ul>
<li><a name="toc_Silencing-Make" href="#Silencing-Make">21 Silencing <samp><span class="command">make</span></samp></a>
<ul>
<li><a href="#Make-verbosity">21.1 Make is verbose by default</a>
<li><a href="#Tricks-For-Silencing-Make">21.2 Standard and generic ways to silence make</a>
<li><a href="#Automake-silent_002drules-Option">21.3 How Automake can help in silencing make</a>
</li></ul>
<li><a name="toc_Gnits" href="#Gnits">22 The effect of <samp><span class="option">--gnu</span></samp> and <samp><span class="option">--gnits</span></samp></a>
<li><a name="toc_Cygnus" href="#Cygnus">23 The effect of <samp><span class="option">--cygnus</span></samp></a>
<li><a name="toc_Not-Enough" href="#Not-Enough">24 When Automake Isn't Enough</a>
<ul>
<li><a href="#Extending">24.1 Extending Automake Rules</a>
<li><a href="#Third_002dParty-Makefiles">24.2 Third-Party <samp><span class="file">Makefile</span></samp>s</a>
</li></ul>
<li><a name="toc_Distributing" href="#Distributing">25 Distributing <samp><span class="file">Makefile.in</span></samp>s</a>
<li><a name="toc_API-Versioning" href="#API-Versioning">26 Automake API Versioning</a>
<li><a name="toc_Upgrading" href="#Upgrading">27 Upgrading a Package to a Newer Automake Version</a>
<li><a name="toc_FAQ" href="#FAQ">28 Frequently Asked Questions about Automake</a>
<ul>
<li><a href="#CVS">28.1 CVS and generated files</a>
<li><a href="#maintainer_002dmode">28.2 <samp><span class="command">missing</span></samp> and <code>AM_MAINTAINER_MODE</code></a>
<li><a href="#Wildcards">28.3 Why doesn't Automake support wildcards?</a>
<li><a href="#Limitations-on-File-Names">28.4 Limitations on File Names</a>
<li><a href="#Errors-with-distclean">28.5 Errors with distclean</a>
<li><a href="#Flag-Variables-Ordering">28.6 Flag Variables Ordering</a>
<li><a href="#Renamed-Objects">28.7 Why are object files sometimes renamed?</a>
<li><a href="#Per_002dObject-Flags">28.8 Per-Object Flags Emulation</a>
<li><a href="#Multiple-Outputs">28.9 Handling Tools that Produce Many Outputs</a>
<li><a href="#Hard_002dCoded-Install-Paths">28.10 Installing to Hard-Coded Locations</a>
<li><a href="#Debugging-Make-Rules">28.11 Debugging Make Rules</a>
<li><a href="#Reporting-Bugs">28.12 Reporting Bugs</a>
</li></ul>
<li><a name="toc_Copying-This-Manual" href="#Copying-This-Manual">Appendix A Copying This Manual</a>
<ul>
<li><a href="#GNU-Free-Documentation-License">A.1 GNU Free Documentation License</a>
</li></ul>
<li><a name="toc_Indices" href="#Indices">Appendix B Indices</a>
<ul>
<li><a href="#Macro-Index">B.1 Macro Index</a>
<li><a href="#Variable-Index">B.2 Variable Index</a>
<li><a href="#General-Index">B.3 General Index</a>
</li></ul>
</li></ul>
</div>



<!-- We use the following macros to define indices: -->
<!-- @cindex   concepts, and anything that does not fit elsewhere -->
<!-- @vindex   Makefile variables -->
<!-- @trindex  targets -->
<!-- @acindex  Autoconf/Automake/Libtool/M4/... macros -->
<!-- @opindex  tool options -->
<!-- Define an index of configure macros. -->
<!-- Define an index of options. -->
<!-- Define an index of targets. -->
<!-- Define an index of commands. -->
<!-- Put the macros in the function index. -->
<!-- Put everything else into one index (arbitrarily chosen to be the -->
<!-- concept index). -->
<div class="node">
<a name="Top"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Introduction">Introduction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>

</div>

<!-- node-name,  next,  previous,  up -->
<h2 class="unnumbered">GNU Automake</h2>

<p>This manual is for GNU Automake (version 1.12.4,
16 September 2012), a program that creates GNU standards-compliant
Makefiles from template files.

   <p>Copyright &copy; 1995-2012 Free Software Foundation, Inc.

   <blockquote>
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License,
Version 1.3 or any later version published by the Free Software
Foundation; with no Invariant Sections, with no Front-Cover texts,
and with no Back-Cover Texts.  A copy of the license is included in the
section entitled &ldquo;GNU Free Documentation License.&rdquo;

   </blockquote>

<ul class="menu">
<li><a accesskey="1" href="#Introduction">Introduction</a>:                 Automake's purpose
<li><a accesskey="2" href="#Autotools-Introduction">Autotools Introduction</a>:       An Introduction to the Autotools
<li><a accesskey="3" href="#Generalities">Generalities</a>:                 General ideas
<li><a accesskey="4" href="#Examples">Examples</a>:                     Some example packages
<li><a accesskey="5" href="#automake-Invocation">automake Invocation</a>:          Creating a Makefile.in
<li><a accesskey="6" href="#configure">configure</a>:                    Scanning configure.ac, using aclocal
<li><a accesskey="7" href="#Directories">Directories</a>:                  Declaring subdirectories
<li><a accesskey="8" href="#Programs">Programs</a>:                     Building programs and libraries
<li><a accesskey="9" href="#Other-Objects">Other Objects</a>:                Other derived objects
<li><a href="#Other-GNU-Tools">Other GNU Tools</a>:              Other GNU Tools
<li><a href="#Documentation">Documentation</a>:                Building documentation
<li><a href="#Install">Install</a>:                      What gets installed
<li><a href="#Clean">Clean</a>:                        What gets cleaned
<li><a href="#Dist">Dist</a>:                         What goes in a distribution
<li><a href="#Tests">Tests</a>:                        Support for test suites
<li><a href="#Rebuilding">Rebuilding</a>:                   Automatic rebuilding of Makefile
<li><a href="#Options">Options</a>:                      Changing Automake's behavior
<li><a href="#Miscellaneous">Miscellaneous</a>:                Miscellaneous rules
<li><a href="#Include">Include</a>:                      Including extra files in an Automake template
<li><a href="#Conditionals">Conditionals</a>:                 Conditionals
<li><a href="#Silencing-Make">Silencing Make</a>:               Obtain less verbose output from <samp><span class="command">make</span></samp>
<li><a href="#Gnits">Gnits</a>:                        The effect of <samp><span class="option">--gnu</span></samp> and <samp><span class="option">--gnits</span></samp>
<li><a href="#Cygnus">Cygnus</a>:                       The effect of <samp><span class="option">--cygnus</span></samp> (deprecated, soon to be removed)
<li><a href="#Not-Enough">Not Enough</a>:                   When Automake is not Enough
<li><a href="#Distributing">Distributing</a>:                 Distributing the Makefile.in
<li><a href="#API-Versioning">API Versioning</a>:               About compatibility between Automake versions
<li><a href="#Upgrading">Upgrading</a>:                    Upgrading to a Newer Automake Version
<li><a href="#FAQ">FAQ</a>:                          Frequently Asked Questions
<li><a href="#Copying-This-Manual">Copying This Manual</a>:          How to make copies of this manual
<li><a href="#Indices">Indices</a>:                      Indices of variables, macros, and concepts

</li></ul>
<p>--- The Detailed Node Listing ---

<p>An Introduction to the Autotools

</p>
<ul class="menu">
<li><a href="#GNU-Build-System">GNU Build System</a>:             Introducing the GNU Build System
<li><a href="#Use-Cases">Use Cases</a>:                    Use Cases for the GNU Build System
<li><a href="#Why-Autotools">Why Autotools</a>:                How Autotools Help
<li><a href="#Hello-World">Hello World</a>:                  A Small Hello World Package

</li></ul>
<p>Use Cases for the GNU Build System

</p>
<ul class="menu">
<li><a href="#Basic-Installation">Basic Installation</a>:           Common installation procedure
<li><a href="#Standard-Targets">Standard Targets</a>:             A list of standard Makefile targets
<li><a href="#Standard-Directory-Variables">Standard Directory Variables</a>:   A list of standard directory variables
<li><a href="#Standard-Configuration-Variables">Standard Configuration Variables</a>:   Using configuration variables
<li><a href="#config_002esite">config.site</a>:                  Using a config.site file
<li><a href="#VPATH-Builds">VPATH Builds</a>:                 Parallel build trees
<li><a href="#Two_002dPart-Install">Two-Part Install</a>:             Installing data and programs separately
<li><a href="#Cross_002dCompilation">Cross-Compilation</a>:            Building for other architectures
<li><a href="#Renaming">Renaming</a>:                     Renaming programs at install time
<li><a href="#DESTDIR">DESTDIR</a>:                      Building binary packages with DESTDIR
<li><a href="#Preparing-Distributions">Preparing Distributions</a>:      Rolling out tarballs
<li><a href="#Dependency-Tracking">Dependency Tracking</a>:          Automatic dependency tracking
<li><a href="#Nested-Packages">Nested Packages</a>:              The GNU Build Systems can be nested

</li></ul>
<p>A Small Hello World

</p>
<ul class="menu">
<li><a href="#Creating-amhello">Creating amhello</a>:             Create <samp><span class="file">amhello-1.0.tar.gz</span></samp> from scratch
<li><a href="#amhello_0027s-configure_002eac-Setup-Explained">amhello's configure.ac Setup Explained</a>
<li><a href="#amhello_0027s-Makefile_002eam-Setup-Explained">amhello's Makefile.am Setup Explained</a>

</li></ul>
<p>General ideas

</p>
<ul class="menu">
<li><a href="#General-Operation">General Operation</a>:            General operation of Automake
<li><a href="#Strictness">Strictness</a>:                   Standards conformance checking
<li><a href="#Uniform">Uniform</a>:                      The Uniform Naming Scheme
<li><a href="#Length-Limitations">Length Limitations</a>:           Staying below the command line length limit
<li><a href="#Canonicalization">Canonicalization</a>:             How derived variables are named
<li><a href="#User-Variables">User Variables</a>:               Variables reserved for the user
<li><a href="#Auxiliary-Programs">Auxiliary Programs</a>:           Programs automake might require

</li></ul>
<p>Some example packages

</p>
<ul class="menu">
<li><a href="#Complete">Complete</a>:                     A simple example, start to finish
<li><a href="#true">true</a>:                         Building true and false

</li></ul>
<p>Scanning <samp><span class="file">configure.ac</span></samp>, using <samp><span class="command">aclocal</span></samp>

</p>
<ul class="menu">
<li><a href="#Requirements">Requirements</a>:                 Configuration requirements
<li><a href="#Optional">Optional</a>:                     Other things Automake recognizes
<li><a href="#aclocal-Invocation">aclocal Invocation</a>:           Auto-generating aclocal.m4
<li><a href="#Macros">Macros</a>:                       Autoconf macros supplied with Automake

</li></ul>
<p>Auto-generating aclocal.m4

</p>
<ul class="menu">
<li><a href="#aclocal-Options">aclocal Options</a>:              Options supported by aclocal
<li><a href="#Macro-Search-Path">Macro Search Path</a>:            How aclocal finds .m4 files
<li><a href="#Extending-aclocal">Extending aclocal</a>:            Writing your own aclocal macros
<li><a href="#Local-Macros">Local Macros</a>:                 Organizing local macros
<li><a href="#Serials">Serials</a>:                      Serial lines in Autoconf macros
<li><a href="#Future-of-aclocal">Future of aclocal</a>:            aclocal's scheduled death

</li></ul>
<p>Autoconf macros supplied with Automake

</p>
<ul class="menu">
<li><a href="#Public-Macros">Public Macros</a>:                Macros that you can use. 
<li><a href="#Obsolete-Macros">Obsolete Macros</a>:              Macros that will soon be removed. 
<li><a href="#Private-Macros">Private Macros</a>:               Macros that you should not use.

</li></ul>
<p>Directories

</p>
<ul class="menu">
<li><a href="#Subdirectories">Subdirectories</a>:               Building subdirectories recursively
<li><a href="#Conditional-Subdirectories">Conditional Subdirectories</a>:   Conditionally not building directories
<li><a href="#Alternative">Alternative</a>:                  Subdirectories without recursion
<li><a href="#Subpackages">Subpackages</a>:                  Nesting packages

</li></ul>
<p>Conditional Subdirectories

</p>
<ul class="menu">
<li><a href="#SUBDIRS-vs-DIST_005fSUBDIRS">SUBDIRS vs DIST_SUBDIRS</a>:      Two sets of directories
<li><a href="#Subdirectories-with-AM_005fCONDITIONAL">Subdirectories with AM_CONDITIONAL</a>:   Specifying conditional subdirectories
<li><a href="#Subdirectories-with-AC_005fSUBST">Subdirectories with AC_SUBST</a>:   Another way for conditional recursion
<li><a href="#Unconfigured-Subdirectories">Unconfigured Subdirectories</a>:   Not even creating a &lsquo;<samp><span class="samp">Makefile</span></samp>&rsquo;

</li></ul>
<p>Building Programs and Libraries

</p>
<ul class="menu">
<li><a href="#A-Program">A Program</a>:                    Building a program
<li><a href="#A-Library">A Library</a>:                    Building a library
<li><a href="#A-Shared-Library">A Shared Library</a>:             Building a Libtool library
<li><a href="#Program-and-Library-Variables">Program and Library Variables</a>:   Variables controlling program and
                                library builds
<li><a href="#Default-_005fSOURCES">Default _SOURCES</a>:             Default source files
<li><a href="#LIBOBJS">LIBOBJS</a>:                      Special handling for LIBOBJS and ALLOCA
<li><a href="#Program-Variables">Program Variables</a>:            Variables used when building a program
<li><a href="#Yacc-and-Lex">Yacc and Lex</a>:                 Yacc and Lex support
<li><a href="#C_002b_002b-Support">C++ Support</a>:                  Compiling C++ sources
<li><a href="#Objective-C-Support">Objective C Support</a>:          Compiling Objective C sources
<li><a href="#Objective-C_002b_002b-Support">Objective C++ Support</a>:        Compiling Objective C++ sources
<li><a href="#Unified-Parallel-C-Support">Unified Parallel C Support</a>:   Compiling Unified Parallel C sources
<li><a href="#Assembly-Support">Assembly Support</a>:             Compiling assembly sources
<li><a href="#Fortran-77-Support">Fortran 77 Support</a>:           Compiling Fortran 77 sources
<li><a href="#Fortran-9x-Support">Fortran 9x Support</a>:           Compiling Fortran 9x sources
<li><a href="#Java-Support-with-gcj">Java Support with gcj</a>:        Compiling Java sources using gcj
<li><a href="#Vala-Support">Vala Support</a>:                 Compiling Vala sources
<li><a href="#Support-for-Other-Languages">Support for Other Languages</a>:   Compiling other languages
<li><a href="#Dependencies">Dependencies</a>:                 Automatic dependency tracking
<li><a href="#EXEEXT">EXEEXT</a>:                       Support for executable extensions

</li></ul>
<p>Building a program

</p>
<ul class="menu">
<li><a href="#Program-Sources">Program Sources</a>:              Defining program sources
<li><a href="#Linking">Linking</a>:                      Linking with libraries or extra objects
<li><a href="#Conditional-Sources">Conditional Sources</a>:          Handling conditional sources
<li><a href="#Conditional-Programs">Conditional Programs</a>:         Building a program conditionally

</li></ul>
<p>Building a Shared Library

</p>
<ul class="menu">
<li><a href="#Libtool-Concept">Libtool Concept</a>:              Introducing Libtool
<li><a href="#Libtool-Libraries">Libtool Libraries</a>:            Declaring Libtool Libraries
<li><a href="#Conditional-Libtool-Libraries">Conditional Libtool Libraries</a>:   Building Libtool Libraries Conditionally
<li><a href="#Conditional-Libtool-Sources">Conditional Libtool Sources</a>:   Choosing Library Sources Conditionally
<li><a href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a>:   Building Convenience Libtool Libraries
<li><a href="#Libtool-Modules">Libtool Modules</a>:              Building Libtool Modules
<li><a href="#Libtool-Flags">Libtool Flags</a>:                Using _LIBADD, _LDFLAGS, and _LIBTOOLFLAGS
<li><a href="#LTLIBOBJS">LTLIBOBJS</a>:                    Using $(LTLIBOBJS) and $(LTALLOCA)
<li><a href="#Libtool-Issues">Libtool Issues</a>:               Common Issues Related to Libtool's Use

</li></ul>
<p>Common Issues Related to Libtool's Use

</p>
<ul class="menu">
<li><a href="#Error-required-file-ltmain_002esh-not-found">Error required file ltmain.sh not found</a>:   The need to run libtoolize
<li><a href="#Objects-created-both-with-libtool-and-without">Objects created both with libtool and without</a>:   Avoid a specific build race

</li></ul>
<p>Fortran 77 Support

</p>
<ul class="menu">
<li><a href="#Preprocessing-Fortran-77">Preprocessing Fortran 77</a>:     Preprocessing Fortran 77 sources
<li><a href="#Compiling-Fortran-77-Files">Compiling Fortran 77 Files</a>:   Compiling Fortran 77 sources
<li><a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a>:   Mixing Fortran 77 With C and C++

</li></ul>
<p>Mixing Fortran 77 With C and C++

</p>
<ul class="menu">
<li><a href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a>:     Automatic linker selection

</li></ul>
<p>Fortran 9x Support

</p>
<ul class="menu">
<li><a href="#Compiling-Fortran-9x-Files">Compiling Fortran 9x Files</a>:   Compiling Fortran 9x sources

</li></ul>
<p>Other Derived Objects

</p>
<ul class="menu">
<li><a href="#Scripts">Scripts</a>:                      Executable scripts
<li><a href="#Headers">Headers</a>:                      Header files
<li><a href="#Data">Data</a>:                         Architecture-independent data files
<li><a href="#Sources">Sources</a>:                      Derived sources

</li></ul>
<p>Built Sources

</p>
<ul class="menu">
<li><a href="#Built-Sources-Example">Built Sources Example</a>:        Several ways to handle built sources.

</li></ul>
<p>Other GNU Tools

</p>
<ul class="menu">
<li><a href="#Emacs-Lisp">Emacs Lisp</a>:                   Emacs Lisp
<li><a href="#gettext">gettext</a>:                      Gettext
<li><a href="#Libtool">Libtool</a>:                      Libtool
<li><a href="#Java">Java</a>:                         Java bytecode compilation (deprecated)
<li><a href="#Python">Python</a>:                       Python

</li></ul>
<p>Building documentation

</p>
<ul class="menu">
<li><a href="#Texinfo">Texinfo</a>:                      Texinfo
<li><a href="#Man-Pages">Man Pages</a>:                    Man pages

</li></ul>
<p>What Gets Installed

</p>
<ul class="menu">
<li><a href="#Basics-of-Installation">Basics of Installation</a>:       What gets installed where
<li><a href="#The-Two-Parts-of-Install">The Two Parts of Install</a>:     Installing data and programs separately
<li><a href="#Extending-Installation">Extending Installation</a>:       Adding your own rules for installation
<li><a href="#Staged-Installs">Staged Installs</a>:              Installation in a temporary location
<li><a href="#Install-Rules-for-the-User">Install Rules for the User</a>:   Useful additional rules

</li></ul>
<p>What Goes in a Distribution

</p>
<ul class="menu">
<li><a href="#Basics-of-Distribution">Basics of Distribution</a>:       Files distributed by default
<li><a href="#Fine_002dgrained-Distribution-Control">Fine-grained Distribution Control</a>:   <code>dist_</code> and <code>nodist_</code> prefixes
<li><a href="#The-dist-Hook">The dist Hook</a>:                A target for last-minute distribution changes
<li><a href="#Checking-the-Distribution">Checking the Distribution</a>:    &lsquo;<samp><span class="samp">make distcheck</span></samp>&rsquo; explained
<li><a href="#The-Types-of-Distributions">The Types of Distributions</a>:   A variety of formats and compression methods

</li></ul>
<p>Support for test suites

</p>
<ul class="menu">
<li><a href="#Generalities-about-Testing">Generalities about Testing</a>:   Generic concepts and terminology about testing
<li><a href="#Simple-Tests">Simple Tests</a>:                 Listing test scripts in <code>TESTS</code>
<li><a href="#Custom-Test-Drivers">Custom Test Drivers</a>:          Writing and using custom test drivers
<li><a href="#Using-the-TAP-test-protocol">Using the TAP test protocol</a>:  Integrating test scripts that use the TAP protocol
<li><a href="#DejaGnu-Tests">DejaGnu Tests</a>:                Interfacing with the <samp><span class="command">dejagnu</span></samp> testing framework
<li><a href="#Install-Tests">Install Tests</a>:                Running tests on installed packages

</li></ul>
<p>Simple Tests

</p>
<ul class="menu">
<li><a href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a>:     Automake-specific concepts and terminology
<li><a href="#Serial-Test-Harness">Serial Test Harness</a>:          Older (and obsolescent) serial test harness
<li><a href="#Parallel-Test-Harness">Parallel Test Harness</a>:        Generic concurrent test harness

</li></ul>
<p>Using the TAP test protocol

</p>
<ul class="menu">
<li><a href="#Introduction-to-TAP">Introduction to TAP</a>
<li><a href="#Use-TAP-with-the-Automake-test-harness">Use TAP with the Automake test harness</a>
<li><a href="#Incompatibilities-with-other-TAP-parsers-and-drivers">Incompatibilities with other TAP parsers and drivers</a>
<li><a href="#Links-and-external-resources-on-TAP">Links and external resources on TAP</a>

</li></ul>
<p>Custom Test Drivers

</p>
<ul class="menu">
<li><a href="#Overview-of-Custom-Test-Drivers-Support">Overview of Custom Test Drivers Support</a>
<li><a href="#Declaring-Custom-Test-Drivers">Declaring Custom Test Drivers</a>
<li><a href="#API-for-Custom-Test-Drivers">API for Custom Test Drivers</a>

</li></ul>
<p>API for Custom Test Drivers

</p>
<ul class="menu">
<li><a href="#Command_002dline-arguments-for-test-drivers">Command-line arguments for test drivers</a>
<li><a href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a>
<li><a href="#Testsuite-progress-output">Testsuite progress output</a>

</li></ul>
<p>Changing Automake's Behavior

</p>
<ul class="menu">
<li><a href="#Options-generalities">Options generalities</a>:         Semantics of Automake option
<li><a href="#List-of-Automake-options">List of Automake options</a>:     A comprehensive list of Automake options

</li></ul>
<p>Miscellaneous Rules

</p>
<ul class="menu">
<li><a href="#Tags">Tags</a>:                         Interfacing to cscope, etags and mkid
<li><a href="#Suffixes">Suffixes</a>:                     Handling new file extensions

</li></ul>
<p>Conditionals

</p>
<ul class="menu">
<li><a href="#Usage-of-Conditionals">Usage of Conditionals</a>:        Declaring conditional content
<li><a href="#Limits-of-Conditionals">Limits of Conditionals</a>:       Enclosing complete statements

</li></ul>
<p>Silencing Make

</p>
<ul class="menu">
<li><a href="#Make-verbosity">Make verbosity</a>:                Make is verbose by default
<li><a href="#Tricks-For-Silencing-Make">Tricks For Silencing Make</a>:     Standard and generic ways to silence make
<li><a href="#Automake-silent_002drules-Option">Automake silent-rules Option</a>:  How Automake can help in silencing make

</li></ul>
<p>When Automake Isn't Enough

</p>
<ul class="menu">
<li><a href="#Extending">Extending</a>:                    Adding new rules or overriding existing ones. 
<li><a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a>:        Integrating Non-Automake <samp><span class="file">Makefile</span></samp>s.

</li></ul>
<p>Frequently Asked Questions about Automake

</p>
<ul class="menu">
<li><a href="#CVS">CVS</a>:                          CVS and generated files
<li><a href="#maintainer_002dmode">maintainer-mode</a>:              missing and AM_MAINTAINER_MODE
<li><a href="#Wildcards">Wildcards</a>:                    Why doesn't Automake support wildcards? 
<li><a href="#Limitations-on-File-Names">Limitations on File Names</a>:    Limitations on source and installed file names
<li><a href="#Errors-with-distclean">Errors with distclean</a>:        Files left in build directory after distclean
<li><a href="#Flag-Variables-Ordering">Flag Variables Ordering</a>:      CFLAGS vs. AM_CFLAGS vs. mumble_CFLAGS
<li><a href="#Renamed-Objects">Renamed Objects</a>:              Why are object files sometimes renamed? 
<li><a href="#Per_002dObject-Flags">Per-Object Flags</a>:             How to simulate per-object flags? 
<li><a href="#Multiple-Outputs">Multiple Outputs</a>:             Writing rules for tools with many output files
<li><a href="#Hard_002dCoded-Install-Paths">Hard-Coded Install Paths</a>:     Installing to hard-coded locations
<li><a href="#Debugging-Make-Rules">Debugging Make Rules</a>:         Strategies when things don't work as expected
<li><a href="#Reporting-Bugs">Reporting Bugs</a>:               Feedback on bugs and feature requests

</li></ul>
<p>Copying This Manual

</p>
<ul class="menu">
<li><a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>:   License for copying this manual

</li></ul>
<p>Indices

</p>
<ul class="menu">
<li><a href="#Macro-Index">Macro Index</a>:                  Index of Autoconf macros
<li><a href="#Variable-Index">Variable Index</a>:               Index of Makefile variables
<li><a href="#General-Index">General Index</a>:                General index

   </ul>

<div class="node">
<a name="Introduction"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Autotools-Introduction">Autotools Introduction</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">1 Introduction</h2>

<p>Automake is a tool for automatically generating <samp><span class="file">Makefile.in</span></samp>s
from files called <samp><span class="file">Makefile.am</span></samp>.  Each <samp><span class="file">Makefile.am</span></samp> is
basically a series of <samp><span class="command">make</span></samp> variable
definitions<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>, with rules being thrown in
occasionally.  The generated <samp><span class="file">Makefile.in</span></samp>s are compliant with
the GNU Makefile standards.

   <p><a name="index-GNU-Makefile-standards-1"></a>
The GNU Makefile Standards Document
(see <a href="standards.html#Makefile-Conventions">Makefile Conventions</a>)
is long, complicated, and subject to change.  The goal of Automake is to
remove the burden of Makefile maintenance from the back of the
individual GNU maintainer (and put it on the back of the Automake
maintainers).

   <p>The typical Automake input file is simply a series of variable definitions. 
Each such file is processed to create a <samp><span class="file">Makefile.in</span></samp>.

   <p><a name="index-Constraints-of-Automake-2"></a><a name="index-Automake-constraints-3"></a>
Automake does constrain a project in certain ways; for instance, it
assumes that the project uses Autoconf (see <a href="autoconf.html#Top">Introduction</a>), and enforces certain restrictions on
the <samp><span class="file">configure.ac</span></samp> contents.

   <p><a name="index-Automake-requirements-4"></a><a name="index-Requirements_002c-Automake-5"></a>
Automake requires <samp><span class="command">perl</span></samp> in order to generate the
<samp><span class="file">Makefile.in</span></samp>s.  However, the distributions created by Automake are
fully GNU standards-compliant, and do not require <samp><span class="command">perl</span></samp> in order
to be built.

   <p><a name="index-Bugs_002c-reporting-6"></a><a name="index-Reporting-bugs-7"></a><a name="index-E_002dmail_002c-bug-reports-8"></a>
For more information on bug reports, See <a href="#Reporting-Bugs">Reporting Bugs</a>.

<div class="node">
<a name="Autotools-Introduction"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Generalities">Generalities</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Introduction">Introduction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">2 An Introduction to the Autotools</h2>

<p>If you are new to Automake, maybe you know that it is part of a set of
tools called <em>The Autotools</em>.  Maybe you've already delved into a
package full of files named <samp><span class="file">configure</span></samp>, <samp><span class="file">configure.ac</span></samp>,
<samp><span class="file">Makefile.in</span></samp>, <samp><span class="file">Makefile.am</span></samp>, <samp><span class="file">aclocal.m4</span></samp>, <small class="dots">...</small>,
some of them claiming to be <em>generated by</em> Autoconf or Automake. 
But the exact purpose of these files and their relations is probably
fuzzy.  The goal of this chapter is to introduce you to this machinery,
to show you how it works and how powerful it is.  If you've never
installed or seen such a package, do not worry: this chapter will walk
you through it.

   <p>If you need some teaching material, more illustrations, or a less
<samp><span class="command">automake</span></samp>-centered continuation, some slides for this
introduction are available in Alexandre Duret-Lutz's
<a href="http://www.lrde.epita.fr/~adl/autotools.html">Autotools Tutorial</a>. 
This chapter is the written version of the first part of his tutorial.

<ul class="menu">
<li><a accesskey="1" href="#GNU-Build-System">GNU Build System</a>:             Introducing the GNU Build System
<li><a accesskey="2" href="#Use-Cases">Use Cases</a>:                    Use Cases for the GNU Build System
<li><a accesskey="3" href="#Why-Autotools">Why Autotools</a>:                How Autotools Help
<li><a accesskey="4" href="#Hello-World">Hello World</a>:                  A Small Hello World Package
</ul>

<div class="node">
<a name="GNU-Build-System"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Use-Cases">Use Cases</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Autotools-Introduction">Autotools Introduction</a>

</div>

<h3 class="section">2.1 Introducing the GNU Build System</h3>

<p><a name="index-GNU-Build-System_002c-introduction-9"></a>
It is a truth universally acknowledged, that as a developer in
possession of a new package, you must be in want of a build system.

   <p>In the Unix world, such a build system is traditionally achieved using
the command <samp><span class="command">make</span></samp> (see <a href="make.html#Top">Overview</a>).  You express the recipe to build your package in a
<samp><span class="file">Makefile</span></samp>.  This file is a set of rules to build the files in
the package.  For instance the program <samp><span class="file">prog</span></samp> may be built by
running the linker on the files <samp><span class="file">main.o</span></samp>, <samp><span class="file">foo.o</span></samp>, and
<samp><span class="file">bar.o</span></samp>; the file <samp><span class="file">main.o</span></samp> may be built by running the
compiler on <samp><span class="file">main.c</span></samp>; etc.  Each time <samp><span class="command">make</span></samp> is run, it
reads <samp><span class="file">Makefile</span></samp>, checks the existence and modification time of
the files mentioned, decides what files need to be built (or rebuilt),
and runs the associated commands.

   <p>When a package needs to be built on a different platform than the one
it was developed on, its <samp><span class="file">Makefile</span></samp> usually needs to be adjusted. 
For instance the compiler may have another name or require more
options.  In 1991, David J. MacKenzie got tired of customizing
<samp><span class="file">Makefile</span></samp> for the 20 platforms he had to deal with.  Instead, he
handcrafted a little shell script called <samp><span class="file">configure</span></samp> to
automatically adjust the <samp><span class="file">Makefile</span></samp> (see <a href="autoconf.html#Genesis">Genesis</a>).  Compiling his package was now
as simple as running <code>./configure &amp;&amp; make</code>.

   <p><a name="index-GNU-Coding-Standards-10"></a>
Today this process has been standardized in the GNU project.  The GNU
Coding Standards (see <a href="standards.html#Managing-Releases">The Release Process</a>) explains how each package of the
GNU project should have a <samp><span class="file">configure</span></samp> script, and the minimal
interface it should have.  The <samp><span class="file">Makefile</span></samp> too should follow some
established conventions.  The result?  A unified build system that
makes all packages almost indistinguishable by the installer.  In its
simplest scenario, all the installer has to do is to unpack the
package, run <code>./configure &amp;&amp; make &amp;&amp; make install</code>, and repeat
with the next package to install.

   <p>We call this build system the <dfn>GNU Build System</dfn>, since it was
grown out of the GNU project.  However it is used by a vast number of
other packages: following any existing convention has its advantages.

   <p><a name="index-Autotools_002c-introduction-11"></a>
The Autotools are tools that will create a GNU Build System for your
package.  Autoconf mostly focuses on <samp><span class="file">configure</span></samp> and Automake on
<samp><span class="file">Makefile</span></samp>s.  It is entirely possible to create a GNU Build
System without the help of these tools.  However it is rather
burdensome and error-prone.  We will discuss this again after some
illustration of the GNU Build System in action.

<div class="node">
<a name="Use-Cases"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Why-Autotools">Why Autotools</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#GNU-Build-System">GNU Build System</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Autotools-Introduction">Autotools Introduction</a>

</div>

<h3 class="section">2.2 Use Cases for the GNU Build System</h3>

<p><a name="index-GNU-Build-System_002c-use-cases-12"></a><a name="index-GNU-Build-System_002c-features-13"></a><a name="index-Features-of-the-GNU-Build-System-14"></a><a name="index-Use-Cases-for-the-GNU-Build-System-15"></a><a name="index-g_t_0040file_007bamhello_002d1_002e0_002etar_002egz_007d_002c-location-16"></a><a name="index-g_t_0040file_007bamhello_002d1_002e0_002etar_002egz_007d_002c-use-cases-17"></a>
In this section we explore several use cases for the GNU Build System. 
You can replay all of these examples on the <samp><span class="file">amhello-1.0.tar.gz</span></samp>
package distributed with Automake.  If Automake is installed on your
system, you should find a copy of this file in
<samp><var>prefix</var><span class="file">/share/doc/automake/amhello-1.0.tar.gz</span></samp>, where
<var>prefix</var> is the installation prefix specified during configuration
(<var>prefix</var> defaults to <samp><span class="file">/usr/local</span></samp>, however if Automake was
installed by some GNU/Linux distribution it most likely has been set
to <samp><span class="file">/usr</span></samp>).  If you do not have a copy of Automake installed,
you can find a copy of this file inside the <samp><span class="file">doc/</span></samp> directory of
the Automake package.

   <p>Some of the following use cases present features that are in fact
extensions to the GNU Build System.  Read: they are not specified by
the GNU Coding Standards, but they are nonetheless part of the build
system created by the Autotools.  To keep things simple, we do not
point out the difference.  Our objective is to show you many of the
features that the build system created by the Autotools will offer to
you.

<ul class="menu">
<li><a accesskey="1" href="#Basic-Installation">Basic Installation</a>:           Common installation procedure
<li><a accesskey="2" href="#Standard-Targets">Standard Targets</a>:             A list of standard Makefile targets
<li><a accesskey="3" href="#Standard-Directory-Variables">Standard Directory Variables</a>:   A list of standard directory variables
<li><a accesskey="4" href="#Standard-Configuration-Variables">Standard Configuration Variables</a>:   Using configuration variables
<li><a accesskey="5" href="#config_002esite">config.site</a>:                  Using a config.site file
<li><a accesskey="6" href="#VPATH-Builds">VPATH Builds</a>:                 Parallel build trees
<li><a accesskey="7" href="#Two_002dPart-Install">Two-Part Install</a>:             Installing data and programs separately
<li><a accesskey="8" href="#Cross_002dCompilation">Cross-Compilation</a>:            Building for other architectures
<li><a accesskey="9" href="#Renaming">Renaming</a>:                     Renaming programs at install time
<li><a href="#DESTDIR">DESTDIR</a>:                      Building binary packages with DESTDIR
<li><a href="#Preparing-Distributions">Preparing Distributions</a>:      Rolling out tarballs
<li><a href="#Dependency-Tracking">Dependency Tracking</a>:          Automatic dependency tracking
<li><a href="#Nested-Packages">Nested Packages</a>:              The GNU Build Systems can be nested
</ul>

<div class="node">
<a name="Basic-Installation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Standard-Targets">Standard Targets</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Use-Cases">Use Cases</a>

</div>

<h4 class="subsection">2.2.1 Basic Installation</h4>

<p><a name="index-Configuration_002c-basics-18"></a><a name="index-Installation_002c-basics-19"></a><a name="index-GNU-Build-System_002c-basics-20"></a>
The most common installation procedure looks as follows.

<pre class="example">     ~ % <kbd>tar zxf amhello-1.0.tar.gz</kbd>
     ~ % <kbd>cd amhello-1.0</kbd>
     ~/amhello-1.0 % <kbd>./configure</kbd>
     ...
     config.status: creating Makefile
     config.status: creating src/Makefile
     ...
     ~/amhello-1.0 % <kbd>make</kbd>
     ...
     ~/amhello-1.0 % <kbd>make check</kbd>
     ...
     ~/amhello-1.0 % <kbd>su</kbd>
     Password:
     /home/adl/amhello-1.0 # <kbd>make install</kbd>
     ...
     /home/adl/amhello-1.0 # <kbd>exit</kbd>
     ~/amhello-1.0 % <kbd>make installcheck</kbd>
     ...
</pre>
   <p><a name="index-Unpacking-21"></a>
The user first unpacks the package.  Here, and in the following
examples, we will use the non-portable <code>tar zxf</code> command for
simplicity.  On a system without GNU <samp><span class="command">tar</span></samp> installed, this
command should read <code>gunzip -c amhello-1.0.tar.gz | tar xf -</code>.

   <p>The user then enters the newly created directory to run the
<samp><span class="file">configure</span></samp> script.  This script probes the system for various
features, and finally creates the <samp><span class="file">Makefile</span></samp>s.  In this toy
example there are only two <samp><span class="file">Makefile</span></samp>s, but in real-world projects,
there may be many more, usually one <samp><span class="file">Makefile</span></samp> per directory.

   <p>It is now possible to run <code>make</code>.  This will construct all the
programs, libraries, and scripts that need to be constructed for the
package.  In our example, this compiles the <samp><span class="file">hello</span></samp> program. 
All files are constructed in place, in the source tree; we will see
later how this can be changed.

   <p><code>make check</code> causes the package's tests to be run.  This step is
not mandatory, but it is often good to make sure the programs that
have been built behave as they should, before you decide to install
them.  Our example does not contain any tests, so running <code>make
check</code> is a no-op.

   <p><a name="index-su_002c-before-_0040code_007bmake-install_007d-22"></a>After everything has been built, and maybe tested, it is time to
install it on the system.  That means copying the programs,
libraries, header files, scripts, and other data files from the
source directory to their final destination on the system.  The
command <code>make install</code> will do that.  However, by default
everything will be installed in subdirectories of <samp><span class="file">/usr/local</span></samp>:
binaries will go into <samp><span class="file">/usr/local/bin</span></samp>, libraries will end up in
<samp><span class="file">/usr/local/lib</span></samp>, etc.  This destination is usually not writable
by any user, so we assume that we have to become root before we can
run <code>make install</code>.  In our example, running <code>make install</code>
will copy the program <samp><span class="file">hello</span></samp> into <samp><span class="file">/usr/local/bin</span></samp>
and <samp><span class="file">README</span></samp> into <samp><span class="file">/usr/local/share/doc/amhello</span></samp>.

   <p>A last and optional step is to run <code>make installcheck</code>.  This
command may run tests on the installed files.  <code>make check</code> tests
the files in the source tree, while <code>make installcheck</code> tests
their installed copies.  The tests run by the latter can be different
from those run by the former.  For instance, there are tests that
cannot be run in the source tree.  Conversely, some packages are set
up so that <code>make installcheck</code> will run the very same tests as
<code>make check</code>, only on different files (non-installed
vs. installed).  It can make a difference, for instance when the
source tree's layout is different from that of the installation. 
Furthermore it may help to diagnose an incomplete installation.

   <p>Presently most packages do not have any <code>installcheck</code> tests
because the existence of <code>installcheck</code> is little known, and its
usefulness is neglected.  Our little toy package is no better: <code>make
installcheck</code> does nothing.

<div class="node">
<a name="Standard-Targets"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Standard-Directory-Variables">Standard Directory Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Basic-Installation">Basic Installation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Use-Cases">Use Cases</a>

</div>

<h4 class="subsection">2.2.2 Standard <samp><span class="file">Makefile</span></samp> Targets</h4>

<p>So far we have come across four ways to run <samp><span class="command">make</span></samp> in the GNU
Build System: <code>make</code>, <code>make check</code>, <code>make install</code>, and
<code>make installcheck</code>.  The words <code>check</code>, <code>install</code>, and
<code>installcheck</code>, passed as arguments to <samp><span class="command">make</span></samp>, are called
<dfn>targets</dfn>.  <code>make</code> is a shorthand for <code>make all</code>,
<code>all</code> being the default target in the GNU Build System.

   <p>Here is a list of the most useful targets that the GNU Coding Standards
specify.

     <dl>
<dt><code>make all</code><dd><a name="index-all-23"></a>Build programs, libraries, documentation, etc. (same as <code>make</code>). 
<br><dt><code>make install</code><dd><a name="index-install-24"></a>Install what needs to be installed, copying the files from the
package's tree to system-wide directories. 
<br><dt><code>make install-strip</code><dd><a name="index-install_002dstrip-25"></a>Same as <code>make install</code>, then strip debugging symbols.  Some
users like to trade space for useful bug reports<small class="enddots">...</small>
<br><dt><code>make uninstall</code><dd><a name="index-uninstall-26"></a>The opposite of <code>make install</code>: erase the installed files. 
(This needs to be run from the same build tree that was installed.) 
<br><dt><code>make clean</code><dd><a name="index-clean-27"></a>Erase from the build tree the files built by <code>make all</code>. 
<br><dt><code>make distclean</code><dd><a name="index-distclean-28"></a>Additionally erase anything <code>./configure</code> created. 
<br><dt><code>make check</code><dd><a name="index-check-29"></a>Run the test suite, if any. 
<br><dt><code>make installcheck</code><dd><a name="index-installcheck-30"></a>Check the installed programs or libraries, if supported. 
<br><dt><code>make dist</code><dd><a name="index-dist-31"></a>Recreate <samp><var>package</var><span class="file">-</span><var>version</var><span class="file">.tar.gz</span></samp> from all the source
files. 
</dl>

<div class="node">
<a name="Standard-Directory-Variables"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Standard-Configuration-Variables">Standard Configuration Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Standard-Targets">Standard Targets</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Use-Cases">Use Cases</a>

</div>

<h4 class="subsection">2.2.3 Standard Directory Variables</h4>

<p><a name="index-directory-variables-32"></a>
The GNU Coding Standards also specify a hierarchy of variables to
denote installation directories.  Some of these are:

   <p><table summary=""><tr align="left"><th valign="top">Directory variable    </th><th valign="top">Default value
<br></th></tr><tr align="left"><td valign="top"><code>prefix</code>              </td><td valign="top"><code>/usr/local</code>
<br></td></tr><tr align="left"><td valign="top">&nbsp;&nbsp;<code>exec_prefix</code><!-- /@w --> </td><td valign="top"><code>${prefix}</code>
<br></td></tr><tr align="left"><td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<code>bindir</code><!-- /@w -->  </td><td valign="top"><code>${exec_prefix}/bin</code>
<br></td></tr><tr align="left"><td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<code>libdir</code><!-- /@w -->  </td><td valign="top"><code>${exec_prefix}/lib</code>
<br></td></tr><tr align="left"><td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<small class="dots">...</small><!-- /@w -->
<br></td></tr><tr align="left"><td valign="top">&nbsp;&nbsp;<code>includedir</code><!-- /@w -->  </td><td valign="top"><code>${prefix}/include</code>
<br></td></tr><tr align="left"><td valign="top">&nbsp;&nbsp;<code>datarootdir</code><!-- /@w --> </td><td valign="top"><code>${prefix}/share</code>
<br></td></tr><tr align="left"><td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<code>datadir</code><!-- /@w --> </td><td valign="top"><code>${datarootdir}</code>
<br></td></tr><tr align="left"><td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<code>mandir</code><!-- /@w -->  </td><td valign="top"><code>${datarootdir}/man</code>
<br></td></tr><tr align="left"><td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<code>infodir</code><!-- /@w --> </td><td valign="top"><code>${datarootdir}/info</code>
<br></td></tr><tr align="left"><td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<code>docdir</code><!-- /@w -->  </td><td valign="top"><code>${datarootdir}/doc/${PACKAGE}</code>
<br></td></tr><tr align="left"><td valign="top">&nbsp;&nbsp;<small class="dots">...</small><!-- /@w -->
   <br></td></tr></table>

<!-- We should provide a complete table somewhere, but not here.  The -->
<!-- complete list of directory variables it too confusing as-is.  It -->
<!-- requires some explanations that are too complicated for this -->
<!-- introduction.  Besides listing directories like localstatedir -->
<!-- would make the explanations in ``Two-Part Install'' harder. -->
   <p>Each of these directories has a role which is often obvious from its
name.  In a package, any installable file will be installed in one of
these directories.  For instance in <code>amhello-1.0</code>, the program
<samp><span class="file">hello</span></samp> is to be installed in <var>bindir</var>, the directory for
binaries.  The default value for this directory is
<samp><span class="file">/usr/local/bin</span></samp>, but the user can supply a different value when
calling <samp><span class="command">configure</span></samp>.  Also the file <samp><span class="file">README</span></samp> will be
installed into <var>docdir</var>, which defaults to
<samp><span class="file">/usr/local/share/doc/amhello</span></samp>.

   <p><a name="index-g_t_002d_002dprefix-33"></a>
As a user, if you wish to install a package on your own account, you
could proceed as follows:

<pre class="example">     ~/amhello-1.0 % <kbd>./configure --prefix ~/usr</kbd>
     ...
     ~/amhello-1.0 % <kbd>make</kbd>
     ...
     ~/amhello-1.0 % <kbd>make install</kbd>
     ...
</pre>
   <p>This would install <samp><span class="file">~/usr/bin/hello</span></samp> and
<samp><span class="file">~/usr/share/doc/amhello/README</span></samp>.

   <p>The list of all such directory options is shown by
<code>./configure --help</code>.

<div class="node">
<a name="Standard-Configuration-Variables"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#config_002esite">config.site</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Standard-Directory-Variables">Standard Directory Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Use-Cases">Use Cases</a>

</div>

<h4 class="subsection">2.2.4 Standard Configuration Variables</h4>

<p><a name="index-configuration-variables_002c-overriding-34"></a>
The GNU Coding Standards also define a set of standard configuration
variables used during the build.  Here are some:

     <dl>
<dt><code>CC</code><dd>C compiler command
<br><dt><code>CFLAGS</code><dd>C compiler flags
<br><dt><code>CXX</code><dd>C++ compiler command
<br><dt><code>CXXFLAGS</code><dd>C++ compiler flags
<br><dt><code>LDFLAGS</code><dd>linker flags
<br><dt><code>CPPFLAGS</code><dd>C/C++ preprocessor flags
<br><dt><small class="dots">...</small><dd></dl>

   <p><samp><span class="command">configure</span></samp> usually does a good job at setting appropriate
values for these variables, but there are cases where you may want to
override them.  For instance you may have several versions of a
compiler installed and would like to use another one, you may have
header files installed outside the default search path of the
compiler, or even libraries out of the way of the linker.

   <p>Here is how one would call <samp><span class="command">configure</span></samp> to force it to use
<samp><span class="command">gcc-3</span></samp> as C compiler, use header files from
<samp><span class="file">~/usr/include</span></samp> when compiling, and libraries from
<samp><span class="file">~/usr/lib</span></samp> when linking.

<pre class="example">     ~/amhello-1.0 % <kbd>./configure --prefix ~/usr CC=gcc-3 \
     CPPFLAGS=-I$HOME/usr/include LDFLAGS=-L$HOME/usr/lib</kbd>
</pre>
   <p>Again, a full list of these variables appears in the output of
<code>./configure --help</code>.

<div class="node">
<a name="config.site"></a>
<a name="config_002esite"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#VPATH-Builds">VPATH Builds</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Standard-Configuration-Variables">Standard Configuration Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Use-Cases">Use Cases</a>

</div>

<h4 class="subsection">2.2.5 Overriding Default Configuration Setting with <samp><span class="file">config.site</span></samp></h4>

<p><a name="index-g_t_0040file_007bconfig_002esite_007d-example-35"></a>
When installing several packages using the same setup, it can be
convenient to create a file to capture common settings. 
If a file named <samp><var>prefix</var><span class="file">/share/config.site</span></samp> exists,
<samp><span class="command">configure</span></samp> will source it at the beginning of its execution.

   <p>Recall the command from the previous section:

<pre class="example">     ~/amhello-1.0 % <kbd>./configure --prefix ~/usr CC=gcc-3 \
     CPPFLAGS=-I$HOME/usr/include LDFLAGS=-L$HOME/usr/lib</kbd>
</pre>
   <p>Assuming we are installing many package in <samp><span class="file">~/usr</span></samp>, and will
always want to use these definitions of <code>CC</code>, <code>CPPFLAGS</code>, and
<code>LDFLAGS</code>, we can automate this by creating the following
<samp><span class="file">~/usr/share/config.site</span></samp> file:

<pre class="example">     test -z "$CC" &amp;&amp; CC=gcc-3
     test -z "$CPPFLAGS" &amp;&amp; CPPFLAGS=-I$HOME/usr/include
     test -z "$LDFLAGS" &amp;&amp; LDFLAGS=-L$HOME/usr/lib
</pre>
   <p>Now, any time a <samp><span class="file">configure</span></samp> script is using the <samp><span class="file">~/usr</span></samp>
prefix, it will execute the above <samp><span class="file">config.site</span></samp> and define
these three variables.

<pre class="example">     ~/amhello-1.0 % <kbd>./configure --prefix ~/usr</kbd>
     configure: loading site script /home/adl/usr/share/config.site
     ...
</pre>
   <p>See <a href="autoconf.html#Site-Defaults">Setting Site Defaults</a>, for more information about this feature.

<div class="node">
<a name="VPATH-Builds"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Two_002dPart-Install">Two-Part Install</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#config_002esite">config.site</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Use-Cases">Use Cases</a>

</div>

<h4 class="subsection">2.2.6 Parallel Build Trees (a.k.a. VPATH Builds)</h4>

<p><a name="index-Parallel-build-trees-36"></a><a name="index-VPATH-builds-37"></a><a name="index-source-tree-and-build-tree-38"></a><a name="index-build-tree-and-source-tree-39"></a><a name="index-trees_002c-source-vs_002e_0040_003a-build-40"></a>
The GNU Build System distinguishes two trees: the source tree, and
the build tree.

   <p>The source tree is rooted in the directory containing
<samp><span class="file">configure</span></samp>.  It contains all the sources files (those that are
distributed), and may be arranged using several subdirectories.

   <p>The build tree is rooted in the directory in which <samp><span class="file">configure</span></samp>
was run, and is populated with all object files, programs, libraries,
and other derived files built from the sources (and hence not
distributed).  The build tree usually has the same subdirectory layout
as the source tree; its subdirectories are created automatically by
the build system.

   <p>If <samp><span class="file">configure</span></samp> is executed in its own directory, the source and
build trees are combined: derived files are constructed in the same
directories as their sources.  This was the case in our first
installation example (see <a href="#Basic-Installation">Basic Installation</a>).

   <p>A common request from users is that they want to confine all derived
files to a single directory, to keep their source directories
uncluttered.  Here is how we could run <samp><span class="file">configure</span></samp> to build
everything in a subdirectory called <samp><span class="file">build/</span></samp>.

<pre class="example">     ~ % <kbd>tar zxf ~/amhello-1.0.tar.gz</kbd>
     ~ % <kbd>cd amhello-1.0</kbd>
     ~/amhello-1.0 % <kbd>mkdir build &amp;&amp; cd build</kbd>
     ~/amhello-1.0/build % <kbd>../configure</kbd>
     ...
     ~/amhello-1.0/build % <kbd>make</kbd>
     ...
</pre>
   <p>These setups, where source and build trees are different, are often
called <dfn>parallel builds</dfn> or <dfn>VPATH builds</dfn>.  The expression
<em>parallel build</em> is misleading: the word <em>parallel</em> is a
reference to the way the build tree shadows the source tree, it is not
about some concurrency in the way build commands are run.  For this
reason we refer to such setups using the name <em>VPATH builds</em> in
the following.  <em>VPATH</em> is the name of the <samp><span class="command">make</span></samp> feature
used by the <samp><span class="file">Makefile</span></samp>s to allow these builds (see <a href="make.html#General-Search"><code>VPATH</code> Search Path for All Prerequisites</a>).

   <p><a name="index-multiple-configurations_002c-example-41"></a><a name="index-debug-build_002c-example-42"></a><a name="index-optimized-build_002c-example-43"></a>
VPATH builds have other interesting uses.  One is to build the same
sources with multiple configurations.  For instance:

<!-- Keep in sync with amhello-cflags.sh -->
<pre class="example">     ~ % <kbd>tar zxf ~/amhello-1.0.tar.gz</kbd>
     ~ % <kbd>cd amhello-1.0</kbd>
     ~/amhello-1.0 % <kbd>mkdir debug optim &amp;&amp; cd debug</kbd>
     ~/amhello-1.0/debug % <kbd>../configure CFLAGS='-g -O0'</kbd>
     ...
     ~/amhello-1.0/debug % <kbd>make</kbd>
     ...
     ~/amhello-1.0/debug % cd ../optim
     ~/amhello-1.0/optim % <kbd>../configure CFLAGS='-O3 -fomit-frame-pointer'</kbd>
     ...
     ~/amhello-1.0/optim % <kbd>make</kbd>
     ...
</pre>
   <p>With network file systems, a similar approach can be used to build the
same sources on different machines.  For instance, suppose that the
sources are installed on a directory shared by two hosts: <code>HOST1</code>
and <code>HOST2</code>, which may be different platforms.

<pre class="example">     ~ % <kbd>cd /nfs/src</kbd>
     /nfs/src % <kbd>tar zxf ~/amhello-1.0.tar.gz</kbd>
</pre>
   <p>On the first host, you could create a local build directory:
<pre class="example">     [HOST1] ~ % <kbd>mkdir /tmp/amh &amp;&amp; cd /tmp/amh</kbd>
     [HOST1] /tmp/amh % <kbd>/nfs/src/amhello-1.0/configure</kbd>
     ...
     [HOST1] /tmp/amh % <kbd>make &amp;&amp; sudo make install</kbd>
     ...
</pre>
   <p class="noindent">(Here we assume that the installer has configured <samp><span class="command">sudo</span></samp> so it
can execute <code>make install</code> with root privileges; it is more convenient
than using <samp><span class="command">su</span></samp> like in <a href="#Basic-Installation">Basic Installation</a>).

   <p>On the second host, you would do exactly the same, possibly at
the same time:
<pre class="example">     [HOST2] ~ % <kbd>mkdir /tmp/amh &amp;&amp; cd /tmp/amh</kbd>
     [HOST2] /tmp/amh % <kbd>/nfs/src/amhello-1.0/configure</kbd>
     ...
     [HOST2] /tmp/amh % <kbd>make &amp;&amp; sudo make install</kbd>
     ...
</pre>
   <p><a name="index-read_002donly-source-tree-44"></a><a name="index-source-tree_002c-read_002donly-45"></a>
In this scenario, nothing forbids the <samp><span class="file">/nfs/src/amhello-1.0</span></samp>
directory from being read-only.  In fact VPATH builds are also a means
of building packages from a read-only medium such as a CD-ROM.  (The
FSF used to sell CD-ROM with unpacked source code, before the GNU
project grew so big.)

<div class="node">
<a name="Two-Part-Install"></a>
<a name="Two_002dPart-Install"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Cross_002dCompilation">Cross-Compilation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#VPATH-Builds">VPATH Builds</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Use-Cases">Use Cases</a>

</div>

<h4 class="subsection">2.2.7 Two-Part Installation</h4>

<p>In our last example (see <a href="#VPATH-Builds">VPATH Builds</a>), a source tree was shared
by two hosts, but compilation and installation were done separately on
each host.

   <p>The GNU Build System also supports networked setups where part of the
installed files should be shared amongst multiple hosts.  It does so
by distinguishing architecture-dependent files from
architecture-independent files, and providing two <samp><span class="file">Makefile</span></samp>
targets to install each of these classes of files.

   <p><a name="index-install_002dexec-46"></a><a name="index-install_002ddata-47"></a>
These targets are <code>install-exec</code> for architecture-dependent files
and <code>install-data</code> for architecture-independent files. 
The command we used up to now, <code>make install</code>, can be thought of
as a shorthand for <code>make install-exec install-data</code>.

   <p>From the GNU Build System point of view, the distinction between
architecture-dependent files and architecture-independent files is
based exclusively on the directory variable used to specify their
installation destination.  In the list of directory variables we
provided earlier (see <a href="#Standard-Directory-Variables">Standard Directory Variables</a>), all the
variables based on <var>exec-prefix</var> designate architecture-dependent
directories whose files will be installed by <code>make install-exec</code>. 
The others designate architecture-independent directories and will
serve files installed by <code>make install-data</code>.  See <a href="#The-Two-Parts-of-Install">The Two Parts of Install</a>, for more details.

   <p>Here is how we could revisit our two-host installation example,
assuming that (1) we want to install the package directly in
<samp><span class="file">/usr</span></samp>, and (2) the directory <samp><span class="file">/usr/share</span></samp> is shared by the
two hosts.

   <p>On the first host we would run
<pre class="example">     [HOST1] ~ % <kbd>mkdir /tmp/amh &amp;&amp; cd /tmp/amh</kbd>
     [HOST1] /tmp/amh % <kbd>/nfs/src/amhello-1.0/configure --prefix /usr</kbd>
     ...
     [HOST1] /tmp/amh % <kbd>make &amp;&amp; sudo make install</kbd>
     ...
</pre>
   <p>On the second host, however, we need only install the
architecture-specific files.
<pre class="example">     [HOST2] ~ % <kbd>mkdir /tmp/amh &amp;&amp; cd /tmp/amh</kbd>
     [HOST2] /tmp/amh % <kbd>/nfs/src/amhello-1.0/configure --prefix /usr</kbd>
     ...
     [HOST2] /tmp/amh % <kbd>make &amp;&amp; sudo make install-exec</kbd>
     ...
</pre>
   <p>In packages that have installation checks, it would make sense to run
<code>make installcheck</code> (see <a href="#Basic-Installation">Basic Installation</a>) to verify that
the package works correctly despite the apparent partial installation.

<div class="node">
<a name="Cross-Compilation"></a>
<a name="Cross_002dCompilation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Renaming">Renaming</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Two_002dPart-Install">Two-Part Install</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Use-Cases">Use Cases</a>

</div>

<h4 class="subsection">2.2.8 Cross-Compilation</h4>

<p><a name="index-cross_002dcompilation-48"></a>
To <dfn>cross-compile</dfn> is to build on one platform a binary that will
run on another platform.  When speaking of cross-compilation, it is
important to distinguish between the <dfn>build platform</dfn> on which
the compilation is performed, and the <dfn>host platform</dfn> on which the
resulting executable is expected to run.  The following
<samp><span class="command">configure</span></samp> options are used to specify each of them:

     <dl>
<dt><samp><span class="option">--build=</span><var>build</var></samp><dd><a name="index-g_t_002d_002dbuild_003d_0040var_007bbuild_007d-49"></a>The system on which the package is built. 
<br><dt><samp><span class="option">--host=</span><var>host</var></samp><dd><a name="index-g_t_002d_002dhost_003d_0040var_007bhost_007d-50"></a>The system where built programs and libraries will run. 
</dl>

   <p>When the <samp><span class="option">--host</span></samp> is used, <samp><span class="command">configure</span></samp> will search for
the cross-compiling suite for this platform.  Cross-compilation tools
commonly have their target architecture as prefix of their name.  For
instance my cross-compiler for MinGW32 has its binaries called
<code>i586-mingw32msvc-gcc</code>, <code>i586-mingw32msvc-ld</code>,
<code>i586-mingw32msvc-as</code>, etc.

   <p><a name="index-MinGW-cross_002dcompilation-example-51"></a><a name="index-cross_002dcompilation-example-52"></a>
Here is how we could build <code>amhello-1.0</code> for
<code>i586-mingw32msvc</code> on a GNU/Linux PC.

<!-- Keep in sync with amhello-cross-compile.sh -->
<pre class="smallexample">     ~/amhello-1.0 % <kbd>./configure --build i686-pc-linux-gnu --host i586-mingw32msvc</kbd>
     checking for a BSD-compatible install... /usr/bin/install -c
     checking whether build environment is sane... yes
     checking for gawk... gawk
     checking whether make sets $(MAKE)... yes
     checking for i586-mingw32msvc-strip... i586-mingw32msvc-strip
     checking for i586-mingw32msvc-gcc... i586-mingw32msvc-gcc
     checking for C compiler default output file name... a.exe
     checking whether the C compiler works... yes
     checking whether we are cross compiling... yes
     checking for suffix of executables... .exe
     checking for suffix of object files... o
     checking whether we are using the GNU C compiler... yes
     checking whether i586-mingw32msvc-gcc accepts -g... yes
     checking for i586-mingw32msvc-gcc option to accept ANSI C...
     ...
     ~/amhello-1.0 % <kbd>make</kbd>
     ...
     ~/amhello-1.0 % <kbd>cd src; file hello.exe</kbd>
     hello.exe: MS Windows PE 32-bit Intel 80386 console executable not relocatable
</pre>
   <p>The <samp><span class="option">--host</span></samp> and <samp><span class="option">--build</span></samp> options are usually all we
need for cross-compiling.  The only exception is if the package being
built is itself a cross-compiler: we need a third option to specify
its target architecture.

     <dl>
<dt><samp><span class="option">--target=</span><var>target</var></samp><dd><a name="index-g_t_002d_002dtarget_003d_0040var_007btarget_007d-53"></a>When building compiler tools: the system for which the tools will
create output. 
</dl>

   <p>For instance when installing GCC, the GNU Compiler Collection, we can
use <samp><span class="option">--target=</span><var>target</var></samp> to specify that we want to build
GCC as a cross-compiler for <var>target</var>.  Mixing <samp><span class="option">--build</span></samp> and
<samp><span class="option">--target</span></samp>, we can actually cross-compile a cross-compiler;
such a three-way cross-compilation is known as a <dfn>Canadian cross</dfn>.

   <p>See <a href="autoconf.html#Specifying-Names">Specifying the System Type</a>, for more information about these <samp><span class="command">configure</span></samp>
options.

<div class="node">
<a name="Renaming"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#DESTDIR">DESTDIR</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Cross_002dCompilation">Cross-Compilation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Use-Cases">Use Cases</a>

</div>

<h4 class="subsection">2.2.9 Renaming Programs at Install Time</h4>

<p><a name="index-Renaming-programs-54"></a><a name="index-Transforming-program-names-55"></a><a name="index-Programs_002c-renaming-during-installation-56"></a>
The GNU Build System provides means to automatically rename
executables and manpages before they are installed (see <a href="#Man-Pages">Man Pages</a>). 
This is especially convenient
when installing a GNU package on a system that already has a
proprietary implementation you do not want to overwrite.  For instance,
you may want to install GNU <samp><span class="command">tar</span></samp> as <samp><span class="command">gtar</span></samp> so you can
distinguish it from your vendor's <samp><span class="command">tar</span></samp>.

   <p>This can be done using one of these three <samp><span class="command">configure</span></samp> options.

     <dl>
<dt><samp><span class="option">--program-prefix=</span><var>prefix</var></samp><dd><a name="index-g_t_002d_002dprogram_002dprefix_003d_0040var_007bprefix_007d-57"></a>Prepend <var>prefix</var> to installed program names. 
<br><dt><samp><span class="option">--program-suffix=</span><var>suffix</var></samp><dd><a name="index-g_t_002d_002dprogram_002dsuffix_003d_0040var_007bsuffix_007d-58"></a>Append <var>suffix</var> to installed program names. 
<br><dt><samp><span class="option">--program-transform-name=</span><var>program</var></samp><dd><a name="index-g_t_002d_002dprogram_002dtransform_002dname_003d_0040var_007bprogram_007d-59"></a>Run <code>sed </code><var>program</var> on installed program names. 
</dl>

   <p>The following commands would install <samp><span class="file">hello</span></samp>
as <samp><span class="file">/usr/local/bin/test-hello</span></samp>, for instance.

<pre class="example">     ~/amhello-1.0 % <kbd>./configure --program-prefix test-</kbd>
     ...
     ~/amhello-1.0 % <kbd>make</kbd>
     ...
     ~/amhello-1.0 % <kbd>sudo make install</kbd>
     ...
</pre>
   <div class="node">
<a name="DESTDIR"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Preparing-Distributions">Preparing Distributions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Renaming">Renaming</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Use-Cases">Use Cases</a>

</div>

<h4 class="subsection">2.2.10 Building Binary Packages Using DESTDIR</h4>

<p><a name="index-DESTDIR-60"></a>
The GNU Build System's <code>make install</code> and <code>make uninstall</code>
interface does not exactly fit the needs of a system administrator
who has to deploy and upgrade packages on lots of hosts.  In other
words, the GNU Build System does not replace a package manager.

   <p>Such package managers usually need to know which files have been
installed by a package, so a mere <code>make install</code> is
inappropriate.

   <p><a name="index-Staged-installation-61"></a>
The <code>DESTDIR</code> variable can be used to perform a staged
installation.  The package should be configured as if it was going to
be installed in its final location (e.g., <code>--prefix /usr</code>), but
when running <code>make install</code>, the <code>DESTDIR</code> should be set to
the absolute name of a directory into which the installation will be
diverted.  From this directory it is easy to review which files are
being installed where, and finally copy them to their final location
by some means.

   <p><a name="index-Binary-package-62"></a>
For instance here is how we could create a binary package containing a
snapshot of all the files to be installed.

<!-- Keep in sync with amhello-binpkg.sh -->
<pre class="example">     ~/amhello-1.0 % <kbd>./configure --prefix /usr</kbd>
     ...
     ~/amhello-1.0 % <kbd>make</kbd>
     ...
     ~/amhello-1.0 % <kbd>make DESTDIR=$HOME/inst install</kbd>
     ...
     ~/amhello-1.0 % <kbd>cd ~/inst</kbd>
     ~/inst % <kbd>find . -type f -print &gt; ../files.lst</kbd>
     ~/inst % <kbd>tar zcvf ~/amhello-1.0-i686.tar.gz `cat ../files.lst`</kbd>
     ./usr/bin/hello
     ./usr/share/doc/amhello/README
</pre>
   <p>After this example, <code>amhello-1.0-i686.tar.gz</code> is ready to be
uncompressed in <samp><span class="file">/</span></samp> on many hosts.  (Using <code>`cat ../files.lst`</code>
instead of &lsquo;<samp><span class="samp">.</span></samp>&rsquo; as argument for <samp><span class="command">tar</span></samp> avoids entries for
each subdirectory in the archive: we would not like <samp><span class="command">tar</span></samp> to
restore the modification time of <samp><span class="file">/</span></samp>, <samp><span class="file">/usr/</span></samp>, etc.)

   <p>Note that when building packages for several architectures, it might
be convenient to use <code>make install-data</code> and <code>make
install-exec</code> (see <a href="#Two_002dPart-Install">Two-Part Install</a>) to gather
architecture-independent files in a single package.

   <p>See <a href="#Install">Install</a>, for more information.

<!-- We should document PRE_INSTALL/POST_INSTALL/NORMAL_INSTALL and their -->
<!-- UNINSTALL counterparts. -->
<div class="node">
<a name="Preparing-Distributions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Dependency-Tracking">Dependency Tracking</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#DESTDIR">DESTDIR</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Use-Cases">Use Cases</a>

</div>

<h4 class="subsection">2.2.11 Preparing Distributions</h4>

<p><a name="index-Preparing-distributions-63"></a><a name="index-Packages_002c-preparation-64"></a><a name="index-Distributions_002c-preparation-65"></a>
We have already mentioned <code>make dist</code>.  This target collects all
your source files and the necessary parts of the build system to
create a tarball named <samp><var>package</var><span class="file">-</span><var>version</var><span class="file">.tar.gz</span></samp>.

   <p><a name="index-g_t_0040code_007bdistcheck_007d-better-than-_0040code_007bdist_007d-66"></a>
Another, more useful command is <code>make distcheck</code>.  The
<code>distcheck</code> target constructs
<samp><var>package</var><span class="file">-</span><var>version</var><span class="file">.tar.gz</span></samp> just as well as <code>dist</code>,
but it additionally ensures most of the use cases presented so far
work:

     <ul>
<li>It attempts a full compilation of the package (see <a href="#Basic-Installation">Basic Installation</a>), unpacking the newly constructed tarball, running
<code>make</code>, <code>make check</code>, <code>make install</code>, as well as
<code>make installcheck</code>, and even <code>make dist</code>,
<li>it tests VPATH builds with read-only source tree (see <a href="#VPATH-Builds">VPATH Builds</a>),
<li>it makes sure <code>make clean</code>, <code>make distclean</code>, and <code>make
uninstall</code> do not omit any file (see <a href="#Standard-Targets">Standard Targets</a>),
<li>and it checks that <code>DESTDIR</code> installations work (see <a href="#DESTDIR">DESTDIR</a>). 
</ul>

   <p>All of these actions are performed in a temporary subdirectory, so
that no root privileges are required.

   <p>Releasing a package that fails <code>make distcheck</code> means that one of
the scenarios we presented will not work and some users will be
disappointed.  Therefore it is a good practice to release a package
only after a successful <code>make distcheck</code>.  This of course does
not imply that the package will be flawless, but at least it will
prevent some of the embarrassing errors you may find in packages
released by people who have never heard about <code>distcheck</code> (like
<code>DESTDIR</code> not working because of a typo, or a distributed file
being erased by <code>make clean</code>, or even <code>VPATH</code> builds not
working).

   <p>See <a href="#Creating-amhello">Creating amhello</a>, to recreate <samp><span class="file">amhello-1.0.tar.gz</span></samp> using
<code>make distcheck</code>.  See <a href="#Checking-the-Distribution">Checking the Distribution</a>, for more
information about <code>distcheck</code>.

<div class="node">
<a name="Dependency-Tracking"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Nested-Packages">Nested Packages</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Preparing-Distributions">Preparing Distributions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Use-Cases">Use Cases</a>

</div>

<h4 class="subsection">2.2.12 Automatic Dependency Tracking</h4>

<p><a name="index-Dependency-tracking-67"></a>
Dependency tracking is performed as a side-effect of compilation. 
Each time the build system compiles a source file, it computes its
list of dependencies (in C these are the header files included by the
source being compiled).  Later, any time <samp><span class="command">make</span></samp> is run and a
dependency appears to have changed, the dependent files will be
rebuilt.

   <p>Automake generates code for automatic dependency tracking by default,
unless the developer chooses to override it; for more information,
see <a href="#Dependencies">Dependencies</a>.

   <p>When <samp><span class="command">configure</span></samp> is executed, you can see it probing each
compiler for the dependency mechanism it supports (several mechanisms
can be used):

<pre class="example">     ~/amhello-1.0 % <kbd>./configure --prefix /usr</kbd>
     ...
     checking dependency style of gcc... gcc3
     ...
</pre>
   <p>Because dependencies are only computed as a side-effect of the
compilation, no dependency information exists the first time a package
is built.  This is OK because all the files need to be built anyway:
<code>make</code> does not have to decide which files need to be rebuilt. 
In fact, dependency tracking is completely useless for one-time builds
and there is a <samp><span class="command">configure</span></samp> option to disable this:

     <dl>
<dt><samp><span class="option">--disable-dependency-tracking</span></samp><dd><a name="index-g_t_002d_002ddisable_002ddependency_002dtracking-68"></a>Speed up one-time builds. 
</dl>

   <p>Some compilers do not offer any practical way to derive the list of
dependencies as a side-effect of the compilation, requiring a separate
run (maybe of another tool) to compute these dependencies.  The
performance penalty implied by these methods is important enough to
disable them by default.  The option <samp><span class="option">--enable-dependency-tracking</span></samp>
must be passed to <samp><span class="command">configure</span></samp> to activate them.

     <dl>
<dt><samp><span class="option">--enable-dependency-tracking</span></samp><dd><a name="index-g_t_002d_002denable_002ddependency_002dtracking-69"></a>Do not reject slow dependency extractors. 
</dl>

   <p>See <a href="automake-history.html#Dependency-Tracking-Evolution">Dependency Tracking Evolution</a>, for some discussion about
the different dependency tracking schemes used by Automake over the years.

<div class="node">
<a name="Nested-Packages"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Dependency-Tracking">Dependency Tracking</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Use-Cases">Use Cases</a>

</div>

<h4 class="subsection">2.2.13 Nested Packages</h4>

<p><a name="index-Nested-packages-70"></a><a name="index-Packages_002c-nested-71"></a><a name="index-Subpackages-72"></a>
Although nesting packages isn't something we would recommend to
someone who is discovering the Autotools, it is a nice feature worthy
of mention in this small advertising tour.

   <p>Autoconfiscated packages (that means packages whose build system have
been created by Autoconf and friends) can be nested to arbitrary
depth.

   <p>A typical setup is that package A will distribute one of the libraries
it needs in a subdirectory.  This library B is a complete package with
its own GNU Build System.  The <samp><span class="command">configure</span></samp> script of A will
run the <samp><span class="command">configure</span></samp> script of B as part of its execution,
building and installing A will also build and install B.  Generating a
distribution for A will also include B.

   <p>It is possible to gather several packages like this.  GCC is a heavy
user of this feature.  This gives installers a single package to
configure, build and install, while it allows developers to work on
subpackages independently.

   <p>When configuring nested packages, the <samp><span class="command">configure</span></samp> options
given to the top-level <samp><span class="command">configure</span></samp> are passed recursively to
nested <samp><span class="command">configure</span></samp>s.  A package that does not understand an
option will ignore it, assuming it is meaningful to some other
package.

   <p><a name="index-g_t_002d_002dhelp_003drecursive-73"></a>
The command <code>configure --help=recursive</code> can be used to display
the options supported by all the included packages.

   <p>See <a href="#Subpackages">Subpackages</a>, for an example setup.

<div class="node">
<a name="Why-Autotools"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Hello-World">Hello World</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Use-Cases">Use Cases</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Autotools-Introduction">Autotools Introduction</a>

</div>

<h3 class="section">2.3 How Autotools Help</h3>

<p><a name="index-Autotools_002c-purpose-74"></a>
There are several reasons why you may not want to implement the GNU
Build System yourself (read: write a <samp><span class="file">configure</span></samp> script and
<samp><span class="file">Makefile</span></samp>s yourself).

     <ul>
<li>As we have seen, the GNU Build System has a lot of
features (see <a href="#Use-Cases">Use Cases</a>). 
Some users may expect features you have not implemented because
you did not need them. 
<li>Implementing these features portably is difficult and exhausting. 
Think of writing portable shell scripts, and portable
<samp><span class="file">Makefile</span></samp>s, for systems you may not have handy.  See <a href="autoconf.html#Portable-Shell">Portable Shell Programming</a>, to
convince yourself. 
<li>You will have to upgrade your setup to follow changes to the GNU
Coding Standards. 
</ul>

   <p>The GNU Autotools take all this burden off your back and provide:

     <ul>
<li>Tools to create a portable, complete, and self-contained GNU Build
System, from simple instructions. 
<em>Self-contained</em> meaning the resulting build system does not
require the GNU Autotools. 
<li>A central place where fixes and improvements are made:
a bug-fix for a portability issue will benefit every package. 
</ul>

   <p>Yet there also exist reasons why you may want NOT to use the
Autotools<small class="enddots">...</small> For instance you may be already using (or used to)
another incompatible build system.  Autotools will only be useful if
you do accept the concepts of the GNU Build System.  People who have their
own idea of how a build system should work will feel frustrated by the
Autotools.

<div class="node">
<a name="Hello-World"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Why-Autotools">Why Autotools</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Autotools-Introduction">Autotools Introduction</a>

</div>

<h3 class="section">2.4 A Small Hello World</h3>

<p><a name="index-Example-Hello-World-75"></a><a name="index-Hello-World-example-76"></a><a name="index-g_t_0040file_007bamhello_002d1_002e0_002etar_002egz_007d_002c-creation-77"></a>
In this section we recreate the <samp><span class="file">amhello-1.0</span></samp> package from
scratch.  The first subsection shows how to call the Autotools to
instantiate the GNU Build System, while the second explains the
meaning of the <samp><span class="file">configure.ac</span></samp> and <samp><span class="file">Makefile.am</span></samp> files read
by the Autotools.

   <p><a name="amhello-Explained"></a>

<ul class="menu">
<li><a accesskey="1" href="#Creating-amhello">Creating amhello</a>:             Create <samp><span class="file">amhello-1.0.tar.gz</span></samp> from scratch
<li><a accesskey="2" href="#amhello_0027s-configure_002eac-Setup-Explained">amhello's configure.ac Setup Explained</a>
<li><a accesskey="3" href="#amhello_0027s-Makefile_002eam-Setup-Explained">amhello's Makefile.am Setup Explained</a>
</ul>

<div class="node">
<a name="Creating-amhello"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#amhello_0027s-configure_002eac-Setup-Explained">amhello's configure.ac Setup Explained</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Hello-World">Hello World</a>

</div>

<h4 class="subsection">2.4.1 Creating <samp><span class="file">amhello-1.0.tar.gz</span></samp></h4>

<p>Here is how we can recreate <samp><span class="file">amhello-1.0.tar.gz</span></samp> from scratch. 
The package is simple enough so that we will only need to write 5
files.  (You may copy them from the final <samp><span class="file">amhello-1.0.tar.gz</span></samp>
that is distributed with Automake if you do not want to write them.)

   <p>Create the following files in an empty directory.

     <ul>
<li><samp><span class="file">src/main.c</span></samp> is the source file for the <samp><span class="file">hello</span></samp> program.  We
store it in the <samp><span class="file">src/</span></samp> subdirectory, because later, when the package
evolves, it will ease the addition of a <samp><span class="file">man/</span></samp> directory for man
pages, a <samp><span class="file">data/</span></samp> directory for data files, etc.
     <pre class="example">          ~/amhello % <kbd>cat src/main.c</kbd>
          #include &lt;config.h&gt;
          #include &lt;stdio.h&gt;
          
          int
          main (void)
          {
            puts ("Hello World!");
            puts ("This is " PACKAGE_STRING ".");
            return 0;
          }
</pre>
     <li><samp><span class="file">README</span></samp> contains some very limited documentation for our little
package.
     <pre class="example">          ~/amhello % <kbd>cat README</kbd>
          This is a demonstration package for GNU Automake.
          Type 'info Automake' to read the Automake manual.
</pre>
     <li><samp><span class="file">Makefile.am</span></samp> and <samp><span class="file">src/Makefile.am</span></samp> contain Automake
instructions for these two directories.

     <pre class="example">          ~/amhello % <kbd>cat src/Makefile.am</kbd>
          bin_PROGRAMS = hello
          hello_SOURCES = main.c
          ~/amhello % <kbd>cat Makefile.am</kbd>
          SUBDIRS = src
          dist_doc_DATA = README
</pre>
     <li>Finally, <samp><span class="file">configure.ac</span></samp> contains Autoconf instructions to
create the <samp><span class="command">configure</span></samp> script.

     <pre class="example">          ~/amhello % <kbd>cat configure.ac</kbd>
          AC_INIT([amhello], [1.0], [bug-automake@gnu.org])
          AM_INIT_AUTOMAKE([-Wall -Werror foreign])
          AC_PROG_CC
          AC_CONFIG_HEADERS([config.h])
          AC_CONFIG_FILES([
           Makefile
           src/Makefile
          ])
          AC_OUTPUT
</pre>
     </ul>

   <p><a name="index-g_t_0040command_007bautoreconf_007d_002c-example-78"></a>
Once you have these five files, it is time to run the Autotools to
instantiate the build system.  Do this using the <samp><span class="command">autoreconf</span></samp>
command as follows:

<pre class="example">     ~/amhello % <kbd>autoreconf --install</kbd>
     configure.ac: installing './install-sh'
     configure.ac: installing './missing'
     src/Makefile.am: installing './depcomp'
</pre>
   <p>At this point the build system is complete.

   <p>In addition to the three scripts mentioned in its output, you can see
that <samp><span class="command">autoreconf</span></samp> created four other files: <samp><span class="file">configure</span></samp>,
<samp><span class="file">config.h.in</span></samp>, <samp><span class="file">Makefile.in</span></samp>, and <samp><span class="file">src/Makefile.in</span></samp>. 
The latter three files are templates that will be adapted to the
system by <samp><span class="command">configure</span></samp> under the names <samp><span class="file">config.h</span></samp>,
<samp><span class="file">Makefile</span></samp>, and <samp><span class="file">src/Makefile</span></samp>.  Let's do this:

<pre class="example">     ~/amhello % <kbd>./configure</kbd>
     checking for a BSD-compatible install... /usr/bin/install -c
     checking whether build environment is sane... yes
     checking for gawk... no
     checking for mawk... mawk
     checking whether make sets $(MAKE)... yes
     checking for gcc... gcc
     checking for C compiler default output file name... a.out
     checking whether the C compiler works... yes
     checking whether we are cross compiling... no
     checking for suffix of executables...
     checking for suffix of object files... o
     checking whether we are using the GNU C compiler... yes
     checking whether gcc accepts -g... yes
     checking for gcc option to accept ISO C89... none needed
     checking for style of include used by make... GNU
     checking dependency style of gcc... gcc3
     configure: creating ./config.status
     config.status: creating Makefile
     config.status: creating src/Makefile
     config.status: creating config.h
     config.status: executing depfiles commands
</pre>
   <p><a name="index-distcheck-79"></a><a name="index-g_t_0040code_007bdistcheck_007d-example-80"></a>
You can see <samp><span class="file">Makefile</span></samp>, <samp><span class="file">src/Makefile</span></samp>, and <samp><span class="file">config.h</span></samp>
being created at the end after <samp><span class="command">configure</span></samp> has probed the
system.  It is now possible to run all the targets we wish
(see <a href="#Standard-Targets">Standard Targets</a>).  For instance:

<pre class="example">     ~/amhello % <kbd>make</kbd>
     ...
     ~/amhello % <kbd>src/hello</kbd>
     Hello World!
     This is amhello 1.0.
     ~/amhello % <kbd>make distcheck</kbd>
     ...
     =============================================
     amhello-1.0 archives ready for distribution:
     amhello-1.0.tar.gz
     =============================================
</pre>
   <p>Note that running <samp><span class="command">autoreconf</span></samp> is only needed initially when
the GNU Build System does not exist.  When you later change some
instructions in a <samp><span class="file">Makefile.am</span></samp> or <samp><span class="file">configure.ac</span></samp>, the
relevant part of the build system will be regenerated automatically
when you execute <samp><span class="command">make</span></samp>.

   <p><samp><span class="command">autoreconf</span></samp> is a script that calls <samp><span class="command">autoconf</span></samp>,
<samp><span class="command">automake</span></samp>, and a bunch of other commands in the right order. 
If you are beginning with these tools, it is not important to figure
out in which order all of these tools should be invoked and why.  However,
because Autoconf and Automake have separate manuals, the important
point to understand is that <samp><span class="command">autoconf</span></samp> is in charge of
creating <samp><span class="file">configure</span></samp> from <samp><span class="file">configure.ac</span></samp>, while
<samp><span class="command">automake</span></samp> is in charge of creating <samp><span class="file">Makefile.in</span></samp>s from
<samp><span class="file">Makefile.am</span></samp>s and <samp><span class="file">configure.ac</span></samp>.  This should at least
direct you to the right manual when seeking answers.

<div class="node">
<a name="amhello's-configure.ac-Setup-Explained"></a>
<a name="amhello_0027s-configure_002eac-Setup-Explained"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#amhello_0027s-Makefile_002eam-Setup-Explained">amhello's Makefile.am Setup Explained</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Creating-amhello">Creating amhello</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Hello-World">Hello World</a>

</div>

<h4 class="subsection">2.4.2 <code>amhello</code>'s <samp><span class="file">configure.ac</span></samp> Setup Explained</h4>

<p><a name="index-g_t_0040file_007bconfigure_002eac_007d_002c-Hello-World-81"></a>
Let us begin with the contents of <samp><span class="file">configure.ac</span></samp>.

<pre class="example">     AC_INIT([amhello], [1.0], [bug-automake@gnu.org])
     AM_INIT_AUTOMAKE([-Wall -Werror foreign])
     AC_PROG_CC
     AC_CONFIG_HEADERS([config.h])
     AC_CONFIG_FILES([
      Makefile
      src/Makefile
     ])
     AC_OUTPUT
</pre>
   <p>This file is read by both <samp><span class="command">autoconf</span></samp> (to create
<samp><span class="file">configure</span></samp>) and <samp><span class="command">automake</span></samp> (to create the various
<samp><span class="file">Makefile.in</span></samp>s).  It contains a series of M4 macros that will be
expanded as shell code to finally form the <samp><span class="file">configure</span></samp> script. 
We will not elaborate on the syntax of this file, because the Autoconf
manual has a whole section about it (see <a href="autoconf.html#Writing-Autoconf-Input">Writing <samp><span class="file">configure.ac</span></samp></a>).

   <p>The macros prefixed with <code>AC_</code> are Autoconf macros, documented
in the Autoconf manual (see <a href="autoconf.html#Autoconf-Macro-Index">Autoconf Macro Index</a>).  The macros that start with
<code>AM_</code> are Automake macros, documented later in this manual
(see <a href="#Macro-Index">Macro Index</a>).

   <p>The first two lines of <samp><span class="file">configure.ac</span></samp> initialize Autoconf and
Automake.  <code>AC_INIT</code> takes in as parameters the name of the package,
its version number, and a contact address for bug-reports about the
package (this address is output at the end of <code>./configure
--help</code>, for instance).  When adapting this setup to your own package,
by all means please do not blindly copy Automake's address: use the
mailing list of your package, or your own mail address.

   <p><a name="index-g_t_002dWall-82"></a><a name="index-g_t_002dWerror-83"></a><a name="index-foreign-84"></a>
The argument to <code>AM_INIT_AUTOMAKE</code> is a list of options for
<samp><span class="command">automake</span></samp> (see <a href="#Options">Options</a>).  <samp><span class="option">-Wall</span></samp> and
<samp><span class="option">-Werror</span></samp> ask <samp><span class="command">automake</span></samp> to turn on all warnings and
report them as errors.  We are speaking of <strong>Automake</strong> warnings
here, such as dubious instructions in <samp><span class="file">Makefile.am</span></samp>.  This has
absolutely nothing to do with how the compiler will be called, even
though it may support options with similar names.  Using <samp><span class="option">-Wall
-Werror</span></samp> is a safe setting when starting to work on a package: you do
not want to miss any issues.  Later you may decide to relax things a
bit.  The <samp><span class="option">foreign</span></samp> option tells Automake that this package
will not follow the GNU Standards.  GNU packages should always
distribute additional files such as <samp><span class="file">ChangeLog</span></samp>, <samp><span class="file">AUTHORS</span></samp>,
etc.  We do not want <samp><span class="command">automake</span></samp> to complain about these
missing files in our small example.

   <p>The <code>AC_PROG_CC</code> line causes the <samp><span class="command">configure</span></samp> script to
search for a C compiler and define the variable <code>CC</code> with its
name.  The <samp><span class="file">src/Makefile.in</span></samp> file generated by Automake uses the
variable <code>CC</code> to build <samp><span class="file">hello</span></samp>, so when <samp><span class="command">configure</span></samp>
creates <samp><span class="file">src/Makefile</span></samp> from <samp><span class="file">src/Makefile.in</span></samp>, it will define
<code>CC</code> with the value it has found.  If Automake is asked to create
a <samp><span class="file">Makefile.in</span></samp> that uses <code>CC</code> but <samp><span class="file">configure.ac</span></samp> does
not define it, it will suggest you add a call to <code>AC_PROG_CC</code>.

   <p>The <code>AC_CONFIG_HEADERS([config.h])</code> invocation causes the
<samp><span class="command">configure</span></samp> script to create a <samp><span class="file">config.h</span></samp> file gathering
&lsquo;<samp><span class="samp">#define</span></samp>&rsquo;s defined by other macros in <samp><span class="file">configure.ac</span></samp>.  In our
case, the <code>AC_INIT</code> macro already defined a few of them.  Here
is an excerpt of <samp><span class="file">config.h</span></samp> after <samp><span class="command">configure</span></samp> has run:

<pre class="smallexample">     ...
     /* Define to the address where bug reports for this package should be sent. */
     #define PACKAGE_BUGREPORT "bug-automake@gnu.org"
     
     /* Define to the full name and version of this package. */
     #define PACKAGE_STRING "amhello 1.0"
     ...
</pre>
   <p>As you probably noticed, <samp><span class="file">src/main.c</span></samp> includes <samp><span class="file">config.h</span></samp> so
it can use <code>PACKAGE_STRING</code>.  In a real-world project,
<samp><span class="file">config.h</span></samp> can grow really big, with one &lsquo;<samp><span class="samp">#define</span></samp>&rsquo; per
feature probed on the system.

   <p>The <code>AC_CONFIG_FILES</code> macro declares the list of files that
<samp><span class="command">configure</span></samp> should create from their <samp><span class="file">*.in</span></samp> templates. 
Automake also scans this list to find the <samp><span class="file">Makefile.am</span></samp> files it must
process.  (This is important to remember: when adding a new directory
to your project, you should add its <samp><span class="file">Makefile</span></samp> to this list,
otherwise Automake will never process the new <samp><span class="file">Makefile.am</span></samp> you
wrote in that directory.)

   <p>Finally, the <code>AC_OUTPUT</code> line is a closing command that actually
produces the part of the script in charge of creating the files
registered with <code>AC_CONFIG_HEADERS</code> and <code>AC_CONFIG_FILES</code>.

   <p><a name="index-g_t_0040command_007bautoscan_007d-85"></a>
When starting a new project, we suggest you start with such a simple
<samp><span class="file">configure.ac</span></samp>, and gradually add the other tests it requires. 
The command <samp><span class="command">autoscan</span></samp> can also suggest a few of the tests
your package may need (see <a href="autoconf.html#autoscan-Invocation">Using <samp><span class="command">autoscan</span></samp> to Create <samp><span class="file">configure.ac</span></samp></a>).

<div class="node">
<a name="amhello's-Makefile.am-Setup-Explained"></a>
<a name="amhello_0027s-Makefile_002eam-Setup-Explained"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#amhello_0027s-configure_002eac-Setup-Explained">amhello's configure.ac Setup Explained</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Hello-World">Hello World</a>

</div>

<h4 class="subsection">2.4.3 <code>amhello</code>'s <samp><span class="file">Makefile.am</span></samp> Setup Explained</h4>

<p><a name="index-g_t_0040file_007bMakefile_002eam_007d_002c-Hello-World-86"></a>
We now turn to <samp><span class="file">src/Makefile.am</span></samp>.  This file contains
Automake instructions to build and install <samp><span class="file">hello</span></samp>.

<pre class="example">     bin_PROGRAMS = hello
     hello_SOURCES = main.c
</pre>
   <p>A <samp><span class="file">Makefile.am</span></samp> has the same syntax as an ordinary
<samp><span class="file">Makefile</span></samp>.  When <samp><span class="command">automake</span></samp> processes a
<samp><span class="file">Makefile.am</span></samp> it copies the entire file into the output
<samp><span class="file">Makefile.in</span></samp> (that will be later turned into <samp><span class="file">Makefile</span></samp> by
<samp><span class="command">configure</span></samp>) but will react to certain variable definitions
by generating some build rules and other variables. 
Often <samp><span class="file">Makefile.am</span></samp>s contain only a list of variable definitions as
above, but they can also contain other variable and rule definitions that
<samp><span class="command">automake</span></samp> will pass along without interpretation.

   <p>Variables that end with <code>_PROGRAMS</code> are special variables
that list programs that the resulting <samp><span class="file">Makefile</span></samp> should build. 
In Automake speak, this <code>_PROGRAMS</code> suffix is called a
<dfn>primary</dfn>; Automake recognizes other primaries such as
<code>_SCRIPTS</code>, <code>_DATA</code>, <code>_LIBRARIES</code>, etc. corresponding
to different types of files.

   <p>The &lsquo;<samp><span class="samp">bin</span></samp>&rsquo; part of the <code>bin_PROGRAMS</code> tells
<samp><span class="command">automake</span></samp> that the resulting programs should be installed in
<var>bindir</var>.  Recall that the GNU Build System uses a set of variables
to denote destination directories and allow users to customize these
locations (see <a href="#Standard-Directory-Variables">Standard Directory Variables</a>).  Any such directory
variable can be put in front of a primary (omitting the <code>dir</code>
suffix) to tell <samp><span class="command">automake</span></samp> where to install the listed files.

   <p>Programs need to be built from source files, so for each program
<var>prog</var> listed in a <code>_PROGRAMS<!-- /@w --></code> variable,
<samp><span class="command">automake</span></samp> will look for another variable named
<var>prog</var><code>_SOURCES</code> listing its source files.  There may be more
than one source file: they will all be compiled and linked together.

   <p>Automake also knows that source files need to be distributed when
creating a tarball (unlike built programs).  So a side-effect of this
<code>hello_SOURCES</code> declaration is that <samp><span class="file">main.c</span></samp> will be
part of the tarball created by <code>make dist</code>.

   <p>Finally here are some explanations regarding the top-level
<samp><span class="file">Makefile.am</span></samp>.

<pre class="example">     SUBDIRS = src
     dist_doc_DATA = README
</pre>
   <p><code>SUBDIRS</code> is a special variable listing all directories that
<samp><span class="command">make</span></samp> should recurse into before processing the current
directory.  So this line is responsible for <samp><span class="command">make</span></samp> building
<samp><span class="file">src/hello</span></samp> even though we run it from the top-level.  This line
also causes <code>make install</code> to install <samp><span class="file">src/hello</span></samp> before
installing <samp><span class="file">README</span></samp> (not that this order matters).

   <p>The line <code>dist_doc_DATA = README</code> causes <samp><span class="file">README</span></samp> to be
distributed and installed in <var>docdir</var>.  Files listed with the
<code>_DATA</code> primary are not automatically part of the tarball built
with <code>make dist</code>, so we add the <code>dist_</code> prefix so they get
distributed.  However, for <samp><span class="file">README</span></samp> it would not have been
necessary: <samp><span class="command">automake</span></samp> automatically distributes any
<samp><span class="file">README</span></samp> file it encounters (the list of other files
automatically distributed is presented by <code>automake --help</code>). 
The only important effect of this second line is therefore to install
<samp><span class="file">README</span></samp> during <code>make install</code>.

   <p>One thing not covered in this example is accessing the installation
directory values (see <a href="#Standard-Directory-Variables">Standard Directory Variables</a>) from your
program code, that is, converting them into defined macros.  For this,
see <a href="autoconf.html#Defining-Directories">Defining Directories</a>.

<div class="node">
<a name="Generalities"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Examples">Examples</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Autotools-Introduction">Autotools Introduction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">3 General ideas</h2>

<p>The following sections cover a few basic ideas that will help you
understand how Automake works.

<ul class="menu">
<li><a accesskey="1" href="#General-Operation">General Operation</a>:            General operation of Automake
<li><a accesskey="2" href="#Strictness">Strictness</a>:                   Standards conformance checking
<li><a accesskey="3" href="#Uniform">Uniform</a>:                      The Uniform Naming Scheme
<li><a accesskey="4" href="#Length-Limitations">Length Limitations</a>:           Staying below the command line length limit
<li><a accesskey="5" href="#Canonicalization">Canonicalization</a>:             How derived variables are named
<li><a accesskey="6" href="#User-Variables">User Variables</a>:               Variables reserved for the user
<li><a accesskey="7" href="#Auxiliary-Programs">Auxiliary Programs</a>:           Programs automake might require
</ul>

<div class="node">
<a name="General-Operation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Strictness">Strictness</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Generalities">Generalities</a>

</div>

<h3 class="section">3.1 General Operation</h3>

<p>Automake works by reading a <samp><span class="file">Makefile.am</span></samp> and generating a
<samp><span class="file">Makefile.in</span></samp>.  Certain variables and rules defined in the
<samp><span class="file">Makefile.am</span></samp> instruct Automake to generate more specialized code;
for instance, a <code>bin_PROGRAMS</code> variable definition will cause rules
for compiling and linking programs to be generated.

   <p><a name="index-Non_002dstandard-targets-87"></a><a name="index-g_t_0040code_007bgit_002ddist_007d_002c-non_002dstandard-example-88"></a><a name="index-git_002ddist-89"></a>
The variable definitions and rules in the <samp><span class="file">Makefile.am</span></samp> are
copied mostly verbatim into the generated file, with all variable
definitions preceding all rules.  This allows you to add almost
arbitrary code into the generated <samp><span class="file">Makefile.in</span></samp>.  For instance,
the Automake distribution includes a non-standard rule for the
<code>git-dist</code> target, which the Automake maintainer uses to make
distributions from the source control system.

   <p><a name="index-GNU-make-extensions-90"></a>
Note that most GNU make extensions are not recognized by Automake.  Using
such extensions in a <samp><span class="file">Makefile.am</span></samp> will lead to errors or confusing
behavior.

   <p><a name="index-Append-operator-91"></a><a name="index-g_t_002b_003d-92"></a>A special exception is that the GNU make append operator, &lsquo;<samp><span class="samp">+=</span></samp>&rsquo;, is
supported.  This operator appends its right hand argument to the variable
specified on the left.  Automake will translate the operator into
an ordinary &lsquo;<samp><span class="samp">=</span></samp>&rsquo; operator; &lsquo;<samp><span class="samp">+=</span></samp>&rsquo; will thus work with any make program.

   <p>Automake tries to keep comments grouped with any adjoining rules or
variable definitions.

   <p><a name="index-Limitations-of-automake-parser-93"></a><a name="index-Automake-parser_002c-limitations-of-94"></a><a name="index-indentation-in-Makefile_002eam-95"></a>Generally, Automake is not particularly smart in the parsing of unusual
Makefile constructs, so you're advised to avoid fancy constructs or
&ldquo;creative&rdquo; use of whitespaces. 
<!-- Keep this in sync with doc-parsing-buglets-tabs.sh -->
For example, &lt;TAB&gt; characters cannot be used between a target name
and the following &ldquo;<code>:</code>&rdquo; character, and variable assignments
shouldn't be indented with &lt;TAB&gt; characters. 
<!-- Keep this in sync with doc-parsing-buglets-colneq-subst.sh -->
Also, using more complex macro in target names can cause trouble:

<pre class="example">     % <kbd>cat Makefile.am</kbd>
     $(FOO:=x): bar
     % <kbd>automake</kbd>
     Makefile.am:1: bad characters in variable name '$(FOO'
     Makefile.am:1: ':='-style assignments are not portable
</pre>
   <p><a name="index-Make-targets_002c-overriding-96"></a><a name="index-Make-rules_002c-overriding-97"></a><a name="index-Overriding-make-rules-98"></a><a name="index-Overriding-make-targets-99"></a>
A rule defined in <samp><span class="file">Makefile.am</span></samp> generally overrides any such
rule of a similar name that would be automatically generated by
<samp><span class="command">automake</span></samp>.  Although this is a supported feature, it is generally
best to avoid making use of it, as sometimes the generated rules are
very particular.

   <p><a name="index-Variables_002c-overriding-100"></a><a name="index-Overriding-make-variables-101"></a>
Similarly, a variable defined in <samp><span class="file">Makefile.am</span></samp> or
<code>AC_SUBST</code>ed from <samp><span class="file">configure.ac</span></samp> will override any
definition of the variable that <samp><span class="command">automake</span></samp> would ordinarily
create.  This feature is more often useful than the ability to
override a rule.  Be warned that many of the variables generated by
<samp><span class="command">automake</span></samp> are considered to be for internal use only, and their
names might change in future releases.

   <p><a name="index-Recursive-operation-of-Automake-102"></a><a name="index-Automake_002c-recursive-operation-103"></a><a name="index-Example-of-recursive-operation-104"></a>
When examining a variable definition, Automake will recursively examine
variables referenced in the definition.  For example, if Automake is
looking at the content of <code>foo_SOURCES</code> in this snippet

<!-- Keep in sync with interp.sh -->
<pre class="example">     xs = a.c b.c
     foo_SOURCES = c.c $(xs)
</pre>
   <p>it would use the files <samp><span class="file">a.c</span></samp>, <samp><span class="file">b.c</span></samp>, and <samp><span class="file">c.c</span></samp> as the
contents of <code>foo_SOURCES</code>.

   <p><a name="index-g_t_0040code_007b_0023_0023_007d-_0028special-Automake-comment_0029-105"></a><a name="index-Special-Automake-comment-106"></a><a name="index-Comment_002c-special-to-Automake-107"></a>
Automake also allows a form of comment that is <em>not</em> copied into
the output; all lines beginning with &lsquo;<samp><span class="samp">##</span></samp>&rsquo; (leading spaces allowed)
are completely ignored by Automake.

   <p>It is customary to make the first line of <samp><span class="file">Makefile.am</span></samp> read:

   <p><a name="index-Makefile_002eam_002c-first-line-108"></a><a name="index-First-line-of-Makefile_002eam-109"></a>
<pre class="example">     ## Process this file with automake to produce Makefile.in
</pre>
   <!-- FIXME discuss putting a copyright into Makefile.am here?  I would but -->
<!-- I don't know quite what to say. -->
<!-- FIXME document customary ordering of Makefile.am here! -->
<div class="node">
<a name="Strictness"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Uniform">Uniform</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#General-Operation">General Operation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Generalities">Generalities</a>

</div>

<h3 class="section">3.2 Strictness</h3>

<p><a name="index-Non_002dGNU-packages-110"></a>
While Automake is intended to be used by maintainers of GNU packages, it
does make some effort to accommodate those who wish to use it, but do
not want to use all the GNU conventions.

   <p><a name="index-Strictness_002c-defined-111"></a><a name="index-Strictness_002c-_0040option_007bforeign_007d-112"></a><a name="index-g_t_0040option_007bforeign_007d-strictness-113"></a><a name="index-Strictness_002c-_0040option_007bgnu_007d-114"></a><a name="index-g_t_0040option_007bgnu_007d-strictness-115"></a><a name="index-Strictness_002c-_0040option_007bgnits_007d-116"></a><a name="index-g_t_0040option_007bgnits_007d-strictness-117"></a>
To this end, Automake supports three levels of <dfn>strictness</dfn>&mdash;the
strictness indicating how stringently Automake should check standards
conformance.

   <p>The valid strictness levels are:

     <dl>
<dt><samp><span class="option">foreign</span></samp><dd>Automake will check for only those things that are absolutely
required for proper operations.  For instance, whereas GNU standards
dictate the existence of a <samp><span class="file">NEWS</span></samp> file, it will not be required in
this mode.  This strictness will also turn off some warnings by default
(among them, portability warnings). 
The name comes from the fact that Automake is intended to be
used for GNU programs; these relaxed rules are not the standard mode of
operation.

     <br><dt><samp><span class="option">gnu</span></samp><dd>Automake will check&mdash;as much as possible&mdash;for compliance to the GNU
standards for packages.  This is the default.

     <br><dt><samp><span class="option">gnits</span></samp><dd>Automake will check for compliance to the as-yet-unwritten <dfn>Gnits
standards</dfn>.  These are based on the GNU standards, but are even more
detailed.  Unless you are a Gnits standards contributor, it is
recommended that you avoid this option until such time as the Gnits
standard is actually published (which may never happen). 
</dl>

   <p>See <a href="#Gnits">Gnits</a>, for more information on the precise implications of the
strictness level.

   <p>Automake also has a special (and <em>today deprecated</em>) &ldquo;cygnus&rdquo; mode
that is similar to strictness but handled differently.  This mode is
useful for packages that are put into a &ldquo;Cygnus&rdquo; style tree (e.g., older
versions of the GCC and gdb trees).  See <a href="#Cygnus">Cygnus</a>, for more information
on this mode.  Please note that this mode <em>is deprecated and will be
removed in the next major Automake release (1.13)</em>; you must avoid its use
in new packages, and should stop using it in existing packages as well.

<div class="node">
<a name="Uniform"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Length-Limitations">Length Limitations</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Strictness">Strictness</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Generalities">Generalities</a>

</div>

<h3 class="section">3.3 The Uniform Naming Scheme</h3>

<p><a name="index-Uniform-naming-scheme-118"></a>
Automake variables generally follow a <dfn>uniform naming scheme</dfn> that
makes it easy to decide how programs (and other derived objects) are
built, and how they are installed.  This scheme also supports
<samp><span class="command">configure</span></samp> time determination of what should be built.

   <p><a name="index-g_t_0040code_007b_005fPROGRAMS_007d-primary-variable-119"></a><a name="index-g_t_0040code_007bPROGRAMS_007d-primary-variable-120"></a><a name="index-Primary-variable_002c-_0040code_007bPROGRAMS_007d-121"></a><a name="index-Primary-variable_002c-defined-122"></a><a name="index-g_t_005fPROGRAMS-123"></a>
At <samp><span class="command">make</span></samp> time, certain variables are used to determine which
objects are to be built.  The variable names are made of several pieces
that are concatenated together.

   <p>The piece that tells <samp><span class="command">automake</span></samp> what is being built is commonly called
the <dfn>primary</dfn>.  For instance, the primary <code>PROGRAMS</code> holds a
list of programs that are to be compiled and linked. 
<a name="index-PROGRAMS-124"></a>
<a name="index-g_t_0040code_007bpkgdatadir_007d_002c-defined-125"></a><a name="index-g_t_0040code_007bpkgincludedir_007d_002c-defined-126"></a><a name="index-g_t_0040code_007bpkglibdir_007d_002c-defined-127"></a><a name="index-g_t_0040code_007bpkglibexecdir_007d_002c-defined-128"></a>
<a name="index-pkgdatadir-129"></a><a name="index-pkgincludedir-130"></a><a name="index-pkglibdir-131"></a><a name="index-pkglibexecdir-132"></a>
<a name="index-g_t_0040code_007bPACKAGE_007d_002c-directory-133"></a>A different set of names is used to decide where the built objects
should be installed.  These names are prefixes to the primary, and they
indicate which standard directory should be used as the installation
directory.  The standard directory names are given in the GNU standards
(see <a href="standards.html#Directory-Variables">Directory Variables</a>). 
Automake extends this list with <code>pkgdatadir</code>, <code>pkgincludedir</code>,
<code>pkglibdir</code>, and <code>pkglibexecdir</code>; these are the same as the
non-&lsquo;<samp><span class="samp">pkg</span></samp>&rsquo; versions, but with &lsquo;<samp><span class="samp">$(PACKAGE)</span></samp>&rsquo; appended.  For instance,
<code>pkglibdir</code> is defined as &lsquo;<samp><span class="samp">$(libdir)/$(PACKAGE)</span></samp>&rsquo;.

   <p><a name="index-g_t_0040code_007bEXTRA_005f_007d_002c-prepending-134"></a>For each primary, there is one additional variable named by prepending
&lsquo;<samp><span class="samp">EXTRA_</span></samp>&rsquo; to the primary name.  This variable is used to list
objects that may or may not be built, depending on what
<samp><span class="command">configure</span></samp> decides.  This variable is required because Automake
must statically know the entire list of objects that may be built in
order to generate a <samp><span class="file">Makefile.in</span></samp> that will work in all cases.

   <p><a name="index-g_t_0040code_007bEXTRA_005fPROGRAMS_007d_002c-defined-135"></a><a name="index-Example_002c-_0040code_007bEXTRA_005fPROGRAMS_007d-136"></a><a name="index-g_t_0040command_007bcpio_007d-example-137"></a>
For instance, <samp><span class="command">cpio</span></samp> decides at configure time which programs
should be built.  Some of the programs are installed in <code>bindir</code>,
and some are installed in <code>sbindir</code>:

<pre class="example">     EXTRA_PROGRAMS = mt rmt
     bin_PROGRAMS = cpio pax
     sbin_PROGRAMS = $(MORE_PROGRAMS)
</pre>
   <p>Defining a primary without a prefix as a variable, e.g.,
&lsquo;<samp><span class="samp">PROGRAMS</span></samp>&rsquo;, is an error.

   <p>Note that the common &lsquo;<samp><span class="samp">dir</span></samp>&rsquo; suffix is left off when constructing the
variable names; thus one writes &lsquo;<samp><span class="samp">bin_PROGRAMS</span></samp>&rsquo; and not
&lsquo;<samp><span class="samp">bindir_PROGRAMS</span></samp>&rsquo;.

   <p>Not every sort of object can be installed in every directory.  Automake
will flag those attempts it finds in error (but see below how to override
the check if you really need to). 
Automake will also diagnose obvious misspellings in directory names.

   <p><a name="index-Extending-list-of-installation-directories-138"></a><a name="index-Installation-directories_002c-extending-list-139"></a>
Sometimes the standard directories&mdash;even as augmented by
Automake&mdash;are not enough.  In particular it is sometimes useful, for
clarity, to install objects in a subdirectory of some predefined
directory.  To this end, Automake allows you to extend the list of
possible installation directories.  A given prefix (e.g., &lsquo;<samp><span class="samp">zar</span></samp>&rsquo;)
is valid if a variable of the same name with &lsquo;<samp><span class="samp">dir</span></samp>&rsquo; appended is
defined (e.g., &lsquo;<samp><span class="samp">zardir</span></samp>&rsquo;).

   <p>For instance, the following snippet will install <samp><span class="file">file.xml</span></samp> into
&lsquo;<samp><span class="samp">$(datadir)/xml</span></samp>&rsquo;.

<!-- Keep in sync with primary-prefix-couples-documented-valid.sh -->
<pre class="example">     xmldir = $(datadir)/xml
     xml_DATA = file.xml
</pre>
   <p>This feature can also be used to override the sanity checks Automake
performs to diagnose suspicious directory/primary couples (in the
unlikely case these checks are undesirable, and you really know what
you're doing).  For example, Automake would error out on this input:

<!-- Should be tested in primary-prefix-invalid-couples.sh -->
<pre class="example">     # Forbidden directory combinations, automake will error out on this.
     pkglib_PROGRAMS = foo
     doc_LIBRARIES = libquux.a
</pre>
   <p class="noindent">but it will succeed with this:

<!-- Keep in sync with primary-prefix-couples-documented-valid.sh -->
<pre class="example">     # Work around forbidden directory combinations.  Do not use this
     # without a very good reason!
     my_execbindir = $(pkglibdir)
     my_doclibdir = $(docdir)
     my_execbin_PROGRAMS = foo
     my_doclib_LIBRARIES = libquux.a
</pre>
   <p>The &lsquo;<samp><span class="samp">exec</span></samp>&rsquo; substring of the &lsquo;<samp><span class="samp">my_execbindir</span></samp>&rsquo; variable lets
the files be installed at the right time (see <a href="#The-Two-Parts-of-Install">The Two Parts of Install</a>).

   <p><a name="index-g_t_0040samp_007bnoinst_005f_007d-primary-prefix_002c-definition-140"></a><a name="index-noinst_005f-141"></a>
The special prefix &lsquo;<samp><span class="samp">noinst_</span></samp>&rsquo; indicates that the objects in question
should be built but not installed at all.  This is usually used for
objects required to build the rest of your package, for instance static
libraries (see <a href="#A-Library">A Library</a>), or helper scripts.

   <p><a name="index-g_t_0040samp_007bcheck_005f_007d-primary-prefix_002c-definition-142"></a><a name="index-check_005f-143"></a>
The special prefix &lsquo;<samp><span class="samp">check_</span></samp>&rsquo; indicates that the objects in question
should not be built until the &lsquo;<samp><span class="samp">make check</span></samp>&rsquo; command is run.  Those
objects are not installed either.

   <p>The current primary names are &lsquo;<samp><span class="samp">PROGRAMS</span></samp>&rsquo;, &lsquo;<samp><span class="samp">LIBRARIES</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">LTLIBRARIES</span></samp>&rsquo;, &lsquo;<samp><span class="samp">LISP</span></samp>&rsquo;, &lsquo;<samp><span class="samp">PYTHON</span></samp>&rsquo;, &lsquo;<samp><span class="samp">JAVA</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">SCRIPTS</span></samp>&rsquo;, &lsquo;<samp><span class="samp">DATA</span></samp>&rsquo;, &lsquo;<samp><span class="samp">HEADERS</span></samp>&rsquo;, &lsquo;<samp><span class="samp">MANS</span></samp>&rsquo;, and
&lsquo;<samp><span class="samp">TEXINFOS</span></samp>&rsquo;. 
<a name="index-PROGRAMS-144"></a><a name="index-LIBRARIES-145"></a><a name="index-LTLIBRARIES-146"></a><a name="index-LISP-147"></a><a name="index-PYTHON-148"></a><a name="index-JAVA-149"></a><a name="index-SCRIPTS-150"></a><a name="index-DATA-151"></a><a name="index-HEADERS-152"></a><a name="index-MANS-153"></a><a name="index-TEXINFOS-154"></a>
Some primaries also allow additional prefixes that control other
aspects of <samp><span class="command">automake</span></samp>'s behavior.  The currently defined prefixes
are &lsquo;<samp><span class="samp">dist_</span></samp>&rsquo;, &lsquo;<samp><span class="samp">nodist_</span></samp>&rsquo;, &lsquo;<samp><span class="samp">nobase_</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">notrans_</span></samp>&rsquo;. 
These prefixes are explained later (see <a href="#Program-and-Library-Variables">Program and Library Variables</a>)
(see <a href="#Man-Pages">Man Pages</a>).

<div class="node">
<a name="Length-Limitations"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Canonicalization">Canonicalization</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Uniform">Uniform</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Generalities">Generalities</a>

</div>

<h3 class="section">3.4 Staying below the command line length limit</h3>

<p><a name="index-command-line-length-limit-155"></a><a name="index-ARG_005fMAX-156"></a>
Traditionally, most unix-like systems have a length limitation for the
command line arguments and environment contents when creating new
processes (see for example
<a href="http://www.in-ulm.de/~mascheck/various/argmax/">http://www.in-ulm.de/~mascheck/various/argmax/</a> for an
overview on this issue),
which of course also applies to commands spawned by <samp><span class="command">make</span></samp>. 
POSIX requires this limit to be at least 4096 bytes, and most modern
systems have quite high limits (or are unlimited).

   <p>In order to create portable Makefiles that do not trip over these
limits, it is necessary to keep the length of file lists bounded. 
Unfortunately, it is not possible to do so fully transparently within
Automake, so your help may be needed.  Typically, you can split long
file lists manually and use different installation directory names for
each list.  For example,

<pre class="example">     data_DATA = file1 ... file<var>N</var> file<var>N+1</var> ... file<var>2N</var>
</pre>
   <p class="noindent">may also be written as

<!-- Keep in sync with primary-prefix-couples-documented-valid.sh -->
<pre class="example">     data_DATA = file1 ... file<var>N</var>
     data2dir = $(datadir)
     data2_DATA = file<var>N+1</var> ... file<var>2N</var>
</pre>
   <p class="noindent">and will cause Automake to treat the two lists separately during
<code>make install</code>.  See <a href="#The-Two-Parts-of-Install">The Two Parts of Install</a> for choosing
directory names that will keep the ordering of the two parts of
installation Note that <code>make dist</code> may still only work on a host
with a higher length limit in this example.

   <p>Automake itself employs a couple of strategies to avoid long command
lines.  For example, when &lsquo;<samp><span class="samp">${srcdir}/</span></samp>&rsquo; is prepended to file
names, as can happen with above <code>$(data_DATA)</code> lists, it limits
the amount of arguments passed to external commands.

   <p>Unfortunately, some system's <samp><span class="command">make</span></samp> commands may prepend
<code>VPATH</code> prefixes like &lsquo;<samp><span class="samp">${srcdir}/</span></samp>&rsquo; to file names from the
source tree automatically (see <a href="autoconf.html#Automatic-Rule-Rewriting">Automatic Rule Rewriting</a>).  In this case, the user
may have to switch to use GNU Make, or refrain from using VPATH builds,
in order to stay below the length limit.

   <p>For libraries and programs built from many sources, convenience archives
may be used as intermediates in order to limit the object list length
(see <a href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a>).

<div class="node">
<a name="Canonicalization"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#User-Variables">User Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Length-Limitations">Length Limitations</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Generalities">Generalities</a>

</div>

<h3 class="section">3.5 How derived variables are named</h3>

<p><a name="index-canonicalizing-Automake-variables-157"></a>
Sometimes a Makefile variable name is derived from some text the
maintainer supplies.  For instance, a program name listed in
&lsquo;<samp><span class="samp">_PROGRAMS</span></samp>&rsquo; is rewritten into the name of a &lsquo;<samp><span class="samp">_SOURCES</span></samp>&rsquo;
variable.  In cases like this, Automake canonicalizes the text, so that
program names and the like do not have to follow Makefile variable naming
rules.  All characters in the name except for letters, numbers, the
strudel (@), and the underscore are turned into underscores when making
variable references.

   <p>For example, if your program is named <samp><span class="file">sniff-glue</span></samp>, the derived
variable name would be &lsquo;<samp><span class="samp">sniff_glue_SOURCES</span></samp>&rsquo;, not
&lsquo;<samp><span class="samp">sniff-glue_SOURCES</span></samp>&rsquo;.  Similarly the sources for a library named
<samp><span class="file">libmumble++.a</span></samp> should be listed in the
&lsquo;<samp><span class="samp">libmumble___a_SOURCES</span></samp>&rsquo; variable.

   <p>The strudel is an addition, to make the use of Autoconf substitutions in
variable names less obfuscating.

<div class="node">
<a name="User-Variables"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Auxiliary-Programs">Auxiliary Programs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Canonicalization">Canonicalization</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Generalities">Generalities</a>

</div>

<h3 class="section">3.6 Variables reserved for the user</h3>

<p><a name="index-variables_002c-reserved-for-the-user-158"></a><a name="index-user-variables-159"></a>
Some <samp><span class="file">Makefile</span></samp> variables are reserved by the GNU Coding Standards
for the use of the &ldquo;user&rdquo;&mdash;the person building the package.  For
instance, <code>CFLAGS</code> is one such variable.

   <p>Sometimes package developers are tempted to set user variables such as
<code>CFLAGS</code> because it appears to make their job easier.  However,
the package itself should never set a user variable, particularly not
to include switches that are required for proper compilation of the
package.  Since these variables are documented as being for the
package builder, that person rightfully expects to be able to override
any of these variables at build time.

   <p>To get around this problem, Automake introduces an automake-specific
shadow variable for each user flag variable.  (Shadow variables are
not introduced for variables like <code>CC</code>, where they would make no
sense.)  The shadow variable is named by prepending &lsquo;<samp><span class="samp">AM_</span></samp>&rsquo; to the
user variable's name.  For instance, the shadow variable for
<code>YFLAGS</code> is <code>AM_YFLAGS</code>.  The package maintainer&mdash;that is,
the author(s) of the <samp><span class="file">Makefile.am</span></samp> and <samp><span class="file">configure.ac</span></samp>
files&mdash;may adjust these shadow variables however necessary.

   <p>See <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a>, for more discussion about these
variables and how they interact with per-target variables.

<div class="node">
<a name="Auxiliary-Programs"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#User-Variables">User Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Generalities">Generalities</a>

</div>

<h3 class="section">3.7 Programs automake might require</h3>

<p><a name="index-Programs_002c-auxiliary-160"></a><a name="index-Auxiliary-programs-161"></a>
Automake sometimes requires helper programs so that the generated
<samp><span class="file">Makefile</span></samp> can do its work properly.  There are a fairly large
number of them, and we list them here.

   <p>Although all of these files are distributed and installed with
Automake, a couple of them are maintained separately.  The Automake
copies are updated before each release, but we mention the original
source in case you need more recent versions.

     <dl>
<dt><code>ar-lib</code><dd>This is a wrapper primarily for the Microsoft lib archiver, to make
it more POSIX-like.

     <br><dt><code>compile</code><dd>This is a wrapper for compilers that do not accept options <samp><span class="option">-c</span></samp>
and <samp><span class="option">-o</span></samp> at the same time.  It is only used when absolutely
required.  Such compilers are rare, with the Microsoft C/C++ Compiler
as the most notable exception. This wrapper also makes the following
common options available for that compiler, while performing file name
translation where needed: <samp><span class="option">-I</span></samp>, <samp><span class="option">-L</span></samp>, <samp><span class="option">-l</span></samp>,
<samp><span class="option">-Wl,</span></samp> and <samp><span class="option">-Xlinker</span></samp>.

     <br><dt><code>config.guess</code><dt><code>config.sub</code><dd>These two programs compute the canonical triplets for the given build,
host, or target architecture.  These programs are updated regularly to
support new architectures and fix probes broken by changes in new
kernel versions.  Each new release of Automake comes with up-to-date
copies of these programs.  If your copy of Automake is getting old,
you are encouraged to fetch the latest versions of these files from
<a href="http://savannah.gnu.org/git/?group=config">http://savannah.gnu.org/git/?group=config</a> before making a
release.

     <br><dt><code>depcomp</code><dd>This program understands how to run a compiler so that it will
generate not only the desired output but also dependency information
that is then used by the automatic dependency tracking feature
(see <a href="#Dependencies">Dependencies</a>).

     <br><dt><code>elisp-comp</code><dd>This program is used to byte-compile Emacs Lisp code.

     <br><dt><code>install-sh</code><dd>This is a replacement for the <samp><span class="command">install</span></samp> program that works on
platforms where <samp><span class="command">install</span></samp> is unavailable or unusable.

     <br><dt><code>mdate-sh</code><dd>This script is used to generate a <samp><span class="file">version.texi</span></samp> file.  It examines
a file and prints some date information about it.

     <br><dt><code>missing</code><dd>This wraps a number of programs that are typically only required by
maintainers.  If the program in question doesn't exist,
<samp><span class="command">missing</span></samp> prints an informative warning and attempts to fix
things so that the build can continue.

     <br><dt><code>mkinstalldirs</code><dd>This script used to be a wrapper around &lsquo;<samp><span class="samp">mkdir -p</span></samp>&rsquo;, which is not
portable.  Now we prefer to use &lsquo;<samp><span class="samp">install-sh -d</span></samp>&rsquo; when <samp><span class="command">configure</span></samp>
finds that &lsquo;<samp><span class="samp">mkdir -p</span></samp>&rsquo; does not work, this makes one less script to
distribute.

     <p>For backward compatibility <samp><span class="file">mkinstalldirs</span></samp> is still used and
distributed when <samp><span class="command">automake</span></samp> finds it in a package.  But it is no
longer installed automatically, and it should be safe to remove it.

     <br><dt><code>py-compile</code><dd>This is used to byte-compile Python scripts.

     <br><dt><code>test-driver</code><dd>This implements the default test driver offered by the parallel
testsuite harness.

     <br><dt><code>texinfo.tex</code><dd>Not a program, this file is required for &lsquo;<samp><span class="samp">make dvi</span></samp>&rsquo;, &lsquo;<samp><span class="samp">make
ps</span></samp>&rsquo; and &lsquo;<samp><span class="samp">make pdf</span></samp>&rsquo; to work when Texinfo sources are in the
package.  The latest version can be downloaded from
<a href="http://www.gnu.org/software/texinfo/">http://www.gnu.org/software/texinfo/</a>.

     <br><dt><code>ylwrap</code><dd>This program wraps <samp><span class="command">lex</span></samp> and <samp><span class="command">yacc</span></samp> to rename their
output files.  It also ensures that, for instance, multiple
<samp><span class="command">yacc</span></samp> instances can be invoked in a single directory in
parallel.

   </dl>

<div class="node">
<a name="Examples"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#automake-Invocation">automake Invocation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Generalities">Generalities</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">4 Some example packages</h2>

<p>This section contains two small examples.

   <p>The first example (see <a href="#Complete">Complete</a>) assumes you have an existing
project already using Autoconf, with handcrafted <samp><span class="file">Makefile</span></samp>s, and
that you want to convert it to using Automake.  If you are discovering
both tools, it is probably better that you look at the Hello World
example presented earlier (see <a href="#Hello-World">Hello World</a>).

   <p>The second example (see <a href="#true">true</a>) shows how two programs can be built
from the same file, using different compilation parameters.  It
contains some technical digressions that are probably best skipped on
first read.

<ul class="menu">
<li><a accesskey="1" href="#Complete">Complete</a>:                     A simple example, start to finish
<li><a accesskey="2" href="#true">true</a>:                         Building true and false
</ul>

<div class="node">
<a name="Complete"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#true">true</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Examples">Examples</a>

</div>

<h3 class="section">4.1 A simple example, start to finish</h3>

<p><a name="index-Complete-example-162"></a>
Let's suppose you just finished writing <code>zardoz</code>, a program to make
your head float from vortex to vortex.  You've been using Autoconf to
provide a portability framework, but your <samp><span class="file">Makefile.in</span></samp>s have been
ad-hoc.  You want to make them bulletproof, so you turn to Automake.

   <p><a name="index-g_t_0040code_007bAM_005fINIT_005fAUTOMAKE_007d_002c-example-use-163"></a>
The first step is to update your <samp><span class="file">configure.ac</span></samp> to include the
commands that <samp><span class="command">automake</span></samp> needs.  The way to do this is to add an
<code>AM_INIT_AUTOMAKE</code> call just after <code>AC_INIT</code>:

<pre class="example">     AC_INIT([zardoz], [1.0])
     AM_INIT_AUTOMAKE
     ...
</pre>
   <p>Since your program doesn't have any complicating factors (e.g., it
doesn't use <code>gettext</code>, it doesn't want to build a shared library),
you're done with this part.  That was easy!

   <p><a name="index-g_t_0040command_007baclocal_007d-program_002c-introduction-164"></a><a name="index-g_t_0040file_007baclocal_002em4_007d_002c-preexisting-165"></a><a name="index-g_t_0040file_007bacinclude_002em4_007d_002c-defined-166"></a>
Now you must regenerate <samp><span class="file">configure</span></samp>.  But to do that, you'll need
to tell <samp><span class="command">autoconf</span></samp> how to find the new macro you've used.  The
easiest way to do this is to use the <samp><span class="command">aclocal</span></samp> program to
generate your <samp><span class="file">aclocal.m4</span></samp> for you.  But wait<small class="dots">...</small> maybe you
already have an <samp><span class="file">aclocal.m4</span></samp>, because you had to write some hairy
macros for your program.  The <samp><span class="command">aclocal</span></samp> program lets you put
your own macros into <samp><span class="file">acinclude.m4</span></samp>, so simply rename and then
run:

<pre class="example">     mv aclocal.m4 acinclude.m4
     aclocal
     autoconf
</pre>
   <p><a name="index-g_t_0040command_007bzardoz_007d-example-167"></a>
Now it is time to write your <samp><span class="file">Makefile.am</span></samp> for <code>zardoz</code>. 
Since <code>zardoz</code> is a user program, you want to install it where the
rest of the user programs go: <code>bindir</code>.  Additionally,
<code>zardoz</code> has some Texinfo documentation.  Your <samp><span class="file">configure.ac</span></samp>
script uses <code>AC_REPLACE_FUNCS</code>, so you need to link against
&lsquo;<samp><span class="samp">$(LIBOBJS)</span></samp>&rsquo;.  So here's what you'd write:

<pre class="example">     bin_PROGRAMS = zardoz
     zardoz_SOURCES = main.c head.c float.c vortex9.c gun.c
     zardoz_LDADD = $(LIBOBJS)
     
     info_TEXINFOS = zardoz.texi
</pre>
   <p>Now you can run &lsquo;<samp><span class="samp">automake --add-missing</span></samp>&rsquo; to generate your
<samp><span class="file">Makefile.in</span></samp> and grab any auxiliary files you might need, and
you're done!

<div class="node">
<a name="true"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Complete">Complete</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Examples">Examples</a>

</div>

<h3 class="section">4.2 Building true and false</h3>

<p><a name="index-Example_002c-_0040command_007bfalse_007d-and-_0040command_007btrue_007d-168"></a><a name="index-g_t_0040command_007bfalse_007d-Example-169"></a><a name="index-g_t_0040command_007btrue_007d-Example-170"></a>
Here is another, trickier example.  It shows how to generate two
programs (<code>true</code> and <code>false</code>) from the same source file
(<samp><span class="file">true.c</span></samp>).  The difficult part is that each compilation of
<samp><span class="file">true.c</span></samp> requires different <code>cpp</code> flags.

<pre class="example">     bin_PROGRAMS = true false
     false_SOURCES =
     false_LDADD = false.o
     
     true.o: true.c
             $(COMPILE) -DEXIT_CODE=0 -c true.c
     
     false.o: true.c
             $(COMPILE) -DEXIT_CODE=1 -o false.o -c true.c
</pre>
   <p>Note that there is no <code>true_SOURCES</code> definition.  Automake will
implicitly assume that there is a source file named <samp><span class="file">true.c</span></samp>
(see <a href="#Default-_005fSOURCES">Default _SOURCES</a>), and
define rules to compile <samp><span class="file">true.o</span></samp> and link <samp><span class="file">true</span></samp>.  The
&lsquo;<samp><span class="samp">true.o: true.c</span></samp>&rsquo; rule supplied by the above <samp><span class="file">Makefile.am</span></samp>,
will override the Automake generated rule to build <samp><span class="file">true.o</span></samp>.

   <p><code>false_SOURCES</code> is defined to be empty&mdash;that way no implicit value
is substituted.  Because we have not listed the source of
<samp><span class="file">false</span></samp>, we have to tell Automake how to link the program.  This is
the purpose of the <code>false_LDADD</code> line.  A <code>false_DEPENDENCIES</code>
variable, holding the dependencies of the <samp><span class="file">false</span></samp> target will be
automatically generated by Automake from the content of
<code>false_LDADD</code>.

   <p>The above rules won't work if your compiler doesn't accept both
<samp><span class="option">-c</span></samp> and <samp><span class="option">-o</span></samp>.  The simplest fix for this is to introduce a
bogus dependency (to avoid problems with a parallel <samp><span class="command">make</span></samp>):

<pre class="example">     true.o: true.c false.o
             $(COMPILE) -DEXIT_CODE=0 -c true.c
     
     false.o: true.c
             $(COMPILE) -DEXIT_CODE=1 -c true.c &amp;&amp; mv true.o false.o
</pre>
   <p>As it turns out, there is also a much easier way to do this same task. 
Some of the above technique is useful enough that we've kept the
example in the manual.  However if you were to build <code>true</code> and
<code>false</code> in real life, you would probably use per-program
compilation flags, like so:

<!-- Keep in sync with specflg7.sh and specflg8.sh -->
<pre class="example">     bin_PROGRAMS = false true
     
     false_SOURCES = true.c
     false_CPPFLAGS = -DEXIT_CODE=1
     
     true_SOURCES = true.c
     true_CPPFLAGS = -DEXIT_CODE=0
</pre>
   <p>In this case Automake will cause <samp><span class="file">true.c</span></samp> to be compiled twice,
with different flags.  In this instance, the names of the object files
would be chosen by automake; they would be <samp><span class="file">false-true.o</span></samp> and
<samp><span class="file">true-true.o</span></samp>. (The name of the object files rarely matters.)

<div class="node">
<a name="automake-Invocation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#configure">configure</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Examples">Examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">5 Creating a <samp><span class="file">Makefile.in</span></samp></h2>

<!-- This node used to be named "Invoking automake".  This @anchor -->
<!-- allows old links to still work. -->
<p><a name="Invoking-automake"></a><a name="index-Multiple-_0040file_007bconfigure_002eac_007d-files-171"></a><a name="index-Invoking-_0040command_007bautomake_007d-172"></a><a name="index-g_t_0040command_007bautomake_007d_002c-invoking-173"></a><a name="index-Invocation-of-_0040command_007bautomake_007d-174"></a><a name="index-g_t_0040command_007bautomake_007d_002c-invocation-175"></a>
To create all the <samp><span class="file">Makefile.in</span></samp>s for a package, run the
<samp><span class="command">automake</span></samp> program in the top level directory, with no
arguments.  <samp><span class="command">automake</span></samp> will automatically find each
appropriate <samp><span class="file">Makefile.am</span></samp> (by scanning <samp><span class="file">configure.ac</span></samp>;
see <a href="#configure">configure</a>) and generate the corresponding <samp><span class="file">Makefile.in</span></samp>. 
Note that <samp><span class="command">automake</span></samp> has a rather simplistic view of what
constitutes a package; it assumes that a package has only one
<samp><span class="file">configure.ac</span></samp>, at the top.  If your package has multiple
<samp><span class="file">configure.ac</span></samp>s, then you must run <samp><span class="command">automake</span></samp> in each
directory holding a <samp><span class="file">configure.ac</span></samp>.  (Alternatively, you may rely
on Autoconf's <samp><span class="command">autoreconf</span></samp>, which is able to recurse your
package tree and run <samp><span class="command">automake</span></samp> where appropriate.)

   <p>You can optionally give <samp><span class="command">automake</span></samp> an argument; <samp><span class="file">.am</span></samp> is
appended to the argument and the result is used as the name of the
input file.  This feature is generally only used to automatically
rebuild an out-of-date <samp><span class="file">Makefile.in</span></samp>.  Note that
<samp><span class="command">automake</span></samp> must always be run from the topmost directory of a
project, even if being used to regenerate the <samp><span class="file">Makefile.in</span></samp> in
some subdirectory.  This is necessary because <samp><span class="command">automake</span></samp> must
scan <samp><span class="file">configure.ac</span></samp>, and because <samp><span class="command">automake</span></samp> uses the
knowledge that a <samp><span class="file">Makefile.in</span></samp> is in a subdirectory to change its
behavior in some cases.

   <p><a name="index-AUTOCONF-176"></a>Automake will run <samp><span class="command">autoconf</span></samp> to scan <samp><span class="file">configure.ac</span></samp> and
its dependencies (i.e., <samp><span class="file">aclocal.m4</span></samp> and any included file),
therefore <samp><span class="command">autoconf</span></samp> must be in your <samp><span class="env">PATH</span></samp>.  If there is
an <samp><span class="env">AUTOCONF</span></samp> variable in your environment it will be used
instead of <samp><span class="command">autoconf</span></samp>, this allows you to select a particular
version of Autoconf.  By the way, don't misunderstand this paragraph:
<samp><span class="command">automake</span></samp> runs <samp><span class="command">autoconf</span></samp> to <strong>scan</strong> your
<samp><span class="file">configure.ac</span></samp>, this won't build <samp><span class="file">configure</span></samp> and you still
have to run <samp><span class="command">autoconf</span></samp> yourself for this purpose.

   <p><a name="index-g_t_0040command_007bautomake_007d-options-177"></a><a name="index-Options_002c-_0040command_007bautomake_007d-178"></a><a name="index-Strictness_002c-command-line-179"></a>
<samp><span class="command">automake</span></samp> accepts the following options:

   <p><a name="index-Extra-files-distributed-with-Automake-180"></a><a name="index-Files-distributed-with-Automake-181"></a><a name="index-g_t_0040file_007bconfig_002eguess_007d-182"></a>
     <dl>
<dt><code>-a</code><dt><code>--add-missing</code><dd><a name="index-g_t_002da-183"></a><a name="index-g_t_002d_002dadd_002dmissing-184"></a>Automake requires certain common files to exist in certain situations;
for instance, <samp><span class="file">config.guess</span></samp> is required if <samp><span class="file">configure.ac</span></samp> invokes
<code>AC_CANONICAL_HOST</code>.  Automake is distributed with several of these
files (see <a href="#Auxiliary-Programs">Auxiliary Programs</a>); this option will cause the missing
ones to be automatically added to the package, whenever possible.  In
general if Automake tells you a file is missing, try using this option. 
By default Automake tries to make a symbolic link pointing to its own
copy of the missing file; this can be changed with <samp><span class="option">--copy</span></samp>.

     <p>Many of the potentially-missing files are common scripts whose
location may be specified via the <code>AC_CONFIG_AUX_DIR</code> macro. 
Therefore, <code>AC_CONFIG_AUX_DIR</code>'s setting affects whether a
file is considered missing, and where the missing file is added
(see <a href="#Optional">Optional</a>).

     <p>In some strictness modes, additional files are installed, see <a href="#Gnits">Gnits</a>
for more information.

     <br><dt><code>--libdir=</code><var>dir</var><dd><a name="index-g_t_002d_002dlibdir-185"></a>Look for Automake data files in directory <var>dir</var> instead of in the
installation directory.  This is typically used for debugging.

     <br><dt><code>--print-libdir</code><dd><a name="index-g_t_002d_002dprint_002dlibdir-186"></a>Print the path of the installation directory containing Automake-provided
scripts and data files (like e.g., <samp><span class="file">texinfo.texi</span></samp> and
<samp><span class="file">install-sh</span></samp>).

     <br><dt><code>-c</code><dd><a name="index-g_t_002dc-187"></a><dt><code>--copy</code><dd><a name="index-g_t_002d_002dcopy-188"></a>When used with <samp><span class="option">--add-missing</span></samp>, causes installed files to be
copied.  The default is to make a symbolic link.

     <br><dt><code>--cygnus</code><dd><a name="index-g_t_002d_002dcygnus-189"></a>Causes the generated <samp><span class="file">Makefile.in</span></samp>s to follow Cygnus rules, instead
of GNU or Gnits rules.  For more information, see <a href="#Cygnus">Cygnus</a>. 
Note that <em>this mode of operation is deprecated, and will be removed</em>
in the next major Automake release (1.13).

     <br><dt><code>-f</code><dd><a name="index-g_t_002df-190"></a><dt><code>--force-missing</code><dd><a name="index-g_t_002d_002dforce_002dmissing-191"></a>When used with <samp><span class="option">--add-missing</span></samp>, causes standard files to be reinstalled
even if they already exist in the source tree.  This involves removing
the file from the source tree before creating the new symlink (or, with
<samp><span class="option">--copy</span></samp>, copying the new file).

     <br><dt><code>--foreign</code><dd><a name="index-g_t_002d_002dforeign-192"></a>Set the global strictness to <samp><span class="option">foreign</span></samp>.  For more information, see
<a href="#Strictness">Strictness</a>.

     <br><dt><code>--gnits</code><dd><a name="index-g_t_002d_002dgnits-193"></a>Set the global strictness to <samp><span class="option">gnits</span></samp>.  For more information, see
<a href="#Gnits">Gnits</a>.

     <br><dt><code>--gnu</code><dd><a name="index-g_t_002d_002dgnu-194"></a>Set the global strictness to <samp><span class="option">gnu</span></samp>.  For more information, see
<a href="#Gnits">Gnits</a>.  This is the default strictness.

     <br><dt><code>--help</code><dd><a name="index-g_t_002d_002dhelp-195"></a>Print a summary of the command line options and exit.

     <br><dt><code>-i</code><dt><code>--ignore-deps</code><dd><a name="index-g_t_002di-196"></a>This disables the dependency tracking feature in generated
<samp><span class="file">Makefile</span></samp>s; see <a href="#Dependencies">Dependencies</a>.

     <br><dt><code>--include-deps</code><dd><a name="index-g_t_002d_002dinclude_002ddeps-197"></a>This enables the dependency tracking feature.  This feature is enabled
by default.  This option is provided for historical reasons only and
probably should not be used.

     <br><dt><code>--no-force</code><dd><a name="index-g_t_002d_002dno_002dforce-198"></a>Ordinarily <samp><span class="command">automake</span></samp> creates all <samp><span class="file">Makefile.in</span></samp>s mentioned in
<samp><span class="file">configure.ac</span></samp>.  This option causes it to only update those
<samp><span class="file">Makefile.in</span></samp>s that are out of date with respect to one of their
dependents.

     <br><dt><code>-o </code><var>dir</var><dt><code>--output-dir=</code><var>dir</var><dd><a name="index-g_t_002do-199"></a><a name="index-g_t_002d_002doutput_002ddir-200"></a>Put the generated <samp><span class="file">Makefile.in</span></samp> in the directory <var>dir</var>. 
Ordinarily each <samp><span class="file">Makefile.in</span></samp> is created in the directory of the
corresponding <samp><span class="file">Makefile.am</span></samp>.  This option is deprecated and will be
removed in a future release.

     <br><dt><code>-v</code><dt><code>--verbose</code><dd><a name="index-g_t_002dv-201"></a><a name="index-g_t_002d_002dverbose-202"></a>Cause Automake to print information about which files are being read or
created.

     <br><dt><code>--version</code><dd><a name="index-g_t_002d_002dversion-203"></a>Print the version number of Automake and exit.

     <br><dt><code>-W CATEGORY</code><dt><code>--warnings=</code><var>category</var><dd><a name="index-g_t_002dW-204"></a><a name="index-g_t_002d_002dwarnings-205"></a>Output warnings falling in <var>category</var>.  <var>category</var> can be
one of:
          <dl>
<dt><code>gnu</code><dd>warnings related to the GNU Coding Standards
(see <a href="standards.html#Top">Top</a>). 
<br><dt><code>obsolete</code><dd>obsolete features or constructions
<br><dt><code>override</code><dd>user redefinitions of Automake rules or variables
<br><dt><code>portability</code><dd>portability issues (e.g., use of <samp><span class="command">make</span></samp> features that are
known to be not portable)
<br><dt><code>extra-portability</code><dd>extra portability issues related to obscure tools.  One example of such
a tool is the Microsoft <samp><span class="command">lib</span></samp> archiver. 
<br><dt><code>syntax</code><dd>weird syntax, unused variables, typos
<br><dt><code>unsupported</code><dd>unsupported or incomplete features
<br><dt><code>all</code><dd>all the warnings
<br><dt><code>none</code><dd>turn off all the warnings
<br><dt><code>error</code><dd>treat warnings as errors
</dl>

     <p>A category can be turned off by prefixing its name with &lsquo;<samp><span class="samp">no-</span></samp>&rsquo;.  For
instance, <samp><span class="option">-Wno-syntax</span></samp> will hide the warnings about unused
variables.

     <p>The categories output by default are &lsquo;<samp><span class="samp">obsolete</span></samp>&rsquo;, &lsquo;<samp><span class="samp">syntax</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">unsupported</span></samp>&rsquo;.  Additionally, &lsquo;<samp><span class="samp">gnu</span></samp>&rsquo; and &lsquo;<samp><span class="samp">portability</span></samp>&rsquo;
are enabled in <samp><span class="option">--gnu</span></samp> and <samp><span class="option">--gnits</span></samp> strictness. 
On the other hand, the <samp><span class="option">silent-rules</span></samp> options (see <a href="#Options">Options</a>)
turns off portability warnings about recursive variable expansions.

     <!-- Checked by extra-portability.sh -->
     <p>Turning off &lsquo;<samp><span class="samp">portability</span></samp>&rsquo; will also turn off &lsquo;<samp><span class="samp">extra-portability</span></samp>&rsquo;,
and similarly turning on &lsquo;<samp><span class="samp">extra-portability</span></samp>&rsquo; will also turn on
&lsquo;<samp><span class="samp">portability</span></samp>&rsquo;.  However, turning on &lsquo;<samp><span class="samp">portability</span></samp>&rsquo; or turning
off &lsquo;<samp><span class="samp">extra-portability</span></samp>&rsquo; will not affect the other category.

     <p><a name="index-WARNINGS-206"></a>The environment variable <samp><span class="env">WARNINGS</span></samp> can contain a comma separated
list of categories to enable.  It will be taken into account before the
command-line switches, this way <samp><span class="option">-Wnone</span></samp> will also ignore any
warning category enabled by <samp><span class="env">WARNINGS</span></samp>.  This variable is also used
by other tools like <samp><span class="command">autoconf</span></samp>; unknown categories are ignored
for this reason.

   </dl>

   <p><a name="index-AUTOMAKE_005fJOBS-207"></a>If the environment variable <samp><span class="env">AUTOMAKE_JOBS</span></samp> contains a positive
number, it is taken as the maximum number of Perl threads to use in
<samp><span class="command">automake</span></samp> for generating multiple <samp><span class="file">Makefile.in</span></samp> files
concurrently.  This is an experimental feature.

<div class="node">
<a name="configure"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Directories">Directories</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#automake-Invocation">automake Invocation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">6 Scanning <samp><span class="file">configure.ac</span></samp>, using <samp><span class="command">aclocal</span></samp></h2>

<p><a name="index-g_t_0040file_007bconfigure_002eac_007d_002c-scanning-208"></a><a name="index-Scanning-_0040file_007bconfigure_002eac_007d-209"></a><a name="index-Using-_0040command_007baclocal_007d-210"></a><a name="index-g_t_0040command_007baclocal_007d_002c-using-211"></a>
Automake scans the package's <samp><span class="file">configure.ac</span></samp> to determine certain
information about the package.  Some <samp><span class="command">autoconf</span></samp> macros are required
and some variables must be defined in <samp><span class="file">configure.ac</span></samp>.  Automake
will also use information from <samp><span class="file">configure.ac</span></samp> to further tailor its
output.

   <p>Automake also supplies some Autoconf macros to make the maintenance
easier.  These macros can automatically be put into your
<samp><span class="file">aclocal.m4</span></samp> using the <samp><span class="command">aclocal</span></samp> program.

<ul class="menu">
<li><a accesskey="1" href="#Requirements">Requirements</a>:                 Configuration requirements
<li><a accesskey="2" href="#Optional">Optional</a>:                     Other things Automake recognizes
<li><a accesskey="3" href="#aclocal-Invocation">aclocal Invocation</a>:           Auto-generating aclocal.m4
<li><a accesskey="4" href="#Macros">Macros</a>:                       Autoconf macros supplied with Automake
</ul>

<div class="node">
<a name="Requirements"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Optional">Optional</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#configure">configure</a>

</div>

<h3 class="section">6.1 Configuration requirements</h3>

<p><a name="index-Automake-requirements-212"></a><a name="index-Requirements-of-Automake-213"></a>
<a name="index-AM_005fINIT_005fAUTOMAKE-214"></a>The one real requirement of Automake is that your <samp><span class="file">configure.ac</span></samp>
call <code>AM_INIT_AUTOMAKE</code>.  This macro does several things that are
required for proper Automake operation (see <a href="#Macros">Macros</a>).

   <p>Here are the other macros that Automake requires but which are not run
by <code>AM_INIT_AUTOMAKE</code>:

     <dl>
<dt><code>AC_CONFIG_FILES</code><dt><code>AC_OUTPUT</code><dd><a name="index-AC_005fCONFIG_005fFILES-215"></a><a name="index-AC_005fOUTPUT-216"></a>These two macros are usually invoked as follows near the end of
<samp><span class="file">configure.ac</span></samp>.

     <pre class="example">          ...
          AC_CONFIG_FILES([
            Makefile
            doc/Makefile
            src/Makefile
            src/lib/Makefile
            ...
          ])
          AC_OUTPUT
</pre>
     <p>Automake uses these to determine which files to create (see <a href="autoconf.html#Output">Creating Output Files</a>).  A listed file
is considered to be an Automake generated <samp><span class="file">Makefile</span></samp> if there
exists a file with the same name and the <samp><span class="file">.am</span></samp> extension appended. 
Typically, &lsquo;<samp><span class="samp">AC_CONFIG_FILES([foo/Makefile])</span></samp>&rsquo; will cause Automake to
generate <samp><span class="file">foo/Makefile.in</span></samp> if <samp><span class="file">foo/Makefile.am</span></samp> exists.

     <p>When using <code>AC_CONFIG_FILES</code> with multiple input files, as in

     <pre class="example">          AC_CONFIG_FILES([Makefile:top.in:Makefile.in:bot.in])
</pre>
     <p class="noindent"><samp><span class="command">automake</span></samp> will generate the first <samp><span class="file">.in</span></samp> input file for
which a <samp><span class="file">.am</span></samp> file exists.  If no such file exists the output
file is not considered to be generated by Automake.

     <p>Files created by <code>AC_CONFIG_FILES</code>, be they Automake
<samp><span class="file">Makefile</span></samp>s or not, are all removed by &lsquo;<samp><span class="samp">make distclean</span></samp>&rsquo;. 
Their inputs are automatically distributed, unless they
are the output of prior <code>AC_CONFIG_FILES</code> commands. 
Finally, rebuild rules are generated in the Automake <samp><span class="file">Makefile</span></samp>
existing in the subdirectory of the output file, if there is one, or
in the top-level <samp><span class="file">Makefile</span></samp> otherwise.

     <p>The above machinery (cleaning, distributing, and rebuilding) works
fine if the <code>AC_CONFIG_FILES</code> specifications contain only
literals.  If part of the specification uses shell variables,
<samp><span class="command">automake</span></samp> will not be able to fulfill this setup, and you will
have to complete the missing bits by hand.  For instance, on

     <!-- Keep in sync with output11.sh -->
     <pre class="example">          file=input
          ...
          AC_CONFIG_FILES([output:$file],, [file=$file])
</pre>
     <p class="noindent"><samp><span class="command">automake</span></samp> will output rules to clean <samp><span class="file">output</span></samp>, and
rebuild it.  However the rebuild rule will not depend on <samp><span class="file">input</span></samp>,
and this file will not be distributed either.  (You must add
&lsquo;<samp><span class="samp">EXTRA_DIST = input</span></samp>&rsquo; to your <samp><span class="file">Makefile.am</span></samp> if <samp><span class="file">input</span></samp> is a
source file.)

     <p>Similarly

     <!-- Keep in sync with output11.sh -->
     <pre class="example">          file=output
          file2=out:in
          ...
          AC_CONFIG_FILES([$file:input],, [file=$file])
          AC_CONFIG_FILES([$file2],, [file2=$file2])
</pre>
     <p class="noindent">will only cause <samp><span class="file">input</span></samp> to be distributed.  No file will be
cleaned automatically (add &lsquo;<samp><span class="samp">DISTCLEANFILES = output out</span></samp>&rsquo;
yourself), and no rebuild rule will be output.

     <p>Obviously <samp><span class="command">automake</span></samp> cannot guess what value &lsquo;<samp><span class="samp">$file</span></samp>&rsquo; is
going to hold later when <samp><span class="file">configure</span></samp> is run, and it cannot use
the shell variable &lsquo;<samp><span class="samp">$file</span></samp>&rsquo; in a <samp><span class="file">Makefile</span></samp>.  However, if you
make reference to &lsquo;<samp><span class="samp">$file</span></samp>&rsquo; as &lsquo;<samp><span class="samp">${file}</span></samp>&rsquo; (i.e., in a way
that is compatible with <samp><span class="command">make</span></samp>'s syntax) and furthermore use
<code>AC_SUBST</code> to ensure that &lsquo;<samp><span class="samp">${file}</span></samp>&rsquo; is meaningful in a
<samp><span class="file">Makefile</span></samp>, then <samp><span class="command">automake</span></samp> will be able to use
&lsquo;<samp><span class="samp">${file}</span></samp>&rsquo; to generate all of these rules.  For instance, here is
how the Automake package itself generates versioned scripts for its
test suite:

     <pre class="example">          AC_SUBST([APIVERSION], ...)
          ...
          AC_CONFIG_FILES(
            [tests/aclocal-${APIVERSION}:tests/aclocal.in],
            [chmod +x tests/aclocal-${APIVERSION}],
            [APIVERSION=$APIVERSION])
          AC_CONFIG_FILES(
            [tests/automake-${APIVERSION}:tests/automake.in],
            [chmod +x tests/automake-${APIVERSION}])
</pre>
     <p class="noindent">Here cleaning, distributing, and rebuilding are done automatically,
because &lsquo;<samp><span class="samp">${APIVERSION}</span></samp>&rsquo; is known at <samp><span class="command">make</span></samp>-time.

     <p>Note that you should not use shell variables to declare
<samp><span class="file">Makefile</span></samp> files for which <samp><span class="command">automake</span></samp> must create
<samp><span class="file">Makefile.in</span></samp>.  Even <code>AC_SUBST</code> does not help here, because
<samp><span class="command">automake</span></samp> needs to know the file name when it runs in order
to check whether <samp><span class="file">Makefile.am</span></samp> exists.  (In the very hairy case
that your setup requires such use of variables, you will have to tell
Automake which <samp><span class="file">Makefile.in</span></samp>s to generate on the command-line.)

     <p>It is possible to let <samp><span class="command">automake</span></samp> emit conditional rules for
<code>AC_CONFIG_FILES</code> with the help of <code>AM_COND_IF</code>
(see <a href="#Optional">Optional</a>).

     <p>To summarize:
          <ul>
<li>Use literals for <samp><span class="file">Makefile</span></samp>s, and for other files whenever possible. 
<li>Use &lsquo;<samp><span class="samp">$file</span></samp>&rsquo; (or &lsquo;<samp><span class="samp">${file}</span></samp>&rsquo; without &lsquo;<samp><span class="samp">AC_SUBST([file])</span></samp>&rsquo;)
for files that <samp><span class="command">automake</span></samp> should ignore. 
<li>Use &lsquo;<samp><span class="samp">${file}</span></samp>&rsquo; and &lsquo;<samp><span class="samp">AC_SUBST([file])</span></samp>&rsquo; for files
that <samp><span class="command">automake</span></samp> should not ignore. 
</ul>

   </dl>

<div class="node">
<a name="Optional"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#aclocal-Invocation">aclocal Invocation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Requirements">Requirements</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#configure">configure</a>

</div>

<h3 class="section">6.2 Other things Automake recognizes</h3>

<p><a name="index-Macros-Automake-recognizes-217"></a><a name="index-Recognized-macros-by-Automake-218"></a>
Every time Automake is run it calls Autoconf to trace
<samp><span class="file">configure.ac</span></samp>.  This way it can recognize the use of certain
macros and tailor the generated <samp><span class="file">Makefile.in</span></samp> appropriately. 
Currently recognized macros and their effects are:

     <dl>
<dt><code>AC_CANONICAL_BUILD</code><a name="index-AC_005fCANONICAL_005fBUILD-219"></a><dt><code>AC_CANONICAL_HOST</code><a name="index-AC_005fCANONICAL_005fHOST-220"></a><dt><code>AC_CANONICAL_TARGET</code><a name="index-AC_005fCANONICAL_005fTARGET-221"></a><dd><a name="index-build_005ftriplet-222"></a><a name="index-host_005ftriplet-223"></a><a name="index-target_005ftriplet-224"></a>Automake will ensure that <samp><span class="file">config.guess</span></samp> and <samp><span class="file">config.sub</span></samp>
exist.  Also, the <samp><span class="file">Makefile</span></samp> variables <code>build_triplet</code>,
<code>host_triplet</code> and <code>target_triplet</code> are introduced.  See
<a href="autoconf.html#Canonicalizing">Getting the Canonical System Type</a>.

     <br><dt><code>AC_CONFIG_AUX_DIR</code><a name="index-AC_005fCONFIG_005fAUX_005fDIR-225"></a><dd>Automake will look for various helper scripts, such as
<samp><span class="file">install-sh</span></samp>, in the directory named in this macro invocation. 
<!-- This list is accurate relative to version 1.11 -->
(The full list of scripts is:
<samp><span class="file">ar-lib</span></samp>,
<samp><span class="file">config.guess</span></samp>,
<samp><span class="file">config.sub</span></samp>,
<samp><span class="file">depcomp</span></samp>,
<samp><span class="file">elisp-comp</span></samp>,
<samp><span class="file">compile</span></samp>,
<samp><span class="file">install-sh</span></samp>,
<samp><span class="file">ltmain.sh</span></samp>,
<samp><span class="file">mdate-sh</span></samp>,
<samp><span class="file">missing</span></samp>,
<samp><span class="file">mkinstalldirs</span></samp>,
<samp><span class="file">py-compile</span></samp>,
<samp><span class="file">test-driver</span></samp>,
<samp><span class="file">texinfo.tex</span></samp>,
<samp><span class="file">ylwrap</span></samp>.) 
Not all scripts are always searched for; some scripts
will only be sought if the generated <samp><span class="file">Makefile.in</span></samp> requires them.

     <p>If <code>AC_CONFIG_AUX_DIR</code> is not given, the scripts are looked for in
their standard locations.  For <samp><span class="file">mdate-sh</span></samp>,
<samp><span class="file">texinfo.tex</span></samp>, and <samp><span class="file">ylwrap</span></samp>, the standard location is the
source directory corresponding to the current <samp><span class="file">Makefile.am</span></samp>.  For
the rest, the standard location is the first one of <samp><span class="file">.</span></samp>, <samp><span class="file">..</span></samp>,
or <samp><span class="file">../..</span></samp> (relative to the top source directory) that provides any
one of the helper scripts.  See <a href="autoconf.html#Input">Finding `configure' Input</a>.

     <p>Required files from <code>AC_CONFIG_AUX_DIR</code> are automatically
distributed, even if there is no <samp><span class="file">Makefile.am</span></samp> in this directory.

     <br><dt><code>AC_CONFIG_LIBOBJ_DIR</code><a name="index-AC_005fCONFIG_005fLIBOBJ_005fDIR-226"></a><dd>Automake will require the sources file declared with
<code>AC_LIBSOURCE</code> (see below) in the directory specified by this
macro.

     <br><dt><code>AC_CONFIG_HEADERS</code><a name="index-AC_005fCONFIG_005fHEADERS-227"></a><dd>Automake will generate rules to rebuild these headers.  Older versions
of Automake required the use of <code>AM_CONFIG_HEADER</code>
(see <a href="#Macros">Macros</a>); this is no longer the case.

     <p>As with <code>AC_CONFIG_FILES</code> (see <a href="#Requirements">Requirements</a>), parts of the
specification using shell variables will be ignored as far as
cleaning, distributing, and rebuilding is concerned.

     <br><dt><code>AC_CONFIG_LINKS</code><a name="index-AC_005fCONFIG_005fLINKS-228"></a><dd>Automake will generate rules to remove <samp><span class="file">configure</span></samp> generated
links on &lsquo;<samp><span class="samp">make distclean</span></samp>&rsquo; and to distribute named source files as
part of &lsquo;<samp><span class="samp">make dist</span></samp>&rsquo;.

     <p>As for <code>AC_CONFIG_FILES</code> (see <a href="#Requirements">Requirements</a>), parts of the
specification using shell variables will be ignored as far as cleaning
and distributing is concerned.  (There are no rebuild rules for links.)

     <br><dt><code>AC_LIBOBJ</code><a name="index-AC_005fLIBOBJ-229"></a><dt><code>AC_LIBSOURCE</code><a name="index-AC_005fLIBSOURCE-230"></a><dt><code>AC_LIBSOURCES</code><a name="index-AC_005fLIBSOURCES-231"></a><dd><a name="index-LIBOBJS-232"></a>Automake will automatically distribute any file listed in
<code>AC_LIBSOURCE</code> or <code>AC_LIBSOURCES</code>.

     <p>Note that the <code>AC_LIBOBJ</code> macro calls <code>AC_LIBSOURCE</code>.  So if
an Autoconf macro is documented to call &lsquo;<samp><span class="samp">AC_LIBOBJ([file])</span></samp>&rsquo;, then
<samp><span class="file">file.c</span></samp> will be distributed automatically by Automake.  This
encompasses many macros like <code>AC_FUNC_ALLOCA</code>,
<code>AC_FUNC_MEMCMP</code>, <code>AC_REPLACE_FUNCS</code>, and others.

     <p>By the way, direct assignments to <code>LIBOBJS</code> are no longer
supported.  You should always use <code>AC_LIBOBJ</code> for this purpose. 
See <a href="autoconf.html#AC_005fLIBOBJ-vs-LIBOBJS"><code>AC_LIBOBJ</code> vs. <code>LIBOBJS</code></a>.

     <br><dt><code>AC_PROG_RANLIB</code><a name="index-AC_005fPROG_005fRANLIB-233"></a><dd>This is required if any libraries are built in the package. 
See <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>.

     <br><dt><code>AC_PROG_CXX</code><a name="index-AC_005fPROG_005fCXX-234"></a><dd>This is required if any C++ source is included.  See <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>.

     <br><dt><code>AC_PROG_OBJC</code><a name="index-AC_005fPROG_005fOBJC-235"></a><dd>This is required if any Objective C source is included.  See <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>.

     <br><dt><code>AC_PROG_OBJCXX</code><a name="index-AC_005fPROG_005fOBJCXX-236"></a><dd>This is required if any Objective C++ source is included.  See <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>.

     <br><dt><code>AC_PROG_F77</code><a name="index-AC_005fPROG_005fF77-237"></a><dd>This is required if any Fortran 77 source is included.  See <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>.

     <br><dt><code>AC_F77_LIBRARY_LDFLAGS</code><a name="index-AC_005fF77_005fLIBRARY_005fLDFLAGS-238"></a><dd>This is required for programs and shared libraries that are a mixture of
languages that include Fortran 77 (see <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a>).  See <a href="#Macros">Autoconf macros supplied with Automake</a>.

     <br><dt><code>AC_FC_SRCEXT</code><a name="index-AC_005fFC_005fSRCEXT-239"></a><dd>Automake will add the flags computed by <code>AC_FC_SRCEXT</code> to compilation
of files with the respective source extension (see <a href="autoconf.html#Fortran-Compiler">Fortran Compiler Characteristics</a>).

     <br><dt><code>AC_PROG_FC</code><a name="index-AC_005fPROG_005fFC-240"></a><dd>This is required if any Fortran 90/95 source is included.  This macro is
distributed with Autoconf version 2.58 and later.  See <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>.

     <br><dt><code>AC_PROG_LIBTOOL</code><a name="index-AC_005fPROG_005fLIBTOOL-241"></a><dd>Automake will turn on processing for <samp><span class="command">libtool</span></samp> (see <a href="libtool.html#Top">Introduction</a>).

     <br><dt><code>AC_PROG_YACC</code><a name="index-AC_005fPROG_005fYACC-242"></a><dd><a name="index-YACC-243"></a>If a Yacc source file is seen, then you must either use this macro or
define the variable <code>YACC</code> in <samp><span class="file">configure.ac</span></samp>.  The former is
preferred (see <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>).

     <br><dt><code>AC_PROG_LEX</code><a name="index-AC_005fPROG_005fLEX-244"></a><dd>If a Lex source file is seen, then this macro must be used. 
See <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>.

     <br><dt><code>AC_REQUIRE_AUX_FILE</code><a name="index-AC_005fREQUIRE_005fAUX_005fFILE-245"></a><dd>For each <code>AC_REQUIRE_AUX_FILE([</code><var>file</var><code>])</code>,
<samp><span class="command">automake</span></samp> will ensure that <samp><var>file</var></samp> exists in the
aux directory, and will complain otherwise.  It
will also automatically distribute the file.  This macro should be
used by third-party Autoconf macros that require some supporting
files in the aux directory specified with <code>AC_CONFIG_AUX_DIR</code>
above.  See <a href="autoconf.html#Input">Finding <samp><span class="command">configure</span></samp> Input</a>.

     <br><dt><code>AC_SUBST</code><a name="index-AC_005fSUBST-246"></a><dd>The first argument is automatically defined as a variable in each
generated <samp><span class="file">Makefile.in</span></samp>, unless <code>AM_SUBST_NOTMAKE</code> is also
used for this variable.  See <a href="autoconf.html#Setting-Output-Variables">Setting Output Variables</a>.

     <p>For every substituted variable <var>var</var>, <samp><span class="command">automake</span></samp> will add
a line <var>var</var><code> = </code><var>value</var> to each <samp><span class="file">Makefile.in</span></samp> file. 
Many Autoconf macros invoke <code>AC_SUBST</code> to set output variables
this way, e.g., <code>AC_PATH_XTRA</code> defines <code>X_CFLAGS</code> and
<code>X_LIBS</code>.  Thus, you can access these variables as
<code>$(X_CFLAGS)</code> and <code>$(X_LIBS)</code> in any <samp><span class="file">Makefile.am</span></samp>
if <code>AC_PATH_XTRA</code> is called.

     <br><dt><code>AM_CONDITIONAL</code><a name="index-AM_005fCONDITIONAL-247"></a><dd>This introduces an Automake conditional (see <a href="#Conditionals">Conditionals</a>).

     <br><dt><code>AM_COND_IF</code><a name="index-AM_005fCOND_005fIF-248"></a><dd>This macro allows <code>automake</code> to detect subsequent access within
<samp><span class="file">configure.ac</span></samp> to a conditional previously introduced with
<code>AM_CONDITIONAL</code>, thus enabling conditional <code>AC_CONFIG_FILES</code>
(see <a href="#Usage-of-Conditionals">Usage of Conditionals</a>).

     <br><dt><code>AM_GNU_GETTEXT</code><a name="index-AM_005fGNU_005fGETTEXT-249"></a><dd>This macro is required for packages that use GNU gettext
(see <a href="#gettext">gettext</a>).  It is distributed with gettext.  If Automake sees
this macro it ensures that the package meets some of gettext's
requirements.

     <br><dt><code>AM_GNU_GETTEXT_INTL_SUBDIR</code><a name="index-AM_005fGNU_005fGETTEXT_005fINTL_005fSUBDIR-250"></a><dd>This macro specifies that the <samp><span class="file">intl/</span></samp> subdirectory is to be built,
even if the <code>AM_GNU_GETTEXT</code> macro was invoked with a first argument
of &lsquo;<samp><span class="samp">external</span></samp>&rsquo;.

     <br><dt><code>AM_MAINTAINER_MODE(</code><span class="roman">[</span><var>default-mode</var><span class="roman">]</span><code>)</code><a name="index-AM_005fMAINTAINER_005fMODE_0028_0040ovar_007bdefault_002dmode_007d_0029-251"></a><dd><a name="index-g_t_002d_002denable_002dmaintainer_002dmode-252"></a><a name="index-g_t_002d_002ddisable_002dmaintainer_002dmode-253"></a>This macro adds an <samp><span class="option">--enable-maintainer-mode</span></samp> option to
<samp><span class="command">configure</span></samp>.  If this is used, <samp><span class="command">automake</span></samp> will cause
&ldquo;maintainer-only&rdquo; rules to be turned off by default in the
generated <samp><span class="file">Makefile.in</span></samp>s, unless <var>default-mode</var> is
&lsquo;<samp><span class="samp">enable</span></samp>&rsquo;.  This macro defines the <code>MAINTAINER_MODE</code>
conditional, which you can use in your own <samp><span class="file">Makefile.am</span></samp>. 
See <a href="#maintainer_002dmode">maintainer-mode</a>.

     <br><dt><code>AM_SUBST_NOTMAKE(</code><var>var</var><code>)</code><a name="index-AM_005fSUBST_005fNOTMAKE_0028_0040var_007bvar_007d_0029-254"></a><dd>Prevent Automake from defining a variable <var>var</var>, even if it is
substituted by <samp><span class="command">config.status</span></samp>.  Normally, Automake defines a
<samp><span class="command">make</span></samp> variable for each <samp><span class="command">configure</span></samp> substitution,
i.e., for each <code>AC_SUBST([</code><var>var</var><code>])</code>.  This macro prevents that
definition from Automake.  If <code>AC_SUBST</code> has not been called
for this variable, then <code>AM_SUBST_NOTMAKE</code> has no effects. 
Preventing variable definitions may be useful for substitution of
multi-line values, where <var>var</var><code> = @</code><var>value</var><code>@</code> might yield
unintended results.

     <br><dt><code>m4_include</code><a name="index-m4_005finclude-255"></a><dd>Files included by <samp><span class="file">configure.ac</span></samp> using this macro will be
detected by Automake and automatically distributed.  They will also
appear as dependencies in <samp><span class="file">Makefile</span></samp> rules.

     <p><code>m4_include</code> is seldom used by <samp><span class="file">configure.ac</span></samp> authors, but
can appear in <samp><span class="file">aclocal.m4</span></samp> when <samp><span class="command">aclocal</span></samp> detects that
some required macros come from files local to your package (as opposed to
macros installed in a system-wide directory, see <a href="#aclocal-Invocation">aclocal Invocation</a>).

   </dl>

<div class="node">
<a name="aclocal-Invocation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Macros">Macros</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Optional">Optional</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#configure">configure</a>

</div>

<h3 class="section">6.3 Auto-generating aclocal.m4</h3>

<!-- This node used to be named "Invoking automake".  This @anchor -->
<!-- allows old links to still work. -->
<p><a name="Invoking-aclocal"></a><a name="index-Invocation-of-_0040command_007baclocal_007d-256"></a><a name="index-g_t_0040command_007baclocal_007d_002c-Invocation-257"></a><a name="index-Invoking-_0040command_007baclocal_007d-258"></a><a name="index-g_t_0040command_007baclocal_007d_002c-Invoking-259"></a>
Automake includes a number of Autoconf macros that can be used in
your package (see <a href="#Macros">Macros</a>); some of them are actually required by
Automake in certain situations.  These macros must be defined in your
<samp><span class="file">aclocal.m4</span></samp>; otherwise they will not be seen by
<samp><span class="command">autoconf</span></samp>.

   <p>The <samp><span class="command">aclocal</span></samp> program will automatically generate
<samp><span class="file">aclocal.m4</span></samp> files based on the contents of <samp><span class="file">configure.ac</span></samp>. 
This provides a convenient way to get Automake-provided macros,
without having to search around.  The <samp><span class="command">aclocal</span></samp> mechanism
allows other packages to supply their own macros (see <a href="#Extending-aclocal">Extending aclocal</a>).  You can also use it to maintain your own set of custom
macros (see <a href="#Local-Macros">Local Macros</a>).

   <p>At startup, <samp><span class="command">aclocal</span></samp> scans all the <samp><span class="file">.m4</span></samp> files it can
find, looking for macro definitions (see <a href="#Macro-Search-Path">Macro Search Path</a>).  Then
it scans <samp><span class="file">configure.ac</span></samp>.  Any mention of one of the macros found
in the first step causes that macro, and any macros it in turn
requires, to be put into <samp><span class="file">aclocal.m4</span></samp>.

   <p><em>Putting</em> the file that contains the macro definition into
<samp><span class="file">aclocal.m4</span></samp> is usually done by copying the entire text of this
file, including unused macro definitions as well as both &lsquo;<samp><span class="samp">#</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">dnl</span></samp>&rsquo; comments.  If you want to make a comment that will be
completely ignored by <samp><span class="command">aclocal</span></samp>, use &lsquo;<samp><span class="samp">##</span></samp>&rsquo; as the comment
leader.

   <p>When a file selected by <samp><span class="command">aclocal</span></samp> is located in a subdirectory
specified as a relative search path with <samp><span class="command">aclocal</span></samp>'s <samp><span class="option">-I</span></samp>
argument, <samp><span class="command">aclocal</span></samp> assumes the file belongs to the package
and uses <code>m4_include</code> instead of copying it into
<samp><span class="file">aclocal.m4</span></samp>.  This makes the package smaller, eases dependency
tracking, and cause the file to be distributed automatically. 
(See <a href="#Local-Macros">Local Macros</a>, for an example.)  Any macro that is found in a
system-wide directory, or via an absolute search path will be copied. 
So use &lsquo;<samp><span class="samp">-I `pwd`/reldir</span></samp>&rsquo; instead of &lsquo;<samp><span class="samp">-I reldir</span></samp>&rsquo; whenever
some relative directory should be considered outside the package.

   <p>The contents of <samp><span class="file">acinclude.m4</span></samp>, if this file exists, are also
automatically included in <samp><span class="file">aclocal.m4</span></samp>.  We recommend against
using <samp><span class="file">acinclude.m4</span></samp> in new packages (see <a href="#Local-Macros">Local Macros</a>).

   <p><a name="index-AUTOM4TE-260"></a><a name="index-autom4te-261"></a>While computing <samp><span class="file">aclocal.m4</span></samp>, <samp><span class="command">aclocal</span></samp> runs
<samp><span class="command">autom4te</span></samp> (see <a href="autoconf.html#Using-autom4te">Using <samp><span class="command">Autom4te</span></samp></a>) in order to trace the macros that are
really used, and omit from <samp><span class="file">aclocal.m4</span></samp> all macros that are
mentioned but otherwise unexpanded (this can happen when a macro is
called conditionally).  <samp><span class="command">autom4te</span></samp> is expected to be in the
<samp><span class="env">PATH</span></samp>, just as <samp><span class="command">autoconf</span></samp>.  Its location can be
overridden using the <samp><span class="env">AUTOM4TE</span></samp> environment variable.

<ul class="menu">
<li><a accesskey="1" href="#aclocal-Options">aclocal Options</a>:              Options supported by aclocal
<li><a accesskey="2" href="#Macro-Search-Path">Macro Search Path</a>:            How aclocal finds .m4 files
<li><a accesskey="3" href="#Extending-aclocal">Extending aclocal</a>:            Writing your own aclocal macros
<li><a accesskey="4" href="#Local-Macros">Local Macros</a>:                 Organizing local macros
<li><a accesskey="5" href="#Serials">Serials</a>:                      Serial lines in Autoconf macros
<li><a accesskey="6" href="#Future-of-aclocal">Future of aclocal</a>:            aclocal's scheduled death
</ul>

<div class="node">
<a name="aclocal-Options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Macro-Search-Path">Macro Search Path</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#aclocal-Invocation">aclocal Invocation</a>

</div>

<h4 class="subsection">6.3.1 aclocal Options</h4>

<p><a name="index-g_t_0040command_007baclocal_007d_002c-Options-262"></a><a name="index-Options_002c-_0040command_007baclocal_007d-263"></a>
<samp><span class="command">aclocal</span></samp> accepts the following options:

     <dl>
<dt><code>--automake-acdir=</code><var>dir</var><dd><a name="index-g_t_002d_002dautomake_002dacdir-264"></a>Look for the automake-provided macro files in <var>dir</var> instead of
in the installation directory.  This is typically used for debugging.

     <br><dt><code>--system-acdir=</code><var>dir</var><dd><a name="index-g_t_002d_002dsystem_002dacdir-265"></a>Look for the system-wide third-party macro files (and the special
<samp><span class="file">dirlist</span></samp> file) in <var>dir</var> instead of in the installation
directory.  This is typically used for debugging.

     <br><dt><code>--diff[=</code><var>command</var><code>]</code><dd><a name="index-g_t_002d_002ddiff-266"></a>Run <var>command</var> on M4 file that would be installed or overwritten
by <samp><span class="option">--install</span></samp>.  The default <var>command</var> is &lsquo;<samp><span class="samp">diff -u</span></samp>&rsquo;. 
This option implies <samp><span class="option">--install</span></samp> and <samp><span class="option">--dry-run</span></samp>.

     <br><dt><code>--dry-run</code><dd><a name="index-g_t_002d_002ddry_002drun-267"></a>Do not actually overwrite (or create) <samp><span class="file">aclocal.m4</span></samp> and M4
files installed by <samp><span class="option">--install</span></samp>.

     <br><dt><code>--help</code><dd><a name="index-g_t_002d_002dhelp-268"></a>Print a summary of the command line options and exit.

     <br><dt><code>-I </code><var>dir</var><dd><a name="index-g_t_002dI-269"></a>Add the directory <var>dir</var> to the list of directories searched for
<samp><span class="file">.m4</span></samp> files.

     <br><dt><code>--install</code><dd><a name="index-g_t_002d_002dinstall-270"></a>Install system-wide third-party macros into the first directory
specified with &lsquo;<samp><span class="samp">-I </span><var>dir</var></samp>&rsquo; instead of copying them in the
output file. 
<!-- Keep in sync with aclocal-install-absdir.sh -->
Note that this will happen also if <var>dir</var> is an absolute path.

     <p><a name="index-serial-number-and-_0040option_007b_002d_002dinstall_007d-271"></a>When this option is used, and only when this option is used,
<samp><span class="command">aclocal</span></samp> will also honor &lsquo;<samp><span class="samp">#serial </span><var>number</var></samp>&rsquo; lines
that appear in macros: an M4 file is ignored if there exists another
M4 file with the same basename and a greater serial number in the
search path (see <a href="#Serials">Serials</a>).

     <br><dt><code>--force</code><dd><a name="index-g_t_002d_002dforce-272"></a>Always overwrite the output file.  The default is to overwrite the output
file only when really needed, i.e., when its contents changes or if one
of its dependencies is younger.

     <p>This option forces the update of <samp><span class="file">aclocal.m4</span></samp> (or the file
specified with <samp><span class="file">--output</span></samp> below) and only this file, it has
absolutely no influence on files that may need to be installed by
<samp><span class="option">--install</span></samp>.

     <br><dt><code>--output=</code><var>file</var><dd><a name="index-g_t_002d_002doutput-273"></a>Cause the output to be put into <var>file</var> instead of <samp><span class="file">aclocal.m4</span></samp>.

     <br><dt><code>--print-ac-dir</code><dd><a name="index-g_t_002d_002dprint_002dac_002ddir-274"></a>Prints the name of the directory that <samp><span class="command">aclocal</span></samp> will search to
find third-party <samp><span class="file">.m4</span></samp> files.  When this option is given, normal
processing is suppressed.  This option was used <em>in the past</em> by
third-party packages to determine where to install <samp><span class="file">.m4</span></samp> macro
files, but <em>this usage is today discouraged</em>, since it causes
&lsquo;<samp><span class="samp">$(prefix)</span></samp>&rsquo; not to be thoroughly honoured (which violates the
GNU Coding Standards), and a similar semantics can be better obtained
with the <samp><span class="env">ACLOCAL_PATH</span></samp> environment variable; see <a href="#Extending-aclocal">Extending aclocal</a>.

     <br><dt><code>--verbose</code><dd><a name="index-g_t_002d_002dverbose-275"></a>Print the names of the files it examines.

     <br><dt><code>--version</code><dd><a name="index-g_t_002d_002dversion-276"></a>Print the version number of Automake and exit.

     <br><dt><code>-W CATEGORY</code><br><dt><code>--warnings=</code><var>category</var><dd><a name="index-g_t_002dW-277"></a><a name="index-g_t_002d_002dwarnings-278"></a>Output warnings falling in <var>category</var>.  <var>category</var> can be
one of:
          <dl>
<dt><code>syntax</code><dd>dubious syntactic constructs, underquoted macros, unused macros, etc. 
<br><dt><code>unsupported</code><dd>unknown macros
<br><dt><code>all</code><dd>all the warnings, this is the default
<br><dt><code>none</code><dd>turn off all the warnings
<br><dt><code>error</code><dd>treat warnings as errors
</dl>

     <p>All warnings are output by default.

     <p><a name="index-WARNINGS-279"></a>The environment variable <samp><span class="env">WARNINGS</span></samp> is honored in the same
way as it is for <samp><span class="command">automake</span></samp> (see <a href="#automake-Invocation">automake Invocation</a>).

   </dl>

<div class="node">
<a name="Macro-Search-Path"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Extending-aclocal">Extending aclocal</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#aclocal-Options">aclocal Options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#aclocal-Invocation">aclocal Invocation</a>

</div>

<h4 class="subsection">6.3.2 Macro Search Path</h4>

<p><a name="index-Macro-search-path-280"></a><a name="index-g_t_0040command_007baclocal_007d-search-path-281"></a>
By default, <samp><span class="command">aclocal</span></samp> searches for <samp><span class="file">.m4</span></samp> files in the following
directories, in this order:

     <dl>
<dt><var>acdir-APIVERSION</var><dd>This is where the <samp><span class="file">.m4</span></samp> macros distributed with Automake itself
are stored.  <var>APIVERSION</var> depends on the Automake release used;
for example, for Automake 1.11.x, <var>APIVERSION</var> = <code>1.11</code>.

     <br><dt><var>acdir</var><dd>This directory is intended for third party <samp><span class="file">.m4</span></samp> files, and is
configured when <samp><span class="command">automake</span></samp> itself is built.  This is
<samp><span class="file">@datadir@/aclocal/</span></samp>, which typically
expands to <samp><span class="file">${prefix}/share/aclocal/</span></samp>.  To find the compiled-in
value of <var>acdir</var>, use the <samp><span class="option">--print-ac-dir</span></samp> option
(see <a href="#aclocal-Options">aclocal Options</a>). 
</dl>

   <p>As an example, suppose that <samp><span class="command">automake-1.11.2</span></samp> was configured with
<samp><span class="option">--prefix=/usr/local</span></samp>.  Then, the search path would be:

     <ol type=1 start=1>
<li><samp><span class="file">/usr/local/share/aclocal-1.11.2/</span></samp>
<li><samp><span class="file">/usr/local/share/aclocal/</span></samp>
        </ol>

   <p>The paths for the <var>acdir</var> and <var>acdir-APIVERSION</var> directories can
be changed respectively through aclocal options <samp><span class="option">--system-acdir</span></samp>
and <samp><span class="option">--automake-acdir</span></samp> (see <a href="#aclocal-Options">aclocal Options</a>).  Note however
that these options are only intended for use by the internal Automake
test suite, or for debugging under highly unusual situations; they are
not ordinarily needed by end-users.

   <p>As explained in (see <a href="#aclocal-Options">aclocal Options</a>), there are several options that
can be used to change or extend this search path.

<h5 class="subsubheading">Modifying the Macro Search Path: &lsquo;<samp><span class="samp">-I </span><var>dir</var></samp>&rsquo;</h5>

<p>Any extra directories specified using <samp><span class="option">-I</span></samp> options
(see <a href="#aclocal-Options">aclocal Options</a>) are <em>prepended</em> to this search list.  Thus,
&lsquo;<samp><span class="samp">aclocal -I /foo -I /bar</span></samp>&rsquo; results in the following search path:

     <ol type=1 start=1>
<li><samp><span class="file">/foo</span></samp>
<li><samp><span class="file">/bar</span></samp>
<li><var>acdir</var>-<var>APIVERSION</var>
<li><var>acdir</var>
        </ol>

<h5 class="subsubheading">Modifying the Macro Search Path: <samp><span class="file">dirlist</span></samp></h5>

<p><a name="index-g_t_0040file_007bdirlist_007d-282"></a>
There is a third mechanism for customizing the search path.  If a
<samp><span class="file">dirlist</span></samp> file exists in <var>acdir</var>, then that file is assumed to
contain a list of directory patterns, one per line.  <samp><span class="command">aclocal</span></samp>
expands these patterns to directory names, and adds them to the search
list <em>after</em> all other directories.  <samp><span class="file">dirlist</span></samp> entries may
use shell wildcards such as &lsquo;<samp><span class="samp">*</span></samp>&rsquo;, &lsquo;<samp><span class="samp">?</span></samp>&rsquo;, or <code>[...]</code>.

   <p>For example, suppose
<samp><var>acdir</var><span class="file">/dirlist</span></samp> contains the following:

<pre class="example">     /test1
     /test2
     /test3*
</pre>
   <p class="noindent">and that <samp><span class="command">aclocal</span></samp> was called with the &lsquo;<samp><span class="samp">-I /foo -I /bar</span></samp>&rsquo; options. 
Then, the search path would be

<!-- @code looks better than @file here -->
     <ol type=1 start=1>
<li><code>/foo</code>
<li><code>/bar</code>
<li><var>acdir</var>-<var>APIVERSION</var>
<li><var>acdir</var>
<li><code>/test1</code>
<li><code>/test2</code>
        </ol>

<p class="noindent">and all directories with path names starting with <code>/test3</code>.

   <p>If the <samp><span class="option">--system-acdir=</span><var>dir</var></samp> option is used, then
<samp><span class="command">aclocal</span></samp> will search for the <samp><span class="file">dirlist</span></samp> file in
<var>dir</var>; but remember the warnings  above against the use of
<samp><span class="option">--system-acdir</span></samp>.

   <p><samp><span class="file">dirlist</span></samp> is useful in the following situation: suppose that
<samp><span class="command">automake</span></samp> version <code>1.11.2</code> is installed with
&lsquo;<samp><span class="samp">--prefix=/usr</span></samp>&rsquo; by the system vendor.  Thus, the default search
directories are

<!-- @code looks better than @file here -->
     <ol type=1 start=1>
<li><code>/usr/share/aclocal-1.11/</code>
<li><code>/usr/share/aclocal/</code>
        </ol>

   <p>However, suppose further that many packages have been manually
installed on the system, with $prefix=/usr/local, as is typical.  In
that case, many of these &ldquo;extra&rdquo; <samp><span class="file">.m4</span></samp> files are in
<samp><span class="file">/usr/local/share/aclocal</span></samp>.  The only way to force
<samp><span class="file">/usr/bin/aclocal</span></samp> to find these &ldquo;extra&rdquo; <samp><span class="file">.m4</span></samp> files is to
always call &lsquo;<samp><span class="samp">aclocal -I /usr/local/share/aclocal</span></samp>&rsquo;.  This is
inconvenient.  With <samp><span class="file">dirlist</span></samp>, one may create a file
<samp><span class="file">/usr/share/aclocal/dirlist</span></samp> containing only the single line

<pre class="example">     /usr/local/share/aclocal
</pre>
   <p>Now, the &ldquo;default&rdquo; search path on the affected system is

<!-- @code looks better than @file here -->
     <ol type=1 start=1>
<li><code>/usr/share/aclocal-1.11/</code>
<li><code>/usr/share/aclocal/</code>
<li><code>/usr/local/share/aclocal/</code>
        </ol>

   <p>without the need for <samp><span class="option">-I</span></samp> options; <samp><span class="option">-I</span></samp> options can be reserved
for project-specific needs (<samp><span class="file">my-source-dir/m4/</span></samp>), rather than
using it to work around local system-dependent tool installation
directories.

   <p>Similarly, <samp><span class="file">dirlist</span></samp> can be handy if you have installed a local
copy of Automake in your account and want <samp><span class="command">aclocal</span></samp> to look for
macros installed at other places on the system.

   <p><a name="ACLOCAL_005fPATH"></a>

<h5 class="subsubheading">Modifying the Macro Search Path: <samp><span class="file">ACLOCAL_PATH</span></samp></h5>

<p><a name="index-g_t_0040env_007bACLOCAL_005fPATH_007d-283"></a>
The fourth and last mechanism to customize the macro search path is
also the simplest.  Any directory included in the colon-separated
environment variable <samp><span class="env">ACLOCAL_PATH</span></samp> is added to the search path
<!-- Keep in sync with aclocal-path-precedence.sh -->
and takes precedence over system directories (including those found via
<samp><span class="file">dirlist</span></samp>), with the exception of the versioned directory
<var>acdir-APIVERSION</var> (see <a href="#Macro-Search-Path">Macro Search Path</a>).  However, directories
passed via <samp><span class="option">-I</span></samp> will take precedence over directories in
<samp><span class="env">ACLOCAL_PATH</span></samp>.

<!-- Keep in sync with aclocal-path-installed.sh -->
   <p>Also note that, if the <samp><span class="option">--install</span></samp> option is used, any <samp><span class="file">.m4</span></samp>
file containing a required macro that is found in a directory listed in
<samp><span class="env">ACLOCAL_PATH</span></samp> will be installed locally. 
<!-- Keep in sync with aclocal-path-installed-serial.sh -->
In this case, serial numbers in <samp><span class="file">.m4</span></samp> are honoured too,
see <a href="#Serials">Serials</a>.

   <p>Conversely to <samp><span class="file">dirlist</span></samp>, <samp><span class="env">ACLOCAL_PATH</span></samp> is useful if you are
using a global copy of Automake and want <samp><span class="command">aclocal</span></samp> to look for
macros somewhere under your home directory.

<h5 class="subsubheading">Planned future incompatibilities</h5>

<p>The order in which the directories in the macro search path are currently
looked up is confusing and/or suboptimal in various aspects, and is
probably going to be changed in the future Automake release.  In
particular, directories in <samp><span class="env">ACLOCAL_PATH</span></samp> and <samp><var>acdir</var></samp>
might end up taking precedence over <samp><var>acdir-APIVERSION</var></samp>, and
directories in <samp><var>acdir</var><span class="file">/dirlist</span></samp> might end up taking precedence
over <samp><var>acdir</var></samp>.  <em>This is a possible future incompatibility!</em>

<div class="node">
<a name="Extending-aclocal"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Local-Macros">Local Macros</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Macro-Search-Path">Macro Search Path</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#aclocal-Invocation">aclocal Invocation</a>

</div>

<h4 class="subsection">6.3.3 Writing your own aclocal macros</h4>

<p><a name="index-g_t_0040command_007baclocal_007d_002c-extending-284"></a><a name="index-Extending-_0040command_007baclocal_007d-285"></a>
The <samp><span class="command">aclocal</span></samp> program doesn't have any built-in knowledge of any
macros, so it is easy to extend it with your own macros.

   <p>This can be used by libraries that want to supply their own Autoconf
macros for use by other programs.  For instance, the <samp><span class="command">gettext</span></samp>
library supplies a macro <code>AM_GNU_GETTEXT</code> that should be used by
any package using <samp><span class="command">gettext</span></samp>.  When the library is installed, it
installs this macro so that <samp><span class="command">aclocal</span></samp> will find it.

   <p>A macro file's name should end in <samp><span class="file">.m4</span></samp>.  Such files should be
installed in <samp><span class="file">$(datadir)/aclocal</span></samp>.  This is as simple as writing:

<!-- Keep in sync with primary-prefix-couples-documented-valid.sh -->
<pre class="example">     aclocaldir = $(datadir)/aclocal
     aclocal_DATA = mymacro.m4 myothermacro.m4
</pre>
   <p class="noindent">Please do use <samp><span class="file">$(datadir)/aclocal</span></samp>, and not something based on
the result of &lsquo;<samp><span class="samp">aclocal --print-ac-dir</span></samp>&rsquo; (see <a href="#Hard_002dCoded-Install-Paths">Hard-Coded Install Paths</a>, for arguments).  It might also be helpful to suggest to
the user to add the <samp><span class="file">$(datadir)/aclocal</span></samp> directory to his
<samp><span class="env">ACLOCAL_PATH</span></samp> variable (see <a href="#ACLOCAL_005fPATH">ACLOCAL_PATH</a>) so that
<samp><span class="command">aclocal</span></samp> will find the <samp><span class="file">.m4</span></samp> files installed by your
package automatically.

   <p>A file of macros should be a series of properly quoted
<code>AC_DEFUN</code>'s (see <a href="autoconf.html#Macro-Definitions">Macro Definitions</a>).  The <samp><span class="command">aclocal</span></samp> programs also understands
<code>AC_REQUIRE</code> (see <a href="autoconf.html#Prerequisite-Macros">Prerequisite Macros</a>), so it is safe to put each macro in a separate file. 
Each file should have no side effects but macro definitions. 
Especially, any call to <code>AC_PREREQ</code> should be done inside the
defined macro, not at the beginning of the file.

   <p><a name="index-underquoted-_0040code_007bAC_005fDEFUN_007d-286"></a><a name="index-AC_005fDEFUN-287"></a><a name="index-AC_005fPREREQ-288"></a>
Starting with Automake 1.8, <samp><span class="command">aclocal</span></samp> will warn about all
underquoted calls to <code>AC_DEFUN</code>.  We realize this will annoy a
lot of people, because <samp><span class="command">aclocal</span></samp> was not so strict in the past
and many third party macros are underquoted; and we have to apologize
for this temporary inconvenience.  The reason we have to be stricter
is that a future implementation of <samp><span class="command">aclocal</span></samp> (see <a href="#Future-of-aclocal">Future of aclocal</a>) will have to temporarily include all of these third party
<samp><span class="file">.m4</span></samp> files, maybe several times, including even files that are
not actually needed.  Doing so should alleviate many problems of the
current implementation, however it requires a stricter style from the
macro authors.  Hopefully it is easy to revise the existing macros. 
For instance,

<pre class="example">     # bad style
     AC_PREREQ(2.68)
     AC_DEFUN(AX_FOOBAR,
     [AC_REQUIRE([AX_SOMETHING])dnl
     AX_FOO
     AX_BAR
     ])
</pre>
   <p class="noindent">should be rewritten as

<pre class="example">     AC_DEFUN([AX_FOOBAR],
     [AC_PREREQ([2.68])dnl
     AC_REQUIRE([AX_SOMETHING])dnl
     AX_FOO
     AX_BAR
     ])
</pre>
   <p>Wrapping the <code>AC_PREREQ</code> call inside the macro ensures that
Autoconf 2.68 will not be required if <code>AX_FOOBAR</code> is not actually
used.  Most importantly, quoting the first argument of <code>AC_DEFUN</code>
allows the macro to be redefined or included twice (otherwise this
first argument would be expanded during the second definition).  For
consistency we like to quote even arguments such as <code>2.68</code> that
do not require it.

   <p>If you have been directed here by the <samp><span class="command">aclocal</span></samp> diagnostic but
are not the maintainer of the implicated macro, you will want to
contact the maintainer of that macro.  Please make sure you have the
latest version of the macro and that the problem hasn't already been
reported before doing so: people tend to work faster when they aren't
flooded by mails.

   <p>Another situation where <samp><span class="command">aclocal</span></samp> is commonly used is to
manage macros that are used locally by the package, <a href="#Local-Macros">Local Macros</a>.

<div class="node">
<a name="Local-Macros"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Serials">Serials</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Extending-aclocal">Extending aclocal</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#aclocal-Invocation">aclocal Invocation</a>

</div>

<h4 class="subsection">6.3.4 Handling Local Macros</h4>

<p>Feature tests offered by Autoconf do not cover all needs.  People
often have to supplement existing tests with their own macros, or
with third-party macros.

   <p>There are two ways to organize custom macros in a package.

   <p>The first possibility (the historical practice) is to list all your
macros in <samp><span class="file">acinclude.m4</span></samp>.  This file will be included in
<samp><span class="file">aclocal.m4</span></samp> when you run <samp><span class="command">aclocal</span></samp>, and its macro(s) will
henceforth be visible to <samp><span class="command">autoconf</span></samp>.  However if it contains
numerous macros, it will rapidly become difficult to maintain, and it
will be almost impossible to share macros between packages.

   <p><a name="index-ACLOCAL_005fAMFLAGS-289"></a>The second possibility, which we do recommend, is to write each macro
in its own file and gather all of these files in a directory.  This
directory is usually called <samp><span class="file">m4/</span></samp>.  To build <samp><span class="file">aclocal.m4</span></samp>,
one should therefore instruct <samp><span class="command">aclocal</span></samp> to scan <samp><span class="file">m4/</span></samp>. 
From the command line, this is done with &lsquo;<samp><span class="samp">aclocal -I m4</span></samp>&rsquo;.  The
top-level <samp><span class="file">Makefile.am</span></samp> should also be updated to define

<pre class="example">     ACLOCAL_AMFLAGS = -I m4
</pre>
   <p><code>ACLOCAL_AMFLAGS</code> contains options to pass to <samp><span class="command">aclocal</span></samp>
when <samp><span class="file">aclocal.m4</span></samp> is to be rebuilt by <samp><span class="command">make</span></samp>.  This line is
also used by <samp><span class="command">autoreconf</span></samp> (see <a href="autoconf.html#autoreconf-Invocation">Using <samp><span class="command">autoreconf</span></samp> to Update <samp><span class="file">configure</span></samp> Scripts</a>) to run <samp><span class="command">aclocal</span></samp> with suitable
options, or by <samp><span class="command">autopoint</span></samp> (see <a href="gettext.html#autopoint-Invocation">Invoking the <samp><span class="command">autopoint</span></samp> Program</a>)
and <samp><span class="command">gettextize</span></samp> (see <a href="gettext.html#gettextize-Invocation">Invoking the <samp><span class="command">gettextize</span></samp> Program</a>) to locate
the place where Gettext's macros should be installed.  So even if you
do not really care about the rebuild rules, you should define
<code>ACLOCAL_AMFLAGS</code>.

   <p>When &lsquo;<samp><span class="samp">aclocal -I m4</span></samp>&rsquo; is run, it will build an <samp><span class="file">aclocal.m4</span></samp>
that <code>m4_include</code>s any file from <samp><span class="file">m4/</span></samp> that defines a
required macro.  Macros not found locally will still be searched in
system-wide directories, as explained in <a href="#Macro-Search-Path">Macro Search Path</a>.

   <p>Custom macros should be distributed for the same reason that
<samp><span class="file">configure.ac</span></samp> is: so that other people have all the sources of
your package if they want to work on it.  Actually, this distribution
happens automatically because all <code>m4_include</code>d files are
distributed.

   <p>However there is no consensus on the distribution of third-party
macros that your package may use.  Many libraries install their own
macro in the system-wide <samp><span class="command">aclocal</span></samp> directory (see <a href="#Extending-aclocal">Extending aclocal</a>).  For instance, Guile ships with a file called
<samp><span class="file">guile.m4</span></samp> that contains the macro <code>GUILE_FLAGS</code> that can
be used to define setup compiler and linker flags appropriate for
using Guile.  Using <code>GUILE_FLAGS</code> in <samp><span class="file">configure.ac</span></samp> will
cause <samp><span class="command">aclocal</span></samp> to copy <samp><span class="file">guile.m4</span></samp> into
<samp><span class="file">aclocal.m4</span></samp>, but as <samp><span class="file">guile.m4</span></samp> is not part of the project,
it will not be distributed.  Technically, that means a user who
needs to rebuild <samp><span class="file">aclocal.m4</span></samp> will have to install Guile first. 
This is probably OK, if Guile already is a requirement to build the
package.  However, if Guile is only an optional feature, or if your
package might run on architectures where Guile cannot be installed,
this requirement will hinder development.  An easy solution is to copy
such third-party macros in your local <samp><span class="file">m4/</span></samp> directory so they get
distributed.

   <p>Since Automake 1.10, <samp><span class="command">aclocal</span></samp> offers an option to copy these
system-wide third-party macros in your local macro directory, solving
the above problem.  Simply use:

<pre class="example">     ACLOCAL_AMFLAGS = -I m4 --install
</pre>
   <p class="noindent">With this setup, system-wide macros will be copied to <samp><span class="file">m4/</span></samp>
the first time you run <samp><span class="command">autoreconf</span></samp>.  Then the locally
installed macros will have precedence over the system-wide installed
macros each time <samp><span class="command">aclocal</span></samp> is run again.

   <p>One reason why you should keep <samp><span class="option">--install</span></samp> in the flags even
after the first run is that when you later edit <samp><span class="file">configure.ac</span></samp>
and depend on a new macro, this macro will be installed in your
<samp><span class="file">m4/</span></samp> automatically.  Another one is that serial numbers
(see <a href="#Serials">Serials</a>) can be used to update the macros in your source tree
automatically when new system-wide versions are installed.  A serial
number should be a single line of the form

<pre class="example">     #serial <var>nnn</var>
</pre>
   <p class="noindent">where <var>nnn</var> contains only digits and dots.  It should appear in
the M4 file before any macro definition.  It is a good practice to
maintain a serial number for each macro you distribute, even if you do
not use the <samp><span class="option">--install</span></samp> option of <samp><span class="command">aclocal</span></samp>: this allows
other people to use it.

<div class="node">
<a name="Serials"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Future-of-aclocal">Future of aclocal</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Local-Macros">Local Macros</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#aclocal-Invocation">aclocal Invocation</a>

</div>

<h4 class="subsection">6.3.5 Serial Numbers</h4>

<p><a name="index-serial-numbers-in-macros-290"></a><a name="index-macro-serial-numbers-291"></a><a name="index-g_t_0040code_007b_0023serial_007d-syntax-292"></a><a name="index-g_t_0040command_007baclocal_007d-and-serial-numbers-293"></a>
Because third-party macros defined in <samp><span class="file">*.m4</span></samp> files are naturally
shared between multiple projects, some people like to version them. 
This makes it easier to tell which of two M4 files is newer.  Since at
least 1996, the tradition is to use a &lsquo;<samp><span class="samp">#serial</span></samp>&rsquo; line for this.

   <p>A serial number should be a single line of the form

<pre class="example">     # serial <var>version</var>
</pre>
   <p class="noindent">where <var>version</var> is a version number containing only digits and
dots.  Usually people use a single integer, and they increment it each
time they change the macro (hence the name of &ldquo;serial&rdquo;).  Such a
line should appear in the M4 file before any macro definition.

   <p>The &lsquo;<samp><span class="samp">#</span></samp>&rsquo; must be the first character on the line,
and it is OK to have extra words after the version, as in

<pre class="example">     #serial <var>version</var> <var>garbage</var>
</pre>
   <p>Normally these serial numbers are completely ignored by
<samp><span class="command">aclocal</span></samp> and <samp><span class="command">autoconf</span></samp>, like any genuine comment. 
However when using <samp><span class="command">aclocal</span></samp>'s <samp><span class="option">--install</span></samp> feature, these
serial numbers will modify the way <samp><span class="command">aclocal</span></samp> selects the
macros to install in the package: if two files with the same basename
exist in your search path, and if at least one of them uses a
&lsquo;<samp><span class="samp">#serial</span></samp>&rsquo; line, <samp><span class="command">aclocal</span></samp> will ignore the file that has
the older &lsquo;<samp><span class="samp">#serial</span></samp>&rsquo; line (or the file that has none).

   <p>Note that a serial number applies to a whole M4 file, not to any macro
it contains.  A file can contains multiple macros, but only one
serial.

   <p>Here is a use case that illustrates the use of <samp><span class="option">--install</span></samp> and
its interaction with serial numbers.  Let's assume we maintain a
package called MyPackage, the <samp><span class="file">configure.ac</span></samp> of which requires a
third-party macro <code>AX_THIRD_PARTY</code> defined in
<samp><span class="file">/usr/share/aclocal/thirdparty.m4</span></samp> as follows:

<pre class="example">     # serial 1
     AC_DEFUN([AX_THIRD_PARTY], [...])
</pre>
   <p>MyPackage uses an <samp><span class="file">m4/</span></samp> directory to store local macros as
explained in <a href="#Local-Macros">Local Macros</a>, and has

<pre class="example">     ACLOCAL_AMFLAGS = -I m4 --install
</pre>
   <p class="noindent">in its top-level <samp><span class="file">Makefile.am</span></samp>.

   <p>Initially the <samp><span class="file">m4/</span></samp> directory is empty.  The first time we run
<samp><span class="command">autoreconf</span></samp>, it will fetch the options to pass to
<samp><span class="command">aclocal</span></samp> in <samp><span class="file">Makefile.am</span></samp>, and run &lsquo;<samp><span class="samp">aclocal -I m4
--install</span></samp>&rsquo;.  <samp><span class="command">aclocal</span></samp> will notice that

     <ul>
<li><samp><span class="file">configure.ac</span></samp> uses <code>AX_THIRD_PARTY</code>
<li>No local macros define <code>AX_THIRD_PARTY</code>
<li><samp><span class="file">/usr/share/aclocal/thirdparty.m4</span></samp> defines <code>AX_THIRD_PARTY</code>
with serial 1. 
</ul>

<p class="noindent">Because <samp><span class="file">/usr/share/aclocal/thirdparty.m4</span></samp> is a system-wide macro
and <samp><span class="command">aclocal</span></samp> was given the <samp><span class="option">--install</span></samp> option, it will
copy this file in <samp><span class="file">m4/thirdparty.m4</span></samp>, and output an
<samp><span class="file">aclocal.m4</span></samp> that contains &lsquo;<samp><span class="samp">m4_include([m4/thirdparty.m4])</span></samp>&rsquo;.

   <p>The next time &lsquo;<samp><span class="samp">aclocal -I m4 --install</span></samp>&rsquo; is run (either via
<samp><span class="command">autoreconf</span></samp>, by hand, or from the <samp><span class="file">Makefile</span></samp> rebuild
rules) something different happens.  <samp><span class="command">aclocal</span></samp> notices that

     <ul>
<li><samp><span class="file">configure.ac</span></samp> uses <code>AX_THIRD_PARTY</code>
<li><samp><span class="file">m4/thirdparty.m4</span></samp> defines <code>AX_THIRD_PARTY</code>
with serial 1. 
<li><samp><span class="file">/usr/share/aclocal/thirdparty.m4</span></samp> defines <code>AX_THIRD_PARTY</code>
with serial 1. 
</ul>

<p class="noindent">Because both files have the same serial number, <samp><span class="command">aclocal</span></samp> uses
the first it found in its search path order (see <a href="#Macro-Search-Path">Macro Search Path</a>).  <samp><span class="command">aclocal</span></samp> therefore ignores
<samp><span class="file">/usr/share/aclocal/thirdparty.m4</span></samp> and outputs an
<samp><span class="file">aclocal.m4</span></samp> that contains &lsquo;<samp><span class="samp">m4_include([m4/thirdparty.m4])</span></samp>&rsquo;.

   <p>Local directories specified with <samp><span class="option">-I</span></samp> are always searched before
system-wide directories, so a local file will always be preferred to
the system-wide file in case of equal serial numbers.

   <p>Now suppose the system-wide third-party macro is changed.  This can
happen if the package installing this macro is updated.  Let's suppose
the new macro has serial number 2.  The next time &lsquo;<samp><span class="samp">aclocal -I m4
--install</span></samp>&rsquo; is run the situation is the following:

     <ul>
<li><samp><span class="file">configure.ac</span></samp> uses <code>AX_THIRD_PARTY</code>
<li><samp><span class="file">m4/thirdparty.m4</span></samp> defines <code>AX_THIRD_PARTY</code>
with serial 1. 
<li><samp><span class="file">/usr/share/aclocal/thirdparty.m4</span></samp> defines <code>AX_THIRD_PARTY</code>
with serial 2. 
</ul>

<p class="noindent">When <samp><span class="command">aclocal</span></samp> sees a greater serial number, it immediately
forgets anything it knows from files that have the same basename and a
smaller serial number.  So after it has found
<samp><span class="file">/usr/share/aclocal/thirdparty.m4</span></samp> with serial 2,
<samp><span class="command">aclocal</span></samp> will proceed as if it had never seen
<samp><span class="file">m4/thirdparty.m4</span></samp>.  This brings us back to a situation similar
to that at the beginning of our example, where no local file defined
the macro.  <samp><span class="command">aclocal</span></samp> will install the new version of the
macro in <samp><span class="file">m4/thirdparty.m4</span></samp>, in this case overriding the old
version.  MyPackage just had its macro updated as a side effect of
running <samp><span class="command">aclocal</span></samp>.

   <p>If you are leery of letting <samp><span class="command">aclocal</span></samp> update your local macro,
you can run &lsquo;<samp><span class="samp">aclocal -I m4 --diff</span></samp>&rsquo; to review the changes
&lsquo;<samp><span class="samp">aclocal -I m4 --install</span></samp>&rsquo; would perform on these macros.

   <p>Finally, note that the <samp><span class="option">--force</span></samp> option of <samp><span class="command">aclocal</span></samp> has
absolutely no effect on the files installed by <samp><span class="option">--install</span></samp>.  For
instance, if you have modified your local macros, do not expect
<samp><span class="option">--install --force</span></samp> to replace the local macros by their
system-wide versions.  If you want to do so, simply erase the local
macros you want to revert, and run &lsquo;<samp><span class="samp">aclocal -I m4 --install</span></samp>&rsquo;.

<div class="node">
<a name="Future-of-aclocal"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Serials">Serials</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#aclocal-Invocation">aclocal Invocation</a>

</div>

<h4 class="subsection">6.3.6 The Future of <samp><span class="command">aclocal</span></samp></h4>

<p><a name="index-g_t_0040command_007baclocal_007d_0027s-scheduled-death-294"></a>
<samp><span class="command">aclocal</span></samp> is expected to disappear.  This feature really
should not be offered by Automake.  Automake should focus on
generating <samp><span class="file">Makefile</span></samp>s; dealing with M4 macros really is
Autoconf's job.  The fact that some people install Automake just to use
<samp><span class="command">aclocal</span></samp>, but do not use <samp><span class="command">automake</span></samp> otherwise is an
indication of how that feature is misplaced.

   <p>The new implementation will probably be done slightly differently. 
For instance, it could enforce the <samp><span class="file">m4/</span></samp>-style layout discussed in
<a href="#Local-Macros">Local Macros</a>.

   <p>We have no idea when and how this will happen.  This has been
discussed several times in the past, but someone still has to commit
to that non-trivial task.

   <p>From the user point of view, <samp><span class="command">aclocal</span></samp>'s removal might turn
out to be painful.  There is a simple precaution that you may take to
make that switch more seamless: never call <samp><span class="command">aclocal</span></samp> yourself. 
Keep this guy under the exclusive control of <samp><span class="command">autoreconf</span></samp> and
Automake's rebuild rules.  Hopefully you won't need to worry about
things breaking, when <samp><span class="command">aclocal</span></samp> disappears, because everything
will have been taken care of.  If otherwise you used to call
<samp><span class="command">aclocal</span></samp> directly yourself or from some script, you will
quickly notice the change.

   <p>Many packages come with a script called <samp><span class="file">bootstrap.sh</span></samp> or
<samp><span class="file">autogen.sh</span></samp>, that will just call <samp><span class="command">aclocal</span></samp>,
<samp><span class="command">libtoolize</span></samp>, <samp><span class="command">gettextize</span></samp> or <samp><span class="command">autopoint</span></samp>,
<samp><span class="command">autoconf</span></samp>, <samp><span class="command">autoheader</span></samp>, and <samp><span class="command">automake</span></samp> in
the right order.  Actually this is precisely what <samp><span class="command">autoreconf</span></samp>
can do for you.  If your package has such a <samp><span class="file">bootstrap.sh</span></samp> or
<samp><span class="file">autogen.sh</span></samp> script, consider using <samp><span class="command">autoreconf</span></samp>.  That
should simplify its logic a lot (less things to maintain, yum!), it's
even likely you will not need the script anymore, and more to the point
you will not call <samp><span class="command">aclocal</span></samp> directly anymore.

   <p>For the time being, third-party packages should continue to install
public macros into <samp><span class="file">/usr/share/aclocal/</span></samp>.  If <samp><span class="command">aclocal</span></samp>
is replaced by another tool it might make sense to rename the
directory, but supporting <samp><span class="file">/usr/share/aclocal/</span></samp> for backward
compatibility should be really easy provided all macros are properly
written (see <a href="#Extending-aclocal">Extending aclocal</a>).

<div class="node">
<a name="Macros"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#aclocal-Invocation">aclocal Invocation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#configure">configure</a>

</div>

<h3 class="section">6.4 Autoconf macros supplied with Automake</h3>

<p>Automake ships with several Autoconf macros that you can use from your
<samp><span class="file">configure.ac</span></samp>.  When you use one of them it will be included by
<samp><span class="command">aclocal</span></samp> in <samp><span class="file">aclocal.m4</span></samp>.

<ul class="menu">
<li><a accesskey="1" href="#Public-Macros">Public Macros</a>:                Macros that you can use. 
<li><a accesskey="2" href="#Obsolete-Macros">Obsolete Macros</a>:              Macros that will soon be removed. 
<li><a accesskey="3" href="#Private-Macros">Private Macros</a>:               Macros that you should not use. 
</ul>

<!-- consider generating the following subsections automatically from m4 files. -->
<div class="node">
<a name="Public-Macros"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Obsolete-Macros">Obsolete Macros</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Macros">Macros</a>

</div>

<h4 class="subsection">6.4.1 Public Macros</h4>

     <dl>
<dt><code>AM_INIT_AUTOMAKE([OPTIONS])</code><dd><a name="index-AM_005fINIT_005fAUTOMAKE-295"></a>Runs many macros required for proper operation of the generated Makefiles.

     <p><a name="index-AUTOMAKE_005fOPTIONS-296"></a>Today, <code>AM_INIT_AUTOMAKE</code> is called with a single argument: a
space-separated list of Automake options that should
be applied to every <samp><span class="file">Makefile.am</span></samp> in the tree.  The effect is as if
each option were listed in <code>AUTOMAKE_OPTIONS</code> (see <a href="#Options">Options</a>).

     <p><a name="index-AC_005fINIT-297"></a>This macro can also be called in <em>another, deprecated form</em> (support
for which will be <em>removed in the next major Automake release (1.13)</em>):
<code>AM_INIT_AUTOMAKE(PACKAGE, VERSION, [NO-DEFINE])</code>.  In this form,
there are two required arguments: the package and the version number. 
This form is obsolete because the <var>package</var> and <var>version</var> can
be obtained from Autoconf's <code>AC_INIT</code> macro (which itself has an
old and a new form).

     <p><a name="Modernize-AM_005fINIT_005fAUTOMAKE-invocation"></a>If your <samp><span class="file">configure.ac</span></samp> has:

     <pre class="example">          AC_INIT([src/foo.c])
          AM_INIT_AUTOMAKE([mumble], [1.5])
</pre>
     <p class="noindent">you should modernize it as follows:

     <pre class="example">          AC_INIT([mumble], [1.5])
          AC_CONFIG_SRCDIR([src/foo.c])
          AM_INIT_AUTOMAKE
</pre>
     <p>Note that if you're upgrading your <samp><span class="file">configure.ac</span></samp> from an earlier
version of Automake, it is not always correct to simply move the
package and version arguments from <code>AM_INIT_AUTOMAKE</code> directly to
<code>AC_INIT</code>, as in the example above.  The first argument to
<code>AC_INIT</code> should be the name of your package (e.g., &lsquo;<samp><span class="samp">GNU
Automake</span></samp>&rsquo;), not the tarball name (e.g., &lsquo;<samp><span class="samp">automake</span></samp>&rsquo;) that you used
to pass to <code>AM_INIT_AUTOMAKE</code>.  Autoconf tries to derive a
tarball name from the package name, which should work for most but not
all package names.  (If it doesn't work for yours, you can use the
four-argument form of <code>AC_INIT</code> to provide the tarball name
explicitly).

     <p><a name="index-g_t_0040code_007bPACKAGE_007d_002c-prevent-definition-298"></a><a name="index-g_t_0040code_007bVERSION_007d_002c-prevent-definition-299"></a><a name="index-no_002ddefine-300"></a>By default this macro <code>AC_DEFINE</code>'s <code>PACKAGE</code> and
<code>VERSION</code>.  This can be avoided by passing the <samp><span class="option">no-define</span></samp>
option:
     <pre class="example">          AM_INIT_AUTOMAKE([gnits 1.5 no-define dist-bzip2])
</pre>
     <br><dt><code>AM_PATH_LISPDIR</code><dd><a name="index-AM_005fPATH_005fLISPDIR-301"></a><a name="index-EMACS-302"></a><a name="index-lispdir-303"></a>Searches for the program <samp><span class="command">emacs</span></samp>, and, if found, sets the
output variable <code>lispdir</code> to the full path to Emacs' site-lisp
directory.

     <p>Note that this test assumes the <samp><span class="command">emacs</span></samp> found to be a version
that supports Emacs Lisp (such as GNU Emacs or XEmacs).  Other
emacsen can cause this test to hang (some, like old versions of
MicroEmacs, start up in interactive mode, requiring <kbd>C-x C-c</kbd> to
exit, which is hardly obvious for a non-emacs user).  In most cases,
however, you should be able to use <kbd>C-c</kbd> to kill the test.  In
order to avoid problems, you can set <samp><span class="env">EMACS</span></samp> to &ldquo;no&rdquo; in the
environment, or use the <samp><span class="option">--with-lispdir</span></samp> option to
<samp><span class="command">configure</span></samp> to explicitly set the correct path (if you're sure
you have an <samp><span class="command">emacs</span></samp> that supports Emacs Lisp).

     <br><dt><code>AM_PROG_AR(</code><span class="roman">[</span><var>act-if-fail</var><span class="roman">]</span><code>)</code><dd><a name="index-AM_005fPROG_005fAR-304"></a><a name="index-AR-305"></a>You must use this macro when you use the archiver in your project, if
you want support for unusual archivers such as Microsoft <samp><span class="command">lib</span></samp>. 
The content of the optional argument is executed if the archiver
interface is not recognized; the default action is to abort configure
with an error message.

     <br><dt><code>AM_PROG_AS</code><dd><a name="index-AM_005fPROG_005fAS-306"></a><a name="index-CCAS-307"></a><a name="index-CCASFLAGS-308"></a>Use this macro when you have assembly code in your project.  This will
choose the assembler for you (by default the C compiler) and set
<code>CCAS</code>, and will also set <code>CCASFLAGS</code> if required.

     <br><dt><code>AM_PROG_CC_C_O</code><dd><a name="index-AM_005fPROG_005fCC_005fC_005fO-309"></a><a name="index-AC_005fPROG_005fCC_005fC_005fO-310"></a>This is like <code>AC_PROG_CC_C_O</code>, but it generates its results in
the manner required by Automake.  You must use this instead of
<code>AC_PROG_CC_C_O</code> when you need this functionality, that is, when
using per-target flags or subdir-objects with C sources.

     <br><dt><code>AM_PROG_LEX</code><dd><a name="index-AM_005fPROG_005fLEX-311"></a><a name="index-AC_005fPROG_005fLEX-312"></a><a name="index-HP_002dUX-10_002c-_0040command_007blex_007d-problems-313"></a><a name="index-g_t_0040command_007blex_007d-problems-with-HP_002dUX-10-314"></a>Like <code>AC_PROG_LEX</code> (see <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>), but uses the
<samp><span class="command">missing</span></samp> script on systems that do not have <samp><span class="command">lex</span></samp>. 
HP-UX 10 is one such system.

     <br><dt><code>AM_PROG_GCJ</code><dd><a name="index-AM_005fPROG_005fGCJ-315"></a><a name="index-GCJ-316"></a><a name="index-GCJFLAGS-317"></a>This macro finds the <samp><span class="command">gcj</span></samp> program or causes an error.  It sets
<code>GCJ</code> and <code>GCJFLAGS</code>.  <samp><span class="command">gcj</span></samp> is the Java front-end to the
GNU Compiler Collection.

     <br><dt><code>AM_PROG_UPC([</code><var>compiler-search-list</var><code>])</code><dd><a name="index-AM_005fPROG_005fUPC-318"></a><a name="index-UPC-319"></a>Find a compiler for Unified Parallel C and define the <code>UPC</code>
variable.  The default <var>compiler-search-list</var> is &lsquo;<samp><span class="samp">upcc upc</span></samp>&rsquo;. 
This macro will abort <samp><span class="command">configure</span></samp> if no Unified Parallel C
compiler is found.

     <br><dt><code>AM_MISSING_PROG(</code><var>name</var><code>, </code><var>program</var><code>)</code><dd><a name="index-AM_005fMISSING_005fPROG-320"></a><a name="index-MISSING-321"></a>Find a maintainer tool <var>program</var> and define the <var>name</var>
environment variable with its location.  If <var>program</var> is not
detected, then <var>name</var> will instead invoke the <samp><span class="command">missing</span></samp>
script, in order to give useful advice to the user about the missing
maintainer tool.  See <a href="#maintainer_002dmode">maintainer-mode</a>, for more information on when
the <samp><span class="command">missing</span></samp> script is appropriate.

     <br><dt><code>AM_SILENT_RULES</code><dd><a name="index-AM_005fSILENT_005fRULES-322"></a>Enable the machinery for less verbose build output (see <a href="#Options">Options</a>).

     <br><dt><code>AM_WITH_DMALLOC</code><dd><a name="index-AM_005fWITH_005fDMALLOC-323"></a><a name="index-g_t_0040command_007bdmalloc_007d_002c-support-for-324"></a><a name="index-WITH_005fDMALLOC-325"></a><a name="index-g_t_002d_002dwith_002ddmalloc-326"></a>Add support for the <a href="http://dmalloc.com/">Dmalloc package</a>.  If
the user runs <samp><span class="command">configure</span></samp> with <samp><span class="option">--with-dmalloc</span></samp>, then
define <code>WITH_DMALLOC</code> and add <samp><span class="option">-ldmalloc</span></samp> to <code>LIBS</code>.

</dl>

<div class="node">
<a name="Obsolete-Macros"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Private-Macros">Private Macros</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Public-Macros">Public Macros</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Macros">Macros</a>

</div>

<h4 class="subsection">6.4.2 Obsolete Macros</h4>

<p><a name="index-obsolete-macros-327"></a><a name="index-autoupdate-328"></a>
Although using some of the following macros was required in past
releases, you should not use any of them in new code.  <em>All
these macros will be removed in the next major Automake version</em>;
if you are still using them, running <samp><span class="command">autoupdate</span></samp> should
adjust your <samp><span class="file">configure.ac</span></samp> automatically (see <a href="autoconf.html#autoupdate-Invocation">Using <samp><span class="command">autoupdate</span></samp> to Modernize <samp><span class="file">configure.ac</span></samp></a>). 
<em>Do it NOW!</em>

     <dl>
<dt><code>AM_CONFIG_HEADER</code><dd><a name="index-AM_005fCONFIG_005fHEADER-329"></a>Automake will generate rules to automatically regenerate the config
header.  This obsolete macro is a synonym of <code>AC_CONFIG_HEADERS</code>
today (see <a href="#Optional">Optional</a>).

     <br><dt><code>AM_HEADER_TIOCGWINSZ_NEEDS_SYS_IOCTL</code><dd><a name="index-AM_005fHEADER_005fTIOCGWINSZ_005fNEEDS_005fSYS_005fIOCTL-330"></a>If the use of <code>TIOCGWINSZ</code> requires <samp><span class="file">&lt;sys/ioctl.h&gt;</span></samp>, then
define <code>GWINSZ_IN_SYS_IOCTL</code>.  Otherwise <code>TIOCGWINSZ</code> can be
found in <samp><span class="file">&lt;termios.h&gt;</span></samp>.  This macro is obsolete, you should
use Autoconf's <code>AC_HEADER_TIOCGWINSZ</code> instead.

     <br><dt><code>AM_PROG_MKDIR_P</code><dd><a name="index-AM_005fPROG_005fMKDIR_005fP-331"></a><a name="index-g_t_0040code_007bmkdir-_002dp_007d_002c-macro-check-332"></a><a name="index-MKDIR_005fP-333"></a><a name="index-mkdir_005fp-334"></a>
From Automake 1.8 to 1.9.6 this macro used to define the output
variable <code>mkdir_p</code> to one of <code>mkdir -p</code>, <code>install-sh
-d</code>, or <code>mkinstalldirs</code>.

     <p>Nowadays Autoconf provides a similar functionality with
<code>AC_PROG_MKDIR_P</code> (see <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>), however this defines
the output variable <code>MKDIR_P</code> instead.  In case you are still
using the <code>AM_PROG_MKDIR_P</code> macro in your <samp><span class="file">configure.ac</span></samp>,
or its provided variable <code>$(mkdir_p)</code> in your <samp><span class="file">Makefile.am</span></samp>,
you are advised to switch ASAP to the more modern Autoconf-provided
interface instead; both the macro and the variable <em>will be
removed</em> in the next major Automake release.

     <br><dt><code>AM_SYS_POSIX_TERMIOS</code><dd><a name="index-AM_005fSYS_005fPOSIX_005fTERMIOS-335"></a><a name="index-POSIX-termios-headers-336"></a><a name="index-termios-POSIX-headers-337"></a>Check to see if POSIX termios headers and functions are available on the
system.  If so, set the shell variable <code>am_cv_sys_posix_termios</code> to
&lsquo;<samp><span class="samp">yes</span></samp>&rsquo;.  If not, set the variable to &lsquo;<samp><span class="samp">no</span></samp>&rsquo;.  This macro is obsolete,
you should use Autoconf's <code>AC_SYS_POSIX_TERMIOS</code> instead.

   </dl>

<div class="node">
<a name="Private-Macros"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Obsolete-Macros">Obsolete Macros</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Macros">Macros</a>

</div>

<h4 class="subsection">6.4.3 Private Macros</h4>

<p>The following macros are private macros you should not call directly. 
They are called by the other public macros when appropriate.  Do not
rely on them, as they might be changed in a future version.  Consider
them as implementation details; or better, do not consider them at all:
skip this section!

     <dl>
<dt><code>_AM_DEPENDENCIES</code><a name="index-g_t_005fAM_005fDEPENDENCIES-338"></a><dt><code>AM_SET_DEPDIR</code><a name="index-AM_005fSET_005fDEPDIR-339"></a><dt><code>AM_DEP_TRACK</code><a name="index-AM_005fDEP_005fTRACK-340"></a><dt><code>AM_OUTPUT_DEPENDENCY_COMMANDS</code><a name="index-AM_005fOUTPUT_005fDEPENDENCY_005fCOMMANDS-341"></a><dd>These macros are used to implement Automake's automatic dependency
tracking scheme.  They are called automatically by Automake when
required, and there should be no need to invoke them manually.

     <br><dt><code>AM_MAKE_INCLUDE</code><a name="index-AM_005fMAKE_005fINCLUDE-342"></a><dd>This macro is used to discover how the user's <samp><span class="command">make</span></samp> handles
<code>include</code> statements.  This macro is automatically invoked when
needed; there should be no need to invoke it manually.

     <br><dt><code>AM_PROG_INSTALL_STRIP</code><a name="index-AM_005fPROG_005fINSTALL_005fSTRIP-343"></a><dd>This is used to find a version of <code>install</code> that can be used to
strip a program at installation time.  This macro is automatically
included when required.

     <br><dt><code>AM_SANITY_CHECK</code><a name="index-AM_005fSANITY_005fCHECK-344"></a><dd>This checks to make sure that a file created in the build directory is
newer than a file in the source directory.  This can fail on systems
where the clock is set incorrectly.  This macro is automatically run
from <code>AM_INIT_AUTOMAKE</code>.

   </dl>

<div class="node">
<a name="Directories"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Programs">Programs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#configure">configure</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">7 Directories</h2>

<p>For simple projects that distribute all files in the same directory
it is enough to have a single <samp><span class="file">Makefile.am</span></samp> that builds
everything in place.

   <p>In larger projects, it is common to organize files in different
directories, in a tree.  For example, there could be a directory
for the program's source, one for the testsuite, and one for the
documentation; or, for very large projects, there could be one
directory per program, per library or per module.

   <p>The traditional approach is to build these subdirectories recursively,
employing <em>make recursion</em>: each directory contains its
own <samp><span class="file">Makefile</span></samp>, and when <samp><span class="command">make</span></samp> is run from the top-level
directory, it enters each subdirectory in turn, and invokes there a
new <samp><span class="command">make</span></samp> instance to build the directory's contents.

   <p>Because this approach is very widespread, Automake offers built-in
support for it.  However, it is worth nothing that the use of make
recursion has its own serious issues and drawbacks, and that it's
well possible to have packages with a multi directory layout that
make little or no use of such recursion (examples of such packages
are GNU Bison and GNU Automake itself); see also the <a href="#Alternative">Alternative</a>
section below.

<ul class="menu">
<li><a accesskey="1" href="#Subdirectories">Subdirectories</a>:               Building subdirectories recursively
<li><a accesskey="2" href="#Conditional-Subdirectories">Conditional Subdirectories</a>:   Conditionally not building directories
<li><a accesskey="3" href="#Alternative">Alternative</a>:                  Subdirectories without recursion
<li><a accesskey="4" href="#Subpackages">Subpackages</a>:                  Nesting packages
</ul>

<div class="node">
<a name="Subdirectories"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Conditional-Subdirectories">Conditional Subdirectories</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Directories">Directories</a>

</div>

<h3 class="section">7.1 Recursing subdirectories</h3>

<p><a name="index-g_t_0040code_007bSUBDIRS_007d_002c-explained-345"></a>
In packages using make recursion, the top level <samp><span class="file">Makefile.am</span></samp> must
tell Automake which subdirectories are to be built.  This is done via
the <code>SUBDIRS</code> variable. 
<a name="index-SUBDIRS-346"></a>
The <code>SUBDIRS</code> variable holds a list of subdirectories in which
building of various sorts can occur.  The rules for many targets
(e.g., <code>all</code>) in the generated <samp><span class="file">Makefile</span></samp> will run commands
both locally and in all specified subdirectories.  Note that the
directories listed in <code>SUBDIRS</code> are not required to contain
<samp><span class="file">Makefile.am</span></samp>s; only <samp><span class="file">Makefile</span></samp>s (after configuration). 
This allows inclusion of libraries from packages that do not use
Automake (such as <code>gettext</code>; see also <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a>).

   <p>In packages that use subdirectories, the top-level <samp><span class="file">Makefile.am</span></samp> is
often very short.  For instance, here is the <samp><span class="file">Makefile.am</span></samp> from the
GNU Hello distribution:

<pre class="example">     EXTRA_DIST = BUGS ChangeLog.O README-alpha
     SUBDIRS = doc intl po src tests
</pre>
   <p>When Automake invokes <samp><span class="command">make</span></samp> in a subdirectory, it uses the value
of the <code>MAKE</code> variable.  It passes the value of the variable
<code>AM_MAKEFLAGS</code> to the <samp><span class="command">make</span></samp> invocation; this can be set in
<samp><span class="file">Makefile.am</span></samp> if there are flags you must always pass to
<samp><span class="command">make</span></samp>. 
<a name="index-MAKE-347"></a><a name="index-AM_005fMAKEFLAGS-348"></a>
The directories mentioned in <code>SUBDIRS</code> are usually direct
children of the current directory, each subdirectory containing its
own <samp><span class="file">Makefile.am</span></samp> with a <code>SUBDIRS</code> pointing to deeper
subdirectories.  Automake can be used to construct packages of
arbitrary depth this way.

   <p>By default, Automake generates <samp><span class="file">Makefiles</span></samp> that work depth-first
in postfix order: the subdirectories are built before the current
directory.  However, it is possible to change this ordering.  You can
do this by putting &lsquo;<samp><span class="samp">.</span></samp>&rsquo; into <code>SUBDIRS</code>.  For instance,
putting &lsquo;<samp><span class="samp">.</span></samp>&rsquo; first will cause a prefix ordering of
directories.

   <p>Using

<pre class="example">     SUBDIRS = lib src . test
</pre>
   <p class="noindent">will cause <samp><span class="file">lib/</span></samp> to be built before <samp><span class="file">src/</span></samp>, then the
current directory will be built, finally the <samp><span class="file">test/</span></samp> directory
will be built.  It is customary to arrange test directories to be
built after everything else since they are meant to test what has
been constructed.

<div class="node">
<a name="Conditional-Subdirectories"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Alternative">Alternative</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Subdirectories">Subdirectories</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Directories">Directories</a>

</div>

<h3 class="section">7.2 Conditional Subdirectories</h3>

<p><a name="index-Subdirectories_002c-building-conditionally-349"></a><a name="index-Conditional-subdirectories-350"></a><a name="index-g_t_0040code_007bSUBDIRS_007d_002c-conditional-351"></a><a name="index-Conditional-_0040code_007bSUBDIRS_007d-352"></a>
It is possible to define the <code>SUBDIRS</code> variable conditionally if,
like in the case of GNU Inetutils, you want to only build a subset of
the entire package.

   <p>To illustrate how this works, let's assume we have two directories
<samp><span class="file">src/</span></samp> and <samp><span class="file">opt/</span></samp>.  <samp><span class="file">src/</span></samp> should always be built, but we
want to decide in <samp><span class="command">configure</span></samp> whether <samp><span class="file">opt/</span></samp> will be built
or not.  (For this example we will assume that <samp><span class="file">opt/</span></samp> should be
built when the variable &lsquo;<samp><span class="samp">$want_opt</span></samp>&rsquo; was set to &lsquo;<samp><span class="samp">yes</span></samp>&rsquo;.)

   <p>Running <samp><span class="command">make</span></samp> should thus recurse into <samp><span class="file">src/</span></samp> always, and
then maybe in <samp><span class="file">opt/</span></samp>.

   <p>However &lsquo;<samp><span class="samp">make dist</span></samp>&rsquo; should always recurse into both <samp><span class="file">src/</span></samp>
and <samp><span class="file">opt/</span></samp>.  Because <samp><span class="file">opt/</span></samp> should be distributed even if it
is not needed in the current configuration.  This means
<samp><span class="file">opt/Makefile</span></samp> should be created <em>unconditionally</em>.

   <p>There are two ways to setup a project like this.  You can use Automake
conditionals (see <a href="#Conditionals">Conditionals</a>) or use Autoconf <code>AC_SUBST</code>
variables (see <a href="autoconf.html#Setting-Output-Variables">Setting Output Variables</a>).  Using Automake
conditionals is the preferred solution.  Before we illustrate these
two possibilities, let's introduce <code>DIST_SUBDIRS</code>.

<ul class="menu">
<li><a accesskey="1" href="#SUBDIRS-vs-DIST_005fSUBDIRS">SUBDIRS vs DIST_SUBDIRS</a>:      Two sets of directories
<li><a accesskey="2" href="#Subdirectories-with-AM_005fCONDITIONAL">Subdirectories with AM_CONDITIONAL</a>:   Specifying conditional subdirectories
<li><a accesskey="3" href="#Subdirectories-with-AC_005fSUBST">Subdirectories with AC_SUBST</a>:   Another way for conditional recursion
<li><a accesskey="4" href="#Unconfigured-Subdirectories">Unconfigured Subdirectories</a>:   Not even creating a &lsquo;<samp><span class="samp">Makefile</span></samp>&rsquo;
</ul>

<div class="node">
<a name="SUBDIRS-vs-DIST_SUBDIRS"></a>
<a name="SUBDIRS-vs-DIST_005fSUBDIRS"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Subdirectories-with-AM_005fCONDITIONAL">Subdirectories with AM_CONDITIONAL</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Conditional-Subdirectories">Conditional Subdirectories</a>

</div>

<h4 class="subsection">7.2.1 <code>SUBDIRS</code> vs. <code>DIST_SUBDIRS</code></h4>

<p><a name="index-g_t_0040code_007bDIST_005fSUBDIRS_007d_002c-explained-353"></a>
Automake considers two sets of directories, defined by the variables
<code>SUBDIRS</code> and <code>DIST_SUBDIRS</code>.

   <p><code>SUBDIRS</code> contains the subdirectories of the current directory
that must be built (see <a href="#Subdirectories">Subdirectories</a>).  It must be defined
manually; Automake will never guess a directory is to be built.  As we
will see in the next two sections, it is possible to define it
conditionally so that some directory will be omitted from the build.

   <p><code>DIST_SUBDIRS</code> is used in rules that need to recurse in all
directories, even those that have been conditionally left out of the
build.  Recall our example where we may not want to build subdirectory
<samp><span class="file">opt/</span></samp>, but yet we want to distribute it?  This is where
<code>DIST_SUBDIRS</code> comes into play: &lsquo;<samp><span class="samp">opt</span></samp>&rsquo; may not appear in
<code>SUBDIRS</code>, but it must appear in <code>DIST_SUBDIRS</code>.

   <p>Precisely, <code>DIST_SUBDIRS</code> is used by &lsquo;<samp><span class="samp">make
maintainer-clean</span></samp>&rsquo;, &lsquo;<samp><span class="samp">make distclean</span></samp>&rsquo; and &lsquo;<samp><span class="samp">make dist</span></samp>&rsquo;.  All
other recursive rules use <code>SUBDIRS</code>.

   <p>If <code>SUBDIRS</code> is defined conditionally using Automake
conditionals, Automake will define <code>DIST_SUBDIRS</code> automatically
from the possible values of <code>SUBDIRS</code> in all conditions.

   <p>If <code>SUBDIRS</code> contains <code>AC_SUBST</code> variables,
<code>DIST_SUBDIRS</code> will not be defined correctly because Automake
does not know the possible values of these variables.  In this case
<code>DIST_SUBDIRS</code> needs to be defined manually.

<div class="node">
<a name="Subdirectories-with-AM_CONDITIONAL"></a>
<a name="Subdirectories-with-AM_005fCONDITIONAL"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Subdirectories-with-AC_005fSUBST">Subdirectories with AC_SUBST</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#SUBDIRS-vs-DIST_005fSUBDIRS">SUBDIRS vs DIST_SUBDIRS</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Conditional-Subdirectories">Conditional Subdirectories</a>

</div>

<h4 class="subsection">7.2.2 Subdirectories with <code>AM_CONDITIONAL</code></h4>

<p><a name="index-g_t_0040code_007bSUBDIRS_007d-and-_0040code_007bAM_005fCONDITIONAL_007d-354"></a><a name="index-g_t_0040code_007bAM_005fCONDITIONAL_007d-and-_0040code_007bSUBDIRS_007d-355"></a>
<!-- Keep in sync with subdir-am-cond.sh -->

   <p><samp><span class="file">configure</span></samp> should output the <samp><span class="file">Makefile</span></samp> for each directory
and define a condition into which <samp><span class="file">opt/</span></samp> should be built.

<pre class="example">     ...
     AM_CONDITIONAL([COND_OPT], [test "$want_opt" = yes])
     AC_CONFIG_FILES([Makefile src/Makefile opt/Makefile])
     ...
</pre>
   <p>Then <code>SUBDIRS</code> can be defined in the top-level <samp><span class="file">Makefile.am</span></samp>
as follows.

<pre class="example">     if COND_OPT
       MAYBE_OPT = opt
     endif
     SUBDIRS = src $(MAYBE_OPT)
</pre>
   <p>As you can see, running <samp><span class="command">make</span></samp> will rightly recurse into
<samp><span class="file">src/</span></samp> and maybe <samp><span class="file">opt/</span></samp>.

   <p><a name="index-DIST_005fSUBDIRS-356"></a>As you can't see, running &lsquo;<samp><span class="samp">make dist</span></samp>&rsquo; will recurse into both
<samp><span class="file">src/</span></samp> and <samp><span class="file">opt/</span></samp> directories because &lsquo;<samp><span class="samp">make dist</span></samp>&rsquo;, unlike
&lsquo;<samp><span class="samp">make all</span></samp>&rsquo;, doesn't use the <code>SUBDIRS</code> variable.  It uses the
<code>DIST_SUBDIRS</code> variable.

   <p>In this case Automake will define &lsquo;<samp><span class="samp">DIST_SUBDIRS = src opt</span></samp>&rsquo;
automatically because it knows that <code>MAYBE_OPT</code> can contain
&lsquo;<samp><span class="samp">opt</span></samp>&rsquo; in some condition.

<div class="node">
<a name="Subdirectories-with-AC_SUBST"></a>
<a name="Subdirectories-with-AC_005fSUBST"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Unconfigured-Subdirectories">Unconfigured Subdirectories</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Subdirectories-with-AM_005fCONDITIONAL">Subdirectories with AM_CONDITIONAL</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Conditional-Subdirectories">Conditional Subdirectories</a>

</div>

<h4 class="subsection">7.2.3 Subdirectories with <code>AC_SUBST</code></h4>

<p><a name="index-g_t_0040code_007bSUBDIRS_007d-and-_0040code_007bAC_005fSUBST_007d-357"></a><a name="index-g_t_0040code_007bAC_005fSUBST_007d-and-_0040code_007bSUBDIRS_007d-358"></a>
<!-- Keep in sync with subdir-ac-subst.sh -->

   <p>Another possibility is to define <code>MAYBE_OPT</code> from
<samp><span class="file">./configure</span></samp> using <code>AC_SUBST</code>:

<pre class="example">     ...
     if test "$want_opt" = yes; then
       MAYBE_OPT=opt
     else
       MAYBE_OPT=
     fi
     AC_SUBST([MAYBE_OPT])
     AC_CONFIG_FILES([Makefile src/Makefile opt/Makefile])
     ...
</pre>
   <p>In this case the top-level <samp><span class="file">Makefile.am</span></samp> should look as follows.

<pre class="example">     SUBDIRS = src $(MAYBE_OPT)
     DIST_SUBDIRS = src opt
</pre>
   <p>The drawback is that since Automake cannot guess what the possible
values of <code>MAYBE_OPT</code> are, it is necessary to define
<code>DIST_SUBDIRS</code>.

<div class="node">
<a name="Unconfigured-Subdirectories"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Subdirectories-with-AC_005fSUBST">Subdirectories with AC_SUBST</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Conditional-Subdirectories">Conditional Subdirectories</a>

</div>

<h4 class="subsection">7.2.4 Unconfigured Subdirectories</h4>

<p><a name="index-Subdirectories_002c-configured-conditionally-359"></a>
The semantics of <code>DIST_SUBDIRS</code> are often misunderstood by some
users that try to <em>configure and build</em> subdirectories
conditionally.  Here by configuring we mean creating the
<samp><span class="file">Makefile</span></samp> (it might also involve running a nested
<samp><span class="command">configure</span></samp> script: this is a costly operation that explains
why people want to do it conditionally, but only the <samp><span class="file">Makefile</span></samp>
is relevant to the discussion).

   <p>The above examples all assume that every <samp><span class="file">Makefile</span></samp> is created,
even in directories that are not going to be built.  The simple reason
is that we want &lsquo;<samp><span class="samp">make dist</span></samp>&rsquo; to distribute even the directories
that are not being built (e.g., platform-dependent code), hence
<samp><span class="file">make dist</span></samp> must recurse into the subdirectory, hence this
directory must be configured and appear in <code>DIST_SUBDIRS</code>.

   <p>Building packages that do not configure every subdirectory is a tricky
business, and we do not recommend it to the novice as it is easy to
produce an incomplete tarball by mistake.  We will not discuss this
topic in depth here, yet for the adventurous here are a few rules to
remember.

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
     <ul>
<li><code>SUBDIRS</code> should always be a subset of <code>DIST_SUBDIRS</code>.

     <p>It makes little sense to have a directory in <code>SUBDIRS</code> that
is not in <code>DIST_SUBDIRS</code>.  Think of the former as a way to tell
which directories listed in the latter should be built. 
<li>Any directory listed in <code>DIST_SUBDIRS</code> and <code>SUBDIRS</code>
must be configured.

     <p>I.e., the <samp><span class="file">Makefile</span></samp> must exists or the recursive <samp><span class="command">make</span></samp>
rules will not be able to process the directory. 
<li>Any configured directory must be listed in <code>DIST_SUBDIRS</code>.

     <p>So that the cleaning rules remove the generated <samp><span class="file">Makefile</span></samp>s. 
It would be correct to see <code>DIST_SUBDIRS</code> as a variable that
lists all the directories that have been configured. 
</ul>
   </td></tr></table>

   <p>In order to prevent recursion in some unconfigured directory you
must therefore ensure that this directory does not appear in
<code>DIST_SUBDIRS</code> (and <code>SUBDIRS</code>).  For instance, if you define
<code>SUBDIRS</code> conditionally using <code>AC_SUBST</code> and do not define
<code>DIST_SUBDIRS</code> explicitly, it will be default to
&lsquo;<samp><span class="samp">$(SUBDIRS)</span></samp>&rsquo;; another possibility is to force <code>DIST_SUBDIRS
= $(SUBDIRS)</code>.

   <p>Of course, directories that are omitted from <code>DIST_SUBDIRS</code> will
not be distributed unless you make other arrangements for this to
happen (for instance, always running &lsquo;<samp><span class="samp">make dist</span></samp>&rsquo; in a
configuration where all directories are known to appear in
<code>DIST_SUBDIRS</code>; or writing a <code>dist-hook</code> target to
distribute these directories).

   <p><a name="index-Subdirectories_002c-not-distributed-360"></a>In few packages, unconfigured directories are not even expected to
be distributed.  Although these packages do not require the
aforementioned extra arrangements, there is another pitfall.  If the
name of a directory appears in <code>SUBDIRS</code> or <code>DIST_SUBDIRS</code>,
<samp><span class="command">automake</span></samp> will make sure the directory exists.  Consequently
<samp><span class="command">automake</span></samp> cannot be run on such a distribution when one
directory has been omitted.  One way to avoid this check is to use the
<code>AC_SUBST</code> method to declare conditional directories; since
<samp><span class="command">automake</span></samp> does not know the values of <code>AC_SUBST</code>
variables it cannot ensure the corresponding directory exists.

<div class="node">
<a name="Alternative"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Subpackages">Subpackages</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditional-Subdirectories">Conditional Subdirectories</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Directories">Directories</a>

</div>

<h3 class="section">7.3 An Alternative Approach to Subdirectories</h3>

<p>If you've ever read Peter Miller's excellent paper,
<a href="http://miller.emu.id.au/pmiller/books/rmch/">Recursive Make Considered Harmful</a>, the preceding sections on the use of
make recursion will probably come as unwelcome advice.  For those who
haven't read the paper, Miller's main thesis is that recursive
<samp><span class="command">make</span></samp> invocations are both slow and error-prone.

   <p>Automake provides sufficient cross-directory support <a rel="footnote" href="#fn-2" name="fnd-2"><sup>2</sup></a> to enable you
to write a single <samp><span class="file">Makefile.am</span></samp> for a complex multi-directory
package.

   <p>By default an installable file specified in a subdirectory will have its
directory name stripped before installation.  For instance, in this
example, the header file will be installed as
<samp><span class="file">$(includedir)/stdio.h</span></samp>:

<pre class="example">     include_HEADERS = inc/stdio.h
</pre>
   <p><a name="index-nobase_005f-361"></a><a name="index-g_t_0040code_007bnobase_005f_007d-prefix-362"></a><a name="index-Path-stripping_002c-avoiding-363"></a><a name="index-Avoiding-path-stripping-364"></a>
However, the &lsquo;<samp><span class="samp">nobase_</span></samp>&rsquo; prefix can be used to circumvent this path
stripping.  In this example, the header file will be installed as
<samp><span class="file">$(includedir)/sys/types.h</span></samp>:

<pre class="example">     nobase_include_HEADERS = sys/types.h
</pre>
   <p><a name="index-g_t_0040code_007bnobase_005f_007d-and-_0040code_007bdist_005f_007d-or-_0040code_007bnodist_005f_007d-365"></a><a name="index-g_t_0040code_007bdist_005f_007d-and-_0040code_007bnobase_005f_007d-366"></a><a name="index-g_t_0040code_007bnodist_005f_007d-and-_0040code_007bnobase_005f_007d-367"></a><a name="index-dist_005f-368"></a><a name="index-nodist_005f-369"></a>
&lsquo;<samp><span class="samp">nobase_</span></samp>&rsquo; should be specified first when used in conjunction with
either &lsquo;<samp><span class="samp">dist_</span></samp>&rsquo; or &lsquo;<samp><span class="samp">nodist_</span></samp>&rsquo; (see <a href="#Fine_002dgrained-Distribution-Control">Fine-grained Distribution Control</a>).  For instance:

<pre class="example">     nobase_dist_pkgdata_DATA = images/vortex.pgm sounds/whirl.ogg
</pre>
   <p>Finally, note that a variable using the &lsquo;<samp><span class="samp">nobase_</span></samp>&rsquo; prefix can
often be replaced by several variables, one for each destination
directory (see <a href="#Uniform">Uniform</a>).  For instance, the last example could be
rewritten as follows:

<!-- Keep in sync with primary-prefix-couples-documented-valid.sh -->
<pre class="example">     imagesdir = $(pkgdatadir)/images
     soundsdir = $(pkgdatadir)/sounds
     dist_images_DATA = images/vortex.pgm
     dist_sounds_DATA = sounds/whirl.ogg
</pre>
   <p class="noindent">This latter syntax makes it possible to change one destination
directory without changing the layout of the source tree.

   <p>Currently, &lsquo;<samp><span class="samp">nobase_*_LTLIBRARIES</span></samp>&rsquo; are the only exception to this
rule, in that there is no particular installation order guarantee for
an otherwise equivalent set of variables without &lsquo;<samp><span class="samp">nobase_</span></samp>&rsquo; prefix.

<div class="node">
<a name="Subpackages"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Alternative">Alternative</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Directories">Directories</a>

</div>

<h3 class="section">7.4 Nesting Packages</h3>

<p><a name="index-Nesting-packages-370"></a><a name="index-Subpackages-371"></a><a name="index-AC_005fCONFIG_005fSUBDIRS-372"></a><a name="index-AC_005fCONFIG_005fAUX_005fDIR-373"></a>

   <p>In the GNU Build System, packages can be nested to arbitrary depth. 
This means that a package can embed other packages with their own
<samp><span class="file">configure</span></samp>, <samp><span class="file">Makefile</span></samp>s, etc.

   <p>These other packages should just appear as subdirectories of their
parent package.  They must be listed in <code>SUBDIRS</code> like other
ordinary directories.  However the subpackage's <samp><span class="file">Makefile</span></samp>s
should be output by its own <samp><span class="file">configure</span></samp> script, not by the
parent's <samp><span class="file">configure</span></samp>.  This is achieved using the
<code>AC_CONFIG_SUBDIRS</code> Autoconf macro (see <a href="autoconf.html#Subdirectories">AC_CONFIG_SUBDIRS</a>).

   <p>Here is an example package for an <code>arm</code> program that links with
a <code>hand</code> library that is a nested package in subdirectory
<samp><span class="file">hand/</span></samp>.

   <p><code>arm</code>'s <samp><span class="file">configure.ac</span></samp>:

<pre class="example">     AC_INIT([arm], [1.0])
     AC_CONFIG_AUX_DIR([.])
     AM_INIT_AUTOMAKE
     AC_PROG_CC
     AC_CONFIG_FILES([Makefile])
     # Call hand's ./configure script recursively.
     AC_CONFIG_SUBDIRS([hand])
     AC_OUTPUT
</pre>
   <p><code>arm</code>'s <samp><span class="file">Makefile.am</span></samp>:

<pre class="example">     # Build the library in the hand subdirectory first.
     SUBDIRS = hand
     
     # Include hand's header when compiling this directory.
     AM_CPPFLAGS = -I$(srcdir)/hand
     
     bin_PROGRAMS = arm
     arm_SOURCES = arm.c
     # link with the hand library.
     arm_LDADD = hand/libhand.a
</pre>
   <p>Now here is <code>hand</code>'s <samp><span class="file">hand/configure.ac</span></samp>:

<pre class="example">     AC_INIT([hand], [1.2])
     AC_CONFIG_AUX_DIR([.])
     AM_INIT_AUTOMAKE
     AC_PROG_CC
     AM_PROG_AR
     AC_PROG_RANLIB
     AC_CONFIG_FILES([Makefile])
     AC_OUTPUT
</pre>
   <p class="noindent">and its <samp><span class="file">hand/Makefile.am</span></samp>:

<pre class="example">     lib_LIBRARIES = libhand.a
     libhand_a_SOURCES = hand.c
</pre>
   <p>When &lsquo;<samp><span class="samp">make dist</span></samp>&rsquo; is run from the top-level directory it will
create an archive <samp><span class="file">arm-1.0.tar.gz</span></samp> that contains the <code>arm</code>
code as well as the <samp><span class="file">hand</span></samp> subdirectory.  This package can be
built and installed like any ordinary package, with the usual
&lsquo;<samp><span class="samp">./configure &amp;&amp; make &amp;&amp; make install</span></samp>&rsquo; sequence (the <code>hand</code>
subpackage will be built and installed by the process).

   <p>When &lsquo;<samp><span class="samp">make dist</span></samp>&rsquo; is run from the hand directory, it will create a
self-contained <samp><span class="file">hand-1.2.tar.gz</span></samp> archive.  So although it appears
to be embedded in another package, it can still be used separately.

   <p>The purpose of the &lsquo;<samp><span class="samp">AC_CONFIG_AUX_DIR([.])</span></samp>&rsquo; instruction is to
force Automake and Autoconf to search for auxiliary scripts in the
current directory.  For instance, this means that there will be two
copies of <samp><span class="file">install-sh</span></samp>: one in the top-level of the <code>arm</code>
package, and another one in the <samp><span class="file">hand/</span></samp> subdirectory for the
<code>hand</code> package.

   <p>The historical default is to search for these auxiliary scripts in
the parent directory and the grandparent directory.  So if the
&lsquo;<samp><span class="samp">AC_CONFIG_AUX_DIR([.])</span></samp>&rsquo; line was removed from
<samp><span class="file">hand/configure.ac</span></samp>, that subpackage would share the auxiliary
script of the <code>arm</code> package.  This may looks like a gain in size
(a few kilobytes), but it is actually a loss of modularity as the
<code>hand</code> subpackage is no longer self-contained (&lsquo;<samp><span class="samp">make dist</span></samp>&rsquo;
in the subdirectory will not work anymore).

   <p>Packages that do not use Automake need more work to be integrated this
way.  See <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a>.

<div class="node">
<a name="Programs"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Other-Objects">Other Objects</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Directories">Directories</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">8 Building Programs and Libraries</h2>

<p>A large part of Automake's functionality is dedicated to making it easy
to build programs and libraries.

<ul class="menu">
<li><a accesskey="1" href="#A-Program">A Program</a>:                    Building a program
<li><a accesskey="2" href="#A-Library">A Library</a>:                    Building a library
<li><a accesskey="3" href="#A-Shared-Library">A Shared Library</a>:             Building a Libtool library
<li><a accesskey="4" href="#Program-and-Library-Variables">Program and Library Variables</a>:   Variables controlling program and
                                library builds
<li><a accesskey="5" href="#Default-_005fSOURCES">Default _SOURCES</a>:             Default source files
<li><a accesskey="6" href="#LIBOBJS">LIBOBJS</a>:                      Special handling for LIBOBJS and ALLOCA
<li><a accesskey="7" href="#Program-Variables">Program Variables</a>:            Variables used when building a program
<li><a accesskey="8" href="#Yacc-and-Lex">Yacc and Lex</a>:                 Yacc and Lex support
<li><a accesskey="9" href="#C_002b_002b-Support">C++ Support</a>:                  Compiling C++ sources
<li><a href="#Objective-C-Support">Objective C Support</a>:          Compiling Objective C sources
<li><a href="#Objective-C_002b_002b-Support">Objective C++ Support</a>:        Compiling Objective C++ sources
<li><a href="#Unified-Parallel-C-Support">Unified Parallel C Support</a>:   Compiling Unified Parallel C sources
<li><a href="#Assembly-Support">Assembly Support</a>:             Compiling assembly sources
<li><a href="#Fortran-77-Support">Fortran 77 Support</a>:           Compiling Fortran 77 sources
<li><a href="#Fortran-9x-Support">Fortran 9x Support</a>:           Compiling Fortran 9x sources
<li><a href="#Java-Support-with-gcj">Java Support with gcj</a>:        Compiling Java sources using gcj
<li><a href="#Vala-Support">Vala Support</a>:                 Compiling Vala sources
<li><a href="#Support-for-Other-Languages">Support for Other Languages</a>:   Compiling other languages
<li><a href="#Dependencies">Dependencies</a>:                 Automatic dependency tracking
<li><a href="#EXEEXT">EXEEXT</a>:                       Support for executable extensions
</ul>

<div class="node">
<a name="A-Program"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#A-Library">A Library</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<h3 class="section">8.1 Building a program</h3>

<p>In order to build a program, you need to tell Automake which sources
are part of it, and which libraries it should be linked with.

   <p>This section also covers conditional compilation of sources or
programs.  Most of the comments about these also apply to libraries
(see <a href="#A-Library">A Library</a>) and libtool libraries (see <a href="#A-Shared-Library">A Shared Library</a>).

<ul class="menu">
<li><a accesskey="1" href="#Program-Sources">Program Sources</a>:              Defining program sources
<li><a accesskey="2" href="#Linking">Linking</a>:                      Linking with libraries or extra objects
<li><a accesskey="3" href="#Conditional-Sources">Conditional Sources</a>:          Handling conditional sources
<li><a accesskey="4" href="#Conditional-Programs">Conditional Programs</a>:         Building a program conditionally
</ul>

<div class="node">
<a name="Program-Sources"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Linking">Linking</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Program">A Program</a>

</div>

<h4 class="subsection">8.1.1 Defining program sources</h4>

<p><a name="index-g_t_0040code_007bPROGRAMS_007d_002c-_0040code_007bbindir_007d-374"></a><a name="index-g_t_005fPROGRAMS-375"></a><a name="index-bin_005fPROGRAMS-376"></a><a name="index-sbin_005fPROGRAMS-377"></a><a name="index-libexec_005fPROGRAMS-378"></a><a name="index-pkglibexec_005fPROGRAMS-379"></a><a name="index-noinst_005fPROGRAMS-380"></a><a name="index-check_005fPROGRAMS-381"></a>
In a directory containing source that gets built into a program (as
opposed to a library or a script), the <code>PROGRAMS</code> primary is used. 
Programs can be installed in <code>bindir</code>, <code>sbindir</code>,
<code>libexecdir</code>, <code>pkglibexecdir</code>, or not at all
(<code>noinst_</code>).  They can also be built only for &lsquo;<samp><span class="samp">make check</span></samp>&rsquo;, in
which case the prefix is &lsquo;<samp><span class="samp">check_</span></samp>&rsquo;.

   <p>For instance:

<pre class="example">     bin_PROGRAMS = hello
</pre>
   <p>In this simple case, the resulting <samp><span class="file">Makefile.in</span></samp> will contain code
to generate a program named <code>hello</code>.

   <p>Associated with each program are several assisting variables that are
named after the program.  These variables are all optional, and have
reasonable defaults.  Each variable, its use, and default is spelled out
below; we use the &ldquo;hello&rdquo; example throughout.

   <p>The variable <code>hello_SOURCES</code> is used to specify which source files
get built into an executable:

<pre class="example">     hello_SOURCES = hello.c version.c getopt.c getopt1.c getopt.h system.h
</pre>
   <p>This causes each mentioned <samp><span class="file">.c</span></samp> file to be compiled into the
corresponding <samp><span class="file">.o</span></samp>.  Then all are linked to produce <samp><span class="file">hello</span></samp>.

   <p><a name="index-g_t_0040code_007b_005fSOURCES_007d-primary_002c-defined-382"></a><a name="index-g_t_0040code_007bSOURCES_007d-primary_002c-defined-383"></a><a name="index-Primary-variable_002c-_0040code_007bSOURCES_007d-384"></a><a name="index-g_t_005fSOURCES-385"></a>
If <code>hello_SOURCES</code> is not specified, then it defaults to the single
file <samp><span class="file">hello.c</span></samp> (see <a href="#Default-_005fSOURCES">Default _SOURCES</a>). 
<a name="index-g_t_005fSOURCES-386"></a><a name="index-SOURCES-387"></a>
Multiple programs can be built in a single directory.  Multiple programs
can share a single source file, which must be listed in each
<code>_SOURCES</code> definition.

   <p><a name="index-Header-files-in-_0040code_007b_005fSOURCES_007d-388"></a><a name="index-g_t_0040code_007b_005fSOURCES_007d-and-header-files-389"></a>
Header files listed in a <code>_SOURCES</code> definition will be included in
the distribution but otherwise ignored.  In case it isn't obvious, you
should not include the header file generated by <samp><span class="file">configure</span></samp> in a
<code>_SOURCES</code> variable; this file should not be distributed.  Lex
(<samp><span class="file">.l</span></samp>) and Yacc (<samp><span class="file">.y</span></samp>) files can also be listed; see <a href="#Yacc-and-Lex">Yacc and Lex</a>.

<div class="node">
<a name="Linking"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Conditional-Sources">Conditional Sources</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Program-Sources">Program Sources</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Program">A Program</a>

</div>

<h4 class="subsection">8.1.2 Linking the program</h4>

<p>If you need to link against libraries that are not found by
<samp><span class="command">configure</span></samp>, you can use <code>LDADD</code> to do so.  This variable is
used to specify additional objects or libraries to link with; it is
inappropriate for specifying specific linker flags, you should use
<code>AM_LDFLAGS</code> for this purpose. 
<a name="index-LDADD-390"></a><a name="index-AM_005fLDFLAGS-391"></a>
<a name="index-g_t_0040code_007bprog_005fLDADD_007d_002c-defined-392"></a>
Sometimes, multiple programs are built in one directory but do not share
the same link-time requirements.  In this case, you can use the
<var>prog</var><code>_LDADD</code> variable (where <var>prog</var> is the name of the
program as it appears in some <code>_PROGRAMS</code> variable, and usually
written in lowercase) to override <code>LDADD</code>.  If this variable exists
for a given program, then that program is not linked using <code>LDADD</code>. 
<a name="index-maude_005fLDADD-393"></a>
For instance, in GNU cpio, <code>pax</code>, <code>cpio</code> and <code>mt</code> are
linked against the library <samp><span class="file">libcpio.a</span></samp>.  However, <code>rmt</code> is
built in the same directory, and has no such link requirement.  Also,
<code>mt</code> and <code>rmt</code> are only built on certain architectures.  Here
is what cpio's <samp><span class="file">src/Makefile.am</span></samp> looks like (abridged):

<pre class="example">     bin_PROGRAMS = cpio pax $(MT)
     libexec_PROGRAMS = $(RMT)
     EXTRA_PROGRAMS = mt rmt
     
     LDADD = ../lib/libcpio.a $(INTLLIBS)
     rmt_LDADD =
     
     cpio_SOURCES = ...
     pax_SOURCES = ...
     mt_SOURCES = ...
     rmt_SOURCES = ...
</pre>
   <p><a name="index-g_t_0040code_007b_005fLDFLAGS_007d_002c-defined-394"></a><a name="index-maude_005fLDFLAGS-395"></a><var>prog</var><code>_LDADD</code> is inappropriate for passing program-specific
linker flags (except for <samp><span class="option">-l</span></samp>, <samp><span class="option">-L</span></samp>, <samp><span class="option">-dlopen</span></samp> and
<samp><span class="option">-dlpreopen</span></samp>).  So, use the <var>prog</var><code>_LDFLAGS</code> variable for
this purpose.

   <p><a name="index-g_t_0040code_007b_005fDEPENDENCIES_007d_002c-defined-396"></a><a name="index-maude_005fDEPENDENCIES-397"></a><a name="index-EXTRA_005fmaude_005fDEPENDENCIES-398"></a>It is also occasionally useful to have a program depend on some other
target that is not actually part of that program.  This can be done
using either the <var>prog</var><code>_DEPENDENCIES</code> or the
<code>EXTRA_</code><var>prog</var><code>_DEPENDENCIES</code> variable.  Each program depends on
the contents both variables, but no further interpretation is done.

   <p>Since these dependencies are associated to the link rule used to
create the programs they should normally list files used by the link
command.  That is <samp><span class="file">*.$(OBJEXT)</span></samp>, <samp><span class="file">*.a</span></samp>, or <samp><span class="file">*.la</span></samp>
files.  In rare cases you may need to add other kinds of files such as
linker scripts, but <em>listing a source file in
</em><code>_DEPENDENCIES</code><em> is wrong</em>.  If some source file needs to be built
before all the components of a program are built, consider using the
<code>BUILT_SOURCES</code> variable instead (see <a href="#Sources">Sources</a>).

   <p>If <var>prog</var><code>_DEPENDENCIES</code> is not supplied, it is computed by
Automake.  The automatically-assigned value is the contents of
<var>prog</var><code>_LDADD</code>, with most configure substitutions, <samp><span class="option">-l</span></samp>,
<samp><span class="option">-L</span></samp>, <samp><span class="option">-dlopen</span></samp> and <samp><span class="option">-dlpreopen</span></samp> options removed.  The
configure substitutions that are left in are only &lsquo;<samp><span class="samp">$(LIBOBJS)</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">$(ALLOCA)</span></samp>&rsquo;; these are left because it is known that they will not
cause an invalid value for <var>prog</var><code>_DEPENDENCIES</code> to be
generated.

   <p><a href="#Conditional-Sources">Conditional Sources</a> shows a situation where <code>_DEPENDENCIES</code>
may be used.

   <p>The <code>EXTRA_</code><var>prog</var><code>_DEPENDENCIES</code> may be useful for cases where
you merely want to augment the <samp><span class="command">automake</span></samp>-generated
<var>prog</var><code>_DEPENDENCIES</code> rather than replacing it.

   <p><a name="index-g_t_0040code_007bLDADD_007d-and-_0040option_007b_002dl_007d-399"></a><a name="index-g_t_0040option_007b_002dl_007d-and-_0040code_007bLDADD_007d-400"></a>We recommend that you avoid using <samp><span class="option">-l</span></samp> options in <code>LDADD</code>
or <var>prog</var><code>_LDADD</code> when referring to libraries built by your
package.  Instead, write the file name of the library explicitly as in
the above <code>cpio</code> example.  Use <samp><span class="option">-l</span></samp> only to list
third-party libraries.  If you follow this rule, the default value of
<var>prog</var><code>_DEPENDENCIES</code> will list all your local libraries and
omit the other ones.

<div class="node">
<a name="Conditional-Sources"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Conditional-Programs">Conditional Programs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Linking">Linking</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Program">A Program</a>

</div>

<h4 class="subsection">8.1.3 Conditional compilation of sources</h4>

<p>You can't put a configure substitution (e.g., &lsquo;<samp><span class="samp">@FOO@</span></samp>&rsquo; or
&lsquo;<samp><span class="samp">$(FOO)</span></samp>&rsquo; where <code>FOO</code> is defined via <code>AC_SUBST</code>) into a
<code>_SOURCES</code> variable.  The reason for this is a bit hard to
explain, but suffice to say that it simply won't work.  Automake will
give an error if you try to do this.

   <p>Fortunately there are two other ways to achieve the same result.  One is
to use configure substitutions in <code>_LDADD</code> variables, the other is
to use an Automake conditional.

<h5 class="subsubheading">Conditional Compilation using <code>_LDADD</code> Substitutions</h5>

<p><a name="index-g_t_0040code_007bEXTRA_005fprog_005fSOURCES_007d_002c-defined-401"></a>
Automake must know all the source files that could possibly go into a
program, even if not all the files are built in every circumstance.  Any
files that are only conditionally built should be listed in the
appropriate <code>EXTRA_</code> variable.  For instance, if
<samp><span class="file">hello-linux.c</span></samp> or <samp><span class="file">hello-generic.c</span></samp> were conditionally included
in <code>hello</code>, the <samp><span class="file">Makefile.am</span></samp> would contain:

<pre class="example">     bin_PROGRAMS = hello
     hello_SOURCES = hello-common.c
     EXTRA_hello_SOURCES = hello-linux.c hello-generic.c
     hello_LDADD = $(HELLO_SYSTEM)
     hello_DEPENDENCIES = $(HELLO_SYSTEM)
</pre>
   <p class="noindent">You can then setup the &lsquo;<samp><span class="samp">$(HELLO_SYSTEM)</span></samp>&rsquo; substitution from
<samp><span class="file">configure.ac</span></samp>:

<pre class="example">     ...
     case $host in
       *linux*) HELLO_SYSTEM='hello-linux.$(OBJEXT)' ;;
       *)       HELLO_SYSTEM='hello-generic.$(OBJEXT)' ;;
     esac
     AC_SUBST([HELLO_SYSTEM])
     ...
</pre>
   <p>In this case, the variable <code>HELLO_SYSTEM</code> should be replaced by
either <samp><span class="file">hello-linux.o</span></samp> or <samp><span class="file">hello-generic.o</span></samp>, and added to
both <code>hello_DEPENDENCIES</code> and <code>hello_LDADD</code> in order to be
built and linked in.

<h5 class="subsubheading">Conditional Compilation using Automake Conditionals</h5>

<p>An often simpler way to compile source files conditionally is to use
Automake conditionals.  For instance, you could use this
<samp><span class="file">Makefile.am</span></samp> construct to build the same <samp><span class="file">hello</span></samp> example:

<pre class="example">     bin_PROGRAMS = hello
     if LINUX
     hello_SOURCES = hello-linux.c hello-common.c
     else
     hello_SOURCES = hello-generic.c hello-common.c
     endif
</pre>
   <p>In this case, <samp><span class="file">configure.ac</span></samp> should setup the <code>LINUX</code>
conditional using <code>AM_CONDITIONAL</code> (see <a href="#Conditionals">Conditionals</a>).

   <p>When using conditionals like this you don't need to use the
<code>EXTRA_</code> variable, because Automake will examine the contents of
each variable to construct the complete list of source files.

   <p>If your program uses a lot of files, you will probably prefer a
conditional &lsquo;<samp><span class="samp">+=</span></samp>&rsquo;.

<pre class="example">     bin_PROGRAMS = hello
     hello_SOURCES = hello-common.c
     if LINUX
     hello_SOURCES += hello-linux.c
     else
     hello_SOURCES += hello-generic.c
     endif
</pre>
   <div class="node">
<a name="Conditional-Programs"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditional-Sources">Conditional Sources</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Program">A Program</a>

</div>

<h4 class="subsection">8.1.4 Conditional compilation of programs</h4>

<p><a name="index-Conditional-programs-402"></a><a name="index-Programs_002c-conditional-403"></a>
Sometimes it is useful to determine the programs that are to be built
at configure time.  For instance, GNU <code>cpio</code> only builds
<code>mt</code> and <code>rmt</code> under special circumstances.  The means to
achieve conditional compilation of programs are the same you can use
to compile source files conditionally: substitutions or conditionals.

<h5 class="subsubheading">Conditional Programs using <samp><span class="command">configure</span></samp> Substitutions</h5>

<p><a name="index-EXTRA_005fPROGRAMS-404"></a><a name="index-g_t_0040code_007bEXTRA_005fPROGRAMS_007d_002c-defined-405"></a>In this case, you must notify Automake of all the programs that can
possibly be built, but at the same time cause the generated
<samp><span class="file">Makefile.in</span></samp> to use the programs specified by <samp><span class="command">configure</span></samp>. 
This is done by having <samp><span class="command">configure</span></samp> substitute values into each
<code>_PROGRAMS</code> definition, while listing all optionally built programs
in <code>EXTRA_PROGRAMS</code>.

<pre class="example">     bin_PROGRAMS = cpio pax $(MT)
     libexec_PROGRAMS = $(RMT)
     EXTRA_PROGRAMS = mt rmt
</pre>
   <p>As explained in <a href="#EXEEXT">EXEEXT</a>, Automake will rewrite
<code>bin_PROGRAMS</code>, <code>libexec_PROGRAMS</code>, and
<code>EXTRA_PROGRAMS</code>, appending &lsquo;<samp><span class="samp">$(EXEEXT)</span></samp>&rsquo; to each binary. 
Obviously it cannot rewrite values obtained at run-time through
<samp><span class="command">configure</span></samp> substitutions, therefore you should take care of
appending &lsquo;<samp><span class="samp">$(EXEEXT)</span></samp>&rsquo; yourself, as in &lsquo;<samp><span class="samp">AC_SUBST([MT],
['mt${EXEEXT}'])</span></samp>&rsquo;.

<h5 class="subsubheading">Conditional Programs using Automake Conditionals</h5>

<p>You can also use Automake conditionals (see <a href="#Conditionals">Conditionals</a>) to
select programs to be built.  In this case you don't have to worry
about &lsquo;<samp><span class="samp">$(EXEEXT)</span></samp>&rsquo; or <code>EXTRA_PROGRAMS</code>.

<!-- Keep in sync with exeext.sh -->
<pre class="example">     bin_PROGRAMS = cpio pax
     if WANT_MT
       bin_PROGRAMS += mt
     endif
     if WANT_RMT
       libexec_PROGRAMS = rmt
     endif
</pre>
   <div class="node">
<a name="A-Library"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#A-Shared-Library">A Shared Library</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#A-Program">A Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<h3 class="section">8.2 Building a library</h3>

<p><a name="index-g_t_0040code_007b_005fLIBRARIES_007d-primary_002c-defined-406"></a><a name="index-g_t_0040code_007bLIBRARIES_007d-primary_002c-defined-407"></a><a name="index-Primary-variable_002c-_0040code_007bLIBRARIES_007d-408"></a><a name="index-g_t_005fLIBRARIES-409"></a>
<a name="index-lib_005fLIBRARIES-410"></a><a name="index-pkglib_005fLIBRARIES-411"></a><a name="index-noinst_005fLIBRARIES-412"></a>
Building a library is much like building a program.  In this case, the
name of the primary is <code>LIBRARIES</code>.  Libraries can be installed in
<code>libdir</code> or <code>pkglibdir</code>.

   <p>See <a href="#A-Shared-Library">A Shared Library</a>, for information on how to build shared
libraries using libtool and the <code>LTLIBRARIES</code> primary.

   <p>Each <code>_LIBRARIES</code> variable is a list of the libraries to be built. 
For instance, to create a library named <samp><span class="file">libcpio.a</span></samp>, but not install
it, you would write:

<pre class="example">     noinst_LIBRARIES = libcpio.a
     libcpio_a_SOURCES = ...
</pre>
   <p>The sources that go into a library are determined exactly as they are
for programs, via the <code>_SOURCES</code> variables.  Note that the library
name is canonicalized (see <a href="#Canonicalization">Canonicalization</a>), so the <code>_SOURCES</code>
variable corresponding to <samp><span class="file">libcpio.a</span></samp> is &lsquo;<samp><span class="samp">libcpio_a_SOURCES</span></samp>&rsquo;,
not &lsquo;<samp><span class="samp">libcpio.a_SOURCES</span></samp>&rsquo;.

   <p><a name="index-maude_005fLIBADD-413"></a>Extra objects can be added to a library using the
<var>library</var><code>_LIBADD</code> variable.  This should be used for objects
determined by <samp><span class="command">configure</span></samp>.  Again from <code>cpio</code>:

<!-- Keep in sync with pr401c.sh -->
<pre class="example">     libcpio_a_LIBADD = $(LIBOBJS) $(ALLOCA)
</pre>
   <p>In addition, sources for extra objects that will not exist until
configure-time must be added to the <code>BUILT_SOURCES</code> variable
(see <a href="#Sources">Sources</a>).

   <p>Building a static library is done by compiling all object files, then
by invoking &lsquo;<samp><span class="samp">$(AR) $(ARFLAGS)</span></samp>&rsquo; followed by the name of the
library and the list of objects, and finally by calling
&lsquo;<samp><span class="samp">$(RANLIB)</span></samp>&rsquo; on that library.  You should call
<code>AC_PROG_RANLIB</code> from your <samp><span class="file">configure.ac</span></samp> to define
<code>RANLIB</code> (Automake will complain otherwise).  You should also
call <code>AM_PROG_AR</code> to define <code>AR</code>, in order to support unusual
archivers such as Microsoft lib.  <code>ARFLAGS</code> will default to
<code>cru</code>; you can override this variable by setting it in your
<samp><span class="file">Makefile.am</span></samp> or by <code>AC_SUBST</code>ing it from your
<samp><span class="file">configure.ac</span></samp>.  You can override the <code>AR</code> variable by
defining a per-library <code>maude_AR</code> variable (see <a href="#Program-and-Library-Variables">Program and Library Variables</a>).

   <p><a name="index-Empty-libraries-414"></a>Be careful when selecting library components conditionally.  Because
building an empty library is not portable, you should ensure that any
library always contains at least one object.

   <p>To use a static library when building a program, add it to
<code>LDADD</code> for this program.  In the following example, the program
<samp><span class="file">cpio</span></samp> is statically linked with the library <samp><span class="file">libcpio.a</span></samp>.

<pre class="example">     noinst_LIBRARIES = libcpio.a
     libcpio_a_SOURCES = ...
     
     bin_PROGRAMS = cpio
     cpio_SOURCES = cpio.c ...
     cpio_LDADD = libcpio.a
</pre>
   <div class="node">
<a name="A-Shared-Library"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Program-and-Library-Variables">Program and Library Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#A-Library">A Library</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<h3 class="section">8.3 Building a Shared Library</h3>

<p><a name="index-Shared-libraries_002c-support-for-415"></a>
Building shared libraries portably is a relatively complex matter. 
For this reason, GNU Libtool (see <a href="libtool.html#Top">Introduction</a>) was created to help build shared libraries in a
platform-independent way.

<ul class="menu">
<li><a accesskey="1" href="#Libtool-Concept">Libtool Concept</a>:              Introducing Libtool
<li><a accesskey="2" href="#Libtool-Libraries">Libtool Libraries</a>:            Declaring Libtool Libraries
<li><a accesskey="3" href="#Conditional-Libtool-Libraries">Conditional Libtool Libraries</a>:   Building Libtool Libraries Conditionally
<li><a accesskey="4" href="#Conditional-Libtool-Sources">Conditional Libtool Sources</a>:   Choosing Library Sources Conditionally
<li><a accesskey="5" href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a>:   Building Convenience Libtool Libraries
<li><a accesskey="6" href="#Libtool-Modules">Libtool Modules</a>:              Building Libtool Modules
<li><a accesskey="7" href="#Libtool-Flags">Libtool Flags</a>:                Using _LIBADD, _LDFLAGS, and _LIBTOOLFLAGS
<li><a accesskey="8" href="#LTLIBOBJS">LTLIBOBJS</a>:                    Using $(LTLIBOBJS) and $(LTALLOCA)
<li><a accesskey="9" href="#Libtool-Issues">Libtool Issues</a>:               Common Issues Related to Libtool's Use
</ul>

<div class="node">
<a name="Libtool-Concept"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Libtool-Libraries">Libtool Libraries</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>

</div>

<h4 class="subsection">8.3.1 The Libtool Concept</h4>

<p><a name="index-g_t_0040command_007blibtool_007d_002c-introduction-416"></a><a name="index-libtool-library_002c-definition-417"></a><a name="index-suffix-_0040file_007b_002ela_007d_002c-defined-418"></a><a name="index-g_t_0040file_007b_002ela_007d-suffix_002c-defined-419"></a>
Libtool abstracts shared and static libraries into a unified concept
henceforth called <dfn>libtool libraries</dfn>.  Libtool libraries are
files using the <samp><span class="file">.la</span></samp> suffix, and can designate a static library,
a shared library, or maybe both.  Their exact nature cannot be
determined until <samp><span class="file">./configure</span></samp> is run: not all platforms support
all kinds of libraries, and users can explicitly select which
libraries should be built.  (However the package's maintainers can
tune the default, see <a href="libtool.html#AC_005fPROG_005fLIBTOOL">The <code>AC_PROG_LIBTOOL</code> macro</a>.)

   <p><a name="index-suffix-_0040file_007b_002elo_007d_002c-defined-420"></a>Because object files for shared and static libraries must be compiled
differently, libtool is also used during compilation.  Object files
built by libtool are called <dfn>libtool objects</dfn>: these are files
using the <samp><span class="file">.lo</span></samp> suffix.  Libtool libraries are built from these
libtool objects.

   <p>You should not assume anything about the structure of <samp><span class="file">.la</span></samp> or
<samp><span class="file">.lo</span></samp> files and how libtool constructs them: this is libtool's
concern, and the last thing one wants is to learn about libtool's
guts.  However the existence of these files matters, because they are
used as targets and dependencies in <samp><span class="file">Makefile</span></samp>s rules when
building libtool libraries.  There are situations where you may have
to refer to these, for instance when expressing dependencies for
building source files conditionally (see <a href="#Conditional-Libtool-Sources">Conditional Libtool Sources</a>).

   <p><a name="index-g_t_0040file_007blibltdl_007d_002c-introduction-421"></a>
People considering writing a plug-in system, with dynamically loaded
modules, should look into <samp><span class="file">libltdl</span></samp>: libtool's dlopening library
(see <a href="libtool.html#Using-libltdl">Using libltdl</a>). 
This offers a portable dlopening facility to load libtool libraries
dynamically, and can also achieve static linking where unavoidable.

   <p>Before we discuss how to use libtool with Automake in details, it
should be noted that the libtool manual also has a section about how
to use Automake with libtool (see <a href="libtool.html#Using-Automake">Using Automake with Libtool</a>).

<div class="node">
<a name="Libtool-Libraries"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Conditional-Libtool-Libraries">Conditional Libtool Libraries</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Libtool-Concept">Libtool Concept</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>

</div>

<h4 class="subsection">8.3.2 Building Libtool Libraries</h4>

<p><a name="index-g_t_0040code_007b_005fLTLIBRARIES_007d-primary_002c-defined-422"></a><a name="index-g_t_0040code_007bLTLIBRARIES_007d-primary_002c-defined-423"></a><a name="index-Primary-variable_002c-_0040code_007bLTLIBRARIES_007d-424"></a><a name="index-Example-of-shared-libraries-425"></a><a name="index-lib_005fLTLIBRARIES-426"></a><a name="index-pkglib_005fLTLIBRARIES-427"></a><a name="index-g_t_005fLTLIBRARIES-428"></a>
Automake uses libtool to build libraries declared with the
<code>LTLIBRARIES</code> primary.  Each <code>_LTLIBRARIES</code> variable is a
list of libtool libraries to build.  For instance, to create a libtool
library named <samp><span class="file">libgettext.la</span></samp>, and install it in <code>libdir</code>,
write:

<pre class="example">     lib_LTLIBRARIES = libgettext.la
     libgettext_la_SOURCES = gettext.c gettext.h ...
</pre>
   <p>Automake predefines the variable <code>pkglibdir</code>, so you can use
<code>pkglib_LTLIBRARIES</code> to install libraries in
&lsquo;<samp><span class="samp">$(libdir)/@PACKAGE@/</span></samp>&rsquo;.

   <p>If <samp><span class="file">gettext.h</span></samp> is a public header file that needs to be installed
in order for people to use the library, it should be declared using a
<code>_HEADERS</code> variable, not in <code>libgettext_la_SOURCES</code>. 
Headers listed in the latter should be internal headers that are not
part of the public interface.

<pre class="example">     lib_LTLIBRARIES = libgettext.la
     libgettext_la_SOURCES = gettext.c ...
     include_HEADERS = gettext.h ...
</pre>
   <p>A package can build and install such a library along with other
programs that use it.  This dependency should be specified using
<code>LDADD</code>.  The following example builds a program named
<samp><span class="file">hello</span></samp> that is linked with <samp><span class="file">libgettext.la</span></samp>.

<pre class="example">     lib_LTLIBRARIES = libgettext.la
     libgettext_la_SOURCES = gettext.c ...
     
     bin_PROGRAMS = hello
     hello_SOURCES = hello.c ...
     hello_LDADD = libgettext.la
</pre>
   <p class="noindent">Whether <samp><span class="file">hello</span></samp> is statically or dynamically linked with
<samp><span class="file">libgettext.la</span></samp> is not yet known: this will depend on the
configuration of libtool and the capabilities of the host.

<div class="node">
<a name="Conditional-Libtool-Libraries"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Conditional-Libtool-Sources">Conditional Libtool Sources</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Libtool-Libraries">Libtool Libraries</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>

</div>

<h4 class="subsection">8.3.3 Building Libtool Libraries Conditionally</h4>

<p><a name="index-libtool-libraries_002c-conditional-429"></a><a name="index-conditional-libtool-libraries-430"></a>
Like conditional programs (see <a href="#Conditional-Programs">Conditional Programs</a>), there are
two main ways to build conditional libraries: using Automake
conditionals or using Autoconf <code>AC_SUBST</code>itutions.

   <p>The important implementation detail you have to be aware of is that
the place where a library will be installed matters to libtool: it
needs to be indicated <em>at link-time</em> using the <samp><span class="option">-rpath</span></samp>
option.

   <p>For libraries whose destination directory is known when Automake runs,
Automake will automatically supply the appropriate <samp><span class="option">-rpath</span></samp>
option to libtool.  This is the case for libraries listed explicitly in
some installable <code>_LTLIBRARIES</code> variables such as
<code>lib_LTLIBRARIES</code>.

   <p>However, for libraries determined at configure time (and thus
mentioned in <code>EXTRA_LTLIBRARIES</code>), Automake does not know the
final installation directory.  For such libraries you must add the
<samp><span class="option">-rpath</span></samp> option to the appropriate <code>_LDFLAGS</code> variable by
hand.

   <p>The examples below illustrate the differences between these two methods.

   <p>Here is an example where <code>WANTEDLIBS</code> is an <code>AC_SUBST</code>ed
variable set at <samp><span class="file">./configure</span></samp>-time to either <samp><span class="file">libfoo.la</span></samp>,
<samp><span class="file">libbar.la</span></samp>, both, or none.  Although &lsquo;<samp><span class="samp">$(WANTEDLIBS)</span></samp>&rsquo;
appears in the <code>lib_LTLIBRARIES</code>, Automake cannot guess it
relates to <samp><span class="file">libfoo.la</span></samp> or <samp><span class="file">libbar.la</span></samp> at the time it creates
the link rule for these two libraries.  Therefore the <samp><span class="option">-rpath</span></samp>
argument must be explicitly supplied.

<!-- Keep in sync with ltcond.sh -->
<pre class="example">     EXTRA_LTLIBRARIES = libfoo.la libbar.la
     lib_LTLIBRARIES = $(WANTEDLIBS)
     libfoo_la_SOURCES = foo.c ...
     libfoo_la_LDFLAGS = -rpath '$(libdir)'
     libbar_la_SOURCES = bar.c ...
     libbar_la_LDFLAGS = -rpath '$(libdir)'
</pre>
   <p>Here is how the same <samp><span class="file">Makefile.am</span></samp> would look using Automake
conditionals named <code>WANT_LIBFOO</code> and <code>WANT_LIBBAR</code>.  Now
Automake is able to compute the <samp><span class="option">-rpath</span></samp> setting itself, because
it's clear that both libraries will end up in &lsquo;<samp><span class="samp">$(libdir)</span></samp>&rsquo; if they
are installed.

<!-- Keep in sync with ltcond.sh -->
<pre class="example">     lib_LTLIBRARIES =
     if WANT_LIBFOO
     lib_LTLIBRARIES += libfoo.la
     endif
     if WANT_LIBBAR
     lib_LTLIBRARIES += libbar.la
     endif
     libfoo_la_SOURCES = foo.c ...
     libbar_la_SOURCES = bar.c ...
</pre>
   <div class="node">
<a name="Conditional-Libtool-Sources"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditional-Libtool-Libraries">Conditional Libtool Libraries</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>

</div>

<h4 class="subsection">8.3.4 Libtool Libraries with Conditional Sources</h4>

<p>Conditional compilation of sources in a library can be achieved in the
same way as conditional compilation of sources in a program
(see <a href="#Conditional-Sources">Conditional Sources</a>).  The only difference is that
<code>_LIBADD</code> should be used instead of <code>_LDADD</code> and that it
should mention libtool objects (<samp><span class="file">.lo</span></samp> files).

   <p>So, to mimic the <samp><span class="file">hello</span></samp> example from <a href="#Conditional-Sources">Conditional Sources</a>,
we could build a <samp><span class="file">libhello.la</span></samp> library using either
<samp><span class="file">hello-linux.c</span></samp> or <samp><span class="file">hello-generic.c</span></samp> with the following
<samp><span class="file">Makefile.am</span></samp>.

<!-- Keep in sync with ltcond2.sh -->
<pre class="example">     lib_LTLIBRARIES = libhello.la
     libhello_la_SOURCES = hello-common.c
     EXTRA_libhello_la_SOURCES = hello-linux.c hello-generic.c
     libhello_la_LIBADD = $(HELLO_SYSTEM)
     libhello_la_DEPENDENCIES = $(HELLO_SYSTEM)
</pre>
   <p class="noindent">And make sure <samp><span class="command">configure</span></samp> defines <code>HELLO_SYSTEM</code> as
either <samp><span class="file">hello-linux.lo</span></samp> or <samp><span class="file">hello-generic.lo</span></samp>.

   <p>Or we could simply use an Automake conditional as follows.

<!-- Keep in sync with ltcond2.sh -->
<pre class="example">     lib_LTLIBRARIES = libhello.la
     libhello_la_SOURCES = hello-common.c
     if LINUX
     libhello_la_SOURCES += hello-linux.c
     else
     libhello_la_SOURCES += hello-generic.c
     endif
</pre>
   <div class="node">
<a name="Libtool-Convenience-Libraries"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Libtool-Modules">Libtool Modules</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditional-Libtool-Sources">Conditional Libtool Sources</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>

</div>

<h4 class="subsection">8.3.5 Libtool Convenience Libraries</h4>

<p><a name="index-convenience-libraries_002c-libtool-431"></a><a name="index-libtool-convenience-libraries-432"></a><a name="index-noinst_005fLTLIBRARIES-433"></a><a name="index-check_005fLTLIBRARIES-434"></a>
Sometimes you want to build libtool libraries that should not be
installed.  These are called <dfn>libtool convenience libraries</dfn> and
are typically used to encapsulate many sublibraries, later gathered
into one big installed library.

   <p>Libtool convenience libraries are declared by directory-less variables
such as <code>noinst_LTLIBRARIES</code>, <code>check_LTLIBRARIES</code>, or even
<code>EXTRA_LTLIBRARIES</code>.  Unlike installed libtool libraries they do
not need an <samp><span class="option">-rpath</span></samp> flag at link time (actually this is the only
difference).

   <p>Convenience libraries listed in <code>noinst_LTLIBRARIES</code> are always
built.  Those listed in <code>check_LTLIBRARIES</code> are built only upon
&lsquo;<samp><span class="samp">make check</span></samp>&rsquo;.  Finally, libraries listed in
<code>EXTRA_LTLIBRARIES</code> are never built explicitly: Automake outputs
rules to build them, but if the library does not appear as a Makefile
dependency anywhere it won't be built (this is why
<code>EXTRA_LTLIBRARIES</code> is used for conditional compilation).

   <p>Here is a sample setup merging libtool convenience libraries from
subdirectories into one main <samp><span class="file">libtop.la</span></samp> library.

<!-- Keep in sync with ltconv.sh -->
<pre class="example">     # -- Top-level Makefile.am --
     SUBDIRS = sub1 sub2 ...
     lib_LTLIBRARIES = libtop.la
     libtop_la_SOURCES =
     libtop_la_LIBADD = \
       sub1/libsub1.la \
       sub2/libsub2.la \
       ...
     
     # -- sub1/Makefile.am --
     noinst_LTLIBRARIES = libsub1.la
     libsub1_la_SOURCES = ...
     
     # -- sub2/Makefile.am --
     # showing nested convenience libraries
     SUBDIRS = sub2.1 sub2.2 ...
     noinst_LTLIBRARIES = libsub2.la
     libsub2_la_SOURCES =
     libsub2_la_LIBADD = \
       sub21/libsub21.la \
       sub22/libsub22.la \
       ...
</pre>
   <p>When using such setup, beware that <samp><span class="command">automake</span></samp> will assume
<samp><span class="file">libtop.la</span></samp> is to be linked with the C linker.  This is because
<code>libtop_la_SOURCES</code> is empty, so <samp><span class="command">automake</span></samp> picks C as
default language.  If <code>libtop_la_SOURCES</code> was not empty,
<samp><span class="command">automake</span></samp> would select the linker as explained in <a href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a>.

   <p>If one of the sublibraries contains non-C source, it is important that
the appropriate linker be chosen.  One way to achieve this is to
pretend that there is such a non-C file among the sources of the
library, thus forcing <samp><span class="command">automake</span></samp> to select the appropriate
linker.  Here is the top-level <samp><span class="file">Makefile</span></samp> of our example updated
to force C++ linking.

<pre class="example">     SUBDIRS = sub1 sub2 ...
     lib_LTLIBRARIES = libtop.la
     libtop_la_SOURCES =
     # Dummy C++ source to cause C++ linking.
     nodist_EXTRA_libtop_la_SOURCES = dummy.cxx
     libtop_la_LIBADD = \
       sub1/libsub1.la \
       sub2/libsub2.la \
       ...
</pre>
   <p>&lsquo;<samp><span class="samp">EXTRA_*_SOURCES</span></samp>&rsquo; variables are used to keep track of source
files that might be compiled (this is mostly useful when doing
conditional compilation using <code>AC_SUBST</code>, see <a href="#Conditional-Libtool-Sources">Conditional Libtool Sources</a>), and the <code>nodist_</code> prefix means the listed
sources are not to be distributed (see <a href="#Program-and-Library-Variables">Program and Library Variables</a>).  In effect the file <samp><span class="file">dummy.cxx</span></samp> does not need to
exist in the source tree.  Of course if you have some real source file
to list in <code>libtop_la_SOURCES</code> there is no point in cheating with
<code>nodist_EXTRA_libtop_la_SOURCES</code>.

<div class="node">
<a name="Libtool-Modules"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Libtool-Flags">Libtool Flags</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>

</div>

<h4 class="subsection">8.3.6 Libtool Modules</h4>

<p><a name="index-modules_002c-libtool-435"></a><a name="index-libtool-modules-436"></a><a name="index-g_t_0040option_007b_002dmodule_007d_002c-libtool-437"></a>
These are libtool libraries meant to be dlopened.  They are
indicated to libtool by passing <samp><span class="option">-module</span></samp> at link-time.

<pre class="example">     pkglib_LTLIBRARIES = mymodule.la
     mymodule_la_SOURCES = doit.c
     mymodule_la_LDFLAGS = -module
</pre>
   <p>Ordinarily, Automake requires that a library's name start with
<code>lib</code>.  However, when building a dynamically loadable module you
might wish to use a "nonstandard" name.  Automake will not complain
about such nonstandard names if it knows the library being built is a
libtool module, i.e., if <samp><span class="option">-module</span></samp> explicitly appears in the
library's <code>_LDFLAGS</code> variable (or in the common <code>AM_LDFLAGS</code>
variable when no per-library <code>_LDFLAGS</code> variable is defined).

   <p>As always, <code>AC_SUBST</code> variables are black boxes to Automake since
their values are not yet known when <samp><span class="command">automake</span></samp> is run. 
Therefore if <samp><span class="option">-module</span></samp> is set via such a variable, Automake
cannot notice it and will proceed as if the library was an ordinary
libtool library, with strict naming.

   <p>If <code>mymodule_la_SOURCES</code> is not specified, then it defaults to
the single file <samp><span class="file">mymodule.c</span></samp> (see <a href="#Default-_005fSOURCES">Default _SOURCES</a>).

<div class="node">
<a name="Libtool-Flags"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#LTLIBOBJS">LTLIBOBJS</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Libtool-Modules">Libtool Modules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>

</div>

<h4 class="subsection">8.3.7 <code>_LIBADD</code>, <code>_LDFLAGS</code>, and <code>_LIBTOOLFLAGS</code></h4>

<p><a name="index-g_t_0040code_007b_005fLIBADD_007d_002c-libtool-438"></a><a name="index-g_t_0040code_007b_005fLDFLAGS_007d_002c-libtool-439"></a><a name="index-g_t_0040code_007b_005fLIBTOOLFLAGS_007d_002c-libtool-440"></a><a name="index-AM_005fLIBTOOLFLAGS-441"></a><a name="index-LIBTOOLFLAGS-442"></a><a name="index-maude_005fLIBTOOLFLAGS-443"></a>
As shown in previous sections, the &lsquo;<samp><var>library</var><span class="samp">_LIBADD</span></samp>&rsquo;
variable should be used to list extra libtool objects (<samp><span class="file">.lo</span></samp>
files) or libtool libraries (<samp><span class="file">.la</span></samp>) to add to <var>library</var>.

   <p>The &lsquo;<samp><var>library</var><span class="samp">_LDFLAGS</span></samp>&rsquo; variable is the place to list
additional libtool linking flags, such as <samp><span class="option">-version-info</span></samp>,
<samp><span class="option">-static</span></samp>, and a lot more.  See <a href="libtool.html#Link-mode">Link mode</a>.

   <p>The <samp><span class="command">libtool</span></samp> command has two kinds of options: mode-specific
options and generic options.  Mode-specific options such as the
aforementioned linking flags should be lumped with the other flags
passed to the tool invoked by <samp><span class="command">libtool</span></samp> (hence the use of
&lsquo;<samp><var>library</var><span class="samp">_LDFLAGS</span></samp>&rsquo; for libtool linking flags).  Generic
options include <samp><span class="option">--tag=</span><var>tag</var></samp> and <samp><span class="option">--silent</span></samp>
(see <a href="libtool.html#Invoking-libtool">Invoking <samp><span class="command">libtool</span></samp></a> for more options) should appear before the mode
selection on the command line; in <samp><span class="file">Makefile.am</span></samp>s they should
be listed in the &lsquo;<samp><var>library</var><span class="samp">_LIBTOOLFLAGS</span></samp>&rsquo; variable.

   <p>If &lsquo;<samp><var>library</var><span class="samp">_LIBTOOLFLAGS</span></samp>&rsquo; is not defined, then the variable
<code>AM_LIBTOOLFLAGS</code> is used instead.

   <p>These flags are passed to libtool after the <samp><span class="option">--tag=</span><var>tag</var></samp>
option computed by Automake (if any), so
&lsquo;<samp><var>library</var><span class="samp">_LIBTOOLFLAGS</span></samp>&rsquo; (or <code>AM_LIBTOOLFLAGS</code>) is a
good place to override or supplement the <samp><span class="option">--tag=</span><var>tag</var></samp>
setting.

   <p>The libtool rules also use a <code>LIBTOOLFLAGS</code> variable that should
not be set in <samp><span class="file">Makefile.am</span></samp>: this is a user variable (see <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a>.  It allows users to run &lsquo;<samp><span class="samp">make
LIBTOOLFLAGS=--silent</span></samp>&rsquo;, for instance.  Note that the verbosity of
<samp><span class="command">libtool</span></samp> can also be influenced with the Automake
<samp><span class="option">silent-rules</span></samp> option (see <a href="#Options">Options</a>).

<div class="node">
<a name="LTLIBOBJS"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Libtool-Issues">Libtool Issues</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Libtool-Flags">Libtool Flags</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>

</div>

<h4 class="subsection">8.3.8 <code>LTLIBOBJS</code> and <code>LTALLOCA</code></h4>

<p><a name="index-g_t_0040code_007bLTLIBOBJS_007d_002c-special-handling-444"></a><a name="index-g_t_0040code_007bLIBOBJS_007d_002c-and-Libtool-445"></a><a name="index-g_t_0040code_007bLTALLOCA_007d_002c-special-handling-446"></a><a name="index-g_t_0040code_007bALLOCA_007d_002c-and-Libtool-447"></a><a name="index-LTLIBOBJS-448"></a><a name="index-LIBOBJS-449"></a><a name="index-LTALLOCA-450"></a><a name="index-ALLOCA-451"></a><a name="index-AC_005fLIBOBJ-452"></a>
Where an ordinary library might include &lsquo;<samp><span class="samp">$(LIBOBJS)</span></samp>&rsquo; or
&lsquo;<samp><span class="samp">$(ALLOCA)</span></samp>&rsquo; (see <a href="#LIBOBJS">LIBOBJS</a>), a libtool library must use
&lsquo;<samp><span class="samp">$(LTLIBOBJS)</span></samp>&rsquo; or &lsquo;<samp><span class="samp">$(LTALLOCA)</span></samp>&rsquo;.  This is required because
the object files that libtool operates on do not necessarily end in
<samp><span class="file">.o</span></samp>.

   <p>Nowadays, the computation of <code>LTLIBOBJS</code> from <code>LIBOBJS</code> is
performed automatically by Autoconf (see <a href="autoconf.html#AC_005fLIBOBJ-vs-LIBOBJS"><code>AC_LIBOBJ</code> vs. <code>LIBOBJS</code></a>).

<div class="node">
<a name="Libtool-Issues"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#LTLIBOBJS">LTLIBOBJS</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-Shared-Library">A Shared Library</a>

</div>

<h4 class="subsection">8.3.9 Common Issues Related to Libtool's Use</h4>

<ul class="menu">
<li><a accesskey="1" href="#Error-required-file-ltmain_002esh-not-found">Error required file ltmain.sh not found</a>:   The need to run libtoolize
<li><a accesskey="2" href="#Objects-created-both-with-libtool-and-without">Objects created both with libtool and without</a>:   Avoid a specific build race
</ul>

<div class="node">
<a name="Error-required-file-ltmain.sh-not-found"></a>
<a name="Error-required-file-ltmain_002esh-not-found"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Objects-created-both-with-libtool-and-without">Objects created both with libtool and without</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Libtool-Issues">Libtool Issues</a>

</div>

<h5 class="subsubsection">8.3.9.1 Error: &lsquo;<samp><span class="samp">required file `./ltmain.sh' not found</span></samp>&rsquo;</h5>

<p><a name="index-g_t_0040file_007bltmain_002esh_007d-not-found-453"></a><a name="index-g_t_0040command_007blibtoolize_007d_002c-no-longer-run-by-_0040command_007bautomake_007d-454"></a><a name="index-g_t_0040command_007blibtoolize_007d-and-_0040command_007bautoreconf_007d-455"></a><a name="index-g_t_0040command_007bautoreconf_007d-and-_0040command_007blibtoolize_007d-456"></a><a name="index-g_t_0040file_007bbootstrap_002esh_007d-and-_0040command_007bautoreconf_007d-457"></a><a name="index-g_t_0040file_007bautogen_002esh_007d-and-_0040command_007bautoreconf_007d-458"></a>
Libtool comes with a tool called <samp><span class="command">libtoolize</span></samp> that will
install libtool's supporting files into a package.  Running this
command will install <samp><span class="file">ltmain.sh</span></samp>.  You should execute it before
<samp><span class="command">aclocal</span></samp> and <samp><span class="command">automake</span></samp>.

   <p>People upgrading old packages to newer autotools are likely to face
this issue because older Automake versions used to call
<samp><span class="command">libtoolize</span></samp>.  Therefore old build scripts do not call
<samp><span class="command">libtoolize</span></samp>.

   <p>Since Automake 1.6, it has been decided that running
<samp><span class="command">libtoolize</span></samp> was none of Automake's business.  Instead, that
functionality has been moved into the <samp><span class="command">autoreconf</span></samp> command
(see <a href="autoconf.html#autoreconf-Invocation">Using <samp><span class="command">autoreconf</span></samp></a>).  If you do not want to remember what to run and
when, just learn the <samp><span class="command">autoreconf</span></samp> command.  Hopefully,
replacing existing <samp><span class="file">bootstrap.sh</span></samp> or <samp><span class="file">autogen.sh</span></samp> scripts by
a call to <samp><span class="command">autoreconf</span></samp> should also free you from any similar
incompatible change in the future.

<div class="node">
<a name="Objects-created-both-with-libtool-and-without"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Error-required-file-ltmain_002esh-not-found">Error required file ltmain.sh not found</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Libtool-Issues">Libtool Issues</a>

</div>

<h5 class="subsubsection">8.3.9.2 Objects &lsquo;<samp><span class="samp">created with both libtool and without</span></samp>&rsquo;</h5>

<p>Sometimes, the same source file is used both to build a libtool
library and to build another non-libtool target (be it a program or
another library).

   <p>Let's consider the following <samp><span class="file">Makefile.am</span></samp>.

<pre class="example">     bin_PROGRAMS = prog
     prog_SOURCES = prog.c foo.c ...
     
     lib_LTLIBRARIES = libfoo.la
     libfoo_la_SOURCES = foo.c ...
</pre>
   <p class="noindent">(In this trivial case the issue could be avoided by linking
<samp><span class="file">libfoo.la</span></samp> with <samp><span class="file">prog</span></samp> instead of listing <samp><span class="file">foo.c</span></samp> in
<code>prog_SOURCES</code>.  But let's assume we really want to keep
<samp><span class="file">prog</span></samp> and <samp><span class="file">libfoo.la</span></samp> separate.)

   <p>Technically, it means that we should build <samp><span class="file">foo.$(OBJEXT)</span></samp> for
<samp><span class="file">prog</span></samp>, and <samp><span class="file">foo.lo</span></samp> for <samp><span class="file">libfoo.la</span></samp>.  The problem is
that in the course of creating <samp><span class="file">foo.lo</span></samp>, libtool may erase (or
replace) <samp><span class="file">foo.$(OBJEXT)</span></samp>, and this cannot be avoided.

   <p>Therefore, when Automake detects this situation it will complain
with a message such as
<pre class="example">     object 'foo.$(OBJEXT)' created both with libtool and without
</pre>
   <p>A workaround for this issue is to ensure that these two objects get
different basenames.  As explained in <a href="#Renamed-Objects">Renamed Objects</a>, this
happens automatically when per-targets flags are used.

<pre class="example">     bin_PROGRAMS = prog
     prog_SOURCES = prog.c foo.c ...
     prog_CFLAGS = $(AM_CFLAGS)
     
     lib_LTLIBRARIES = libfoo.la
     libfoo_la_SOURCES = foo.c ...
</pre>
   <p class="noindent">Adding &lsquo;<samp><span class="samp">prog_CFLAGS = $(AM_CFLAGS)</span></samp>&rsquo; is almost a no-op, because
when the <code>prog_CFLAGS</code> is defined, it is used instead of
<code>AM_CFLAGS</code>.  However as a side effect it will cause
<samp><span class="file">prog.c</span></samp> and <samp><span class="file">foo.c</span></samp> to be compiled as
<samp><span class="file">prog-prog.$(OBJEXT)</span></samp> and <samp><span class="file">prog-foo.$(OBJEXT)</span></samp>, which solves
the issue.

<div class="node">
<a name="Program-and-Library-Variables"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Default-_005fSOURCES">Default _SOURCES</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#A-Shared-Library">A Shared Library</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<h3 class="section">8.4 Program and Library Variables</h3>

<p>Associated with each program is a collection of variables that can be
used to modify how that program is built.  There is a similar list of
such variables for each library.  The canonical name of the program (or
library) is used as a base for naming these variables.

   <p>In the list below, we use the name &ldquo;maude&rdquo; to refer to the program or
library.  In your <samp><span class="file">Makefile.am</span></samp> you would replace this with the
canonical name of your program.  This list also refers to &ldquo;maude&rdquo; as a
program, but in general the same rules apply for both static and dynamic
libraries; the documentation below notes situations where programs and
libraries differ.

     <dl>
<dt><code>maude_SOURCES</code><a name="index-maude_005fSOURCES-459"></a><dd>This variable, if it exists, lists all the source files that are
compiled to build the program.  These files are added to the
distribution by default.  When building the program, Automake will cause
each source file to be compiled to a single <samp><span class="file">.o</span></samp> file (or
<samp><span class="file">.lo</span></samp> when using libtool).  Normally these object files are named
after the source file, but other factors can change this.  If a file in
the <code>_SOURCES</code> variable has an unrecognized extension, Automake
will do one of two things with it.  If a suffix rule exists for turning
files with the unrecognized extension into <samp><span class="file">.o</span></samp> files, then
<samp><span class="command">automake</span></samp> will treat this file as it will any other source file
(see <a href="#Support-for-Other-Languages">Support for Other Languages</a>).  Otherwise, the file will be
ignored as though it were a header file.

     <p>The prefixes <code>dist_</code> and <code>nodist_</code> can be used to control
whether files listed in a <code>_SOURCES</code> variable are distributed. 
<code>dist_</code> is redundant, as sources are distributed by default, but it
can be specified for clarity if desired.

     <p>It is possible to have both <code>dist_</code> and <code>nodist_</code> variants of
a given <code>_SOURCES</code> variable at once; this lets you easily
distribute some files and not others, for instance:

     <pre class="example">          nodist_maude_SOURCES = nodist.c
          dist_maude_SOURCES = dist-me.c
</pre>
     <p>By default the output file (on Unix systems, the <samp><span class="file">.o</span></samp> file) will
be put into the current build directory.  However, if the option
<samp><span class="option">subdir-objects</span></samp> is in effect in the current directory then the
<samp><span class="file">.o</span></samp> file will be put into the subdirectory named after the
source file.  For instance, with <samp><span class="option">subdir-objects</span></samp> enabled,
<samp><span class="file">sub/dir/file.c</span></samp> will be compiled to <samp><span class="file">sub/dir/file.o</span></samp>.  Some
people prefer this mode of operation.  You can specify
<samp><span class="option">subdir-objects</span></samp> in <code>AUTOMAKE_OPTIONS</code> (see <a href="#Options">Options</a>). 
<a name="index-Subdirectory_002c-objects-in-460"></a><a name="index-Objects-in-subdirectory-461"></a>

     <br><dt><code>EXTRA_maude_SOURCES</code><a name="index-EXTRA_005fmaude_005fSOURCES-462"></a><dd>Automake needs to know the list of files you intend to compile
<em>statically</em>.  For one thing, this is the only way Automake has of
knowing what sort of language support a given <samp><span class="file">Makefile.in</span></samp>
requires.  <a rel="footnote" href="#fn-3" name="fnd-3"><sup>3</sup></a>  This means that, for example, you can't put a
configure substitution like &lsquo;<samp><span class="samp">@my_sources@</span></samp>&rsquo; into a &lsquo;<samp><span class="samp">_SOURCES</span></samp>&rsquo;
variable.  If you intend to conditionally compile source files and use
<samp><span class="file">configure</span></samp> to substitute the appropriate object names into, e.g.,
<code>_LDADD</code> (see below), then you should list the corresponding source
files in the <code>EXTRA_</code> variable.

     <p>This variable also supports <code>dist_</code> and <code>nodist_</code> prefixes. 
For instance, <code>nodist_EXTRA_maude_SOURCES</code> would list extra
sources that may need to be built, but should not be distributed.

     <br><dt><code>maude_AR</code><a name="index-maude_005fAR-463"></a><dd>A static library is created by default by invoking &lsquo;<samp><span class="samp">$(AR)
$(ARFLAGS)</span></samp>&rsquo; followed by the name of the library and then the objects
being put into the library.  You can override this by setting the
<code>_AR</code> variable.  This is usually used with C++; some C++
compilers require a special invocation in order to instantiate all the
templates that should go into a library.  For instance, the SGI C++
compiler likes this variable set like so:
     <pre class="example">          libmaude_a_AR = $(CXX) -ar -o
</pre>
     <br><dt><code>maude_LIBADD</code><a name="index-maude_005fLIBADD-464"></a><dd>Extra objects can be added to a <em>library</em> using the <code>_LIBADD</code>
variable.  For instance, this should be used for objects determined by
<samp><span class="command">configure</span></samp> (see <a href="#A-Library">A Library</a>).

     <p>In the case of libtool libraries, <code>maude_LIBADD</code> can also refer
to other libtool libraries.

     <br><dt><code>maude_LDADD</code><a name="index-maude_005fLDADD-465"></a><dd>Extra objects (<samp><span class="file">*.$(OBJEXT)</span></samp>) and libraries (<samp><span class="file">*.a</span></samp>,
<samp><span class="file">*.la</span></samp>) can be added to a <em>program</em> by listing them in the
<code>_LDADD</code> variable.  For instance, this should be used for objects
determined by <samp><span class="command">configure</span></samp> (see <a href="#Linking">Linking</a>).

     <p><code>_LDADD</code> and <code>_LIBADD</code> are inappropriate for passing
program-specific linker flags (except for <samp><span class="option">-l</span></samp>, <samp><span class="option">-L</span></samp>,
<samp><span class="option">-dlopen</span></samp> and <samp><span class="option">-dlpreopen</span></samp>).  Use the <code>_LDFLAGS</code> variable
for this purpose.

     <p>For instance, if your <samp><span class="file">configure.ac</span></samp> uses <code>AC_PATH_XTRA</code>, you
could link your program against the X libraries like so:

     <pre class="example">          maude_LDADD = $(X_PRE_LIBS) $(X_LIBS) $(X_EXTRA_LIBS)
</pre>
     <p>We recommend that you use <samp><span class="option">-l</span></samp> and <samp><span class="option">-L</span></samp> only when
referring to third-party libraries, and give the explicit file names
of any library built by your package.  Doing so will ensure that
<code>maude_DEPENDENCIES</code> (see below) is correctly defined by default.

     <br><dt><code>maude_LDFLAGS</code><a name="index-maude_005fLDFLAGS-466"></a><dd>This variable is used to pass extra flags to the link step of a program
or a shared library.  It overrides the <code>AM_LDFLAGS</code> variable.

     <br><dt><code>maude_LIBTOOLFLAGS</code><a name="index-maude_005fLIBTOOLFLAGS-467"></a><dd>This variable is used to pass extra options to <samp><span class="command">libtool</span></samp>. 
It overrides the <code>AM_LIBTOOLFLAGS</code> variable. 
These options are output before <samp><span class="command">libtool</span></samp>'s <samp><span class="option">--mode=</span><var>mode</var></samp>
option, so they should not be mode-specific options (those belong to
the compiler or linker flags).  See <a href="#Libtool-Flags">Libtool Flags</a>.

     <br><dt><code>maude_DEPENDENCIES</code><a name="index-maude_005fDEPENDENCIES-468"></a><dt><code>EXTRA_maude_DEPENDENCIES</code><a name="index-EXTRA_005fmaude_005fDEPENDENCIES-469"></a><dd>It is also occasionally useful to have a target (program or library)
depend on some other file that is not actually part of that target. 
This can be done using the <code>_DEPENDENCIES</code> variable.  Each
target depends on the contents of such a variable, but no further
interpretation is done.

     <p>Since these dependencies are associated to the link rule used to
create the programs they should normally list files used by the link
command.  That is <samp><span class="file">*.$(OBJEXT)</span></samp>, <samp><span class="file">*.a</span></samp>, or <samp><span class="file">*.la</span></samp> files
for programs; <samp><span class="file">*.lo</span></samp> and <samp><span class="file">*.la</span></samp> files for Libtool libraries;
and <samp><span class="file">*.$(OBJEXT)</span></samp> files for static libraries.  In rare cases you
may need to add other kinds of files such as linker scripts, but
<em>listing a source file in </em><code>_DEPENDENCIES</code><em> is wrong</em>.  If
some source file needs to be built before all the components of a
program are built, consider using the <code>BUILT_SOURCES</code> variable
(see <a href="#Sources">Sources</a>).

     <p>If <code>_DEPENDENCIES</code> is not supplied, it is computed by Automake. 
The automatically-assigned value is the contents of <code>_LDADD</code> or
<code>_LIBADD</code>, with most configure substitutions, <samp><span class="option">-l</span></samp>, <samp><span class="option">-L</span></samp>,
<samp><span class="option">-dlopen</span></samp> and <samp><span class="option">-dlpreopen</span></samp> options removed.  The configure
substitutions that are left in are only &lsquo;<samp><span class="samp">$(LIBOBJS)</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">$(ALLOCA)</span></samp>&rsquo;; these are left because it is known that they will not
cause an invalid value for <code>_DEPENDENCIES</code> to be generated.

     <p><code>_DEPENDENCIES</code> is more likely used to perform conditional
compilation using an <code>AC_SUBST</code> variable that contains a list of
objects.  See <a href="#Conditional-Sources">Conditional Sources</a>, and <a href="#Conditional-Libtool-Sources">Conditional Libtool Sources</a>.

     <p>The <code>EXTRA_*_DEPENDENCIES</code> variable may be useful for cases where
you merely want to augment the <samp><span class="command">automake</span></samp>-generated
<code>_DEPENDENCIES</code> variable rather than replacing it.

     <br><dt><code>maude_LINK</code><a name="index-maude_005fLINK-470"></a><dd>You can override the linker on a per-program basis.  By default the
linker is chosen according to the languages used by the program.  For
instance, a program that includes C++ source code would use the C++
compiler to link.  The <code>_LINK</code> variable must hold the name of a
command that can be passed all the <samp><span class="file">.o</span></samp> file names and libraries
to link against as arguments.  Note that the name of the underlying
program is <em>not</em> passed to <code>_LINK</code>; typically one uses
&lsquo;<samp><span class="samp">$@</span></samp>&rsquo;:

     <pre class="example">          maude_LINK = $(CCLD) -magic -o $@
</pre>
     <p>If a <code>_LINK</code> variable is not supplied, it may still be generated
and used by Automake due to the use of per-target link flags such as
<code>_CFLAGS</code>, <code>_LDFLAGS</code> or <code>_LIBTOOLFLAGS</code>, in cases where
they apply.

     <br><dt><code>maude_CCASFLAGS</code><a name="index-maude_005fCCASFLAGS-471"></a><dt><code>maude_CFLAGS</code><a name="index-maude_005fCFLAGS-472"></a><dt><code>maude_CPPFLAGS</code><a name="index-maude_005fCPPFLAGS-473"></a><dt><code>maude_CXXFLAGS</code><a name="index-maude_005fCXXFLAGS-474"></a><dt><code>maude_FFLAGS</code><a name="index-maude_005fFFLAGS-475"></a><dt><code>maude_GCJFLAGS</code><a name="index-maude_005fGCJFLAGS-476"></a><dt><code>maude_LFLAGS</code><a name="index-maude_005fLFLAGS-477"></a><dt><code>maude_OBJCFLAGS</code><a name="index-maude_005fOBJCFLAGS-478"></a><dt><code>maude_OBJCXXFLAGS</code><a name="index-maude_005fOBJCXXFLAGS-479"></a><dt><code>maude_RFLAGS</code><a name="index-maude_005fRFLAGS-480"></a><dt><code>maude_UPCFLAGS</code><a name="index-maude_005fUPCFLAGS-481"></a><dt><code>maude_YFLAGS</code><a name="index-maude_005fYFLAGS-482"></a><dd><a name="index-per_002dtarget-compilation-flags_002c-defined-483"></a>Automake allows you to set compilation flags on a per-program (or
per-library) basis.  A single source file can be included in several
programs, and it will potentially be compiled with different flags for
each program.  This works for any language directly supported by
Automake.  These <dfn>per-target compilation flags</dfn> are
&lsquo;<samp><span class="samp">_CCASFLAGS</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">_CFLAGS</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">_CPPFLAGS</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">_CXXFLAGS</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">_FFLAGS</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">_GCJFLAGS</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">_LFLAGS</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">_OBJCFLAGS</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">_OBJCXXFLAGS</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">_RFLAGS</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">_UPCFLAGS</span></samp>&rsquo;, and
&lsquo;<samp><span class="samp">_YFLAGS</span></samp>&rsquo;.

     <p>When using a per-target compilation flag, Automake will choose a
different name for the intermediate object files.  Ordinarily a file
like <samp><span class="file">sample.c</span></samp> will be compiled to produce <samp><span class="file">sample.o</span></samp>. 
However, if the program's <code>_CFLAGS</code> variable is set, then the
object file will be named, for instance, <samp><span class="file">maude-sample.o</span></samp>.  (See
also <a href="#Renamed-Objects">Renamed Objects</a>.)  The use of per-target compilation flags
with C sources requires that the macro <code>AM_PROG_CC_C_O</code> be called
from <samp><span class="file">configure.ac</span></samp>.

     <p>In compilations with per-target flags, the ordinary &lsquo;<samp><span class="samp">AM_</span></samp>&rsquo; form of
the flags variable is <em>not</em> automatically included in the
compilation (however, the user form of the variable <em>is</em> included). 
So for instance, if you want the hypothetical <samp><span class="file">maude</span></samp> compilations
to also use the value of <code>AM_CFLAGS</code>, you would need to write:

     <pre class="example">          maude_CFLAGS = ... your flags ... $(AM_CFLAGS)
</pre>
     <p>See <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a>, for more discussion about the
interaction between user variables, &lsquo;<samp><span class="samp">AM_</span></samp>&rsquo; shadow variables, and
per-target variables.

     <br><dt><code>maude_SHORTNAME</code><a name="index-maude_005fSHORTNAME-484"></a><dd>On some platforms the allowable file names are very short.  In order to
support these systems and per-target compilation flags at the same
time, Automake allows you to set a &ldquo;short name&rdquo; that will influence
how intermediate object files are named.  For instance, in the following
example,

     <pre class="example">          bin_PROGRAMS = maude
          maude_CPPFLAGS = -DSOMEFLAG
          maude_SHORTNAME = m
          maude_SOURCES = sample.c ...
</pre>
     <p class="noindent">the object file would be named <samp><span class="file">m-sample.o</span></samp> rather than
<samp><span class="file">maude-sample.o</span></samp>.

     <p>This facility is rarely needed in practice,
and we recommend avoiding it until you find it is required. 
</dl>

<div class="node">
<a name="Default-_SOURCES"></a>
<a name="Default-_005fSOURCES"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#LIBOBJS">LIBOBJS</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Program-and-Library-Variables">Program and Library Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<h3 class="section">8.5 Default <code>_SOURCES</code></h3>

<p><a name="index-g_t_005fSOURCES-485"></a><a name="index-SOURCES-486"></a><a name="index-g_t_0040code_007b_005fSOURCES_007d_002c-default-487"></a><a name="index-default-_0040code_007b_005fSOURCES_007d-488"></a><a name="index-AM_005fDEFAULT_005fSOURCE_005fEXT-489"></a>
<code>_SOURCES</code> variables are used to specify source files of programs
(see <a href="#A-Program">A Program</a>), libraries (see <a href="#A-Library">A Library</a>), and Libtool
libraries (see <a href="#A-Shared-Library">A Shared Library</a>).

   <p>When no such variable is specified for a target, Automake will define
one itself.  The default is to compile a single C file whose base name
is the name of the target itself, with any extension replaced by
<code>AM_DEFAULT_SOURCE_EXT</code>, which defaults to <samp><span class="file">.c</span></samp>.

   <p>For example if you have the following somewhere in your
<samp><span class="file">Makefile.am</span></samp> with no corresponding <code>libfoo_a_SOURCES</code>:

<pre class="example">     lib_LIBRARIES = libfoo.a sub/libc++.a
</pre>
   <p class="noindent"><samp><span class="file">libfoo.a</span></samp> will be built using a default source file named
<samp><span class="file">libfoo.c</span></samp>, and <samp><span class="file">sub/libc++.a</span></samp> will be built from
<samp><span class="file">sub/libc++.c</span></samp>.  (In older versions <samp><span class="file">sub/libc++.a</span></samp>
would be built from <samp><span class="file">sub_libc___a.c</span></samp>, i.e., the default source
was the canonized name of the target, with <samp><span class="file">.c</span></samp> appended. 
We believe the new behavior is more sensible, but for backward
compatibility <samp><span class="command">automake</span></samp> will use the old name if a file or a rule
with that name exists and <code>AM_DEFAULT_SOURCE_EXT</code> is not used.)

   <p><a name="index-g_t_0040code_007bcheck_005fPROGRAMS_007d-example-490"></a><a name="index-check_005fPROGRAMS-491"></a>Default sources are mainly useful in test suites, when building many
test programs each from a single source.  For instance, in

<pre class="example">     check_PROGRAMS = test1 test2 test3
     AM_DEFAULT_SOURCE_EXT = .cpp
</pre>
   <p class="noindent"><samp><span class="file">test1</span></samp>, <samp><span class="file">test2</span></samp>, and <samp><span class="file">test3</span></samp> will be built
from <samp><span class="file">test1.cpp</span></samp>, <samp><span class="file">test2.cpp</span></samp>, and <samp><span class="file">test3.cpp</span></samp>. 
Without the last line, they will be built from <samp><span class="file">test1.c</span></samp>,
<samp><span class="file">test2.c</span></samp>, and <samp><span class="file">test3.c</span></samp>.

   <p><a name="index-Libtool-modules_002c-default-source-example-492"></a><a name="index-default-source_002c-Libtool-modules-example-493"></a>Another case where this is convenient is building many Libtool modules
(<samp><span class="file">module</span><var>n</var><span class="file">.la</span></samp>), each defined in its own file
(<samp><span class="file">module</span><var>n</var><span class="file">.c</span></samp>).

<pre class="example">     AM_LDFLAGS = -module
     lib_LTLIBRARIES = module1.la module2.la module3.la
</pre>
   <p><a name="index-empty-_0040code_007b_005fSOURCES_007d-494"></a><a name="index-g_t_0040code_007b_005fSOURCES_007d_002c-empty-495"></a>Finally, there is one situation where this default source computation
needs to be avoided: when a target should not be built from sources. 
We already saw such an example in <a href="#true">true</a>; this happens when all
the constituents of a target have already been compiled and just need
to be combined using a <code>_LDADD</code> variable.  Then it is necessary
to define an empty <code>_SOURCES</code> variable, so that <samp><span class="command">automake</span></samp>
does not compute a default.

<pre class="example">     bin_PROGRAMS = target
     target_SOURCES =
     target_LDADD = libmain.a libmisc.a
</pre>
   <div class="node">
<a name="LIBOBJS"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Program-Variables">Program Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Default-_005fSOURCES">Default _SOURCES</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<h3 class="section">8.6 Special handling for <code>LIBOBJS</code> and <code>ALLOCA</code></h3>

<p><a name="index-g_t_0040code_007bLIBOBJS_007d_002c-example-496"></a><a name="index-g_t_0040code_007bALLOCA_007d_002c-example-497"></a><a name="index-g_t_0040code_007bLIBOBJS_007d_002c-special-handling-498"></a><a name="index-g_t_0040code_007bALLOCA_007d_002c-special-handling-499"></a><a name="index-LTLIBOBJS-500"></a><a name="index-LIBOBJS-501"></a><a name="index-LTALLOCA-502"></a><a name="index-ALLOCA-503"></a>
The &lsquo;<samp><span class="samp">$(LIBOBJS)</span></samp>&rsquo; and &lsquo;<samp><span class="samp">$(ALLOCA)</span></samp>&rsquo; variables list object
files that should be compiled into the project to provide an
implementation for functions that are missing or broken on the host
system.  They are substituted by <samp><span class="file">configure</span></samp>.

   <p><a name="index-AC_005fLIBOBJ-504"></a>
These variables are defined by Autoconf macros such as
<code>AC_LIBOBJ</code>, <code>AC_REPLACE_FUNCS</code> (see <a href="autoconf.html#Generic-Functions">Generic Function Checks</a>), or
<code>AC_FUNC_ALLOCA</code> (see <a href="autoconf.html#Particular-Functions">Particular Function Checks</a>).  Many other Autoconf
macros call <code>AC_LIBOBJ</code> or <code>AC_REPLACE_FUNCS</code> to
populate &lsquo;<samp><span class="samp">$(LIBOBJS)</span></samp>&rsquo;.

   <p><a name="index-AC_005fLIBSOURCE-505"></a>
Using these variables is very similar to doing conditional compilation
using <code>AC_SUBST</code> variables, as described in <a href="#Conditional-Sources">Conditional Sources</a>.  That is, when building a program, &lsquo;<samp><span class="samp">$(LIBOBJS)</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">$(ALLOCA)</span></samp>&rsquo; should be added to the associated &lsquo;<samp><span class="samp">*_LDADD</span></samp>&rsquo;
variable, or to the &lsquo;<samp><span class="samp">*_LIBADD</span></samp>&rsquo; variable when building a library. 
However there is no need to list the corresponding sources in
&lsquo;<samp><span class="samp">EXTRA_*_SOURCES</span></samp>&rsquo; nor to define &lsquo;<samp><span class="samp">*_DEPENDENCIES</span></samp>&rsquo;.  Automake
automatically adds &lsquo;<samp><span class="samp">$(LIBOBJS)</span></samp>&rsquo; and &lsquo;<samp><span class="samp">$(ALLOCA)</span></samp>&rsquo; to the
dependencies, and it will discover the list of corresponding source
files automatically (by tracing the invocations of the
<code>AC_LIBSOURCE</code> Autoconf macros).  If you have already defined
&lsquo;<samp><span class="samp">*_DEPENDENCIES</span></samp>&rsquo; explicitly for an unrelated reason, then you
either need to add these variables manually, or use
&lsquo;<samp><span class="samp">EXTRA_*_DEPENDENCIES</span></samp>&rsquo; instead of &lsquo;<samp><span class="samp">*_DEPENDENCIES</span></samp>&rsquo;.

   <p>These variables are usually used to build a portability library that
is linked with all the programs of the project.  We now review a
sample setup.  First, <samp><span class="file">configure.ac</span></samp> contains some checks that
affect either <code>LIBOBJS</code> or <code>ALLOCA</code>.

<pre class="example">     # configure.ac
     ...
     AC_CONFIG_LIBOBJ_DIR([lib])
     ...
     AC_FUNC_MALLOC             dnl May add malloc.$(OBJEXT) to LIBOBJS
     AC_FUNC_MEMCMP             dnl May add memcmp.$(OBJEXT) to LIBOBJS
     AC_REPLACE_FUNCS([strdup]) dnl May add strdup.$(OBJEXT) to LIBOBJS
     AC_FUNC_ALLOCA             dnl May add alloca.$(OBJEXT) to ALLOCA
     ...
     AC_CONFIG_FILES([
       lib/Makefile
       src/Makefile
     ])
     AC_OUTPUT
</pre>
   <p><a name="index-AC_005fCONFIG_005fLIBOBJ_005fDIR-506"></a>
The <code>AC_CONFIG_LIBOBJ_DIR</code> tells Autoconf that the source files
of these object files are to be found in the <samp><span class="file">lib/</span></samp> directory. 
Automake can also use this information, otherwise it expects the
source files are to be in the directory where the &lsquo;<samp><span class="samp">$(LIBOBJS)</span></samp>&rsquo;
and &lsquo;<samp><span class="samp">$(ALLOCA)</span></samp>&rsquo; variables are used.

   <p>The <samp><span class="file">lib/</span></samp> directory should therefore contain <samp><span class="file">malloc.c</span></samp>,
<samp><span class="file">memcmp.c</span></samp>, <samp><span class="file">strdup.c</span></samp>, <samp><span class="file">alloca.c</span></samp>.  Here is its
<samp><span class="file">Makefile.am</span></samp>:

<pre class="example">     # lib/Makefile.am
     
     noinst_LIBRARIES = libcompat.a
     libcompat_a_SOURCES =
     libcompat_a_LIBADD = $(LIBOBJS) $(ALLOCA)
</pre>
   <p>The library can have any name, of course, and anyway it is not going
to be installed: it just holds the replacement versions of the missing
or broken functions so we can later link them in.  Many projects
also include extra functions, specific to the project, in that
library: they are simply added on the <code>_SOURCES</code> line.

   <p><a name="index-Empty-libraries-and-_0040samp_007b_0024_0028LIBOBJS_0029_007d-507"></a><a name="index-g_t_0040samp_007b_0024_0028LIBOBJS_0029_007d-and-empty-libraries-508"></a>There is a small trap here, though: &lsquo;<samp><span class="samp">$(LIBOBJS)</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">$(ALLOCA)</span></samp>&rsquo; might be empty, and building an empty library is not
portable.  You should ensure that there is always something to put in
<samp><span class="file">libcompat.a</span></samp>.  Most projects will also add some utility
functions in that directory, and list them in
<code>libcompat_a_SOURCES</code>, so in practice <samp><span class="file">libcompat.a</span></samp> cannot
be empty.

   <p>Finally here is how this library could be used from the <samp><span class="file">src/</span></samp>
directory.

<pre class="example">     # src/Makefile.am
     
     # Link all programs in this directory with libcompat.a
     LDADD = ../lib/libcompat.a
     
     bin_PROGRAMS = tool1 tool2 ...
     tool1_SOURCES = ...
     tool2_SOURCES = ...
</pre>
   <p>When option <samp><span class="option">subdir-objects</span></samp> is not used, as in the above
example, the variables &lsquo;<samp><span class="samp">$(LIBOBJS)</span></samp>&rsquo; or &lsquo;<samp><span class="samp">$(ALLOCA)</span></samp>&rsquo; can only
be used in the directory where their sources lie.  E.g., here it would
be wrong to use &lsquo;<samp><span class="samp">$(LIBOBJS)</span></samp>&rsquo; or &lsquo;<samp><span class="samp">$(ALLOCA)</span></samp>&rsquo; in
<samp><span class="file">src/Makefile.am</span></samp>.  However if both <samp><span class="option">subdir-objects</span></samp> and
<code>AC_CONFIG_LIBOBJ_DIR</code> are used, it is OK to use these variables
in other directories.  For instance <samp><span class="file">src/Makefile.am</span></samp> could be
changed as follows.

<pre class="example">     # src/Makefile.am
     
     AUTOMAKE_OPTIONS = subdir-objects
     LDADD = $(LIBOBJS) $(ALLOCA)
     
     bin_PROGRAMS = tool1 tool2 ...
     tool1_SOURCES = ...
     tool2_SOURCES = ...
</pre>
   <p>Because &lsquo;<samp><span class="samp">$(LIBOBJS)</span></samp>&rsquo; and &lsquo;<samp><span class="samp">$(ALLOCA)</span></samp>&rsquo; contain object
file names that end with &lsquo;<samp><span class="samp">.$(OBJEXT)</span></samp>&rsquo;, they are not suitable for
Libtool libraries (where the expected object extension is <samp><span class="file">.lo</span></samp>):
<code>LTLIBOBJS</code> and <code>LTALLOCA</code> should be used instead.

   <p><code>LTLIBOBJS</code> is defined automatically by Autoconf and should not
be defined by hand (as in the past), however at the time of writing
<code>LTALLOCA</code> still needs to be defined from <code>ALLOCA</code> manually. 
See <a href="autoconf.html#AC_005fLIBOBJ-vs-LIBOBJS"><code>AC_LIBOBJ</code> vs. <code>LIBOBJS</code></a>.

<div class="node">
<a name="Program-Variables"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Yacc-and-Lex">Yacc and Lex</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#LIBOBJS">LIBOBJS</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<h3 class="section">8.7 Variables used when building a program</h3>

<p>Occasionally it is useful to know which <samp><span class="file">Makefile</span></samp> variables
Automake uses for compilations, and in which order (see <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a>); for instance, you might need to do your own
compilation in some special cases.

   <p>Some variables are inherited from Autoconf; these are <code>CC</code>,
<code>CFLAGS</code>, <code>CPPFLAGS</code>, <code>DEFS</code>, <code>LDFLAGS</code>, and
<code>LIBS</code>. 
<a name="index-CC-509"></a><a name="index-CFLAGS-510"></a><a name="index-CPPFLAGS-511"></a><a name="index-DEFS-512"></a><a name="index-LDFLAGS-513"></a><a name="index-LIBS-514"></a>
There are some additional variables that Automake defines on its own:

     <dl>
<dt><code>AM_CPPFLAGS</code><a name="index-AM_005fCPPFLAGS-515"></a><dd>The contents of this variable are passed to every compilation that invokes
the C preprocessor; it is a list of arguments to the preprocessor.  For
instance, <samp><span class="option">-I</span></samp> and <samp><span class="option">-D</span></samp> options should be listed here.

     <p>Automake already provides some <samp><span class="option">-I</span></samp> options automatically, in a
separate variable that is also passed to every compilation that invokes
the C preprocessor.  In particular it generates &lsquo;<samp><span class="samp">-I.</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">-I$(srcdir)</span></samp>&rsquo;, and a <samp><span class="option">-I</span></samp> pointing to the directory holding
<samp><span class="file">config.h</span></samp> (if you've used <code>AC_CONFIG_HEADERS</code> or
<code>AM_CONFIG_HEADER</code>).  You can disable the default <samp><span class="option">-I</span></samp>
options using the <samp><span class="option">nostdinc</span></samp> option.

     <p>When a file to be included is generated during the build and not part
of a distribution tarball, its location is under <code>$(builddir)</code>,
not under <code>$(srcdir)</code>.  This matters especially for packages that
use header files placed in sub-directories and want to allow builds
outside the source tree (see <a href="#VPATH-Builds">VPATH Builds</a>). In that case we
recommend to use a pair of <samp><span class="option">-I</span></samp> options, such as, e.g.,
&lsquo;<samp><span class="samp">-Isome/subdir -I$(srcdir)/some/subdir</span></samp>&rsquo; or
&lsquo;<samp><span class="samp">-I$(top_builddir)/some/subdir -I$(top_srcdir)/some/subdir</span></samp>&rsquo;. 
Note that the reference to the build tree should come before the
reference to the source tree, so that accidentally leftover generated
files in the source directory are ignored.

     <p><code>AM_CPPFLAGS</code> is ignored in preference to a per-executable (or
per-library) <code>_CPPFLAGS</code> variable if it is defined.

     <br><dt><code>INCLUDES</code><a name="index-INCLUDES-516"></a><dd>This does the same job as <code>AM_CPPFLAGS</code> (or any per-target
<code>_CPPFLAGS</code> variable if it is used).  It is an older name for the
same functionality.  This variable is deprecated; we suggest using
<code>AM_CPPFLAGS</code> and per-target <code>_CPPFLAGS</code> instead.

     <br><dt><code>AM_CFLAGS</code><a name="index-AM_005fCFLAGS-517"></a><dd>This is the variable the <samp><span class="file">Makefile.am</span></samp> author can use to pass
in additional C compiler flags.  It is more fully documented elsewhere. 
In some situations, this is not used, in preference to the
per-executable (or per-library) <code>_CFLAGS</code>.

     <br><dt><code>COMPILE</code><a name="index-COMPILE-518"></a><dd>This is the command used to actually compile a C source file.  The
file name is appended to form the complete command line.

     <br><dt><code>AM_LDFLAGS</code><a name="index-AM_005fLDFLAGS-519"></a><dd>This is the variable the <samp><span class="file">Makefile.am</span></samp> author can use to pass
in additional linker flags.  In some situations, this is not used, in
preference to the per-executable (or per-library) <code>_LDFLAGS</code>.

     <br><dt><code>LINK</code><a name="index-LINK-520"></a><dd>This is the command used to actually link a C program.  It already
includes &lsquo;<samp><span class="samp">-o $@</span></samp>&rsquo; and the usual variable references (for instance,
<code>CFLAGS</code>); it takes as &ldquo;arguments&rdquo; the names of the object files
and libraries to link in.  This variable is not used when the linker is
overridden with a per-target <code>_LINK</code> variable or per-target flags
cause Automake to define such a <code>_LINK</code> variable. 
</dl>

<div class="node">
<a name="Yacc-and-Lex"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#C_002b_002b-Support">C++ Support</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Program-Variables">Program Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<h3 class="section">8.8 Yacc and Lex support</h3>

<p>Automake has somewhat idiosyncratic support for Yacc and Lex.

   <p>Automake assumes that the <samp><span class="file">.c</span></samp> file generated by <samp><span class="command">yacc</span></samp>
(or <samp><span class="command">lex</span></samp>) should be named using the basename of the input
file.  That is, for a yacc source file <samp><span class="file">foo.y</span></samp>, Automake will
cause the intermediate file to be named <samp><span class="file">foo.c</span></samp> (as opposed to
<samp><span class="file">y.tab.c</span></samp>, which is more traditional).

   <p>The extension of a yacc source file is used to determine the extension
of the resulting C or C++ source and header files.  Note that header
files are generated only when the <samp><span class="option">-d</span></samp> Yacc option is used; see
below for more information about this flag, and how to specify it. 
Files with the extension <samp><span class="file">.y</span></samp> will thus be turned into <samp><span class="file">.c</span></samp>
sources and <samp><span class="file">.h</span></samp> headers; likewise, <samp><span class="file">.yy</span></samp> will become
<samp><span class="file">.cc</span></samp> and <samp><span class="file">.hh</span></samp>, <samp><span class="file">.y++</span></samp> will become <samp><span class="file">c++</span></samp> and
<samp><span class="file">h++</span></samp>, <samp><span class="file">.yxx</span></samp> will become <samp><span class="file">.cxx</span></samp> and <samp><span class="file">.hxx</span></samp>,
and <samp><span class="file">.ypp</span></samp> will become <samp><span class="file">.cpp</span></samp> and <samp><span class="file">.hpp</span></samp>.

   <p>Similarly, lex source files can be used to generate C or C++; the
extensions <samp><span class="file">.l</span></samp>, <samp><span class="file">.ll</span></samp>, <samp><span class="file">.l++</span></samp>, <samp><span class="file">.lxx</span></samp>, and
<samp><span class="file">.lpp</span></samp> are recognized.

   <p>You should never explicitly mention the intermediate (C or C++) file
in any <code>SOURCES</code> variable; only list the source file.

   <p>The intermediate files generated by <samp><span class="command">yacc</span></samp> (or <samp><span class="command">lex</span></samp>)
will be included in any distribution that is made.  That way the user
doesn't need to have <samp><span class="command">yacc</span></samp> or <samp><span class="command">lex</span></samp>.

   <p>If a <samp><span class="command">yacc</span></samp> source file is seen, then your <samp><span class="file">configure.ac</span></samp> must
define the variable <code>YACC</code>.  This is most easily done by invoking
the macro <code>AC_PROG_YACC</code> (see <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>).

   <p><a name="index-YFLAGS-521"></a><a name="index-AM_005fYFLAGS-522"></a>When <code>yacc</code> is invoked, it is passed <code>AM_YFLAGS</code> and
<code>YFLAGS</code>.  The latter is a user variable and the former is
intended for the <samp><span class="file">Makefile.am</span></samp> author.

   <p><code>AM_YFLAGS</code> is usually used to pass the <samp><span class="option">-d</span></samp> option to
<samp><span class="command">yacc</span></samp>.  Automake knows what this means and will automatically
adjust its rules to update and distribute the header file built by
&lsquo;<samp><span class="samp">yacc -d</span></samp>&rsquo;<a rel="footnote" href="#fn-4" name="fnd-4"><sup>4</sup></a>. 
What Automake cannot guess, though, is where this
header will be used: it is up to you to ensure the header gets built
before it is first used.  Typically this is necessary in order for
dependency tracking to work when the header is included by another
file.  The common solution is listing the header file in
<code>BUILT_SOURCES</code> (see <a href="#Sources">Sources</a>) as follows.

<pre class="example">     BUILT_SOURCES = parser.h
     AM_YFLAGS = -d
     bin_PROGRAMS = foo
     foo_SOURCES = ... parser.y ...
</pre>
   <p>If a <samp><span class="command">lex</span></samp> source file is seen, then your <samp><span class="file">configure.ac</span></samp>
must define the variable <code>LEX</code>.  You can use <code>AC_PROG_LEX</code>
to do this (see <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>), but using <code>AM_PROG_LEX</code> macro
(see <a href="#Macros">Macros</a>) is recommended.

   <p><a name="index-LFLAGS-523"></a><a name="index-AM_005fLFLAGS-524"></a>When <samp><span class="command">lex</span></samp> is invoked, it is passed <code>AM_LFLAGS</code> and
<code>LFLAGS</code>.  The latter is a user variable and the former is
intended for the <samp><span class="file">Makefile.am</span></samp> author.

   <p>When <code>AM_MAINTAINER_MODE</code> (see <a href="#maintainer_002dmode">maintainer-mode</a>) is used, the
rebuild rule for distributed Yacc and Lex sources are only used when
<code>maintainer-mode</code> is enabled, or when the files have been erased.

   <p><a name="index-g_t_0040command_007bylwrap_007d-525"></a><a name="index-g_t_0040command_007byacc_007d_002c-multiple-parsers-526"></a><a name="index-Multiple-_0040command_007byacc_007d-parsers-527"></a><a name="index-Multiple-_0040command_007blex_007d-lexers-528"></a><a name="index-g_t_0040command_007blex_007d_002c-multiple-lexers-529"></a>
When <samp><span class="command">lex</span></samp> or <samp><span class="command">yacc</span></samp> sources are used, <code>automake
-i</code> automatically installs an auxiliary program called
<samp><span class="command">ylwrap</span></samp> in your package (see <a href="#Auxiliary-Programs">Auxiliary Programs</a>).  This
program is used by the build rules to rename the output of these
tools, and makes it possible to include multiple <samp><span class="command">yacc</span></samp> (or
<samp><span class="command">lex</span></samp>) source files in a single directory.  (This is necessary
because yacc's output file name is fixed, and a parallel make could
conceivably invoke more than one instance of <samp><span class="command">yacc</span></samp>
simultaneously.)

   <p>For <samp><span class="command">yacc</span></samp>, simply managing locking is insufficient.  The output of
<samp><span class="command">yacc</span></samp> always uses the same symbol names internally, so it isn't
possible to link two <samp><span class="command">yacc</span></samp> parsers into the same executable.

   <p>We recommend using the following renaming hack used in <samp><span class="command">gdb</span></samp>:
<pre class="example">     #define yymaxdepth c_maxdepth
     #define yyparse c_parse
     #define yylex   c_lex
     #define yyerror c_error
     #define yylval  c_lval
     #define yychar  c_char
     #define yydebug c_debug
     #define yypact  c_pact
     #define yyr1    c_r1
     #define yyr2    c_r2
     #define yydef   c_def
     #define yychk   c_chk
     #define yypgo   c_pgo
     #define yyact   c_act
     #define yyexca  c_exca
     #define yyerrflag c_errflag
     #define yynerrs c_nerrs
     #define yyps    c_ps
     #define yypv    c_pv
     #define yys     c_s
     #define yy_yys  c_yys
     #define yystate c_state
     #define yytmp   c_tmp
     #define yyv     c_v
     #define yy_yyv  c_yyv
     #define yyval   c_val
     #define yylloc  c_lloc
     #define yyreds  c_reds
     #define yytoks  c_toks
     #define yylhs   c_yylhs
     #define yylen   c_yylen
     #define yydefred c_yydefred
     #define yydgoto  c_yydgoto
     #define yysindex c_yysindex
     #define yyrindex c_yyrindex
     #define yygindex c_yygindex
     #define yytable  c_yytable
     #define yycheck  c_yycheck
     #define yyname   c_yyname
     #define yyrule   c_yyrule
</pre>
   <p>For each define, replace the &lsquo;<samp><span class="samp">c_</span></samp>&rsquo; prefix with whatever you like. 
These defines work for <samp><span class="command">bison</span></samp>, <samp><span class="command">byacc</span></samp>, and
traditional <code>yacc</code>s.  If you find a parser generator that uses a
symbol not covered here, please report the new name so it can be added
to the list.

<div class="node">
<a name="C++-Support"></a>
<a name="C_002b_002b-Support"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Objective-C-Support">Objective C Support</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Yacc-and-Lex">Yacc and Lex</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<h3 class="section">8.9 C++ Support</h3>

<p><a name="index-C_002b_002b-support-530"></a><a name="index-Support-for-C_002b_002b-531"></a>
Automake includes full support for C++.

   <p>Any package including C++ code must define the output variable
<code>CXX</code> in <samp><span class="file">configure.ac</span></samp>; the simplest way to do this is to use
the <code>AC_PROG_CXX</code> macro (see <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>).

   <p>A few additional variables are defined when a C++ source file is seen:

     <dl>
<dt><code>CXX</code><a name="index-CXX-532"></a><dd>The name of the C++ compiler.

     <br><dt><code>CXXFLAGS</code><a name="index-CXXFLAGS-533"></a><dd>Any flags to pass to the C++ compiler.

     <br><dt><code>AM_CXXFLAGS</code><a name="index-AM_005fCXXFLAGS-534"></a><dd>The maintainer's variant of <code>CXXFLAGS</code>.

     <br><dt><code>CXXCOMPILE</code><a name="index-CXXCOMPILE-535"></a><dd>The command used to actually compile a C++ source file.  The file name
is appended to form the complete command line.

     <br><dt><code>CXXLINK</code><a name="index-CXXLINK-536"></a><dd>The command used to actually link a C++ program. 
</dl>

<div class="node">
<a name="Objective-C-Support"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Objective-C_002b_002b-Support">Objective C++ Support</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#C_002b_002b-Support">C++ Support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<h3 class="section">8.10 Objective C Support</h3>

<p><a name="index-Objective-C-support-537"></a><a name="index-Support-for-Objective-C-538"></a>
Automake includes some support for Objective C.

   <p>Any package including Objective C code must define the output variable
<code>OBJC</code> in <samp><span class="file">configure.ac</span></samp>; the simplest way to do this is to use
the <code>AC_PROG_OBJC</code> macro (see <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>).

   <p>A few additional variables are defined when an Objective C source file
is seen:

     <dl>
<dt><code>OBJC</code><a name="index-OBJC-539"></a><dd>The name of the Objective C compiler.

     <br><dt><code>OBJCFLAGS</code><a name="index-OBJCFLAGS-540"></a><dd>Any flags to pass to the Objective C compiler.

     <br><dt><code>AM_OBJCFLAGS</code><a name="index-AM_005fOBJCFLAGS-541"></a><dd>The maintainer's variant of <code>OBJCFLAGS</code>.

     <br><dt><code>OBJCCOMPILE</code><a name="index-OBJCCOMPILE-542"></a><dd>The command used to actually compile an Objective C source file.  The
file name is appended to form the complete command line.

     <br><dt><code>OBJCLINK</code><a name="index-OBJCLINK-543"></a><dd>The command used to actually link an Objective C program. 
</dl>

<div class="node">
<a name="Objective-C++-Support"></a>
<a name="Objective-C_002b_002b-Support"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Unified-Parallel-C-Support">Unified Parallel C Support</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Objective-C-Support">Objective C Support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<h3 class="section">8.11 Objective C++ Support</h3>

<p><a name="index-Objective-C_002b_002b-support-544"></a><a name="index-Support-for-Objective-C_002b_002b-545"></a>
Automake includes some support for Objective C++.

   <p>Any package including Objective C++ code must define the output variable
<code>OBJCXX</code> in <samp><span class="file">configure.ac</span></samp>; the simplest way to do this is to use
the <code>AC_PROG_OBJCXX</code> macro (see <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>).

   <p>A few additional variables are defined when an Objective C++ source file
is seen:

     <dl>
<dt><code>OBJCXX</code><a name="index-OBJCXX-546"></a><dd>The name of the Objective C++ compiler.

     <br><dt><code>OBJCXXFLAGS</code><a name="index-OBJCXXFLAGS-547"></a><dd>Any flags to pass to the Objective C++ compiler.

     <br><dt><code>AM_OBJCXXFLAGS</code><a name="index-AM_005fOBJCXXFLAGS-548"></a><dd>The maintainer's variant of <code>OBJCXXFLAGS</code>.

     <br><dt><code>OBJCXXCOMPILE</code><a name="index-OBJCXXCOMPILE-549"></a><dd>The command used to actually compile an Objective C++ source file.  The
file name is appended to form the complete command line.

     <br><dt><code>OBJCXXLINK</code><a name="index-OBJCXXLINK-550"></a><dd>The command used to actually link an Objective C++ program. 
</dl>

<div class="node">
<a name="Unified-Parallel-C-Support"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Assembly-Support">Assembly Support</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Objective-C_002b_002b-Support">Objective C++ Support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<h3 class="section">8.12 Unified Parallel C Support</h3>

<p><a name="index-Unified-Parallel-C-support-551"></a><a name="index-Support-for-Unified-Parallel-C-552"></a>
Automake includes some support for Unified Parallel C.

   <p>Any package including Unified Parallel C code must define the output
variable <code>UPC</code> in <samp><span class="file">configure.ac</span></samp>; the simplest way to do
this is to use the <code>AM_PROG_UPC</code> macro (see <a href="#Public-Macros">Public Macros</a>).

   <p>A few additional variables are defined when a Unified Parallel C
source file is seen:

     <dl>
<dt><code>UPC</code><a name="index-UPC-553"></a><dd>The name of the Unified Parallel C compiler.

     <br><dt><code>UPCFLAGS</code><a name="index-UPCFLAGS-554"></a><dd>Any flags to pass to the Unified Parallel C compiler.

     <br><dt><code>AM_UPCFLAGS</code><a name="index-AM_005fUPCFLAGS-555"></a><dd>The maintainer's variant of <code>UPCFLAGS</code>.

     <br><dt><code>UPCCOMPILE</code><a name="index-UPCCOMPILE-556"></a><dd>The command used to actually compile a Unified Parallel C source file. 
The file name is appended to form the complete command line.

     <br><dt><code>UPCLINK</code><a name="index-UPCLINK-557"></a><dd>The command used to actually link a Unified Parallel C program. 
</dl>

<div class="node">
<a name="Assembly-Support"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Fortran-77-Support">Fortran 77 Support</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Unified-Parallel-C-Support">Unified Parallel C Support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<h3 class="section">8.13 Assembly Support</h3>

<p>Automake includes some support for assembly code.  There are two forms
of assembler files: normal (<samp><span class="file">*.s</span></samp>) and preprocessed by <code>CPP</code>
(<samp><span class="file">*.S</span></samp> or <samp><span class="file">*.sx</span></samp>).

   <p><a name="index-CCAS-558"></a><a name="index-CCASFLAGS-559"></a><a name="index-CPPFLAGS-560"></a><a name="index-AM_005fCCASFLAGS-561"></a><a name="index-AM_005fCPPFLAGS-562"></a>The variable <code>CCAS</code> holds the name of the compiler used to build
assembly code.  This compiler must work a bit like a C compiler; in
particular it must accept <samp><span class="option">-c</span></samp> and <samp><span class="option">-o</span></samp>.  The values of
<code>CCASFLAGS</code> and <code>AM_CCASFLAGS</code> (or its per-target
definition) is passed to the compilation.  For preprocessed files,
<code>DEFS</code>, <code>DEFAULT_INCLUDES</code>, <code>INCLUDES</code>, <code>CPPFLAGS</code>
and <code>AM_CPPFLAGS</code> are also used.

   <p>The autoconf macro <code>AM_PROG_AS</code> will define <code>CCAS</code> and
<code>CCASFLAGS</code> for you (unless they are already set, it simply sets
<code>CCAS</code> to the C compiler and <code>CCASFLAGS</code> to the C compiler
flags), but you are free to define these variables by other means.

   <p>Only the suffixes <samp><span class="file">.s</span></samp>, <samp><span class="file">.S</span></samp>, and <samp><span class="file">.sx</span></samp> are recognized by
<samp><span class="command">automake</span></samp> as being files containing assembly code.

<div class="node">
<a name="Fortran-77-Support"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Fortran-9x-Support">Fortran 9x Support</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Assembly-Support">Assembly Support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<!-- node-name,  next,  previous,  up -->
<h3 class="section">8.14 Fortran 77 Support</h3>

<p><a name="index-Fortran-77-support-563"></a><a name="index-Support-for-Fortran-77-564"></a>
Automake includes full support for Fortran 77.

   <p>Any package including Fortran 77 code must define the output variable
<code>F77</code> in <samp><span class="file">configure.ac</span></samp>; the simplest way to do this is to use
the <code>AC_PROG_F77</code> macro (see <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>).

   <p>A few additional variables are defined when a Fortran 77 source file is
seen:

     <dl>
<dt><code>F77</code><a name="index-F77-565"></a><dd>The name of the Fortran 77 compiler.

     <br><dt><code>FFLAGS</code><a name="index-FFLAGS-566"></a><dd>Any flags to pass to the Fortran 77 compiler.

     <br><dt><code>AM_FFLAGS</code><a name="index-AM_005fFFLAGS-567"></a><dd>The maintainer's variant of <code>FFLAGS</code>.

     <br><dt><code>RFLAGS</code><a name="index-RFLAGS-568"></a><dd>Any flags to pass to the Ratfor compiler.

     <br><dt><code>AM_RFLAGS</code><a name="index-AM_005fRFLAGS-569"></a><dd>The maintainer's variant of <code>RFLAGS</code>.

     <br><dt><code>F77COMPILE</code><a name="index-F77COMPILE-570"></a><dd>The command used to actually compile a Fortran 77 source file.  The file
name is appended to form the complete command line.

     <br><dt><code>FLINK</code><a name="index-FLINK-571"></a><dd>The command used to actually link a pure Fortran 77 program or shared
library.

   </dl>

   <p>Automake can handle preprocessing Fortran 77 and Ratfor source files in
addition to compiling them<a rel="footnote" href="#fn-5" name="fnd-5"><sup>5</sup></a>.  Automake
also contains some support for creating programs and shared libraries
that are a mixture of Fortran 77 and other languages (see <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a>).

   <p>These issues are covered in the following sections.

<ul class="menu">
<li><a accesskey="1" href="#Preprocessing-Fortran-77">Preprocessing Fortran 77</a>:     Preprocessing Fortran 77 sources
<li><a accesskey="2" href="#Compiling-Fortran-77-Files">Compiling Fortran 77 Files</a>:   Compiling Fortran 77 sources
<li><a accesskey="3" href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a>:   Mixing Fortran 77 With C and C++
</ul>

<div class="node">
<a name="Preprocessing-Fortran-77"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Compiling-Fortran-77-Files">Compiling Fortran 77 Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Fortran-77-Support">Fortran 77 Support</a>

</div>

<!-- node-name,  next,  previous,  up -->
<h4 class="subsection">8.14.1 Preprocessing Fortran 77</h4>

<p><a name="index-Preprocessing-Fortran-77-572"></a><a name="index-Fortran-77_002c-Preprocessing-573"></a><a name="index-Ratfor-programs-574"></a>
<samp><span class="file">N.f</span></samp> is made automatically from <samp><span class="file">N.F</span></samp> or <samp><span class="file">N.r</span></samp>.  This
rule runs just the preprocessor to convert a preprocessable Fortran 77
or Ratfor source file into a strict Fortran 77 source file.  The precise
command used is as follows:

     <dl>
<dt><samp><span class="file">.F</span></samp><dd><code>$(F77) -F $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS)<br>
$(AM_FFLAGS) $(FFLAGS)</code>

     <br><dt><samp><span class="file">.r</span></samp><dd><code>$(F77) -F $(AM_FFLAGS) $(FFLAGS) $(AM_RFLAGS) $(RFLAGS)</code>

   </dl>

<div class="node">
<a name="Compiling-Fortran-77-Files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Preprocessing-Fortran-77">Preprocessing Fortran 77</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Fortran-77-Support">Fortran 77 Support</a>

</div>

<!-- node-name,  next,  previous,  up -->
<h4 class="subsection">8.14.2 Compiling Fortran 77 Files</h4>

<p><samp><span class="file">N.o</span></samp> is made automatically from <samp><span class="file">N.f</span></samp>, <samp><span class="file">N.F</span></samp> or
<samp><span class="file">N.r</span></samp> by running the Fortran 77 compiler.  The precise command used
is as follows:

     <dl>
<dt><samp><span class="file">.f</span></samp><dd><code>$(F77) -c $(AM_FFLAGS) $(FFLAGS)</code>

     <br><dt><samp><span class="file">.F</span></samp><dd><code>$(F77) -c $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS)<br>
$(AM_FFLAGS) $(FFLAGS)</code>

     <br><dt><samp><span class="file">.r</span></samp><dd><code>$(F77) -c $(AM_FFLAGS) $(FFLAGS) $(AM_RFLAGS) $(RFLAGS)</code>

   </dl>

<div class="node">
<a name="Mixing-Fortran-77-With-C-and-C++"></a>
<a name="Mixing-Fortran-77-With-C-and-C_002b_002b"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Compiling-Fortran-77-Files">Compiling Fortran 77 Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Fortran-77-Support">Fortran 77 Support</a>

</div>

<!-- node-name,  next,  previous,  up -->
<h4 class="subsection">8.14.3 Mixing Fortran 77 With C and C++</h4>

<p><a name="index-Fortran-77_002c-mixing-with-C-and-C_002b_002b-575"></a><a name="index-Mixing-Fortran-77-with-C-and-C_002b_002b-576"></a><a name="index-Linking-Fortran-77-with-C-and-C_002b_002b-577"></a><a name="index-cfortran-578"></a><a name="index-Mixing-Fortran-77-with-C-and_002for-C_002b_002b-579"></a>
Automake currently provides <em>limited</em> support for creating programs
and shared libraries that are a mixture of Fortran 77 and C and/or C++. 
However, there are many other issues related to mixing Fortran 77 with
other languages that are <em>not</em> (currently) handled by Automake, but
that are handled by other packages<a rel="footnote" href="#fn-6" name="fnd-6"><sup>6</sup></a>.

   <p>Automake can help in two ways:

     <ol type=1 start=1>
<li>Automatic selection of the linker depending on which combinations of
source code.

     <li>Automatic selection of the appropriate linker flags (e.g., <samp><span class="option">-L</span></samp> and
<samp><span class="option">-l</span></samp>) to pass to the automatically selected linker in order to link
in the appropriate Fortran 77 intrinsic and run-time libraries.

     <p><a name="index-g_t_0040code_007bFLIBS_007d_002c-defined-580"></a><a name="index-FLIBS-581"></a>These extra Fortran 77 linker flags are supplied in the output variable
<code>FLIBS</code> by the <code>AC_F77_LIBRARY_LDFLAGS</code> Autoconf macro. 
See <a href="autoconf.html#Fortran-Compiler">Fortran Compiler Characteristics</a>.
        </ol>

   <p>If Automake detects that a program or shared library (as mentioned in
some <code>_PROGRAMS</code> or <code>_LTLIBRARIES</code> primary) contains source
code that is a mixture of Fortran 77 and C and/or C++, then it requires
that the macro <code>AC_F77_LIBRARY_LDFLAGS</code> be called in
<samp><span class="file">configure.ac</span></samp>, and that either <code>$(FLIBS)</code>
appear in the appropriate <code>_LDADD</code> (for programs) or <code>_LIBADD</code>
(for shared libraries) variables.  It is the responsibility of the
person writing the <samp><span class="file">Makefile.am</span></samp> to make sure that &lsquo;<samp><span class="samp">$(FLIBS)</span></samp>&rsquo;
appears in the appropriate <code>_LDADD</code> or
<code>_LIBADD</code> variable.

   <p><a name="index-Mixed-language-example-582"></a><a name="index-Example_002c-mixed-language-583"></a>
For example, consider the following <samp><span class="file">Makefile.am</span></samp>:

<pre class="example">     bin_PROGRAMS = foo
     foo_SOURCES  = main.cc foo.f
     foo_LDADD    = libfoo.la $(FLIBS)
     
     pkglib_LTLIBRARIES = libfoo.la
     libfoo_la_SOURCES  = bar.f baz.c zardoz.cc
     libfoo_la_LIBADD   = $(FLIBS)
</pre>
   <p>In this case, Automake will insist that <code>AC_F77_LIBRARY_LDFLAGS</code>
is mentioned in <samp><span class="file">configure.ac</span></samp>.  Also, if &lsquo;<samp><span class="samp">$(FLIBS)</span></samp>&rsquo; hadn't
been mentioned in <code>foo_LDADD</code> and <code>libfoo_la_LIBADD</code>, then
Automake would have issued a warning.

<ul class="menu">
<li><a accesskey="1" href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a>:     Automatic linker selection
</ul>

<div class="node">
<a name="How-the-Linker-is-Chosen"></a>
<p><hr>
Up:&nbsp;<a rel="up" accesskey="u" href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a>

</div>

<!-- node-name,  next,  previous,  up -->
<h5 class="subsubsection">8.14.3.1 How the Linker is Chosen</h5>

<p><a name="index-Automatic-linker-selection-584"></a><a name="index-Selecting-the-linker-automatically-585"></a>
When a program or library mixes several languages, Automake choose the
linker according to the following priorities.  (The names in
parentheses are the variables containing the link command.)

     <ol type=1 start=1>
<li><a name="index-GCJLINK-586"></a>Native Java (<code>GCJLINK</code>)
<li><a name="index-OBJCXXLINK-587"></a>Objective C++ (<code>OBJCXXLINK</code>)
<li><a name="index-CXXLINK-588"></a>C++ (<code>CXXLINK</code>)
<li><a name="index-F77LINK-589"></a>Fortran 77 (<code>F77LINK</code>)
<li><a name="index-FCLINK-590"></a>Fortran (<code>FCLINK</code>)
<li><a name="index-OBJCLINK-591"></a>Objective C (<code>OBJCLINK</code>)
<li><a name="index-UPCLINK-592"></a>Unified Parallel C (<code>UPCLINK</code>)
<li><a name="index-LINK-593"></a>C (<code>LINK</code>)
        </ol>

   <p>For example, if Fortran 77, C and C++ source code is compiled
into a program, then the C++ linker will be used.  In this case, if the
C or Fortran 77 linkers required any special libraries that weren't
included by the C++ linker, then they must be manually added to an
<code>_LDADD</code> or <code>_LIBADD</code> variable by the user writing the
<samp><span class="file">Makefile.am</span></samp>.

   <p>Automake only looks at the file names listed in <samp><span class="file">_SOURCES</span></samp>
variables to choose the linker, and defaults to the C linker. 
Sometimes this is inconvenient because you are linking against a
library written in another language and would like to set the linker
more appropriately.  See <a href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a>, for a
trick with <code>nodist_EXTRA_..._SOURCES</code>.

   <p>A per-target <code>_LINK</code> variable will override the above selection. 
Per-target link flags will cause Automake to write a per-target
<code>_LINK</code> variable according to the language chosen as above.

<div class="node">
<a name="Fortran-9x-Support"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Java-Support-with-gcj">Java Support with gcj</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Fortran-77-Support">Fortran 77 Support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<!-- node-name,  next,  previous,  up -->
<h3 class="section">8.15 Fortran 9x Support</h3>

<p><a name="index-Fortran-9x-support-594"></a><a name="index-Support-for-Fortran-9x-595"></a>
Automake includes support for Fortran 9x.

   <p>Any package including Fortran 9x code must define the output variable
<code>FC</code> in <samp><span class="file">configure.ac</span></samp>; the simplest way to do this is to use
the <code>AC_PROG_FC</code> macro (see <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>).

   <p>A few additional variables are defined when a Fortran 9x source file is
seen:

     <dl>
<dt><code>FC</code><a name="index-FC-596"></a><dd>The name of the Fortran 9x compiler.

     <br><dt><code>FCFLAGS</code><a name="index-FCFLAGS-597"></a><dd>Any flags to pass to the Fortran 9x compiler.

     <br><dt><code>AM_FCFLAGS</code><a name="index-AM_005fFCFLAGS-598"></a><dd>The maintainer's variant of <code>FCFLAGS</code>.

     <br><dt><code>FCCOMPILE</code><a name="index-FCCOMPILE-599"></a><dd>The command used to actually compile a Fortran 9x source file.  The file
name is appended to form the complete command line.

     <br><dt><code>FCLINK</code><a name="index-FCLINK-600"></a><dd>The command used to actually link a pure Fortran 9x program or shared
library.

   </dl>

<ul class="menu">
<li><a accesskey="1" href="#Compiling-Fortran-9x-Files">Compiling Fortran 9x Files</a>:   Compiling Fortran 9x sources
</ul>

<div class="node">
<a name="Compiling-Fortran-9x-Files"></a>
<p><hr>
Up:&nbsp;<a rel="up" accesskey="u" href="#Fortran-9x-Support">Fortran 9x Support</a>

</div>

<!-- node-name,  next,  previous,  up -->
<h4 class="subsection">8.15.1 Compiling Fortran 9x Files</h4>

<p><samp><var>file</var><span class="file">.o</span></samp> is made automatically from <samp><var>file</var><span class="file">.f90</span></samp>,
<samp><var>file</var><span class="file">.f95</span></samp>, <samp><var>file</var><span class="file">.f03</span></samp>, or <samp><var>file</var><span class="file">.f08</span></samp>
by running the Fortran 9x compiler.  The precise command used
is as follows:

     <dl>
<dt><samp><span class="file">.f90</span></samp><dd><code>$(FC) $(AM_FCFLAGS) $(FCFLAGS) -c $(FCFLAGS_f90) $&lt;</code>

     <br><dt><samp><span class="file">.f95</span></samp><dd><code>$(FC) $(AM_FCFLAGS) $(FCFLAGS) -c $(FCFLAGS_f95) $&lt;</code>

     <br><dt><samp><span class="file">.f03</span></samp><dd><code>$(FC) $(AM_FCFLAGS) $(FCFLAGS) -c $(FCFLAGS_f03) $&lt;</code>

     <br><dt><samp><span class="file">.f08</span></samp><dd><code>$(FC) $(AM_FCFLAGS) $(FCFLAGS) -c $(FCFLAGS_f08) $&lt;</code>

   </dl>

<div class="node">
<a name="Java-Support-with-gcj"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Vala-Support">Vala Support</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Fortran-9x-Support">Fortran 9x Support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<!-- node-name,  next,  previous,  up -->
<h3 class="section">8.16 Compiling Java sources using gcj</h3>

<p><a name="index-Java-support-with-gcj-601"></a><a name="index-Support-for-Java-with-gcj-602"></a><a name="index-Java-to-native-code_002c-compilation-603"></a><a name="index-Compilation-of-Java-to-native-code-604"></a>
Automake includes support for natively compiled Java, using <samp><span class="command">gcj</span></samp>,
the Java front end to the GNU Compiler Collection (rudimentary support
for compiling Java to bytecode using the <samp><span class="command">javac</span></samp> compiler is
also present, <em>albeit deprecated</em>; see <a href="#Java">Java</a>).

   <p>Any package including Java code to be compiled must define the output
variable <code>GCJ</code> in <samp><span class="file">configure.ac</span></samp>; the variable <code>GCJFLAGS</code>
must also be defined somehow (either in <samp><span class="file">configure.ac</span></samp> or
<samp><span class="file">Makefile.am</span></samp>).  The simplest way to do this is to use the
<code>AM_PROG_GCJ</code> macro.

   <p><a name="index-GCJFLAGS-605"></a>
By default, programs including Java source files are linked with
<samp><span class="command">gcj</span></samp>.

   <p>As always, the contents of <code>AM_GCJFLAGS</code> are passed to every
compilation invoking <samp><span class="command">gcj</span></samp> (in its role as an ahead-of-time
compiler, when invoking it to create <samp><span class="file">.class</span></samp> files,
<code>AM_JAVACFLAGS</code> is used instead).  If it is necessary to pass
options to <samp><span class="command">gcj</span></samp> from <samp><span class="file">Makefile.am</span></samp>, this variable, and not
the user variable <code>GCJFLAGS</code>, should be used.

   <p><a name="index-AM_005fGCJFLAGS-606"></a>
<samp><span class="command">gcj</span></samp> can be used to compile <samp><span class="file">.java</span></samp>, <samp><span class="file">.class</span></samp>,
<samp><span class="file">.zip</span></samp>, or <samp><span class="file">.jar</span></samp> files.

   <p>When linking, <samp><span class="command">gcj</span></samp> requires that the main class be specified
using the <samp><span class="option">--main=</span></samp> option.  The easiest way to do this is to use
the <code>_LDFLAGS</code> variable for the program.

<div class="node">
<a name="Vala-Support"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Support-for-Other-Languages">Support for Other Languages</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Java-Support-with-gcj">Java Support with gcj</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<!-- node-name,  next,  previous,  up -->
<h3 class="section">8.17 Vala Support</h3>

<p><a name="index-Vala-Support-607"></a><a name="index-Support-for-Vala-608"></a>
Automake provides initial support for Vala
(<a href="http://www.vala-project.org/">http://www.vala-project.org/</a>). 
This requires valac version 0.7.0 or later, and currently requires
the user to use GNU <samp><span class="command">make</span></samp>.

<pre class="example">     foo_SOURCES = foo.vala bar.vala zardoc.c
</pre>
   <p>Any <samp><span class="file">.vala</span></samp> file listed in a <code>_SOURCES</code> variable will be
compiled into C code by the Vala compiler. The generated <samp><span class="file">.c</span></samp> files are
distributed. The end user does not need to have a Vala compiler installed.

   <p>Automake ships with an Autoconf macro called <code>AM_PROG_VALAC</code>
that will locate the Vala compiler and optionally check its version
number.

<div class="defun">
&mdash; Macro: <b>AM_PROG_VALAC</b> (<span class="roman">[</span><var>minimum-version</var><span class="roman">]</span>)<var><a name="index-AM_005fPROG_005fVALAC-609"></a></var><br>
<blockquote><p>Try to find a Vala compiler in <samp><span class="env">PATH</span></samp>. If it is found, the variable
<code>VALAC</code> is set. Optionally a minimum release number of the compiler
can be requested:

     <pre class="example">          AM_PROG_VALAC([0.7.0])
</pre>
        </blockquote></div>

   <p>There are a few variables that are used when compiling Vala sources:

     <dl>
<dt><code>VALAC</code><a name="index-VALAC-610"></a><dd>Path to the Vala compiler.

     <br><dt><code>VALAFLAGS</code><a name="index-VALAFLAGS-611"></a><dd>Additional arguments for the Vala compiler.

     <br><dt><code>AM_VALAFLAGS</code><a name="index-AM_005fVALAFLAGS-612"></a><dd>The maintainer's variant of <code>VALAFLAGS</code>.

     <pre class="example">          lib_LTLIBRARIES = libfoo.la
          libfoo_la_SOURCES = foo.vala
</pre>
     </dl>

   <p>Note that currently, you cannot use per-target <code>*_VALAFLAGS</code>
(see <a href="#Renamed-Objects">Renamed Objects</a>) to produce different C files from one Vala
source file.

<div class="node">
<a name="Support-for-Other-Languages"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Dependencies">Dependencies</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Vala-Support">Vala Support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<!-- node-name,  next,  previous,  up -->
<h3 class="section">8.18 Support for Other Languages</h3>

<p>Automake currently only includes full support for C, C++ (see <a href="#C_002b_002b-Support">C++ Support</a>), Objective C (see <a href="#Objective-C-Support">Objective C Support</a>),
Objective C++ (see <a href="#Objective-C_002b_002b-Support">Objective C++ Support</a>),
Fortran 77
(see <a href="#Fortran-77-Support">Fortran 77 Support</a>), Fortran 9x (see <a href="#Fortran-9x-Support">Fortran 9x Support</a>),
and Java (see <a href="#Java-Support-with-gcj">Java Support with gcj</a>).  There is only rudimentary
support for other languages, support for which will be improved based
on user demand.

   <p>Some limited support for adding your own languages is available via the
suffix rule handling (see <a href="#Suffixes">Suffixes</a>).

<div class="node">
<a name="Dependencies"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#EXEEXT">EXEEXT</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Support-for-Other-Languages">Support for Other Languages</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<h3 class="section">8.19 Automatic dependency tracking</h3>

<p>As a developer it is often painful to continually update the
<samp><span class="file">Makefile.am</span></samp> whenever the include-file dependencies change in a
project.  Automake supplies a way to automatically track dependency
changes (see <a href="#Dependency-Tracking">Dependency Tracking</a>).

   <p><a name="index-Dependency-tracking-613"></a><a name="index-Automatic-dependency-tracking-614"></a>
Automake always uses complete dependencies for a compilation,
including system headers.  Automake's model is that dependency
computation should be a side effect of the build.  To this end,
dependencies are computed by running all compilations through a
special wrapper program called <samp><span class="command">depcomp</span></samp>.  <samp><span class="command">depcomp</span></samp>
understands how to coax many different C and C++ compilers into
generating dependency information in the format it requires. 
&lsquo;<samp><span class="samp">automake -a</span></samp>&rsquo; will install <samp><span class="command">depcomp</span></samp> into your source
tree for you.  If <samp><span class="command">depcomp</span></samp> can't figure out how to properly
invoke your compiler, dependency tracking will simply be disabled for
your build.

   <p><a name="index-g_t_0040command_007bdepcomp_007d-615"></a>
Experience with earlier versions of Automake (see <a href="automake-history.html#Dependency-Tracking-Evolution">Dependency Tracking Evolution</a>) taught us that it is not reliable to generate dependencies
only on the maintainer's system, as configurations vary too much.  So
instead Automake implements dependency tracking at build time.

   <p>Automatic dependency tracking can be suppressed by putting
<samp><span class="option">no-dependencies</span></samp> in the variable <code>AUTOMAKE_OPTIONS</code>, or
passing <samp><span class="option">no-dependencies</span></samp> as an argument to <code>AM_INIT_AUTOMAKE</code>
(this should be the preferred way).  Or, you can invoke <samp><span class="command">automake</span></samp>
with the <samp><span class="option">-i</span></samp> option.  Dependency tracking is enabled by default.

   <p><a name="index-AUTOMAKE_005fOPTIONS-616"></a><a name="index-no_002ddependencies-617"></a>
The person building your package also can choose to disable dependency
tracking by configuring with <samp><span class="option">--disable-dependency-tracking</span></samp>.

   <p><a name="index-Disabling-dependency-tracking-618"></a><a name="index-Dependency-tracking_002c-disabling-619"></a>

<div class="node">
<a name="EXEEXT"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Dependencies">Dependencies</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Programs">Programs</a>

</div>

<h3 class="section">8.20 Support for executable extensions</h3>

<p><a name="index-Executable-extension-620"></a><a name="index-Extension_002c-executable-621"></a><a name="index-Windows-622"></a>
On some platforms, such as Windows, executables are expected to have an
extension such as <samp><span class="file">.exe</span></samp>.  On these platforms, some compilers (GCC
among them) will automatically generate <samp><span class="file">foo.exe</span></samp> when asked to
generate <samp><span class="file">foo</span></samp>.

   <p>Automake provides mostly-transparent support for this.  Unfortunately
<em>mostly</em> doesn't yet mean <em>fully</em>.  Until the English
dictionary is revised, you will have to assist Automake if your package
must support those platforms.

   <p>One thing you must be aware of is that, internally, Automake rewrites
something like this:

<pre class="example">     bin_PROGRAMS = liver
</pre>
   <p>to this:

<pre class="example">     bin_PROGRAMS = liver$(EXEEXT)
</pre>
   <p>The targets Automake generates are likewise given the &lsquo;<samp><span class="samp">$(EXEEXT)</span></samp>&rsquo;
extension.

   <p>The variables <code>TESTS</code> and <code>XFAIL_TESTS</code> (see <a href="#Simple-Tests">Simple Tests</a>)
are also rewritten if they contain filenames that have been declared as
programs in the same <samp><span class="file">Makefile</span></samp>.  (This is mostly useful when some
programs from <code>check_PROGRAMS</code> are listed in <code>TESTS</code>.)

   <p>However, Automake cannot apply this rewriting to <samp><span class="command">configure</span></samp>
substitutions.  This means that if you are conditionally building a
program using such a substitution, then your <samp><span class="file">configure.ac</span></samp> must
take care to add &lsquo;<samp><span class="samp">$(EXEEXT)</span></samp>&rsquo; when constructing the output variable.

   <p>Sometimes maintainers like to write an explicit link rule for their
program.  Without executable extension support, this is easy&mdash;you
simply write a rule whose target is the name of the program.  However,
when executable extension support is enabled, you must instead add the
&lsquo;<samp><span class="samp">$(EXEEXT)</span></samp>&rsquo; suffix.

   <p>This might be a nuisance for maintainers who know their package will
never run on a platform that has
executable extensions.  For those maintainers, the <samp><span class="option">no-exeext</span></samp>
option (see <a href="#Options">Options</a>) will disable this feature.  This works in a
fairly ugly way; if <samp><span class="option">no-exeext</span></samp> is seen, then the presence of a
rule for a target named <code>foo</code> in <samp><span class="file">Makefile.am</span></samp> will override
an <samp><span class="command">automake</span></samp>-generated rule for &lsquo;<samp><span class="samp">foo$(EXEEXT)</span></samp>&rsquo;.  Without
the <samp><span class="option">no-exeext</span></samp> option, this use will give a diagnostic.

<div class="node">
<a name="Other-Objects"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Other-GNU-Tools">Other GNU Tools</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Programs">Programs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">9 Other Derived Objects</h2>

<p>Automake can handle derived objects that are not C programs.  Sometimes
the support for actually building such objects must be explicitly
supplied, but Automake will still automatically handle installation and
distribution.

<ul class="menu">
<li><a accesskey="1" href="#Scripts">Scripts</a>:                      Executable scripts
<li><a accesskey="2" href="#Headers">Headers</a>:                      Header files
<li><a accesskey="3" href="#Data">Data</a>:                         Architecture-independent data files
<li><a accesskey="4" href="#Sources">Sources</a>:                      Derived sources
</ul>

<div class="node">
<a name="Scripts"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Headers">Headers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-Objects">Other Objects</a>

</div>

<h3 class="section">9.1 Executable Scripts</h3>

<p><a name="index-g_t_0040code_007b_005fSCRIPTS_007d-primary_002c-defined-623"></a><a name="index-g_t_0040code_007bSCRIPTS_007d-primary_002c-defined-624"></a><a name="index-Primary-variable_002c-_0040code_007bSCRIPTS_007d-625"></a><a name="index-g_t_005fSCRIPTS-626"></a><a name="index-Installing-scripts-627"></a>
It is possible to define and install programs that are scripts.  Such
programs are listed using the <code>SCRIPTS</code> primary name.  When the
script is distributed in its final, installable form, the
<samp><span class="file">Makefile</span></samp> usually looks as follows:
<a name="index-SCRIPTS-628"></a>
<pre class="example">     # Install my_script in $(bindir) and distribute it.
     dist_bin_SCRIPTS = my_script
</pre>
   <p>Scripts are not distributed by default; as we have just seen, those
that should be distributed can be specified using a <code>dist_</code>
prefix as with other primaries.

   <p><a name="index-g_t_0040code_007bSCRIPTS_007d_002c-installation-directories-629"></a><a name="index-bin_005fSCRIPTS-630"></a><a name="index-sbin_005fSCRIPTS-631"></a><a name="index-libexec_005fSCRIPTS-632"></a><a name="index-pkgdata_005fSCRIPTS-633"></a><a name="index-pkglibexec_005fSCRIPTS-634"></a><a name="index-noinst_005fSCRIPTS-635"></a><a name="index-check_005fSCRIPTS-636"></a>
Scripts can be installed in <code>bindir</code>, <code>sbindir</code>,
<code>libexecdir</code>, <code>pkglibexecdir</code>, or <code>pkgdatadir</code>.

   <p>Scripts that need not be installed can be listed in
<code>noinst_SCRIPTS</code>, and among them, those which are needed only by
&lsquo;<samp><span class="samp">make check</span></samp>&rsquo; should go in <code>check_SCRIPTS</code>.

   <p>When a script needs to be built, the <samp><span class="file">Makefile.am</span></samp> should include
the appropriate rules.  For instance the <samp><span class="command">automake</span></samp> program
itself is a Perl script that is generated from <samp><span class="file">automake.in</span></samp>. 
Here is how this is handled:

<pre class="example">     bin_SCRIPTS = automake
     CLEANFILES = $(bin_SCRIPTS)
     EXTRA_DIST = automake.in
     
     do_subst = sed -e 's,[@]datadir[@],$(datadir),g' \
                 -e 's,[@]PERL[@],$(PERL),g' \
                 -e 's,[@]PACKAGE[@],$(PACKAGE),g' \
                 -e 's,[@]VERSION[@],$(VERSION),g' \
                 ...
     
     automake: automake.in Makefile
             $(do_subst) &lt; $(srcdir)/automake.in &gt; automake
             chmod +x automake
</pre>
   <p>Such scripts for which a build rule has been supplied need to be
deleted explicitly using <code>CLEANFILES</code> (see <a href="#Clean">Clean</a>), and their
sources have to be distributed, usually with <code>EXTRA_DIST</code>
(see <a href="#Basics-of-Distribution">Basics of Distribution</a>).

   <p>Another common way to build scripts is to process them from
<samp><span class="file">configure</span></samp> with <code>AC_CONFIG_FILES</code>.  In this situation
Automake knows which files should be cleaned and distributed, and what
the rebuild rules should look like.

   <p>For instance if <samp><span class="file">configure.ac</span></samp> contains

<pre class="example">     AC_CONFIG_FILES([src/my_script], [chmod +x src/my_script])
</pre>
   <p class="noindent">to build <samp><span class="file">src/my_script</span></samp> from <samp><span class="file">src/my_script.in</span></samp>, then a
<samp><span class="file">src/Makefile.am</span></samp> to install this script in <code>$(bindir)</code> can
be as simple as

<pre class="example">     bin_SCRIPTS = my_script
     CLEANFILES = $(bin_SCRIPTS)
</pre>
   <p class="noindent">There is no need for <code>EXTRA_DIST</code> or any build rule: Automake
infers them from <code>AC_CONFIG_FILES</code> (see <a href="#Requirements">Requirements</a>). 
<code>CLEANFILES</code> is still useful, because by default Automake will
clean targets of <code>AC_CONFIG_FILES</code> in <code>distclean</code>, not
<code>clean</code>.

   <p>Although this looks simpler, building scripts this way has one
drawback: directory variables such as <code>$(datadir)</code> are not fully
expanded and may refer to other directory variables.

<div class="node">
<a name="Headers"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Data">Data</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Scripts">Scripts</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-Objects">Other Objects</a>

</div>

<h3 class="section">9.2 Header files</h3>

<p><a name="index-g_t_0040code_007b_005fHEADERS_007d-primary_002c-defined-637"></a><a name="index-g_t_0040code_007bHEADERS_007d-primary_002c-defined-638"></a><a name="index-Primary-variable_002c-_0040code_007bHEADERS_007d-639"></a><a name="index-g_t_005fHEADERS-640"></a><a name="index-noinst_005fHEADERS-641"></a><a name="index-g_t_0040code_007bHEADERS_007d_002c-installation-directories-642"></a><a name="index-Installing-headers-643"></a><a name="index-include_005fHEADERS-644"></a><a name="index-oldinclude_005fHEADERS-645"></a><a name="index-pkginclude_005fHEADERS-646"></a>

   <p>Header files that must be installed are specified by the
<code>HEADERS</code> family of variables.  Headers can be installed in
<code>includedir</code>, <code>oldincludedir</code>, <code>pkgincludedir</code> or any
other directory you may have defined (see <a href="#Uniform">Uniform</a>).  For instance,

<pre class="example">     include_HEADERS = foo.h bar/bar.h
</pre>
   <p class="noindent">will install the two files as <samp><span class="file">$(includedir)/foo.h</span></samp> and
<samp><span class="file">$(includedir)/bar.h</span></samp>.

   <p>The <code>nobase_</code> prefix is also supported,

<pre class="example">     nobase_include_HEADERS = foo.h bar/bar.h
</pre>
   <p class="noindent">will install the two files as <samp><span class="file">$(includedir)/foo.h</span></samp> and
<samp><span class="file">$(includedir)/bar/bar.h</span></samp> (see <a href="#Alternative">Alternative</a>).

   <p><a name="index-noinst_005fHEADERS-647"></a>Usually, only header files that accompany installed libraries need to
be installed.  Headers used by programs or convenience libraries are
not installed.  The <code>noinst_HEADERS</code> variable can be used for
such headers.  However when the header actually belongs to a single
convenience library or program, we recommend listing it in the
program's or library's <code>_SOURCES</code> variable (see <a href="#Program-Sources">Program Sources</a>) instead of in <code>noinst_HEADERS</code>.  This is clearer for
the <samp><span class="file">Makefile.am</span></samp> reader.  <code>noinst_HEADERS</code> would be the
right variable to use in a directory containing only headers and no
associated library or program.

   <p>All header files must be listed somewhere; in a <code>_SOURCES</code>
variable or in a <code>_HEADERS</code> variable.  Missing ones will not
appear in the distribution.

   <p>For header files that are built and must not be distributed, use the
<code>nodist_</code> prefix as in <code>nodist_include_HEADERS</code> or
<code>nodist_prog_SOURCES</code>.  If these generated headers are needed
during the build, you must also ensure they exist before they are
used (see <a href="#Sources">Sources</a>).

<div class="node">
<a name="Data"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Sources">Sources</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Headers">Headers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-Objects">Other Objects</a>

</div>

<h3 class="section">9.3 Architecture-independent data files</h3>

<p><a name="index-g_t_0040code_007b_005fDATA_007d-primary_002c-defined-648"></a><a name="index-g_t_0040code_007bDATA_007d-primary_002c-defined-649"></a><a name="index-Primary-variable_002c-_0040code_007bDATA_007d-650"></a><a name="index-g_t_005fDATA-651"></a>
Automake supports the installation of miscellaneous data files using the
<code>DATA</code> family of variables. 
<a name="index-DATA-652"></a>
<a name="index-data_005fDATA-653"></a><a name="index-sysconf_005fDATA-654"></a><a name="index-sharedstate_005fDATA-655"></a><a name="index-localstate_005fDATA-656"></a><a name="index-pkgdata_005fDATA-657"></a>
Such data can be installed in the directories <code>datadir</code>,
<code>sysconfdir</code>, <code>sharedstatedir</code>, <code>localstatedir</code>, or
<code>pkgdatadir</code>.

   <p>By default, data files are <em>not</em> included in a distribution.  Of
course, you can use the <code>dist_</code> prefix to change this on a
per-variable basis.

   <p>Here is how Automake declares its auxiliary data files:

<pre class="example">     dist_pkgdata_DATA = clean-kr.am clean.am ...
</pre>
   <div class="node">
<a name="Sources"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Data">Data</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-Objects">Other Objects</a>

</div>

<h3 class="section">9.4 Built Sources</h3>

<p>Because Automake's automatic dependency tracking works as a side-effect
of compilation (see <a href="#Dependencies">Dependencies</a>) there is a bootstrap issue: a
target should not be compiled before its dependencies are made, but
these dependencies are unknown until the target is first compiled.

   <p>Ordinarily this is not a problem, because dependencies are distributed
sources: they preexist and do not need to be built.  Suppose that
<samp><span class="file">foo.c</span></samp> includes <samp><span class="file">foo.h</span></samp>.  When it first compiles
<samp><span class="file">foo.o</span></samp>, <samp><span class="command">make</span></samp> only knows that <samp><span class="file">foo.o</span></samp> depends on
<samp><span class="file">foo.c</span></samp>.  As a side-effect of this compilation <samp><span class="command">depcomp</span></samp>
records the <samp><span class="file">foo.h</span></samp> dependency so that following invocations of
<samp><span class="command">make</span></samp> will honor it.  In these conditions, it's clear there is
no problem: either <samp><span class="file">foo.o</span></samp> doesn't exist and has to be built
(regardless of the dependencies), or accurate dependencies exist and
they can be used to decide whether <samp><span class="file">foo.o</span></samp> should be rebuilt.

   <p>It's a different story if <samp><span class="file">foo.h</span></samp> doesn't exist by the first
<samp><span class="command">make</span></samp> run.  For instance, there might be a rule to build
<samp><span class="file">foo.h</span></samp>.  This time <samp><span class="file">file.o</span></samp>'s build will fail because the
compiler can't find <samp><span class="file">foo.h</span></samp>.  <samp><span class="command">make</span></samp> failed to trigger the
rule to build <samp><span class="file">foo.h</span></samp> first by lack of dependency information.

   <p><a name="index-BUILT_005fSOURCES-658"></a><a name="index-g_t_0040code_007bBUILT_005fSOURCES_007d_002c-defined-659"></a>
The <code>BUILT_SOURCES</code> variable is a workaround for this problem.  A
source file listed in <code>BUILT_SOURCES</code> is made on &lsquo;<samp><span class="samp">make all</span></samp>&rsquo;
or &lsquo;<samp><span class="samp">make check</span></samp>&rsquo; (or even &lsquo;<samp><span class="samp">make install</span></samp>&rsquo;) before other
targets are processed.  However, such a source file is not
<em>compiled</em> unless explicitly requested by mentioning it in some
other <code>_SOURCES</code> variable.

   <p>So, to conclude our introductory example, we could use
&lsquo;<samp><span class="samp">BUILT_SOURCES = foo.h</span></samp>&rsquo; to ensure <samp><span class="file">foo.h</span></samp> gets built before
any other target (including <samp><span class="file">foo.o</span></samp>) during &lsquo;<samp><span class="samp">make all</span></samp>&rsquo; or
&lsquo;<samp><span class="samp">make check</span></samp>&rsquo;.

   <p><code>BUILT_SOURCES</code> is actually a bit of a misnomer, as any file which
must be created early in the build process can be listed in this
variable.  Moreover, all built sources do not necessarily have to be
listed in <code>BUILT_SOURCES</code>.  For instance, a generated <samp><span class="file">.c</span></samp> file
doesn't need to appear in <code>BUILT_SOURCES</code> (unless it is included by
another source), because it's a known dependency of the associated
object.

   <p>It might be important to emphasize that <code>BUILT_SOURCES</code> is
honored only by &lsquo;<samp><span class="samp">make all</span></samp>&rsquo;, &lsquo;<samp><span class="samp">make check</span></samp>&rsquo; and &lsquo;<samp><span class="samp">make
install</span></samp>&rsquo;.  This means you cannot build a specific target (e.g.,
&lsquo;<samp><span class="samp">make foo</span></samp>&rsquo;) in a clean tree if it depends on a built source. 
However it will succeed if you have run &lsquo;<samp><span class="samp">make all</span></samp>&rsquo; earlier,
because accurate dependencies are already available.

   <p>The next section illustrates and discusses the handling of built sources
on a toy example.

<ul class="menu">
<li><a accesskey="1" href="#Built-Sources-Example">Built Sources Example</a>:        Several ways to handle built sources. 
</ul>

<div class="node">
<a name="Built-Sources-Example"></a>
<p><hr>
Up:&nbsp;<a rel="up" accesskey="u" href="#Sources">Sources</a>

</div>

<h4 class="subsection">9.4.1 Built Sources Example</h4>

<p>Suppose that <samp><span class="file">foo.c</span></samp> includes <samp><span class="file">bindir.h</span></samp>, which is
installation-dependent and not distributed: it needs to be built.  Here
<samp><span class="file">bindir.h</span></samp> defines the preprocessor macro <code>bindir</code> to the
value of the <samp><span class="command">make</span></samp> variable <code>bindir</code> (inherited from
<samp><span class="file">configure</span></samp>).

   <p>We suggest several implementations below.  It's not meant to be an
exhaustive listing of all ways to handle built sources, but it will give
you a few ideas if you encounter this issue.

<h5 class="subsubheading">First Try</h5>

<p>This first implementation will illustrate the bootstrap issue mentioned
in the previous section (see <a href="#Sources">Sources</a>).

   <p>Here is a tentative <samp><span class="file">Makefile.am</span></samp>.

<pre class="example">     # This won't work.
     bin_PROGRAMS = foo
     foo_SOURCES = foo.c
     nodist_foo_SOURCES = bindir.h
     CLEANFILES = bindir.h
     bindir.h: Makefile
             echo '#define bindir "$(bindir)"' &gt;$@
</pre>
   <p>This setup doesn't work, because Automake doesn't know that <samp><span class="file">foo.c</span></samp>
includes <samp><span class="file">bindir.h</span></samp>.  Remember, automatic dependency tracking works
as a side-effect of compilation, so the dependencies of <samp><span class="file">foo.o</span></samp> will
be known only after <samp><span class="file">foo.o</span></samp> has been compiled (see <a href="#Dependencies">Dependencies</a>). 
The symptom is as follows.

<pre class="example">     % make
     source='foo.c' object='foo.o' libtool=no \
     depfile='.deps/foo.Po' tmpdepfile='.deps/foo.TPo' \
     depmode=gcc /bin/sh ./depcomp \
     gcc -I. -I. -g -O2 -c `test -f 'foo.c' || echo './'`foo.c
     foo.c:2: bindir.h: No such file or directory
     make: *** [foo.o] Error 1
</pre>
   <p>In this example <samp><span class="file">bindir.h</span></samp> is not distributed nor installed, and
it is not even being built on-time.  One may wonder if the
&lsquo;<samp><span class="samp">nodist_foo_SOURCES = bindir.h</span></samp>&rsquo; line has any use at all.  This
line simply states that <samp><span class="file">bindir.h</span></samp> is a source of <code>foo</code>, so
for instance, it should be inspected while generating tags
(see <a href="#Tags">Tags</a>).  In other words, it does not help our present problem,
and the build would fail identically without it.

<h5 class="subsubheading">Using <code>BUILT_SOURCES</code></h5>

<p>A solution is to require <samp><span class="file">bindir.h</span></samp> to be built before anything
else.  This is what <code>BUILT_SOURCES</code> is meant for (see <a href="#Sources">Sources</a>).

<pre class="example">     bin_PROGRAMS = foo
     foo_SOURCES = foo.c
     nodist_foo_SOURCES = bindir.h
     BUILT_SOURCES = bindir.h
     CLEANFILES = bindir.h
     bindir.h: Makefile
             echo '#define bindir "$(bindir)"' &gt;$@
</pre>
   <p>See how <samp><span class="file">bindir.h</span></samp> gets built first:

<pre class="example">     % make
     echo '#define bindir "/usr/local/bin"' &gt;bindir.h
     make  all-am
     make[1]: Entering directory `/home/adl/tmp'
     source='foo.c' object='foo.o' libtool=no \
     depfile='.deps/foo.Po' tmpdepfile='.deps/foo.TPo' \
     depmode=gcc /bin/sh ./depcomp \
     gcc -I. -I. -g -O2 -c `test -f 'foo.c' || echo './'`foo.c
     gcc  -g -O2   -o foo  foo.o
     make[1]: Leaving directory `/home/adl/tmp'
</pre>
   <p>However, as said earlier, <code>BUILT_SOURCES</code> applies only to the
<code>all</code>, <code>check</code>, and <code>install</code> targets.  It still fails
if you try to run &lsquo;<samp><span class="samp">make foo</span></samp>&rsquo; explicitly:

<pre class="example">     % make clean
     test -z "bindir.h" || rm -f bindir.h
     test -z "foo" || rm -f foo
     rm -f *.o
     % : &gt; .deps/foo.Po # Suppress previously recorded dependencies
     % make foo
     source='foo.c' object='foo.o' libtool=no \
     depfile='.deps/foo.Po' tmpdepfile='.deps/foo.TPo' \
     depmode=gcc /bin/sh ./depcomp \
     gcc -I. -I. -g -O2 -c `test -f 'foo.c' || echo './'`foo.c
     foo.c:2: bindir.h: No such file or directory
     make: *** [foo.o] Error 1
</pre>
   <h5 class="subsubheading">Recording Dependencies manually</h5>

<p>Usually people are happy enough with <code>BUILT_SOURCES</code> because they
never build targets such as &lsquo;<samp><span class="samp">make foo</span></samp>&rsquo; before &lsquo;<samp><span class="samp">make all</span></samp>&rsquo;, as
in the previous example.  However if this matters to you, you can
avoid <code>BUILT_SOURCES</code> and record such dependencies explicitly in
the <samp><span class="file">Makefile.am</span></samp>.

<pre class="example">     bin_PROGRAMS = foo
     foo_SOURCES = foo.c
     nodist_foo_SOURCES = bindir.h
     foo.$(OBJEXT): bindir.h
     CLEANFILES = bindir.h
     bindir.h: Makefile
             echo '#define bindir "$(bindir)"' &gt;$@
</pre>
   <p>You don't have to list <em>all</em> the dependencies of <samp><span class="file">foo.o</span></samp>
explicitly, only those that might need to be built.  If a dependency
already exists, it will not hinder the first compilation and will be
recorded by the normal dependency tracking code.  (Note that after
this first compilation the dependency tracking code will also have
recorded the dependency between <samp><span class="file">foo.o</span></samp> and
<samp><span class="file">bindir.h</span></samp>; so our explicit dependency is really useful to
the first build only.)

   <p>Adding explicit dependencies like this can be a bit dangerous if you are
not careful enough.  This is due to the way Automake tries not to
overwrite your rules (it assumes you know better than it). 
&lsquo;<samp><span class="samp">foo.$(OBJEXT): bindir.h</span></samp>&rsquo; supersedes any rule Automake may want to
output to build &lsquo;<samp><span class="samp">foo.$(OBJEXT)</span></samp>&rsquo;.  It happens to work in this case
because Automake doesn't have to output any &lsquo;<samp><span class="samp">foo.$(OBJEXT):</span></samp>&rsquo;
target: it relies on a suffix rule instead (i.e., &lsquo;<samp><span class="samp">.c.$(OBJEXT):</span></samp>&rsquo;). 
Always check the generated <samp><span class="file">Makefile.in</span></samp> if you do this.

<h5 class="subsubheading">Build <samp><span class="file">bindir.h</span></samp> from <samp><span class="file">configure</span></samp></h5>

<p>It's possible to define this preprocessor macro from <samp><span class="file">configure</span></samp>,
either in <samp><span class="file">config.h</span></samp> (see <a href="autoconf.html#Defining-Directories">Defining Directories</a>), or by processing a
<samp><span class="file">bindir.h.in</span></samp> file using <code>AC_CONFIG_FILES</code>
(see <a href="autoconf.html#Configuration-Actions">Configuration Actions</a>).

   <p>At this point it should be clear that building <samp><span class="file">bindir.h</span></samp> from
<samp><span class="file">configure</span></samp> works well for this example.  <samp><span class="file">bindir.h</span></samp> will exist
before you build any target, hence will not cause any dependency issue.

   <p>The Makefile can be shrunk as follows.  We do not even have to mention
<samp><span class="file">bindir.h</span></samp>.

<pre class="example">     bin_PROGRAMS = foo
     foo_SOURCES = foo.c
</pre>
   <p>However, it's not always possible to build sources from
<samp><span class="file">configure</span></samp>, especially when these sources are generated by a tool
that needs to be built first.

<h5 class="subsubheading">Build <samp><span class="file">bindir.c</span></samp>, not <samp><span class="file">bindir.h</span></samp>.</h5>

<p>Another attractive idea is to define <code>bindir</code> as a variable or
function exported from <samp><span class="file">bindir.o</span></samp>, and build <samp><span class="file">bindir.c</span></samp>
instead of <samp><span class="file">bindir.h</span></samp>.

<pre class="example">     noinst_PROGRAMS = foo
     foo_SOURCES = foo.c bindir.h
     nodist_foo_SOURCES = bindir.c
     CLEANFILES = bindir.c
     bindir.c: Makefile
             echo 'const char bindir[] = "$(bindir)";' &gt;$@
</pre>
   <p><samp><span class="file">bindir.h</span></samp> contains just the variable's declaration and doesn't
need to be built, so it won't cause any trouble.  <samp><span class="file">bindir.o</span></samp> is
always dependent on <samp><span class="file">bindir.c</span></samp>, so <samp><span class="file">bindir.c</span></samp> will get built
first.

<h5 class="subsubheading">Which is best?</h5>

<p>There is no panacea, of course.  Each solution has its merits and
drawbacks.

   <p>You cannot use <code>BUILT_SOURCES</code> if the ability to run &lsquo;<samp><span class="samp">make
foo</span></samp>&rsquo; on a clean tree is important to you.

   <p>You won't add explicit dependencies if you are leery of overriding
an Automake rule by mistake.

   <p>Building files from <samp><span class="file">./configure</span></samp> is not always possible, neither
is converting <samp><span class="file">.h</span></samp> files into <samp><span class="file">.c</span></samp> files.

<div class="node">
<a name="Other-GNU-Tools"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Documentation">Documentation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Other-Objects">Other Objects</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">10 Other GNU Tools</h2>

<p>Since Automake is primarily intended to generate <samp><span class="file">Makefile.in</span></samp>s for
use in GNU programs, it tries hard to interoperate with other GNU tools.

<ul class="menu">
<li><a accesskey="1" href="#Emacs-Lisp">Emacs Lisp</a>:                   Emacs Lisp
<li><a accesskey="2" href="#gettext">gettext</a>:                      Gettext
<li><a accesskey="3" href="#Libtool">Libtool</a>:                      Libtool
<li><a accesskey="4" href="#Java">Java</a>:                         Java bytecode compilation (deprecated)
<li><a accesskey="5" href="#Python">Python</a>:                       Python
</ul>

<div class="node">
<a name="Emacs-Lisp"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#gettext">gettext</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-GNU-Tools">Other GNU Tools</a>

</div>

<h3 class="section">10.1 Emacs Lisp</h3>

<p><a name="index-g_t_0040code_007b_005fLISP_007d-primary_002c-defined-660"></a><a name="index-g_t_0040code_007bLISP_007d-primary_002c-defined-661"></a><a name="index-Primary-variable_002c-_0040code_007bLISP_007d-662"></a>
<a name="index-g_t_005fLISP-663"></a><a name="index-lisp_005fLISP-664"></a><a name="index-noinst_005fLISP-665"></a>
Automake provides some support for Emacs Lisp.  The <code>LISP</code> primary
is used to hold a list of <samp><span class="file">.el</span></samp> files.  Possible prefixes for this
primary are <code>lisp_</code> and <code>noinst_</code>.  Note that if
<code>lisp_LISP</code> is defined, then <samp><span class="file">configure.ac</span></samp> must run
<code>AM_PATH_LISPDIR</code> (see <a href="#Macros">Macros</a>).

   <p><a name="index-dist_005flisp_005fLISP-666"></a><a name="index-dist_005fnoinst_005fLISP-667"></a>Lisp sources are not distributed by default.  You can prefix the
<code>LISP</code> primary with <code>dist_</code>, as in <code>dist_lisp_LISP</code> or
<code>dist_noinst_LISP</code>, to indicate that these files should be
distributed.

   <p>Automake will byte-compile all Emacs Lisp source files using the Emacs
found by <code>AM_PATH_LISPDIR</code>, if any was found.

   <p>Byte-compiled Emacs Lisp files are not portable among all versions of
Emacs, so it makes sense to turn this off if you expect sites to have
more than one version of Emacs installed.  Furthermore, many packages
don't actually benefit from byte-compilation.  Still, we recommend
that you byte-compile your Emacs Lisp sources.  It is probably better
for sites with strange setups to cope for themselves than to make the
installation less nice for everybody else.

   <p>There are two ways to avoid byte-compiling.  Historically, we have
recommended the following construct.

<pre class="example">     lisp_LISP = file1.el file2.el
     ELCFILES =
</pre>
   <p class="noindent"><code>ELCFILES</code> is an internal Automake variable that normally lists
all <samp><span class="file">.elc</span></samp> files that must be byte-compiled.  Automake defines
<code>ELCFILES</code> automatically from <code>lisp_LISP</code>.  Emptying this
variable explicitly prevents byte-compilation.

   <p>Since Automake 1.8, we now recommend using <code>lisp_DATA</code> instead:

<!-- Keep in sync with primary-prefix-couples-documented-valid.sh -->
<pre class="example">     lisp_DATA = file1.el file2.el
</pre>
   <p>Note that these two constructs are not equivalent.  <code>_LISP</code> will
not install a file if Emacs is not installed, while <code>_DATA</code> will
always install its files.

<div class="node">
<a name="gettext"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Libtool">Libtool</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Emacs-Lisp">Emacs Lisp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-GNU-Tools">Other GNU Tools</a>

</div>

<h3 class="section">10.2 Gettext</h3>

<p><a name="index-GNU-Gettext-support-668"></a><a name="index-Gettext-support-669"></a><a name="index-Support-for-GNU-Gettext-670"></a>
If <code>AM_GNU_GETTEXT</code> is seen in <samp><span class="file">configure.ac</span></samp>, then Automake
turns on support for GNU gettext, a message catalog system for
internationalization
(see <a href="gettext.html#Top">Introduction</a>).

   <p>The <code>gettext</code> support in Automake requires the addition of one or
two subdirectories to the package: <samp><span class="file">po</span></samp> and possibly also <samp><span class="file">intl</span></samp>. 
The latter is needed if <code>AM_GNU_GETTEXT</code> is not invoked with the
&lsquo;<samp><span class="samp">external</span></samp>&rsquo; argument, or if <code>AM_GNU_GETTEXT_INTL_SUBDIR</code> is used. 
Automake ensures that these directories exist and are mentioned in
<code>SUBDIRS</code>.

<div class="node">
<a name="Libtool"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Java">Java</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#gettext">gettext</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-GNU-Tools">Other GNU Tools</a>

</div>

<h3 class="section">10.3 Libtool</h3>

<p>Automake provides support for GNU Libtool (see <a href="libtool.html#Top">Introduction</a>) with the <code>LTLIBRARIES</code> primary. 
See <a href="#A-Shared-Library">A Shared Library</a>.

<div class="node">
<a name="Java"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Python">Python</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Libtool">Libtool</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-GNU-Tools">Other GNU Tools</a>

</div>

<h3 class="section">10.4 Java bytecode compilation (deprecated)</h3>

<p><a name="index-g_t_0040code_007b_005fJAVA_007d-primary_002c-defined-671"></a><a name="index-g_t_0040code_007bJAVA_007d-primary_002c-defined-672"></a><a name="index-Primary-variable_002c-_0040code_007bJAVA_007d-673"></a><a name="index-Java-to-bytecode_002c-compilation-674"></a><a name="index-Compilation-of-Java-to-bytecode-675"></a>
Automake provides some minimal support for Java bytecode compilation with
the <code>JAVA</code> primary (in addition to the support for compiling Java to
native machine code; see <a href="#Java-Support-with-gcj">Java Support with gcj</a>).  Note however that
<em>the interface and most features described here are deprecated</em>; the
next automake release will strive to provide a better and cleaner
interface, which however <em>won't be backward-compatible</em>; the present
interface will probably be removed altogether in future automake releases
(1.13 or later), so don't use it in new code.

   <p>Any <samp><span class="file">.java</span></samp> files listed in a <code>_JAVA</code> variable will be
compiled with <code>JAVAC</code> at build time.  By default, <samp><span class="file">.java</span></samp>
files are not included in the distribution, you should use the
<code>dist_</code> prefix to distribute them.

   <p>Here is a typical setup for distributing <samp><span class="file">.java</span></samp> files and
installing the <samp><span class="file">.class</span></samp> files resulting from their compilation.

<!-- Keep in sync with primary-prefix-couples-documented-valid.sh -->
<pre class="example">     javadir = $(datadir)/java
     dist_java_JAVA = a.java b.java ...
</pre>
   <p><a name="index-g_t_0040code_007bJAVA_007d-restrictions-676"></a><a name="index-Restrictions-for-_0040code_007bJAVA_007d-677"></a>
Currently Automake enforces the restriction that only one <code>_JAVA</code>
primary can be used in a given <samp><span class="file">Makefile.am</span></samp>.  The reason for this
restriction is that, in general, it isn't possible to know which
<samp><span class="file">.class</span></samp> files were generated from which <samp><span class="file">.java</span></samp> files, so
it would be impossible to know which files to install where.  For
instance, a <samp><span class="file">.java</span></samp> file can define multiple classes; the resulting
<samp><span class="file">.class</span></samp> file names cannot be predicted without parsing the
<samp><span class="file">.java</span></samp> file.

   <p>There are a few variables that are used when compiling Java sources:

     <dl>
<dt><code>JAVAC</code><a name="index-JAVAC-678"></a><dd>The name of the Java compiler.  This defaults to &lsquo;<samp><span class="samp">javac</span></samp>&rsquo;.

     <br><dt><code>JAVACFLAGS</code><a name="index-JAVACFLAGS-679"></a><dd>The flags to pass to the compiler.  This is considered to be a user
variable (see <a href="#User-Variables">User Variables</a>).

     <br><dt><code>AM_JAVACFLAGS</code><a name="index-AM_005fJAVACFLAGS-680"></a><dd>More flags to pass to the Java compiler.  This, and not
<code>JAVACFLAGS</code>, should be used when it is necessary to put Java
compiler flags into <samp><span class="file">Makefile.am</span></samp>.

     <br><dt><code>JAVAROOT</code><a name="index-JAVAROOT-681"></a><dd>The value of this variable is passed to the <samp><span class="option">-d</span></samp> option to
<code>javac</code>.  It defaults to &lsquo;<samp><span class="samp">$(top_builddir)</span></samp>&rsquo;.

     <br><dt><code>CLASSPATH_ENV</code><a name="index-CLASSPATH_005fENV-682"></a><dd>This variable is a shell expression that is used to set the
<samp><span class="env">CLASSPATH</span></samp> environment variable on the <code>javac</code> command line. 
(In the future we will probably handle class path setting differently.) 
</dl>

<div class="node">
<a name="Python"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Java">Java</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Other-GNU-Tools">Other GNU Tools</a>

</div>

<h3 class="section">10.5 Python</h3>

<p><a name="index-g_t_0040code_007b_005fPYTHON_007d-primary_002c-defined-683"></a><a name="index-g_t_0040code_007bPYTHON_007d-primary_002c-defined-684"></a><a name="index-Primary-variable_002c-_0040code_007bPYTHON_007d-685"></a><a name="index-g_t_005fPYTHON-686"></a>
Automake provides support for Python compilation with the
<code>PYTHON</code> primary.  A typical setup is to call
<code>AM_PATH_PYTHON</code> in <samp><span class="file">configure.ac</span></samp> and use a line like the
following in <samp><span class="file">Makefile.am</span></samp>:

<pre class="example">     python_PYTHON = tree.py leave.py
</pre>
   <p>Any files listed in a <code>_PYTHON</code> variable will be byte-compiled
with <samp><span class="command">py-compile</span></samp> at install time.  <samp><span class="command">py-compile</span></samp>
actually creates both standard (<samp><span class="file">.pyc</span></samp>) and optimized
(<samp><span class="file">.pyo</span></samp>) byte-compiled versions of the source files.  Note that
because byte-compilation occurs at install time, any files listed in
<code>noinst_PYTHON</code> will not be compiled.  Python source files are
included in the distribution by default, prepend <code>nodist_</code> (as in
<code>nodist_python_PYTHON</code>) to omit them.

   <p>Automake ships with an Autoconf macro called <code>AM_PATH_PYTHON</code>
that will determine some Python-related directory variables (see
below).  If you have called <code>AM_PATH_PYTHON</code> from
<samp><span class="file">configure.ac</span></samp>, then you may use the variables
<!-- Keep in sync with primary-prefix-couples-documented-valid.sh -->
<code>python_PYTHON</code> or <code>pkgpython_PYTHON</code> to list Python source
files in your <samp><span class="file">Makefile.am</span></samp>, depending on where you want your files
installed (see the definitions of <code>pythondir</code> and
<code>pkgpythondir</code> below).

<div class="defun">
&mdash; Macro: <b>AM_PATH_PYTHON</b> (<span class="roman">[</span><var>version</var><span class="roman">]</span><var>, </var><span class="roman">[</span><var>action-if-found</var><span class="roman">]</span><var>,<a name="index-AM_005fPATH_005fPYTHON-687"></a></var><br>
<blockquote><p>  <span class="roman">[</span><var>action-if-not-found</var><span class="roman">]</span>)

        <p>Search for a Python interpreter on the system.  This macro takes three
optional arguments.  The first argument, if present, is the minimum
version of Python required for this package: <code>AM_PATH_PYTHON</code>
will skip any Python interpreter that is older than <var>version</var>. 
If an interpreter is found and satisfies <var>version</var>, then
<var>action-if-found</var> is run.  Otherwise, <var>action-if-not-found</var> is
run.

        <p>If <var>action-if-not-found</var> is not specified, as in the following
example, the default is to abort <samp><span class="command">configure</span></samp>.

     <pre class="example">          AM_PATH_PYTHON([2.2])
</pre>
        <p class="noindent">This is fine when Python is an absolute requirement for the package. 
If Python &gt;= 2.5 was only <em>optional</em> to the package,
<code>AM_PATH_PYTHON</code> could be called as follows.

     <pre class="example">          AM_PATH_PYTHON([2.5],, [:])
</pre>
        <p>If the <samp><span class="env">PYTHON</span></samp> variable is set when <code>AM_PATH_PYTHON</code> is
called, then that will be the only Python interpreter that is tried.

        <p><code>AM_PATH_PYTHON</code> creates the following output variables based on
the Python installation found during configuration. 
</p></blockquote></div>

     <dl>
<dt><code>PYTHON</code><a name="index-PYTHON-688"></a><dd>The name of the Python executable, or &lsquo;<samp><span class="samp">:</span></samp>&rsquo; if no suitable
interpreter could be found.

     <p>Assuming <var>action-if-not-found</var> is used (otherwise <samp><span class="file">./configure</span></samp>
will abort if Python is absent), the value of <code>PYTHON</code> can be used
to setup a conditional in order to disable the relevant part of a build
as follows.

     <pre class="example">          AM_PATH_PYTHON(,, [:])
          AM_CONDITIONAL([HAVE_PYTHON], [test "$PYTHON" != :])
</pre>
     <br><dt><code>PYTHON_VERSION</code><a name="index-PYTHON_005fVERSION-689"></a><dd>The Python version number, in the form <var>major</var>.<var>minor</var>
(e.g., &lsquo;<samp><span class="samp">2.5</span></samp>&rsquo;).  This is currently the value of
&lsquo;<samp><span class="samp">sys.version[:3]</span></samp>&rsquo;.

     <br><dt><code>PYTHON_PREFIX</code><a name="index-PYTHON_005fPREFIX-690"></a><dd>The string &lsquo;<samp><span class="samp">${prefix}</span></samp>&rsquo;.  This term may be used in future work
that needs the contents of Python's &lsquo;<samp><span class="samp">sys.prefix</span></samp>&rsquo;, but general
consensus is to always use the value from <samp><span class="command">configure</span></samp>.

     <br><dt><code>PYTHON_EXEC_PREFIX</code><a name="index-PYTHON_005fEXEC_005fPREFIX-691"></a><dd>The string &lsquo;<samp><span class="samp">${exec_prefix}</span></samp>&rsquo;.  This term may be used in future work
that needs the contents of Python's &lsquo;<samp><span class="samp">sys.exec_prefix</span></samp>&rsquo;, but general
consensus is to always use the value from <samp><span class="command">configure</span></samp>.

     <br><dt><code>PYTHON_PLATFORM</code><a name="index-PYTHON_005fPLATFORM-692"></a><dd>The canonical name used by Python to describe the operating system, as
given by &lsquo;<samp><span class="samp">sys.platform</span></samp>&rsquo;.  This value is sometimes needed when
building Python extensions.

     <br><dt><code>pythondir</code><a name="index-pythondir-693"></a><dd>The directory name for the <samp><span class="file">site-packages</span></samp> subdirectory of the
standard Python install tree.

     <br><dt><code>pkgpythondir</code><a name="index-pkgpythondir-694"></a><dd>This is the directory under <code>pythondir</code> that is named after the
package.  That is, it is &lsquo;<samp><span class="samp">$(pythondir)/$(PACKAGE)</span></samp>&rsquo;.  It is provided
as a convenience.

     <br><dt><code>pyexecdir</code><a name="index-pyexecdir-695"></a><dd>This is the directory where Python extension modules (shared libraries)
should be installed.  An extension module written in C could be declared
as follows to Automake:

     <!-- Keep in sync with primary-prefix-couples-documented-valid.sh -->
     <pre class="example">          pyexec_LTLIBRARIES = quaternion.la
          quaternion_la_SOURCES = quaternion.c support.c support.h
          quaternion_la_LDFLAGS = -avoid-version -module
</pre>
     <br><dt><code>pkgpyexecdir</code><a name="index-pkgpyexecdir-696"></a><dd>This is a convenience variable that is defined as
&lsquo;<samp><span class="samp">$(pyexecdir)/$(PACKAGE)</span></samp>&rsquo;. 
</dl>

   <p>All of these directory variables have values that start with either
&lsquo;<samp><span class="samp">${prefix}</span></samp>&rsquo; or &lsquo;<samp><span class="samp">${exec_prefix}</span></samp>&rsquo; unexpanded.  This works
fine in <samp><span class="file">Makefiles</span></samp>, but it makes these variables hard to use in
<samp><span class="file">configure</span></samp>.  This is mandated by the GNU coding standards, so
that the user can run &lsquo;<samp><span class="samp">make prefix=/foo install</span></samp>&rsquo;.  The Autoconf
manual has a section with more details on this topic
(see <a href="autoconf.html#Installation-Directory-Variables">Installation Directory Variables</a>).  See also <a href="#Hard_002dCoded-Install-Paths">Hard-Coded Install Paths</a>.

<div class="node">
<a name="Documentation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Install">Install</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Other-GNU-Tools">Other GNU Tools</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">11 Building documentation</h2>

<p>Currently Automake provides support for Texinfo and man pages.

<ul class="menu">
<li><a accesskey="1" href="#Texinfo">Texinfo</a>:                      Texinfo
<li><a accesskey="2" href="#Man-Pages">Man Pages</a>:                    Man pages
</ul>

<div class="node">
<a name="Texinfo"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Man-Pages">Man Pages</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Documentation">Documentation</a>

</div>

<h3 class="section">11.1 Texinfo</h3>

<p><a name="index-g_t_0040code_007b_005fTEXINFOS_007d-primary_002c-defined-697"></a><a name="index-g_t_0040code_007bTEXINFOS_007d-primary_002c-defined-698"></a><a name="index-Primary-variable_002c-_0040code_007bTEXINFOS_007d-699"></a><a name="index-HTML-output-using-Texinfo-700"></a><a name="index-PDF-output-using-Texinfo-701"></a><a name="index-PS-output-using-Texinfo-702"></a><a name="index-DVI-output-using-Texinfo-703"></a><a name="index-g_t_005fTEXINFOS-704"></a><a name="index-info_005fTEXINFOS-705"></a>
If the current directory contains Texinfo source, you must declare it
with the <code>TEXINFOS</code> primary.  Generally Texinfo files are converted
into info, and thus the <code>info_TEXINFOS</code> variable is most commonly used
here.  Any Texinfo source file must end in the <samp><span class="file">.texi</span></samp>,
<samp><span class="file">.txi</span></samp>, or <samp><span class="file">.texinfo</span></samp> extension.  We recommend <samp><span class="file">.texi</span></samp>
for new manuals.

   <p>Automake generates rules to build <samp><span class="file">.info</span></samp>, <samp><span class="file">.dvi</span></samp>,
<samp><span class="file">.ps</span></samp>, <samp><span class="file">.pdf</span></samp> and <samp><span class="file">.html</span></samp> files from your Texinfo
sources.  Following the GNU Coding Standards, only the <samp><span class="file">.info</span></samp>
files are built by &lsquo;<samp><span class="samp">make all</span></samp>&rsquo; and installed by &lsquo;<samp><span class="samp">make
install</span></samp>&rsquo; (unless you use <samp><span class="option">no-installinfo</span></samp>, see below). 
Furthermore, <samp><span class="file">.info</span></samp> files are automatically distributed so that
Texinfo is not a prerequisite for installing your package.

   <p><a name="index-dvi-706"></a><a name="index-html-707"></a><a name="index-pdf-708"></a><a name="index-ps-709"></a><a name="index-install_002ddvi-710"></a><a name="index-install_002dhtml-711"></a><a name="index-install_002dpdf-712"></a><a name="index-install_002dps-713"></a>Other documentation formats can be built on request by &lsquo;<samp><span class="samp">make
dvi</span></samp>&rsquo;, &lsquo;<samp><span class="samp">make ps</span></samp>&rsquo;, &lsquo;<samp><span class="samp">make pdf</span></samp>&rsquo; and &lsquo;<samp><span class="samp">make html</span></samp>&rsquo;, and they
can be installed with &lsquo;<samp><span class="samp">make install-dvi</span></samp>&rsquo;, &lsquo;<samp><span class="samp">make install-ps</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">make install-pdf</span></samp>&rsquo; and &lsquo;<samp><span class="samp">make install-html</span></samp>&rsquo; explicitly. 
&lsquo;<samp><span class="samp">make uninstall</span></samp>&rsquo; will remove everything: the Texinfo
documentation installed by default as well as all the above optional
formats.

   <p>All of these targets can be extended using &lsquo;<samp><span class="samp">-local</span></samp>&rsquo; rules
(see <a href="#Extending">Extending</a>).

   <p><a name="index-Texinfo-flag_002c-_0040code_007bVERSION_007d-714"></a><a name="index-Texinfo-flag_002c-_0040code_007bUPDATED_007d-715"></a><a name="index-Texinfo-flag_002c-_0040code_007bEDITION_007d-716"></a><a name="index-Texinfo-flag_002c-_0040code_007bUPDATED_002dMONTH_007d-717"></a>
<a name="index-g_t_0040code_007bVERSION_007d-Texinfo-flag-718"></a><a name="index-g_t_0040code_007bUPDATED_007d-Texinfo-flag-719"></a><a name="index-g_t_0040code_007bEDITION_007d-Texinfo-flag-720"></a><a name="index-g_t_0040code_007bUPDATED_002dMONTH_007d-Texinfo-flag-721"></a>
<a name="index-g_t_0040file_007bmdate_002dsh_007d-722"></a>
If the <samp><span class="file">.texi</span></samp> file <code>@include</code>s <samp><span class="file">version.texi</span></samp>, then
that file will be automatically generated.  The file <samp><span class="file">version.texi</span></samp>
defines four Texinfo flag you can reference using
<code>@value{EDITION}</code>, <code>@value{VERSION}</code>,
<code>@value{UPDATED}</code>, and <code>@value{UPDATED-MONTH}</code>.

     <dl>
<dt><code>EDITION</code><dt><code>VERSION</code><dd>Both of these flags hold the version number of your program.  They are
kept separate for clarity.

     <br><dt><code>UPDATED</code><dd>This holds the date the primary <samp><span class="file">.texi</span></samp> file was last modified.

     <br><dt><code>UPDATED-MONTH</code><dd>This holds the name of the month in which the primary <samp><span class="file">.texi</span></samp> file
was last modified. 
</dl>

   <p>The <samp><span class="file">version.texi</span></samp> support requires the <samp><span class="command">mdate-sh</span></samp>
script; this script is supplied with Automake and automatically
included when <samp><span class="command">automake</span></samp> is invoked with the
<samp><span class="option">--add-missing</span></samp> option.

   <p>If you have multiple Texinfo files, and you want to use the
<samp><span class="file">version.texi</span></samp> feature, then you have to have a separate version
file for each Texinfo file.  Automake will treat any include in a
Texinfo file that matches <samp><span class="file">vers*.texi</span></samp> just as an automatically
generated version file.

   <p>Sometimes an info file actually depends on more than one <samp><span class="file">.texi</span></samp>
file.  For instance, in GNU Hello, <samp><span class="file">hello.texi</span></samp> includes the file
<samp><span class="file">fdl.texi</span></samp>.  You can tell Automake about these dependencies using
the <var>texi</var><code>_TEXINFOS</code> variable.  Here is how GNU Hello does it:
<a name="index-TEXINFOS-723"></a><a name="index-g_t_005fTEXINFOS-724"></a>
<pre class="example">     info_TEXINFOS = hello.texi
     hello_TEXINFOS = fdl.texi
</pre>
   <p><a name="index-g_t_0040file_007btexinfo_002etex_007d-725"></a>
By default, Automake requires the file <samp><span class="file">texinfo.tex</span></samp> to appear in
the same directory as the <samp><span class="file">Makefile.am</span></samp> file that lists the
<samp><span class="file">.texi</span></samp> files.  If you used <code>AC_CONFIG_AUX_DIR</code> in
<samp><span class="file">configure.ac</span></samp> (see <a href="autoconf.html#Input">Finding `configure' Input</a>), then <samp><span class="file">texinfo.tex</span></samp> is looked for
there.  In both cases, <samp><span class="command">automake</span></samp> then supplies <samp><span class="file">texinfo.tex</span></samp> if
<samp><span class="option">--add-missing</span></samp> is given, and takes care of its distribution. 
However, if you set the <code>TEXINFO_TEX</code> variable (see below),
it overrides the location of the file and turns off its installation
into the source as well as its distribution.

   <p>The option <samp><span class="option">no-texinfo.tex</span></samp> can be used to eliminate the
requirement for the file <samp><span class="file">texinfo.tex</span></samp>.  Use of the variable
<code>TEXINFO_TEX</code> is preferable, however, because that allows the
<code>dvi</code>, <code>ps</code>, and <code>pdf</code> targets to still work.

   <p><a name="index-Option_002c-_0040code_007bno_002dinstallinfo_007d-726"></a><a name="index-Target_002c-_0040code_007binstall_002dinfo_007d-727"></a><a name="index-g_t_0040code_007binstall_002dinfo_007d-target-728"></a><a name="index-g_t_0040code_007bno_002dinstallinfo_007d-option-729"></a>
<a name="index-no_002dinstallinfo-730"></a><a name="index-install_002dinfo-731"></a>
Automake generates an <code>install-info</code> rule; some people apparently
use this.  By default, info pages are installed by &lsquo;<samp><span class="samp">make
install</span></samp>&rsquo;, so running <code>make install-info</code> is pointless.  This can
be prevented via the <code>no-installinfo</code> option.  In this case,
<samp><span class="file">.info</span></samp> files are not installed by default, and user must
request this explicitly using &lsquo;<samp><span class="samp">make install-info</span></samp>&rsquo;.

   <p><a name="index-AM_005fUPDATE_005fINFO_005fDIR-732"></a>By default, <code>make install-info</code> and <code>make uninstall-info</code>
will try to run the <samp><span class="command">install-info</span></samp> program (if available) to
update (or create/remove) the <samp><code>${infodir}</code><span class="file">/dir</span></samp> index. 
If this is undesired, it can be prevented by exporting the
<code>AM_UPDATE_INFO_DIR</code> variable to "<code>no</code>".

   <p>The following variables are used by the Texinfo build rules.

     <dl>
<dt><code>MAKEINFO</code><a name="index-MAKEINFO-733"></a><dd>The name of the program invoked to build <samp><span class="file">.info</span></samp> files.  This
variable is defined by Automake.  If the <samp><span class="command">makeinfo</span></samp> program is
found on the system then it will be used by default; otherwise
<samp><span class="command">missing</span></samp> will be used instead.

     <br><dt><code>MAKEINFOHTML</code><a name="index-MAKEINFOHTML-734"></a><dd>The command invoked to build <samp><span class="file">.html</span></samp> files.  Automake
defines this to &lsquo;<samp><span class="samp">$(MAKEINFO) --html</span></samp>&rsquo;.

     <br><dt><code>MAKEINFOFLAGS</code><a name="index-MAKEINFOFLAGS-735"></a><dd>User flags passed to each invocation of &lsquo;<samp><span class="samp">$(MAKEINFO)</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">$(MAKEINFOHTML)</span></samp>&rsquo;.  This user variable (see <a href="#User-Variables">User Variables</a>) is
not expected to be defined in any <samp><span class="file">Makefile</span></samp>; it can be used by
users to pass extra flags to suit their needs.

     <br><dt><code>AM_MAKEINFOFLAGS</code><a name="index-AM_005fMAKEINFOFLAGS-736"></a><dt><code>AM_MAKEINFOHTMLFLAGS</code><a name="index-AM_005fMAKEINFOHTMLFLAGS-737"></a><dd>Maintainer flags passed to each <samp><span class="command">makeinfo</span></samp> invocation.  Unlike
<code>MAKEINFOFLAGS</code>, these variables are meant to be defined by
maintainers in <samp><span class="file">Makefile.am</span></samp>.  &lsquo;<samp><span class="samp">$(AM_MAKEINFOFLAGS)</span></samp>&rsquo; is
passed to <code>makeinfo</code> when building <samp><span class="file">.info</span></samp> files; and
&lsquo;<samp><span class="samp">$(AM_MAKEINFOHTMLFLAGS)</span></samp>&rsquo; is used when building <samp><span class="file">.html</span></samp>
files.

     <!-- Keep in sync with txinfo21.sh -->
     <p>For instance, the following setting can be used to obtain one single
<samp><span class="file">.html</span></samp> file per manual, without node separators.
     <pre class="example">          AM_MAKEINFOHTMLFLAGS = --no-headers --no-split
</pre>
     <p><code>AM_MAKEINFOHTMLFLAGS</code> defaults to &lsquo;<samp><span class="samp">$(AM_MAKEINFOFLAGS)</span></samp>&rsquo;. 
This means that defining <code>AM_MAKEINFOFLAGS</code> without defining
<code>AM_MAKEINFOHTMLFLAGS</code> will impact builds of both <samp><span class="file">.info</span></samp>
and <samp><span class="file">.html</span></samp> files.

     <br><dt><code>TEXI2DVI</code><a name="index-TEXI2DVI-738"></a><dd>The name of the command that converts a <samp><span class="file">.texi</span></samp> file into a
<samp><span class="file">.dvi</span></samp> file.  This defaults to &lsquo;<samp><span class="samp">texi2dvi</span></samp>&rsquo;, a script that ships
with the Texinfo package.

     <br><dt><code>TEXI2PDF</code><a name="index-TEXI2PDF-739"></a><dd>The name of the command that translates a <samp><span class="file">.texi</span></samp> file into a
<samp><span class="file">.pdf</span></samp> file.  This defaults to &lsquo;<samp><span class="samp">$(TEXI2DVI) --pdf --batch</span></samp>&rsquo;.

     <br><dt><code>DVIPS</code><a name="index-DVIPS-740"></a><dd>The name of the command that builds a <samp><span class="file">.ps</span></samp> file out of a
<samp><span class="file">.dvi</span></samp> file.  This defaults to &lsquo;<samp><span class="samp">dvips</span></samp>&rsquo;.

     <br><dt><code>TEXINFO_TEX</code><a name="index-TEXINFO_005fTEX-741"></a><dd>
If your package has Texinfo files in many directories, you can use the
variable <code>TEXINFO_TEX</code> to tell Automake where to find the canonical
<samp><span class="file">texinfo.tex</span></samp> for your package.  The value of this variable should
be the relative path from the current <samp><span class="file">Makefile.am</span></samp> to
<samp><span class="file">texinfo.tex</span></samp>:

     <pre class="example">          TEXINFO_TEX = ../doc/texinfo.tex
</pre>
     </dl>

<div class="node">
<a name="Man-Pages"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Texinfo">Texinfo</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Documentation">Documentation</a>

</div>

<h3 class="section">11.2 Man Pages</h3>

<p><a name="index-g_t_0040code_007b_005fMANS_007d-primary_002c-defined-742"></a><a name="index-g_t_0040code_007bMANS_007d-primary_002c-defined-743"></a><a name="index-Primary-variable_002c-_0040code_007bMANS_007d-744"></a>
<a name="index-g_t_005fMANS-745"></a><a name="index-man_005fMANS-746"></a>A package can also include man pages (but see the GNU standards on this
matter, <a href="standards.html#Man-Pages">Man Pages</a>.)  Man
pages are declared using the <code>MANS</code> primary.  Generally the
<code>man_MANS</code> variable is used.  Man pages are automatically installed in
the correct subdirectory of <code>mandir</code>, based on the file extension.

   <p>File extensions such as <samp><span class="file">.1c</span></samp> are handled by looking for the valid
part of the extension and using that to determine the correct
subdirectory of <code>mandir</code>.  Valid section names are the digits
&lsquo;<samp><span class="samp">0</span></samp>&rsquo; through &lsquo;<samp><span class="samp">9</span></samp>&rsquo;, and the letters &lsquo;<samp><span class="samp">l</span></samp>&rsquo; and &lsquo;<samp><span class="samp">n</span></samp>&rsquo;.

   <p>Sometimes developers prefer to name a man page something like
<samp><span class="file">foo.man</span></samp> in the source, and then rename it to have the correct
suffix, for example <samp><span class="file">foo.1</span></samp>, when installing the file.  Automake
also supports this mode.  For a valid section named <var>section</var>,
there is a corresponding directory named &lsquo;<samp><span class="samp">man</span><var>section</var><span class="samp">dir</span></samp>&rsquo;,
and a corresponding <code>_MANS</code> variable.  Files listed in such a
variable are installed in the indicated section.  If the file already
has a valid suffix, then it is installed as-is; otherwise the file
suffix is changed to match the section.

   <p>For instance, consider this example:
<pre class="example">     man1_MANS = rename.man thesame.1 alsothesame.1c
</pre>
   <p class="noindent">In this case, <samp><span class="file">rename.man</span></samp> will be renamed to <samp><span class="file">rename.1</span></samp> when
installed, but the other files will keep their names.

   <p><a name="index-Target_002c-_0040code_007binstall_002dman_007d-747"></a><a name="index-Option_002c-_0040option_007bno_002dinstallman_007d-748"></a><a name="index-g_t_0040code_007binstall_002dman_007d-target-749"></a><a name="index-g_t_0040option_007bno_002dinstallman_007d-option-750"></a><a name="index-no_002dinstallman-751"></a><a name="index-install_002dman-752"></a>
By default, man pages are installed by &lsquo;<samp><span class="samp">make install</span></samp>&rsquo;.  However,
since the GNU project does not require man pages, many maintainers do
not expend effort to keep the man pages up to date.  In these cases, the
<samp><span class="option">no-installman</span></samp> option will prevent the man pages from being
installed by default.  The user can still explicitly install them via
&lsquo;<samp><span class="samp">make install-man</span></samp>&rsquo;.

   <p>For fast installation, with many files it is preferable to use
&lsquo;<samp><span class="samp">man</span><var>section</var><span class="samp">_MANS</span></samp>&rsquo; over &lsquo;<samp><span class="samp">man_MANS</span></samp>&rsquo; as well as files that
do not need to be renamed.

   <p>Man pages are not currently considered to be source, because it is not
uncommon for man pages to be automatically generated.  Therefore they
are not automatically included in the distribution.  However, this can
be changed by use of the <code>dist_</code> prefix.  For instance here is
how to distribute and install the two man pages of GNU <samp><span class="command">cpio</span></samp>
(which includes both Texinfo documentation and man pages):

<pre class="example">     dist_man_MANS = cpio.1 mt.1
</pre>
   <p>The <code>nobase_</code> prefix is meaningless for man pages and is
disallowed.

   <p><a name="index-notrans_005f-753"></a><a name="index-g_t_0040code_007bnotrans_005f_007d-prefix-754"></a><a name="index-Man-page-renaming_002c-avoiding-755"></a><a name="index-Avoiding-man-page-renaming-756"></a>
Executables and manpages may be renamed upon installation
(see <a href="#Renaming">Renaming</a>).  For manpages this can be avoided by use of the
<code>notrans_</code> prefix.  For instance, suppose an executable &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;
allowing to access a library function &lsquo;<samp><span class="samp">foo</span></samp>&rsquo; from the command line. 
The way to avoid renaming of the <samp><span class="file">foo.3</span></samp> manpage is:

<pre class="example">     man_MANS = foo.1
     notrans_man_MANS = foo.3
</pre>
   <p><a name="index-g_t_0040code_007bnotrans_005f_007d-and-_0040code_007bdist_005f_007d-or-_0040code_007bnodist_005f_007d-757"></a><a name="index-g_t_0040code_007bdist_005f_007d-and-_0040code_007bnotrans_005f_007d-758"></a><a name="index-g_t_0040code_007bnodist_005f_007d-and-_0040code_007bnotrans_005f_007d-759"></a>
&lsquo;<samp><span class="samp">notrans_</span></samp>&rsquo; must be specified first when used in conjunction with
either &lsquo;<samp><span class="samp">dist_</span></samp>&rsquo; or &lsquo;<samp><span class="samp">nodist_</span></samp>&rsquo; (see <a href="#Fine_002dgrained-Distribution-Control">Fine-grained Distribution Control</a>).  For instance:

<pre class="example">     notrans_dist_man3_MANS = bar.3
</pre>
   <div class="node">
<a name="Install"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Clean">Clean</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Documentation">Documentation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">12 What Gets Installed</h2>

<p><a name="index-Installation-support-760"></a><a name="index-g_t_0040samp_007bmake-install_007d-support-761"></a>
Naturally, Automake handles the details of actually installing your
program once it has been built.  All files named by the various
primaries are automatically installed in the appropriate places when the
user runs &lsquo;<samp><span class="samp">make install</span></samp>&rsquo;.

<ul class="menu">
<li><a accesskey="1" href="#Basics-of-Installation">Basics of Installation</a>:       What gets installed where
<li><a accesskey="2" href="#The-Two-Parts-of-Install">The Two Parts of Install</a>:     Installing data and programs separately
<li><a accesskey="3" href="#Extending-Installation">Extending Installation</a>:       Adding your own rules for installation
<li><a accesskey="4" href="#Staged-Installs">Staged Installs</a>:              Installation in a temporary location
<li><a accesskey="5" href="#Install-Rules-for-the-User">Install Rules for the User</a>:   Useful additional rules
</ul>

<div class="node">
<a name="Basics-of-Installation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#The-Two-Parts-of-Install">The Two Parts of Install</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Install">Install</a>

</div>

<h3 class="section">12.1 Basics of Installation</h3>

<p>A file named in a primary is installed by copying the built file into
the appropriate directory.  The base name of the file is used when
installing.

<pre class="example">     bin_PROGRAMS = hello subdir/goodbye
</pre>
   <p>In this example, both &lsquo;<samp><span class="samp">hello</span></samp>&rsquo; and &lsquo;<samp><span class="samp">goodbye</span></samp>&rsquo; will be installed
in &lsquo;<samp><span class="samp">$(bindir)</span></samp>&rsquo;.

   <p>Sometimes it is useful to avoid the basename step at install time.  For
instance, you might have a number of header files in subdirectories of
the source tree that are laid out precisely how you want to install
them.  In this situation you can use the <code>nobase_</code> prefix to
suppress the base name step.  For example:

<pre class="example">     nobase_include_HEADERS = stdio.h sys/types.h
</pre>
   <p class="noindent">will install <samp><span class="file">stdio.h</span></samp> in &lsquo;<samp><span class="samp">$(includedir)</span></samp>&rsquo; and <samp><span class="file">types.h</span></samp>
in &lsquo;<samp><span class="samp">$(includedir)/sys</span></samp>&rsquo;.

   <p>For most file types, Automake will install multiple files at once, while
avoiding command line length issues (see <a href="#Length-Limitations">Length Limitations</a>).  Since
some <samp><span class="command">install</span></samp> programs will not install the same file twice in
one invocation, you may need to ensure that file lists are unique within
one variable such as &lsquo;<samp><span class="samp">nobase_include_HEADERS</span></samp>&rsquo; above.

   <p>You should not rely on the order in which files listed in one variable
are installed.  Likewise, to cater for parallel make, you should not
rely on any particular file installation order even among different
file types (library dependencies are an exception here).

<div class="node">
<a name="The-Two-Parts-of-Install"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Extending-Installation">Extending Installation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Basics-of-Installation">Basics of Installation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Install">Install</a>

</div>

<h3 class="section">12.2 The Two Parts of Install</h3>

<p>Automake generates separate <code>install-data</code> and <code>install-exec</code>
rules, in case the installer is installing on multiple machines that
share directory structure&mdash;these targets allow the machine-independent
parts to be installed only once.  <code>install-exec</code> installs
platform-dependent files, and <code>install-data</code> installs
platform-independent files.  The <code>install</code> target depends on both
of these targets.  While Automake tries to automatically segregate
objects into the correct category, the <samp><span class="file">Makefile.am</span></samp> author is, in
the end, responsible for making sure this is done correctly. 
<a name="index-install_002ddata-762"></a><a name="index-install_002dexec-763"></a><a name="index-install-764"></a><a name="index-Install_002c-two-parts-of-765"></a>
Variables using the standard directory prefixes &lsquo;<samp><span class="samp">data</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">info</span></samp>&rsquo;, &lsquo;<samp><span class="samp">man</span></samp>&rsquo;, &lsquo;<samp><span class="samp">include</span></samp>&rsquo;, &lsquo;<samp><span class="samp">oldinclude</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">pkgdata</span></samp>&rsquo;, or &lsquo;<samp><span class="samp">pkginclude</span></samp>&rsquo; are installed by
<code>install-data</code>.

   <p>Variables using the standard directory prefixes &lsquo;<samp><span class="samp">bin</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">sbin</span></samp>&rsquo;, &lsquo;<samp><span class="samp">libexec</span></samp>&rsquo;, &lsquo;<samp><span class="samp">sysconf</span></samp>&rsquo;, &lsquo;<samp><span class="samp">localstate</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">lib</span></samp>&rsquo;, or &lsquo;<samp><span class="samp">pkglib</span></samp>&rsquo; are installed by <code>install-exec</code>.

   <p>For instance, <code>data_DATA</code> files are installed by <code>install-data</code>,
while <code>bin_PROGRAMS</code> files are installed by <code>install-exec</code>.

   <p>Any variable using a user-defined directory prefix with
&lsquo;<samp><span class="samp">exec</span></samp>&rsquo; in the name (e.g.,
<!-- Keep in sync with primary-prefix-couples-documented-valid.sh -->
<code>myexecbin_PROGRAMS</code>) is installed by <code>install-exec</code>.  All
other user-defined prefixes are installed by <code>install-data</code>.

<div class="node">
<a name="Extending-Installation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Staged-Installs">Staged Installs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#The-Two-Parts-of-Install">The Two Parts of Install</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Install">Install</a>

</div>

<h3 class="section">12.3 Extending Installation</h3>

<p>It is possible to extend this mechanism by defining an
<code>install-exec-local</code> or <code>install-data-local</code> rule.  If these
rules exist, they will be run at &lsquo;<samp><span class="samp">make install</span></samp>&rsquo; time.  These
rules can do almost anything; care is required. 
<a name="index-install_002dexec_002dlocal-766"></a><a name="index-install_002ddata_002dlocal-767"></a>
Automake also supports two install hooks, <code>install-exec-hook</code> and
<code>install-data-hook</code>.  These hooks are run after all other install
rules of the appropriate type, exec or data, have completed.  So, for
instance, it is possible to perform post-installation modifications
using an install hook.  See <a href="#Extending">Extending</a>, for some examples. 
<a name="index-Install-hook-768"></a>
<div class="node">
<a name="Staged-Installs"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Install-Rules-for-the-User">Install Rules for the User</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Extending-Installation">Extending Installation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Install">Install</a>

</div>

<h3 class="section">12.4 Staged Installs</h3>

<p><a name="index-DESTDIR-769"></a>Automake generates support for the <code>DESTDIR</code> variable in all
install rules.  <code>DESTDIR</code> is used during the &lsquo;<samp><span class="samp">make install</span></samp>&rsquo;
step to relocate install objects into a staging area.  Each object and
path is prefixed with the value of <code>DESTDIR</code> before being copied
into the install area.  Here is an example of typical DESTDIR usage:

<pre class="example">     mkdir /tmp/staging &amp;&amp;
     make DESTDIR=/tmp/staging install
</pre>
   <p>The <samp><span class="command">mkdir</span></samp> command avoids a security problem if the attacker
creates a symbolic link from <samp><span class="file">/tmp/staging</span></samp> to a victim area;
then <samp><span class="command">make</span></samp> places install objects in a directory tree built under
<samp><span class="file">/tmp/staging</span></samp>.  If <samp><span class="file">/gnu/bin/foo</span></samp> and
<samp><span class="file">/gnu/share/aclocal/foo.m4</span></samp> are to be installed, the above command
would install <samp><span class="file">/tmp/staging/gnu/bin/foo</span></samp> and
<samp><span class="file">/tmp/staging/gnu/share/aclocal/foo.m4</span></samp>.

   <p>This feature is commonly used to build install images and packages
(see <a href="#DESTDIR">DESTDIR</a>).

   <p>Support for <code>DESTDIR</code> is implemented by coding it directly into
the install rules.  If your <samp><span class="file">Makefile.am</span></samp> uses a local install
rule (e.g., <code>install-exec-local</code>) or an install hook, then you
must write that code to respect <code>DESTDIR</code>.

   <p>See <a href="standards.html#Makefile-Conventions">Makefile Conventions</a>,
for another usage example.

<div class="node">
<a name="Install-Rules-for-the-User"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Staged-Installs">Staged Installs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Install">Install</a>

</div>

<h3 class="section">12.5 Install Rules for the User</h3>

<p>Automake also generates rules for targets <code>uninstall</code>,
<code>installdirs</code>, and <code>install-strip</code>. 
<a name="index-uninstall-770"></a><a name="index-installdirs-771"></a><a name="index-install_002dstrip-772"></a>
Automake supports <code>uninstall-local</code> and <code>uninstall-hook</code>. 
There is no notion of separate uninstalls for &ldquo;exec&rdquo; and &ldquo;data&rdquo;, as
these features would not provide additional functionality.

   <p>Note that <code>uninstall</code> is not meant as a replacement for a real
packaging tool.

<div class="node">
<a name="Clean"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Dist">Dist</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Install">Install</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">13 What Gets Cleaned</h2>

<p><a name="index-g_t_0040samp_007bmake-clean_007d-support-773"></a>
The GNU Makefile Standards specify a number of different clean rules. 
See <a href="standards.html#Standard-Targets">Standard Targets for Users</a>.

   <p>Generally the files that can be cleaned are determined automatically by
Automake.  Of course, Automake also recognizes some variables that can
be defined to specify additional files to clean.  These variables are
<code>MOSTLYCLEANFILES</code>, <code>CLEANFILES</code>, <code>DISTCLEANFILES</code>, and
<code>MAINTAINERCLEANFILES</code>. 
<a name="index-MOSTLYCLEANFILES-774"></a><a name="index-CLEANFILES-775"></a><a name="index-DISTCLEANFILES-776"></a><a name="index-MAINTAINERCLEANFILES-777"></a>
<a name="index-mostlyclean_002dlocal-778"></a><a name="index-clean_002dlocal-779"></a><a name="index-distclean_002dlocal-780"></a><a name="index-maintainer_002dclean_002dlocal-781"></a>When cleaning involves more than deleting some hard-coded list of
files, it is also possible to supplement the cleaning rules with your
own commands.  Simply define a rule for any of the
<code>mostlyclean-local</code>, <code>clean-local</code>, <code>distclean-local</code>,
or <code>maintainer-clean-local</code> targets (see <a href="#Extending">Extending</a>).  A common
case is deleting a directory, for instance, a directory created by the
test suite:

<pre class="example">     clean-local:
             -rm -rf testSubDir
</pre>
   <p>Since <samp><span class="command">make</span></samp> allows only one set of rules for a given target,
a more extensible way of writing this is to use a separate target
listed as a dependency:

<pre class="example">     clean-local: clean-local-check
     .PHONY: clean-local-check
     clean-local-check:
             -rm -rf testSubDir
</pre>
   <p>As the GNU Standards aren't always explicit as to which files should
be removed by which rule, we've adopted a heuristic that we believe
was first formulated by Fran&ccedil;ois Pinard:

     <ul>
<li>If <samp><span class="command">make</span></samp> built it, and it is commonly something that one would
want to rebuild (for instance, a <samp><span class="file">.o</span></samp> file), then
<code>mostlyclean</code> should delete it.

     <li>Otherwise, if <samp><span class="command">make</span></samp> built it, then <code>clean</code> should delete it.

     <li>If <samp><span class="command">configure</span></samp> built it, then <code>distclean</code> should delete it.

     <li>If the maintainer built it (for instance, a <samp><span class="file">.info</span></samp> file), then
<code>maintainer-clean</code> should delete it.  However
<code>maintainer-clean</code> should not delete anything that needs to exist
in order to run &lsquo;<samp><span class="samp">./configure &amp;&amp; make</span></samp>&rsquo;. 
</ul>

   <p>We recommend that you follow this same set of heuristics in your
<samp><span class="file">Makefile.am</span></samp>.

<div class="node">
<a name="Dist"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Tests">Tests</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Clean">Clean</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">14 What Goes in a Distribution</h2>

<ul class="menu">
<li><a accesskey="1" href="#Basics-of-Distribution">Basics of Distribution</a>:       Files distributed by default
<li><a accesskey="2" href="#Fine_002dgrained-Distribution-Control">Fine-grained Distribution Control</a>:   <code>dist_</code> and <code>nodist_</code> prefixes
<li><a accesskey="3" href="#The-dist-Hook">The dist Hook</a>:                A target for last-minute distribution changes
<li><a accesskey="4" href="#Checking-the-Distribution">Checking the Distribution</a>:    &lsquo;<samp><span class="samp">make distcheck</span></samp>&rsquo; explained
<li><a accesskey="5" href="#The-Types-of-Distributions">The Types of Distributions</a>:   A variety of formats and compression methods
</ul>

<div class="node">
<a name="Basics-of-Distribution"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Fine_002dgrained-Distribution-Control">Fine-grained Distribution Control</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Dist">Dist</a>

</div>

<h3 class="section">14.1 Basics of Distribution</h3>

<p><a name="index-g_t_0040samp_007bmake-dist_007d-782"></a>
<a name="index-PACKAGE-783"></a><a name="index-VERSION-784"></a><a name="index-dist-785"></a>The <code>dist</code> rule in the generated <samp><span class="file">Makefile.in</span></samp> can be used
to generate a gzipped <code>tar</code> file and other flavors of archive for
distribution.  The file is named based on the <code>PACKAGE</code> and
<code>VERSION</code> variables defined by <code>AM_INIT_AUTOMAKE</code>
(see <a href="#Macros">Macros</a>); more precisely the gzipped <code>tar</code> file is named
&lsquo;<samp><var>package</var><span class="samp">-</span><var>version</var><span class="samp">.tar.gz</span></samp>&rsquo;. 
<a name="index-GZIP_005fENV-786"></a>You can use the <samp><span class="command">make</span></samp> variable <code>GZIP_ENV</code> to control how gzip
is run.  The default setting is <samp><span class="option">--best</span></samp>.

   <p><a name="index-g_t_0040code_007bm4_005finclude_007d_002c-distribution-787"></a><a name="index-g_t_0040code_007binclude_007d_002c-distribution-788"></a><a name="index-m4_005finclude-789"></a><a name="index-include-790"></a>For the most part, the files to distribute are automatically found by
Automake: all source files are automatically included in a distribution,
as are all <samp><span class="file">Makefile.am</span></samp> and <samp><span class="file">Makefile.in</span></samp> files.  Automake also
has a built-in list of commonly used files that are automatically
included if they are found in the current directory (either physically,
or as the target of a <samp><span class="file">Makefile.am</span></samp> rule); this list is printed by
&lsquo;<samp><span class="samp">automake --help</span></samp>&rsquo;.  Note that some files in this list are actually
distributed only if other certain conditions hold (for example,
<!-- Keep in sync with autodist-config-headers.sh -->
the <samp><span class="file">config.h.top</span></samp> and <samp><span class="file">config.h.bot</span></samp> files are automatically
distributed only if, e.g., &lsquo;<samp><span class="samp">AC_CONFIG_HEADERS([config.h])</span></samp>&rsquo; is used
in <samp><span class="file">configure.ac</span></samp>).  Also, files that are read by <samp><span class="command">configure</span></samp>
(i.e. the source files corresponding to the files specified in various
Autoconf macros such as <code>AC_CONFIG_FILES</code> and siblings) are
automatically distributed.  Files included in a <samp><span class="file">Makefile.am</span></samp> (using
<code>include</code>) or in <samp><span class="file">configure.ac</span></samp> (using <code>m4_include</code>), and
helper scripts installed with &lsquo;<samp><span class="samp">automake --add-missing</span></samp>&rsquo; are also
distributed.

   <p><a name="index-EXTRA_005fDIST-791"></a>Still, sometimes there are files that must be distributed, but which
are not covered in the automatic rules.  These files should be listed in
the <code>EXTRA_DIST</code> variable.  You can mention files from
subdirectories in <code>EXTRA_DIST</code>.

   <p>You can also mention a directory in <code>EXTRA_DIST</code>; in this case the
entire directory will be recursively copied into the distribution. 
Please note that this will also copy <em>everything</em> in the directory,
including, e.g., Subversion's <samp><span class="file">.svn</span></samp> private directories or CVS/RCS
version control files.  We recommend against using this feature.

   <p><a name="index-SUBDIRS-792"></a><a name="index-DIST_005fSUBDIRS-793"></a>If you define <code>SUBDIRS</code>, Automake will recursively include the
subdirectories in the distribution.  If <code>SUBDIRS</code> is defined
conditionally (see <a href="#Conditionals">Conditionals</a>), Automake will normally include
all directories that could possibly appear in <code>SUBDIRS</code> in the
distribution.  If you need to specify the set of directories
conditionally, you can set the variable <code>DIST_SUBDIRS</code> to the
exact list of subdirectories to include in the distribution
(see <a href="#Conditional-Subdirectories">Conditional Subdirectories</a>).

<div class="node">
<a name="Fine-grained-Distribution-Control"></a>
<a name="Fine_002dgrained-Distribution-Control"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#The-dist-Hook">The dist Hook</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Basics-of-Distribution">Basics of Distribution</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Dist">Dist</a>

</div>

<h3 class="section">14.2 Fine-grained Distribution Control</h3>

<p><a name="index-dist_005f-794"></a><a name="index-nodist_005f-795"></a>Sometimes you need tighter control over what does <em>not</em> go into the
distribution; for instance, you might have source files that are
generated and that you do not want to distribute.  In this case
Automake gives fine-grained control using the <code>dist</code> and
<code>nodist</code> prefixes.  Any primary or <code>_SOURCES</code> variable can be
prefixed with <code>dist_</code> to add the listed files to the distribution. 
Similarly, <code>nodist_</code> can be used to omit the files from the
distribution.

   <p>As an example, here is how you would cause some data to be distributed
while leaving some source code out of the distribution:

<pre class="example">     dist_data_DATA = distribute-this
     bin_PROGRAMS = foo
     nodist_foo_SOURCES = do-not-distribute.c
</pre>
   <div class="node">
<a name="The-dist-Hook"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Checking-the-Distribution">Checking the Distribution</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Fine_002dgrained-Distribution-Control">Fine-grained Distribution Control</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Dist">Dist</a>

</div>

<h3 class="section">14.3 The dist Hook</h3>

<p><a name="index-dist_002dhook-796"></a>
Occasionally it is useful to be able to change the distribution before
it is packaged up.  If the <code>dist-hook</code> rule exists, it is run
after the distribution directory is filled, but before the actual
distribution archives are created.  One way to use this is for
removing unnecessary files that get recursively included by specifying
a directory in <code>EXTRA_DIST</code>:

<pre class="example">     EXTRA_DIST = doc
     dist-hook:
             rm -rf `find $(distdir)/doc -type d -name .svn`
</pre>
   <!-- The caveates described here should be documented in 'disthook.sh'. -->
<p class="noindent">Note that the <code>dist-hook</code> recipe shouldn't assume that the regular
files in the distribution directory are writable; this might not be the
case if one is packaging from a read-only source tree, or when a
<code>make distcheck</code> is being done.  For similar reasons, the recipe
shouldn't assume that the subdirectories put into the distribution
directory as effect of having them listed in <code>EXTRA_DIST</code> are
writable.  So, if the <code>dist-hook</code> recipe wants to modify the
content of an existing file (or <code>EXTRA_DIST</code> subdirectory) in the
distribution directory, it should explicitly to make it writable first:

<pre class="example">     EXTRA_DIST = README doc
     dist-hook:
             chmod u+w $(distdir)/README $(distdir)/doc
             echo "Distribution date: `date`" &gt;&gt; README
             rm -f $(distdir)/doc/HACKING
</pre>
   <p><a name="index-distdir-797"></a><a name="index-top_005fdistdir-798"></a>Two variables that come handy when writing <code>dist-hook</code> rules are
&lsquo;<samp><span class="samp">$(distdir)</span></samp>&rsquo; and &lsquo;<samp><span class="samp">$(top_distdir)</span></samp>&rsquo;.

   <p>&lsquo;<samp><span class="samp">$(distdir)</span></samp>&rsquo; points to the directory where the <code>dist</code> rule
will copy files from the current directory before creating the
tarball.  If you are at the top-level directory, then &lsquo;<samp><span class="samp">distdir =
$(PACKAGE)-$(VERSION)</span></samp>&rsquo;.  When used from subdirectory named
<samp><span class="file">foo/</span></samp>, then &lsquo;<samp><span class="samp">distdir = ../$(PACKAGE)-$(VERSION)/foo</span></samp>&rsquo;. 
&lsquo;<samp><span class="samp">$(distdir)</span></samp>&rsquo; can be a relative or absolute path, do not assume
any form.

   <p>&lsquo;<samp><span class="samp">$(top_distdir)</span></samp>&rsquo; always points to the root directory of the
distributed tree.  At the top-level it's equal to &lsquo;<samp><span class="samp">$(distdir)</span></samp>&rsquo;. 
In the <samp><span class="file">foo/</span></samp> subdirectory
&lsquo;<samp><span class="samp">top_distdir = ../$(PACKAGE)-$(VERSION)</span></samp>&rsquo;. 
&lsquo;<samp><span class="samp">$(top_distdir)</span></samp>&rsquo; too can be a relative or absolute path.

   <p>Note that when packages are nested using <code>AC_CONFIG_SUBDIRS</code>
(see <a href="#Subpackages">Subpackages</a>), then &lsquo;<samp><span class="samp">$(distdir)</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">$(top_distdir)</span></samp>&rsquo; are relative to the package where &lsquo;<samp><span class="samp">make
dist</span></samp>&rsquo; was run, not to any sub-packages involved.

<div class="node">
<a name="Checking-the-Distribution"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#The-Types-of-Distributions">The Types of Distributions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#The-dist-Hook">The dist Hook</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Dist">Dist</a>

</div>

<h3 class="section">14.4 Checking the Distribution</h3>

<p><a name="index-g_t_0040samp_007bmake-distcheck_007d-799"></a><a name="index-distcheck-800"></a>Automake also generates a <code>distcheck</code> rule that can be of help
to ensure that a given distribution will actually work.  Simplifying
a bit, we can say this rule first makes a distribution, and then,
<em>operating from it</em>, takes the following steps:
     <ul>
<li>tries to do a <code>VPATH</code> build (see <a href="#VPATH-Builds">VPATH Builds</a>), with the
<code>srcdir</code> and all its content made <em>read-only</em>;
<li>runs the test suite (with <samp><span class="command">make check</span></samp>) on this fresh build;
<li>installs the package in a temporary directory (with <samp><span class="command">make
install</span></samp>), and tries runs the test suite on the resulting installation
(with <samp><span class="command">make installcheck</span></samp>);
<li>checks that the package can be correctly uninstalled (by <samp><span class="command">make
uninstall</span></samp>) and cleaned (by <code>make distclean</code>);
<li>finally, makes another tarball to ensure the distribution is
self-contained. 
</ul>

   <p><a name="index-AM_005fDISTCHECK_005fCONFIGURE_005fFLAGS-801"></a><a name="index-DISTCHECK_005fCONFIGURE_005fFLAGS-802"></a>

<h4 class="subheading">DISTCHECK_CONFIGURE_FLAGS</h4>

<p>Building the package involves running &lsquo;<samp><span class="samp">./configure</span></samp>&rsquo;.  If you need
to supply additional flags to <samp><span class="command">configure</span></samp>, define them in the
<code>AM_DISTCHECK_CONFIGURE_FLAGS</code> variable in your top-level
<samp><span class="file">Makefile.am</span></samp>.  The user can still extend or override the flags
provided there by defining the <code>DISTCHECK_CONFIGURE_FLAGS</code> variable,
on the command line when invoking <samp><span class="command">make</span></samp>.

   <p>Still, developers are encouraged to strive to make their code buildable
without requiring any special configure option; thus, in general, you
shouldn't define <code>AM_DISTCHECK_CONFIGURE_FLAGS</code>. However, there
might be few scenarios in which the use of this variable is justified. 
GNU <samp><span class="command">m4</span></samp> offers an example.  GNU <samp><span class="command">m4</span></samp> configures by
default with its experimental and seldom used "changeword" feature
disabled; so in its case it is useful to have <samp><span class="command">make distcheck</span></samp>
run configure with the <samp><span class="option">--with-changeword</span></samp> option, to ensure that
the code for changeword support still compiles correctly. 
GNU <samp><span class="command">m4</span></samp> also employs the <code>AM_DISTCHECK_CONFIGURE_FLAGS</code>
variable to stress-test the use of <samp><span class="option">--program-prefix=g</span></samp>, since at
one point the <samp><span class="command">m4</span></samp> build system had a bug where <samp><span class="command">make
installcheck</span></samp> was wrongly assuming it could blindly test "<samp><span class="command">m4</span></samp>",
rather than the just-installed "<samp><span class="command">gm4</span></samp>".

   <p><a name="index-distcheck_002dhook-803"></a>

<h4 class="subheading">distcheck-hook</h4>

<p>If the <code>distcheck-hook</code> rule is defined in your top-level
<samp><span class="file">Makefile.am</span></samp>, then it will be invoked by <code>distcheck</code> after
the new distribution has been unpacked, but before the unpacked copy
is configured and built.  Your <code>distcheck-hook</code> can do almost
anything, though as always caution is advised.  Generally this hook is
used to check for potential distribution errors not caught by the
standard mechanism.  Note that <code>distcheck-hook</code> as well as
<code>AM_DISTCHECK_CONFIGURE_FLAGS</code> and <code>DISTCHECK_CONFIGURE_FLAGS</code>
are not honored in a subpackage <samp><span class="file">Makefile.am</span></samp>, but the flags from
<code>AM_DISTCHECK_CONFIGURE_FLAGS</code> and <code>DISTCHECK_CONFIGURE_FLAGS</code>
are passed down to the <samp><span class="command">configure</span></samp> script of the subpackage.

   <p><a name="index-g_t_0040samp_007bmake-distcleancheck_007d-804"></a><a name="index-distcleancheck-805"></a><a name="index-DISTCLEANFILES-806"></a><a name="index-distcleancheck_005flistfiles-807"></a>

<h4 class="subheading">distcleancheck</h4>

<p>Speaking of potential distribution errors, <code>distcheck</code> also
ensures that the <code>distclean</code> rule actually removes all built
files.  This is done by running &lsquo;<samp><span class="samp">make distcleancheck</span></samp>&rsquo; at the end of
the <code>VPATH</code> build.  By default, <code>distcleancheck</code> will run
<code>distclean</code> and then make sure the build tree has been emptied by
running &lsquo;<samp><span class="samp">$(distcleancheck_listfiles)</span></samp>&rsquo;.  Usually this check will
find generated files that you forgot to add to the <code>DISTCLEANFILES</code>
variable (see <a href="#Clean">Clean</a>).

   <p>The <code>distcleancheck</code> behavior should be OK for most packages,
otherwise you have the possibility to override the definition of
either the <code>distcleancheck</code> rule, or the
&lsquo;<samp><span class="samp">$(distcleancheck_listfiles)</span></samp>&rsquo; variable.  For instance, to disable
<code>distcleancheck</code> completely, add the following rule to your
top-level <samp><span class="file">Makefile.am</span></samp>:

<pre class="example">     distcleancheck:
             @:
</pre>
   <p>If you want <code>distcleancheck</code> to ignore built files that have not
been cleaned because they are also part of the distribution, add the
following definition instead:

<!-- Keep in sync with distcleancheck.sh -->
<pre class="example">     distcleancheck_listfiles = \
       find . -type f -exec sh -c 'test -f $(srcdir)/$$1 || echo $$1' \
            sh '{}' ';'
</pre>
   <p>The above definition is not the default because it's usually an error if
your Makefiles cause some distributed files to be rebuilt when the user
build the package.  (Think about the user missing the tool required to
build the file; or if the required tool is built by your package,
consider the cross-compilation case where it can't be run.)  There is
an entry in the FAQ about this (see <a href="#Errors-with-distclean">Errors with distclean</a>), make
sure you read it before playing with <code>distcleancheck_listfiles</code>.

   <p><a name="index-g_t_0040samp_007bmake-distuninstallcheck_007d-808"></a><a name="index-distuninstallcheck-809"></a><a name="index-distuninstallcheck_005flistfiles-810"></a>

<h4 class="subheading">distuninstallcheck</h4>

<p><code>distcheck</code> also checks that the <code>uninstall</code> rule works
properly, both for ordinary and <code>DESTDIR</code> builds.  It does this
by invoking &lsquo;<samp><span class="samp">make uninstall</span></samp>&rsquo;, and then it checks the install tree
to see if any files are left over.  This check will make sure that you
correctly coded your <code>uninstall</code>-related rules.

   <p>By default, the checking is done by the <code>distuninstallcheck</code> rule,
and the list of files in the install tree is generated by
&lsquo;<samp><span class="samp">$(distuninstallcheck_listfiles)</span></samp>&rsquo; (this is a variable whose value is
a shell command to run that prints the list of files to stdout).

   <p>Either of these can be overridden to modify the behavior of
<code>distcheck</code>.  For instance, to disable this check completely, you
would write:

<pre class="example">     distuninstallcheck:
             @:
</pre>
   <div class="node">
<a name="The-Types-of-Distributions"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Checking-the-Distribution">Checking the Distribution</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Dist">Dist</a>

</div>

<h3 class="section">14.5 The Types of Distributions</h3>

<p>Automake generates rules to provide archives of the project for
distributions in various formats.  Their targets are:

     
<a name="index-BZIP2-811"></a>
<dl><dt><code>dist-bzip2</code><dd>Generate a bzip2 tar archive of the distribution.  bzip2 archives are
frequently smaller than gzipped archives. 
By default, this rule makes &lsquo;<samp><span class="samp">bzip2</span></samp>&rsquo; use a compression option of <samp><span class="option">-9</span></samp>. 
To make it use a different one, set the <samp><span class="env">BZIP2</span></samp> environment variable. 
For example, &lsquo;<samp><span class="samp">make dist-bzip2 BZIP2=-7</span></samp>&rsquo;. 
<a name="index-dist_002dbzip2-812"></a>
<br><dt><code>dist-gzip</code><dd>Generate a gzip tar archive of the distribution. 
<a name="index-dist_002dgzip-813"></a>
<br><dt><code>dist-lzip</code><dd>Generate an &lsquo;<samp><span class="samp">lzip</span></samp>&rsquo; tar archive of the distribution.  <samp><span class="command">lzip</span></samp>
archives are frequently smaller than <samp><span class="command">bzip2</span></samp>-compressed archives. 
<a name="index-dist_002dlzip-814"></a>
<br><dt><code>dist-shar</code><dd>Generate a shar archive of the distribution. 
<a name="index-dist_002dshar-815"></a>
<a name="index-XZ_005fOPT-816"></a><br><dt><code>dist-xz</code><dd>Generate an &lsquo;<samp><span class="samp">xz</span></samp>&rsquo; tar archive of the distribution.  <samp><span class="command">xz</span></samp>
archives are frequently smaller than <samp><span class="command">bzip2</span></samp>-compressed archives. 
By default, this rule makes &lsquo;<samp><span class="samp">xz</span></samp>&rsquo; use a compression option of
<samp><span class="option">-e</span></samp>.  To make it use a different one, set the <samp><span class="env">XZ_OPT</span></samp>
environment variable.  For example, run this command to use the
default compression ratio, but with a progress indicator:
&lsquo;<samp><span class="samp">make dist-xz XZ_OPT=-7e</span></samp>&rsquo;. 
<a name="index-dist_002dxz-817"></a>
<br><dt><code>dist-zip</code><dd>Generate a zip archive of the distribution. 
<a name="index-dist_002dzip-818"></a>
<br><dt><code>dist-tarZ</code><dd>Generate a compressed tar archive of
the distribution. 
<a name="index-dist_002dtarZ-819"></a></dl>

   <p>The rule <code>dist</code> (and its historical synonym <code>dist-all</code>) will
create archives in all the enabled formats, <a href="#Options">Options</a>.  By
default, only the <code>dist-gzip</code> target is hooked to <code>dist</code>.

<div class="node">
<a name="Tests"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Rebuilding">Rebuilding</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Dist">Dist</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">15 Support for test suites</h2>

<p><a name="index-Test-suites-820"></a><a name="index-g_t_0040code_007bmake-check_007d-821"></a><a name="index-check-822"></a>
Automake can generate code to handle two kinds of test suites.  One is
based on integration with the <samp><span class="command">dejagnu</span></samp> framework.  The other
(and most used) form is based on the use of generic test scripts, and
its activation is triggered by the definition of the special <code>TESTS</code>
variable.  This second form allows for various degrees of sophistication
and customization; in particular, it allows for concurrent execution
of test scripts, use of established test protocols such as TAP, and
definition of custom test drivers and test runners.

<p class="noindent">In either case, the testsuite is invoked via &lsquo;<samp><span class="samp">make check</span></samp>&rsquo;.

<ul class="menu">
<li><a accesskey="1" href="#Generalities-about-Testing">Generalities about Testing</a>:   Concepts and terminology about testing
<li><a accesskey="2" href="#Simple-Tests">Simple Tests</a>:                 Listing test scripts in <code>TESTS</code>
<li><a accesskey="3" href="#Custom-Test-Drivers">Custom Test Drivers</a>:          Writing and using custom test drivers
<li><a accesskey="4" href="#Using-the-TAP-test-protocol">Using the TAP test protocol</a>:  Integrating test scripts that use the TAP protocol
<li><a accesskey="5" href="#DejaGnu-Tests">DejaGnu Tests</a>:                Interfacing with the <samp><span class="command">dejagnu</span></samp> testing framework
<li><a accesskey="6" href="#Install-Tests">Install Tests</a>:                Running tests on installed packages
</ul>

<div class="node">
<a name="Generalities-about-Testing"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Simple-Tests">Simple Tests</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Tests">Tests</a>

</div>

<h3 class="section">15.1 Generalities about Testing</h3>

<p>The purpose of testing is to determine whether a program or system behaves
as expected (e.g., known inputs produce the expected outputs, error
conditions are correctly handled or reported, and older bugs do not
resurface).

   <p><a name="index-test-case-823"></a>The minimal unit of testing is usually called <em>test case</em>, or simply
<em>test</em>.  How a test case is defined or delimited, and even what
exactly <em>constitutes</em> a test case, depends heavily on the testing
paradigm and/or framework in use, so we won't attempt any more precise
definition.  The set of the test cases for a given program or system
constitutes its <em>testsuite</em>.

   <p><a name="index-test-harness-824"></a><a name="index-testsuite-harness-825"></a>A <em>test harness</em> (also <em>testsuite harness</em>) is a program or
software component that executes all (or part of) the defined test cases,
analyzes their outcomes, and report or register these outcomes
appropriately.  Again, the details of how this is accomplished (and how
the developer and user can influence it or interface with it) varies
wildly, and we'll attempt no precise definition.

   <p><a name="index-test-pass-826"></a><a name="index-test-failure-827"></a>A test is said to <em>pass</em> when it can determine that the condition or
behaviour it means to verify holds, and is said to <em>fail</em> when it can
determine that such condition of behaviour does <em>not</em> hold.

   <p><a name="index-test-skip-828"></a>Sometimes, tests can rely on non-portable tools or prerequisites, or
simply make no sense on a given system (for example, a test checking a
Windows-specific feature makes no sense on a GNU/Linux system).  In this
case, accordingly to the definition above, the tests can neither be
considered passed nor failed; instead, they are <em>skipped</em> &ndash; i.e.,
they are not run, or their result is anyway ignored for what concerns
the count of failures an successes.  Skips are usually explicitly
reported though, so that the user will be aware that not all of the
testsuite has really run.

   <p><a name="index-xfail-829"></a><a name="index-expected-failure-830"></a><a name="index-expected-test-failure-831"></a><a name="index-xpass-832"></a><a name="index-unexpected-pass-833"></a><a name="index-unexpected-test-pass-834"></a>It's not uncommon, especially during early development stages, that some
tests fail for known reasons, and that the developer doesn't want to
tackle these failures immediately (this is especially true when the
failing tests deal with corner cases).  In this situation, the better
policy is to declare that each of those failures is an <em>expected
failure</em> (or <em>xfail</em>).  In case a test that is expected to fail ends
up passing instead, many testing environments will flag the result as a
special kind of failure called <em>unexpected pass</em> (or <em>xpass</em>).

   <p><a name="index-hard-error-835"></a><a name="index-Distinction-between-errors-and-failures-in-testsuites-836"></a>Many testing environments and frameworks distinguish between test failures
and hard errors.  As we've seen, a test failure happens when some invariant
or expected behaviour of the software under test is not met.  An <em>hard
error</em> happens when e.g., the set-up of a test case scenario fails, or when
some other unexpected or highly undesirable condition is encountered (for
example, the program under test experiences a segmentation fault).

   <p><em>TODO</em>: Links to other test harnesses (esp. those sharing our
terminology)?

<div class="node">
<a name="Simple-Tests"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Custom-Test-Drivers">Custom Test Drivers</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Generalities-about-Testing">Generalities about Testing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Tests">Tests</a>

</div>

<h3 class="section">15.2 Simple Tests</h3>

<ul class="menu">
<li><a accesskey="1" href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a>:     Automake-specific concepts and terminology
<li><a accesskey="2" href="#Serial-Test-Harness">Serial Test Harness</a>:          Older (and obsolescent) serial test harness
<li><a accesskey="3" href="#Parallel-Test-Harness">Parallel Test Harness</a>:        Generic concurrent test harness
</ul>

<div class="node">
<a name="Scripts-based-Testsuites"></a>
<a name="Scripts_002dbased-Testsuites"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Serial-Test-Harness">Serial Test Harness</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Simple-Tests">Simple Tests</a>

</div>

<h4 class="subsection">15.2.1 Scripts-based Testsuites</h4>

<p>If the special variable <code>TESTS</code> is defined, its value is taken to be
a list of programs or scripts to run in order to do the testing.  Under
the appropriate circumstances, it's possible for <code>TESTS</code> to list
also data files to be passed to one or more test scripts defined by
different means (the so-called &ldquo;log compilers&rdquo;, see <a href="#Parallel-Test-Harness">Parallel Test Harness</a>).

   <p>Test scripts can be executed serially or concurrently.  Automake
supports both these kinds of test execution, with the serial test harness
being the default (for backward-compatibility reasons only, as its use
is nowadays discouraged).  The concurrent test harness relies on the
concurrence capabilities (if any) offered by the underlying <samp><span class="command">make</span></samp>
implementation, and can thus only be as good as those are.

   <p>By default, only the exit statuses of the test scripts are considered when
determining the testsuite outcome.  But Automake allows also the use of
more complex test protocols, either standard (see <a href="#Using-the-TAP-test-protocol">Using the TAP test protocol</a>) or custom (see <a href="#Custom-Test-Drivers">Custom Test Drivers</a>).  Note that you can
enable such protocols only when the parallel harness is used: they won't
work with the serial test harness.  In the rest of this section we are
going to concentrate mostly on protocol-less tests, since we cover
test protocols in a later section (again, see <a href="#Custom-Test-Drivers">Custom Test Drivers</a>).

   <p><a name="index-Exit-status-77_002c-special-interpretation-837"></a><a name="index-Exit-status-99_002c-special-interpretation-838"></a>When no test protocol is in use, an exit status of 0 from a test script will
denote a success, an exit status of 77 a skipped test, an exit status of 99
an hard error, and any other exit status will denote a failure.

   <p><a name="index-Tests_002c-expected-failure-839"></a><a name="index-Expected-test-failure-840"></a><a name="index-XFAIL_005fTESTS-841"></a><a name="index-DISABLE_005fHARD_005fERRORS-842"></a><a name="index-Disabling-hard-errors-843"></a>You may define the variable <code>XFAIL_TESTS</code> to a list of tests
(usually a subset of <code>TESTS</code>) that are expected to fail; this will
effectively reverse the result of those tests (with the provision that
skips and hard errors remain untouched).  You may also instruct the
testsuite harness to treat hard errors like simple failures, by defining
the <code>DISABLE_HARD_ERRORS</code> make variable to a nonempty value.

   <p>Note however that, for tests based on more complex test protocols,
the exact effects of <code>XFAIL_TESTS</code> and <code>DISABLE_HARD_ERRORS</code>
might change, or they might even have no effect at all (for example,
<!-- Keep this in sync with tap-no-disable-hard-errors.sh -->
in tests using TAP, there is not way to disable hard errors, and the
<code>DISABLE_HARD_ERRORS</code> variable has no effect on them).

   <p><a name="Testsuite-progress-on-console"></a><a name="index-Testsuite-progress-on-console-844"></a>The result of each test case run by the scripts in <code>TESTS</code> will be
printed on standard output, along with the test name.  For test protocols
that allow more test cases per test script (such as TAP), a number,
identifier and/or brief description specific for the single test case is
expected to be printed in addition to the name of the test script.  The
possible results (whose meanings should be clear from the previous
<a href="#Generalities-about-Testing">Generalities about Testing</a>) are <code>PASS</code>, <code>FAIL</code>,
<code>SKIP</code>, <code>XFAIL</code>, <code>XPASS</code> and <code>ERROR</code>.  Here is an
example of output from an hypothetical testsuite that uses both plain
and TAP tests:
<!-- Keep in sync with tap-doc.sh -->
<pre class="example">     PASS: foo.sh
     PASS: zardoz.tap 1 - Daemon started
     PASS: zardoz.tap 2 - Daemon responding
     SKIP: zardoz.tap 3 - Daemon uses /proc # SKIP /proc is not mounted
     PASS: zardoz.tap 4 - Daemon stopped
     SKIP: bar.sh
     PASS: mu.tap 1
     XFAIL: mu.tap 2 # TODO frobnication not yet implemented
</pre>
   <p class="noindent">A testsuite summary (expected to report at least the number of run,
skipped and failed tests) will be printed at the end of the testsuite
run.

   <p><a name="Simple-tests-and-color_002dtests"></a><a name="index-AM_005fCOLOR_005fTESTS-845"></a><a name="index-Colorized-testsuite-output-846"></a>If the Automake option <code>color-tests</code> is used (see <a href="#Options">Options</a>)
and standard output is connected to a capable terminal, then the test
results and the summary are colored appropriately.  The user can disable
colored output by setting the <samp><span class="command">make</span></samp> variable
&lsquo;<samp><span class="samp">AM_COLOR_TESTS=no</span></samp>&rsquo;, or force colored output even without a connecting
terminal with &lsquo;<samp><span class="samp">AM_COLOR_TESTS=always</span></samp>&rsquo;.  It's also worth noting that
some <samp><span class="command">make</span></samp> implementations, when used in parallel mode, have
slightly different semantics (see <a href="autoconf.html#Parallel-make">Parallel make</a>), which can break the automatic detection of a
connection to a capable terminal.  If this is the case, you'll have to
resort to the use of &lsquo;<samp><span class="samp">AM_COLOR_TESTS=always</span></samp>&rsquo; in order to have the
testsuite output colorized.

   <p>Test programs that need data files should look for them in <code>srcdir</code>
(which is both a make variable and an environment variable made available
to the tests), so that they work when building in a separate directory
(see <a href="autoconf.html#Build-Directories">Build Directories</a>), and in particular for the <code>distcheck</code> rule
(see <a href="#Checking-the-Distribution">Checking the Distribution</a>).

   <p><a name="index-TESTS-847"></a><a name="index-TESTS_005fENVIRONMENT-848"></a><a name="index-AM_005fTESTS_005fENVIRONMENT-849"></a>The <code>AM_TESTS_ENVIRONMENT</code> and <code>TESTS_ENVIRONMENT</code> variables can
be used to run initialization code and set environment variables for the
test scripts.  The former variable is developer-reserved, and can be
defined in the <samp><span class="file">Makefile.am</span></samp>, while the latter is reserved for the
user, which can employ it to extend or override the settings in the
former; for this to work portably, however, the contents of a non-empty
<code>AM_TESTS_ENVIRONMENT</code> <em>must</em> be terminated by a semicolon.

   <p><a name="index-AM_005fTESTS_005fFD_005fREDIRECT-850"></a>The <code>AM_TESTS_FD_REDIRECT</code> variable can be used to define file
descriptor redirections for the test scripts.  One might think that
<code>AM_TESTS_ENVIRONMENT</code> could be used for this purpose, but experience
has shown that doing so portably is practically impossible.  The main
hurdle is constituted by Korn shells, which usually set the close-on-exec
flag on file descriptors opened with the <samp><span class="command">exec</span></samp> builtin, thus
rendering an idiom like <code>AM_TESTS_ENVIRONMENT = exec 9&gt;&amp;2;</code>
ineffectual.  This issue also affects some Bourne shells, such as the
HP-UX's <samp><span class="command">/bin/sh</span></samp>,
<!-- FIXME: should we offer a link to the relevant discussions on the -->
<!-- bug-autoconf list? -->

<!-- Keep in sync with tests-environment-backcompat.sh -->
<pre class="example">     AM_TESTS_ENVIRONMENT = \
     ## Some environment initializations are kept in a separate shell
     ## file 'tests-env.sh', which can make it easier to also run tests
     ## from the command line.
       . $(srcdir)/tests-env.sh; \
     ## On Solaris, prefer more POSIX-compliant versions of the standard
     ## tools by default.
       if test -d /usr/xpg4/bin; then \
         PATH=/usr/xpg4/bin:$$PATH; export PATH; \
       fi;
     <!-- $$ restore font-lock -->
     ## With this, the test scripts will be able to print diagnostic
     ## messages to the original standard error stream, even if the test
     ## driver redirects the stderr of the test scripts to a log file
     ## before executing them.
     AM_TESTS_FD_REDIRECT = 9&gt;&amp;2
</pre>
   <p class="noindent">Note however that <code>AM_TESTS_ENVIRONMENT</code> is, for historical and
implementation reasons, <em>not</em> supported by the serial harness
(see <a href="#Serial-Test-Harness">Serial Test Harness</a>).

   <p>Automake ensures that each file listed in <code>TESTS</code> is built before
it is run; you can list both source and derived programs (or scripts)
in <code>TESTS</code>; the generated rule will look both in <code>srcdir</code> and
<samp><span class="file">.</span></samp>.  For instance, you might want to run a C program as a test. 
To do this you would list its name in <code>TESTS</code> and also in
<code>check_PROGRAMS</code>, and then specify it as you would any other
program.

   <p>Programs listed in <code>check_PROGRAMS</code> (and <code>check_LIBRARIES</code>,
<code>check_LTLIBRARIES</code>...) are only built during <code>make check</code>,
not during <code>make all</code>.  You should list there any program needed
by your tests that does not need to be built by <code>make all</code>.  Note
that <code>check_PROGRAMS</code> are <em>not</em> automatically added to
<code>TESTS</code> because <code>check_PROGRAMS</code> usually lists programs used
by the tests, not the tests themselves.  Of course you can set
<code>TESTS = $(check_PROGRAMS)</code> if all your programs are test cases.

<div class="node">
<a name="Serial-Test-Harness"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Parallel-Test-Harness">Parallel Test Harness</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Simple-Tests">Simple Tests</a>

</div>

<h4 class="subsection">15.2.2 Serial Test Harness</h4>

<p><a name="index-g_t_0040option_007bserial_002dtests_007d_002c-Using-851"></a>
<em>NOTE:</em> This harness, while still being the default one, is
obsolescent, and kept mostly for backward-compatibility reasons.  The user
is advised to use the parallel test harness instead (see <a href="#Parallel-Test-Harness">Parallel Test Harness</a>).  Be warned that future Automake versions might switch to use
that more modern and feature-rich harness by default.

   <p>The serial test harness is enabled by the Automake option
<samp><span class="option">serial-tests</span></samp>. It operates by simply running the tests serially,
one at the time, without any I/O redirection.  It's up to the user to
implement logging of tests' output, if that's requited or desired. 
<!-- TODO: give an example of how this can be done. -->

   <p>For historical and implementation reasons, the <code>AM_TESTS_ENVIRONMENT</code>
variable is <em>not</em> supported by this harness (it will be silently
ignored if defined); only <code>TESTS_ENVIRONMENT</code> is, and it is to be
considered a developer-reserved variable.  This is done so that, when
using the serial harness, <code>TESTS_ENVIRONMENT</code> can be defined to an
invocation of an interpreter through which the tests are to be run. 
For instance, the following setup may be used to run tests with Perl:

<pre class="example">     TESTS_ENVIRONMENT = $(PERL) -Mstrict -w
     TESTS = foo.pl bar.pl baz.pl
</pre>
   <p class="noindent">It's important to note that the use of <code>TESTS_ENVIRONMENT</code> endorsed
here would be <em>invalid</em> with the parallel harness.  That harness
provides a more elegant way to achieve the same effect, with the further
benefit of freeing the <code>TESTS_ENVIRONMENT</code> variable for the user
(see <a href="#Parallel-Test-Harness">Parallel Test Harness</a>).

   <p>Another, less serious limit of the serial harness is that it doesn't
really distinguish between simple failures and hard errors; this is
due to historical reasons only, and might be fixed in future Automake
versions.

<div class="node">
<a name="Parallel-Test-Harness"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Serial-Test-Harness">Serial Test Harness</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Simple-Tests">Simple Tests</a>

</div>

<h4 class="subsection">15.2.3 Parallel Test Harness</h4>

<p><a name="index-g_t_0040option_007bparallel_002dtests_007d_002c-Using-852"></a>
The parallel (or concurrent) test harness is enabled by the Automake option
<samp><span class="option">parallel-tests</span></samp>.  It features automatic collection of the test
scripts output in <samp><span class="file">.log</span></samp> files, concurrent execution of tests with
<code>make -j</code>, specification of inter-test dependencies, lazy reruns of
tests that have not completed in a prior run, and hard errors for exceptional
failures.

   <p>This harness is still somewhat experimental and may undergo changes in
order to satisfy additional portability requirements.

   <p><a name="Basics-of-test-metadata"></a><a name="index-TEST_005fSUITE_005fLOG-853"></a><a name="index-TESTS-854"></a><a name="index-g_t_0040file_007b_002elog_007d-files-855"></a><a name="index-g_t_0040file_007b_002etrs_007d-files-856"></a><a name="index-test-metadata-857"></a>The parallel test harness operates by defining a set of <samp><span class="command">make</span></samp>
rules that run the test scripts listed in <code>TESTS</code>, and, for each
such script, save its output in a corresponding <samp><span class="file">.log</span></samp> file and
its results (and other &ldquo;metadata&rdquo;, see <a href="#API-for-Custom-Test-Drivers">API for Custom Test Drivers</a>)
in a corresponding <samp><span class="file">.trs</span></samp> (as in <b>T</b>est <b>R</b>e<b>S</b>ults) file. 
<!-- We choose the '.trs' extension also because, at the time of writing, -->
<!-- it isn't already used for other significant purposes; see e.g.: -->
<!--  http://filext.com/file-extension/trs -->
<!--  http://www.file-extensions.org/search/?searchstring=trs -->
The <samp><span class="file">.log</span></samp> file will contain all the output emitted by the test on
its standard output and its standard error.  The <samp><span class="file">.trs</span></samp> file will
contain, among the other things, the results of the test cases run by
the script.

   <p>The parallel test harness will also create a summary log file,
<code>TEST_SUITE_LOG</code>, which defaults to <samp><span class="file">test-suite.log</span></samp> and requires
a <samp><span class="file">.log</span></samp> suffix.  This file depends upon all the <samp><span class="file">.log</span></samp> and
<samp><span class="file">.trs</span></samp> files created for the test scripts listed in <code>TESTS</code>.

   <p><a name="index-VERBOSE-858"></a>As with the serial harness above, by default one status line is printed
per completed test, and a short summary after the suite has completed. 
However, standard output and standard error of the test are redirected
to a per-test log file, so that parallel execution does not produce
intermingled output.  The output from failed tests is collected in the
<samp><span class="file">test-suite.log</span></samp> file.  If the variable &lsquo;<samp><span class="samp">VERBOSE</span></samp>&rsquo; is set, this
file is output after the summary. 
<!-- FIXME: we should be clearer about what we mean exactly here ... -->
For best results, the tests should be verbose by default now.

   <p><a name="index-TEST_005fEXTENSIONS-859"></a><a name="index-TEST_005fLOGS-860"></a>Each couple of <samp><span class="file">.log</span></samp> and <samp><span class="file">.trs</span></samp> files is created when the
corresponding test has completed.  The set of log files is listed in
the read-only variable <code>TEST_LOGS</code>, and defaults to <code>TESTS</code>,
with the executable extension if any (see <a href="#EXEEXT">EXEEXT</a>), as well as any
suffix listed in <code>TEST_EXTENSIONS</code> removed, and <samp><span class="file">.log</span></samp> appended. 
Results are undefined if a test file name ends in several concatenated
suffixes.  <code>TEST_EXTENSIONS</code> defaults to <samp><span class="file">.test</span></samp>; it can be
overridden by the user, in which case any extension listed in it must be
constituted by a dot, followed by a non-digit alphabetic character,
followed by any number of alphabetic characters. 
<!-- Keep in sync with test-extensions.sh -->
For example, &lsquo;<samp><span class="samp">.sh</span></samp>&rsquo;, &lsquo;<samp><span class="samp">.T</span></samp>&rsquo; and &lsquo;<samp><span class="samp">.t1</span></samp>&rsquo; are valid extensions,
while &lsquo;<samp><span class="samp">.x-y</span></samp>&rsquo;, &lsquo;<samp><span class="samp">.6c</span></samp>&rsquo; and &lsquo;<samp><span class="samp">.t.1</span></samp>&rsquo; are not.

   <p><a name="index-g_t_005fLOG_005fCOMPILE-861"></a><a name="index-g_t_005fLOG_005fCOMPILER-862"></a><a name="index-g_t_005fLOG_005fFLAGS-863"></a><a name="index-LOG_005fCOMPILE-864"></a><a name="index-LOG_005fCOMPILER-865"></a><a name="index-LOG_005fFLAGS-866"></a><a name="index-g_t_0040var_007bext_007d_005fLOG_005fCOMPILE-867"></a><a name="index-g_t_0040var_007bext_007d_005fLOG_005fCOMPILER-868"></a><a name="index-g_t_0040var_007bext_007d_005fLOG_005fFLAGS-869"></a><a name="index-AM_005f_0040var_007bext_007d_005fLOG_005fFLAGS-870"></a><a name="index-AM_005fLOG_005fFLAGS-871"></a>For tests that match an extension <code>.</code><var>ext</var> listed in
<code>TEST_EXTENSIONS</code>, you can provide a custom &ldquo;test runner&rdquo; using
the variable <var>ext</var><code>_LOG_COMPILER</code> (note the upper-case
extension) and pass options in <code>AM_</code><var>ext</var><code>_LOG_FLAGS</code> and allow
the user to pass options in <var>ext</var><code>_LOG_FLAGS</code>.  It will cause
all tests with this extension to be called with this runner.  For all
tests without a registered extension, the variables <code>LOG_COMPILER</code>,
<code>AM_LOG_FLAGS</code>, and <code>LOG_FLAGS</code> may be used.  For example,

<!-- Keep in sync with parallel-tests-log-compiler-example.sh -->
<pre class="example">     TESTS = foo.pl bar.py baz
     TEST_EXTENSIONS = .pl .py
     PL_LOG_COMPILER = $(PERL)
     AM_PL_LOG_FLAGS = -w
     PY_LOG_COMPILER = $(PYTHON)
     AM_PY_LOG_FLAGS = -v
     LOG_COMPILER = ./wrapper-script
     AM_LOG_FLAGS = -d
</pre>
   <p class="noindent">will invoke &lsquo;<samp><span class="samp">$(PERL) -w foo.pl</span></samp>&rsquo;, &lsquo;<samp><span class="samp">$(PYTHON) -v bar.py</span></samp>&rsquo;,
and &lsquo;<samp><span class="samp">./wrapper-script -d baz</span></samp>&rsquo; to produce <samp><span class="file">foo.log</span></samp>,
<samp><span class="file">bar.log</span></samp>, and <samp><span class="file">baz.log</span></samp>, respectively.  The <samp><span class="file">foo.trs</span></samp>,
<samp><span class="file">bar.trs</span></samp> and <samp><span class="file">baz.trs</span></samp> files will be automatically produced
as a side-effect.

   <p>It's important to note that, differently from what we've seen for the
serial test harness (see <a href="#Parallel-Test-Harness">Parallel Test Harness</a>), the
<code>AM_TESTS_ENVIRONMENT</code> and <code>TESTS_ENVIRONMENT</code> variables
<em>cannot</em> be use to define a custom test runner; the
<code>LOG_COMPILER</code> and <code>LOG_FLAGS</code> (or their extension-specific
counterparts) should be used instead:

<pre class="example">     ## This is WRONG!
     AM_TESTS_ENVIRONMENT = PERL5LIB='$(srcdir)/lib' $(PERL) -Mstrict -w
</pre>
   <pre class="example">     ## Do this instead.
     AM_TESTS_ENVIRONMENT = PERL5LIB='$(srcdir)/lib'; export PERL5LIB;
     LOG_COMPILER = $(PERL)
     AM_LOG_FLAGS = -Mstrict -w
</pre>
   <p>By default, the test suite harness will run all tests, but there are
several ways to limit the set of tests that are run:

     <ul>
<li>You can set the <code>TESTS</code> variable.  For example, you can use a
command like this to run only a subset of the tests:

     <pre class="example">          env TESTS="foo.test bar.test" make -e check
</pre>
     <p>Note however that the command above will unconditionally overwrite the
<samp><span class="file">test-suite.log</span></samp> file, thus clobbering the recorded results
of any previous testsuite run.  This might be undesirable for packages
whose testsuite takes long time to execute.  Luckily, this problem can
easily be avoided by overriding also <code>TEST_SUITE_LOG</code> at runtime;
for example,

     <!-- Keep in sync with parallel-tests-log-override-2.sh -->
     <pre class="example">          env TEST_SUITE_LOG=partial.log TESTS="..." make -e check
</pre>
     <p>will write the result of the partial testsuite runs to the
<samp><span class="file">partial.log</span></samp>, without touching <samp><span class="file">test-suite.log</span></samp>.

     <li>You can set the <code>TEST_LOGS</code> variable.  By default, this variable is
computed at <samp><span class="command">make</span></samp> run time from the value of <code>TESTS</code> as
described above.  For example, you can use the following:

     <pre class="example">          set x subset*.log; shift
          env TEST_LOGS="foo.log $*" make -e check
</pre>
     <p>The comments made above about <code>TEST_SUITE_LOG</code> overriding applies
here too.

     <li><a name="index-RECHECK_005fLOGS-872"></a><a name="index-lazy-test-execution-873"></a>By default, the test harness removes all old per-test <samp><span class="file">.log</span></samp> and
<samp><span class="file">.trs</span></samp> files before it starts running tests to regenerate them.  The
variable <code>RECHECK_LOGS</code> contains the set of <samp><span class="file">.log</span></samp> (and, by
implication, <samp><span class="file">.trs</span></samp>) files which are removed.  <code>RECHECK_LOGS</code>
defaults to <code>TEST_LOGS</code>, which means all tests need to be rechecked. 
By overriding this variable, you can choose which tests need to be
reconsidered.  For example, you can lazily rerun only those tests which
are outdated, i.e., older than their prerequisite test files, by setting
this variable to the empty value:

     <pre class="example">          env RECHECK_LOGS= make -e check
</pre>
     <li><a name="index-recheck-874"></a>You can ensure that all tests are rerun which have failed or passed
unexpectedly, by running <code>make recheck</code> in the test directory. 
This convenience target will set <code>RECHECK_LOGS</code> appropriately
before invoking the main test harness. 
</ul>

<p class="noindent">In order to guarantee an ordering between tests even with <code>make
-j</code><var>N</var>, dependencies between the corresponding <samp><span class="file">.log</span></samp> files
may be specified through usual <samp><span class="command">make</span></samp> dependencies.  For example,
the following snippet lets the test named <samp><span class="file">foo-execute.test</span></samp> depend
upon completion of the test <samp><span class="file">foo-compile.test</span></samp>:

<pre class="example">     TESTS = foo-compile.test foo-execute.test
     foo-execute.log: foo-compile.log
</pre>
   <p class="noindent">Please note that this ordering ignores the <em>results</em> of required
tests, thus the test <samp><span class="file">foo-execute.test</span></samp> is run even if the test
<samp><span class="file">foo-compile.test</span></samp> failed or was skipped beforehand.  Further,
please note that specifying such dependencies currently works only for
tests that end in one of the suffixes listed in <code>TEST_EXTENSIONS</code>.

   <p>Tests without such specified dependencies may be run concurrently with
parallel <samp><span class="command">make -j</span><var>N</var></samp>, so be sure they are prepared for
concurrent execution.

   <p><a name="index-Unit-tests-875"></a><!-- Keep in sync with 'parallel-tests-extra-programs.sh'. -->
The combination of lazy test execution and correct dependencies between
tests and their sources may be exploited for efficient unit testing
during development.  To further speed up the edit-compile-test cycle, it
may even be useful to specify compiled programs in <code>EXTRA_PROGRAMS</code>
instead of with <code>check_PROGRAMS</code>, as the former allows intertwined
compilation and test execution (but note that <code>EXTRA_PROGRAMS</code> are
not cleaned automatically, see <a href="#Uniform">Uniform</a>).

   <p>The variables <code>TESTS</code> and <code>XFAIL_TESTS</code> may contain
conditional parts as well as configure substitutions.  In the latter
case, however, certain restrictions apply: substituted test names
must end with a nonempty test suffix like <samp><span class="file">.test</span></samp>, so that one of
the inference rules generated by <samp><span class="command">automake</span></samp> can apply.  For
literal test names, <samp><span class="command">automake</span></samp> can generate per-target rules
to avoid this limitation.

   <p>Please note that it is currently not possible to use <code>$(srcdir)/</code>
or <code>$(top_srcdir)/</code> in the <code>TESTS</code> variable.  This technical
limitation is necessary to avoid generating test logs in the source tree
and has the unfortunate consequence that it is not possible to specify
distributed tests that are themselves generated by means of explicit
rules, in a way that is portable to all <samp><span class="command">make</span></samp> implementations
(see <a href="autoconf.html#Make-Target-Lookup">Make Target Lookup</a>, the
semantics of FreeBSD and OpenBSD <samp><span class="command">make</span></samp> conflict with this). 
In case of doubt you may want to require to use GNU <samp><span class="command">make</span></samp>,
or work around the issue with inference rules to generate the tests.

<div class="node">
<a name="Custom-Test-Drivers"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Using-the-TAP-test-protocol">Using the TAP test protocol</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Simple-Tests">Simple Tests</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Tests">Tests</a>

</div>

<h3 class="section">15.3 Custom Test Drivers</h3>

<ul class="menu">
<li><a accesskey="1" href="#Overview-of-Custom-Test-Drivers-Support">Overview of Custom Test Drivers Support</a>
<li><a accesskey="2" href="#Declaring-Custom-Test-Drivers">Declaring Custom Test Drivers</a>
<li><a accesskey="3" href="#API-for-Custom-Test-Drivers">API for Custom Test Drivers</a>
</ul>

<div class="node">
<a name="Overview-of-Custom-Test-Drivers-Support"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Declaring-Custom-Test-Drivers">Declaring Custom Test Drivers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Custom-Test-Drivers">Custom Test Drivers</a>

</div>

<h4 class="subsection">15.3.1 Overview of Custom Test Drivers Support</h4>

<p>Starting from Automake version 1.12, the parallel test harness allows
the package authors to use third-party custom test drivers, in case the
default ones are inadequate for their purposes, or do not support their
testing protocol of choice.

   <p>A custom test driver is expected to properly run the test programs passed
to it (including the command-line arguments passed to those programs, if
any), to analyze their execution and outcome, to create the <samp><span class="file">.log</span></samp>
and <samp><span class="file">.trs</span></samp> files associated to these test runs, and to display the test
results on the console. It is responsibility of the author of the test
driver to ensure that it implements all the above steps meaningfully and
correctly; Automake isn't and can't be of any help here.  On the other
hand, the Automake-provided code for testsuite summary generation offers
support for test drivers allowing several test results per test script,
if they take care to register such results properly (see <a href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a>).

   <p>The exact details of how test scripts' results are to be determined and
analyzed is left to the individual drivers.  Some drivers might only
consider the test script exit status (this is done for example by the
default test driver used by the parallel test harness, described
in the previous section).  Other drivers might implement more complex and
advanced test protocols, which might require them to parse and interpreter
the output emitted by the test script they're running (examples of such
protocols are TAP and SubUnit).

   <p>It's very important to note that, even when using custom test drivers,
most of the infrastructure described in the previous section about the
parallel harness remains in place; this includes:

     <ul>
<li>list of test scripts defined in <code>TESTS</code>, and overridable at
runtime through the redefinition of <code>TESTS</code> or <code>TEST_LOGS</code>;
<li>concurrency through the use of <samp><span class="command">make</span></samp>'s option <samp><span class="option">-j</span></samp>;
<li>per-test <samp><span class="file">.log</span></samp> and <samp><span class="file">.trs</span></samp> files, and generation of a summary
<samp><span class="file">.log</span></samp> file from them;
<li><code>recheck</code> target, <code>RECHECK_LOGS</code> variable, and lazy reruns
of tests;
<li>inter-test dependencies;
<li>support for <code>check_*</code> variables (<code>check_PROGRAMS</code>,
<code>check_LIBRARIES</code>, ...);
<li>use of <code>VERBOSE</code> environment variable to get verbose output on
testsuite failures;
<li>definition and honoring of <code>TESTS_ENVIRONMENT</code>,
<code>AM_TESTS_ENVIRONMENT</code> and <code>AM_TESTS_FD_REDIRECT</code>
variables;
<li>definition of generic and extension-specific <code>LOG_COMPILER</code> and
<code>LOG_FLAGS</code> variables. 
</ul>

<p class="noindent">On the other hand, the exact semantics of how (and if)
<samp><span class="option">color-tests</span></samp>, <code>XFAIL_TESTS</code>, and hard errors are supported
and handled is left to the individual test drivers.

<!-- TODO: We should really add a working example in the doc/ directory, -->
<!-- TODO: and reference if from here. -->
<div class="node">
<a name="Declaring-Custom-Test-Drivers"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#API-for-Custom-Test-Drivers">API for Custom Test Drivers</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Overview-of-Custom-Test-Drivers-Support">Overview of Custom Test Drivers Support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Custom-Test-Drivers">Custom Test Drivers</a>

</div>

<h4 class="subsection">15.3.2 Declaring Custom Test Drivers</h4>

<p><a name="index-g_t_005fLOG_005fDRIVER-876"></a><a name="index-g_t_005fLOG_005fDRIVER_005fFLAGS-877"></a><a name="index-LOG_005fDRIVER-878"></a><a name="index-LOG_005fDRIVER_005fFLAGS-879"></a><a name="index-g_t_0040var_007bext_007d_005fLOG_005fDRIVER-880"></a><a name="index-g_t_0040var_007bext_007d_005fLOG_005fDRIVER_005fFLAGS-881"></a><a name="index-AM_005f_0040var_007bext_007d_005fLOG_005fDRIVER_005fFLAGS-882"></a><a name="index-AM_005fLOG_005fDRIVER_005fFLAGS-883"></a>Custom testsuite drivers are declared by defining the make variables
<code>LOG_DRIVER</code> or <var>ext</var><code>_LOG_DRIVER</code> (where <var>ext</var> must
be declared in <code>TEST_EXTENSIONS</code>).  They must be defined to
programs or scripts that will be used to drive the execution, logging,
and outcome report of the tests with corresponding extensions (or of
those with no registered extension in the case of <code>LOG_DRIVER</code>). 
Clearly, multiple distinct test drivers can be declared in the same
<samp><span class="file">Makefile.am</span></samp>.  Note moreover that the <code>LOG_DRIVER</code> variables
are <em>not</em> a substitute for the <code>LOG_COMPILER</code> variables: the
two sets of variables can, and often do, usefully and legitimately
coexist.

<!-- TODO: We should really be able to point to a clarifying example here! -->
   <p>The developer-reserved variable <code>AM_LOG_DRIVER_FLAGS</code> and the
user-reserved variable <code>LOG_DRIVER_FLAGS</code> can be used to define
flags that will be passed to each invocation of <code>LOG_DRIVER</code>,
with the user-defined flags obviously taking precedence over the
developer-reserved ones.  Similarly, for each extension <var>ext</var>
declared in <code>TEST_EXTENSIONS</code>, flags listed in
<code>AM_</code><var>ext</var><code>_LOG_DRIVER_FLAGS</code> and
<var>ext</var><code>_LOG_DRIVER_FLAGS</code> will be passed to
invocations of <var>ext</var><code>_LOG_DRIVER</code>.

<div class="node">
<a name="API-for-Custom-Test-Drivers"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Declaring-Custom-Test-Drivers">Declaring Custom Test Drivers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Custom-Test-Drivers">Custom Test Drivers</a>

</div>

<h4 class="subsection">15.3.3 API for Custom Test Drivers</h4>

<p>Note that <em>the APIs described here are still highly experimental</em>,
and will very likely undergo tightenings and likely also extensive changes
in the future, to accommodate for new features or to satisfy additional
portability requirements.

   <p>The main characteristic of these APIs is that they are designed to share
as much infrastructure, semantics, and implementation details as possible
with the parallel test harness and its default driver.

<ul class="menu">
<li><a accesskey="1" href="#Command_002dline-arguments-for-test-drivers">Command-line arguments for test drivers</a>
<li><a accesskey="2" href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a>
<li><a accesskey="3" href="#Testsuite-progress-output">Testsuite progress output</a>
</ul>

<div class="node">
<a name="Command-line-arguments-for-test-drivers"></a>
<a name="Command_002dline-arguments-for-test-drivers"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#API-for-Custom-Test-Drivers">API for Custom Test Drivers</a>

</div>

<h5 class="subsubsection">15.3.3.1 Command-line arguments for test drivers</h5>

<p>A custom driver can rely on various command-line options and arguments
being passed to it automatically by the Automake's <samp><span class="option">parallel-tests</span></samp>
harness.  It is <em>mandatory</em> that it understands all of them (even
if the exact interpretation of the associated semantics can legitimately
change between a test driver and another, and even be a no-op in some
drivers).

<p class="noindent">Here is the list of options:

     <dl>
<dt><samp><span class="option">--test-name=</span><var>NAME</var></samp><dd>The name of the test, with VPATH prefix (if any) removed.  This can have a
suffix and a directory component (as in e.g., <samp><span class="file">sub/foo.test</span></samp>), and is
mostly meant to be used in console reports about testsuite advancements and
results (see <a href="#Testsuite-progress-output">Testsuite progress output</a>). 
<br><dt><samp><span class="option">--log-file=</span><samp><var>PATH</var><span class="file">.log</span></samp></samp><dd>The <samp><span class="file">.log</span></samp> file the test driver must create (see <a href="#Basics-of-test-metadata">Basics of test metadata</a>).  If it has a directory component (as in e.g.,
<samp><span class="file">sub/foo.log</span></samp>), the test harness will ensure that such directory
exists <em>before</em> the test driver is called. 
<br><dt><samp><span class="option">--trs-file=</span><samp><var>PATH</var><span class="file">.trs</span></samp></samp><dd>The <samp><span class="file">.trs</span></samp> file the test driver must create (see <a href="#Basics-of-test-metadata">Basics of test metadata</a>).  If it has a directory component (as in e.g.,
<samp><span class="file">sub/foo.trs</span></samp>), the test harness will ensure that such directory
exists <em>before</em> the test driver is called. 
<br><dt><samp><span class="option">--color-tests={yes|no}</span></samp><dd>Whether the console output should be colorized or not (see <a href="#Simple-tests-and-color_002dtests">Simple tests and color-tests</a>, to learn when this option gets activated and
when it doesn't). 
<br><dt><samp><span class="option">--expect-failure={yes|no}</span></samp><dd>Whether the tested program is expected to fail. 
<br><dt><samp><span class="option">--enable-hard-errors={yes|no}</span></samp><dd>Whether &ldquo;hard errors&rdquo; in the tested program should be treated differently
from normal failures or not (the default should be <code>yes</code>).  The exact
meaning of &ldquo;hard error&rdquo; is highly dependent from the test protocols or
conventions in use. 
<br><dt><samp><span class="option">--</span></samp><dd>Explicitly terminate the list of options. 
</dl>

<p class="noindent">The first non-option argument passed to the test driver is the program to
be run, and all the following ones are command-line options and arguments
for this program.

   <p>Note that the exact semantics attached to the <samp><span class="option">--color-tests</span></samp>,
<samp><span class="option">--expect-failure</span></samp> and <samp><span class="option">--enable-hard-errors</span></samp> options are
left up to the individual test drivers.  Still, having a behaviour
compatible or at least similar to that provided by the default
<samp><span class="option">parallel-tests</span></samp> driver is advised, as that would offer a better
consistency and a more pleasant user experience.

<div class="node">
<a name="Log-files-generation-and-test-results-recording"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Testsuite-progress-output">Testsuite progress output</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Command_002dline-arguments-for-test-drivers">Command-line arguments for test drivers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#API-for-Custom-Test-Drivers">API for Custom Test Drivers</a>

</div>

<h5 class="subsubsection">15.3.3.2 Log files generation and test results recording</h5>

<p>The test driver must correctly generate the files specified by the
<samp><span class="option">--log-file</span></samp> and <samp><span class="option">--trs-file</span></samp> option (even when the tested
program fails or crashes).

   <p>The <samp><span class="file">.log</span></samp> file should ideally contain all the output produced by the
tested program, plus optionally other information that might facilitate
debugging or analysis of bug reports.  Apart from that, its format is
basically free.

   <p>The <samp><span class="file">.trs</span></samp> file is used to register some metadata through the use
of custom reStructuredText fields.  This metadata is expected to be
employed in various ways by the parallel test harness; for example, to
count the test results when printing the testsuite summary, or to decide
which tests to re-run upon <samp><span class="command">make reheck</span></samp>.  Unrecognized metadata
in a <samp><span class="file">.trs</span></samp> file is currently ignored by the harness, but this might
change in the future. The list of currently recognized metadata follows.

     <dl>
<dt><code>:test-result:</code><dd><a name="index-Register-test-result-884"></a><a name="index-Register-test-case-result-885"></a><a name="index-Test-result_002c-registering-886"></a><a name="index-Test-case-result_002c-registering-887"></a><a name="index-g_t_0040code_007b_003atest_002dresult_003a_007d-888"></a><a name="index-reStructuredText-field_002c-_0040code_007b_003atest_002dresult_003a_007d-889"></a>The test driver must use this field to register the results of <em>each</em>
test case run by a test script file.  Several <code>:test-result:</code> fields
can be present in the same <samp><span class="file">.trs</span></samp> file; this is done in order to
support test protocols that allow a single test script to run more test
cases.

     <!-- Keep this in sync with lib/am/check-am:$(TEST_SUITE_LOG). -->
     <p>The only recognized test results are currently <code>PASS</code>, <code>XFAIL</code>,
<code>SKIP</code>, <code>FAIL</code>, <code>XPASS</code> and <code>ERROR</code>.  These results,
when declared with <code>:test-result:</code>, can be optionally followed by
text holding the name and/or a brief description of the corresponding
test; the <samp><span class="option">parallel-tests</span></samp> harness will ignore such extra text when
generating <samp><span class="file">test-suite.log</span></samp> and preparing the testsuite summary.

     <!-- Keep in sync with 'test-metadata-recheck.sh'. -->
     <br><dt><code>:recheck:</code><dd><a name="index-g_t_003arecheck_003a-890"></a><a name="index-reStructuredText-field_002c-_0040code_007b_003arecheck_003a_007d-891"></a>If this field is present and defined to <code>no</code>, then the corresponding
test script will <em>not</em> be run upon a <samp><span class="command">make recheck</span></samp>.  What
happens when two or more <code>:recheck:</code> fields are present in the same
<samp><span class="file">.trs</span></samp> file is undefined behaviour.

     <!-- Keep in sync with 'test-metadata-global-log.sh'. -->
     <br><dt><code>:copy-in-global-log:</code><dd><a name="index-g_t_003acopy_002din_002dglobal_002dlog_003a-892"></a><a name="index-reStructuredText-field_002c-_0040code_007b_003acopy_002din_002dglobal_002dlog_003a_007d-893"></a>If this field is present and defined to <code>no</code>, then the content
of the <samp><span class="file">.log</span></samp> file will <em>not</em> be copied into the global
<samp><span class="file">test-suite.log</span></samp>.  We allow to forsake such copying because, while
it can be useful in debugging and analysis of bug report, it can also be
just a waste of space in normal situations, e.g., when a test script is
successful.  What happens when two or more <code>:copy-in-global-log:</code>
fields are present in the same <samp><span class="file">.trs</span></samp> file is undefined behaviour.

     <!-- Keep in sync with 'test-metadata-global-result.sh'. -->
     <br><dt><code>:test-global-result:</code><dd><a name="index-g_t_003atest_002dglobal_002dresult_003a-894"></a><a name="index-reStructuredText-field_002c-_0040code_007b_003atest_002dglobal_002dresult_003a_007d-895"></a>This is used to declare the "global result" of the script.  Currently,
the value of this field is needed only to be reported (more or less
verbatim) in the generated global log file <code>$(TEST_SUITE_LOG)</code>,
so it's quite free-form.  For example, a test script which run 10 test
cases, 6 of which pass and 4 of which are skipped, could reasonably have
a <code>PASS/SKIP</code> value for this field, while a test script which run
19 successful tests and one failed test could have an <code>ALMOST
PASSED</code> value.  What happens when two or more <code>:test-global-result:</code>
fields are present in the same <samp><span class="file">.trs</span></samp> file is undefined behaviour. 
</dl>

<p class="noindent">Let's see a small example.  Assume a <samp><span class="file">.trs</span></samp> file contains the
following lines:

<pre class="example">     :test-result: PASS server starts
     :global-log-copy: no
     :test-result: PASS HTTP/1.1 request
     :test-result: FAIL HTTP/1.0 request
     :recheck: yes
     :test-result: SKIP HTTPS request (TLS library wasn't available)
     :test-result: PASS server stops
</pre>
   <p class="noindent">Then the corresponding test script will be re-run by <samp><span class="command">make check</span></samp>,
will contribute with <em>five</em> test results to the testsuite summary
(three of these tests being successful, one failed, and one skipped), and
the content of the corresponding <samp><span class="file">.log</span></samp> file will <em>not</em> be
copied in the global log file <samp><span class="file">test-suite.log</span></samp>.

<div class="node">
<a name="Testsuite-progress-output"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#API-for-Custom-Test-Drivers">API for Custom Test Drivers</a>

</div>

<h5 class="subsubsection">15.3.3.3 Testsuite progress output</h5>

<p>A custom test driver also has the task of displaying, on the standard
output, the test results as soon as they become available.  Depending on
the protocol in use, it can also display the reasons for failures and
skips, and, more generally, any useful diagnostic output (but remember
that each line on the screen is precious, so that cluttering the screen
with overly verbose information is bad idea).  The exact format of this
progress output is left up to the test driver; in fact, a custom test
driver might <em>theoretically</em> even decide not to do any such report,
leaving it all to the testsuite summary (that would be a very lousy idea,
of course, and serves only to illustrate the flexibility that is
granted here).

   <p>Remember that consistency is good; so, if possible, try to be consistent
with the output of the built-in Automake test drivers, providing a similar
&ldquo;look &amp; feel&rdquo;.  In particular, the testsuite progress output should be
colorized when the <samp><span class="option">--color-tests</span></samp> is passed to the driver.  On the
other end, if you are using a known and widespread test protocol with
well-established implementations, being consistent with those
implementations' output might be a good idea too.

<!-- TODO: Give an example, maybe inspired to py.test-style output. -->
<!-- TODO: That is a good idea because it shows a test driver that allows -->
<!-- TODO: for different levels of verbosity in the progress output (could -->
<!-- TODO: be implemented either using a driver cmdline flag, or an -->
<!-- TODO: environment variable, or both). -->
<div class="node">
<a name="Using-the-TAP-test-protocol"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#DejaGnu-Tests">DejaGnu Tests</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Custom-Test-Drivers">Custom Test Drivers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Tests">Tests</a>

</div>

<h3 class="section">15.4 Using the TAP test protocol</h3>

<ul class="menu">
<li><a accesskey="1" href="#Introduction-to-TAP">Introduction to TAP</a>
<li><a accesskey="2" href="#Use-TAP-with-the-Automake-test-harness">Use TAP with the Automake test harness</a>
<li><a accesskey="3" href="#Incompatibilities-with-other-TAP-parsers-and-drivers">Incompatibilities with other TAP parsers and drivers</a>
<li><a accesskey="4" href="#Links-and-external-resources-on-TAP">Links and external resources on TAP</a>
</ul>

<div class="node">
<a name="Introduction-to-TAP"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Use-TAP-with-the-Automake-test-harness">Use TAP with the Automake test harness</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-the-TAP-test-protocol">Using the TAP test protocol</a>

</div>

<h4 class="subsection">15.4.1 Introduction to TAP</h4>

<p>TAP, the Test Anything Protocol, is a simple text-based interface between
testing modules or programs and a test harness.  The tests (also called
&ldquo;TAP producers&rdquo; in this context) write test results in a simple format
on standard output; a test harness (also called &ldquo;TAP consumer&rdquo;) will
parse and interpret these results, and properly present them to the user,
and/or register them for later analysis.  The exact details of how this
is accomplished can vary among different test harnesses.  The Automake
parallel harness will present the results on the console in the usual
fashion (see <a href="#Testsuite-progress-on-console">Testsuite progress on console</a>), and will use the
<samp><span class="file">.trs</span></samp> files (see <a href="#Basics-of-test-metadata">Basics of test metadata</a>) to store the test
results and related metadata.  Apart from that, it will try to remain
as much compatible as possible with pre-existing and widespread utilities,
such as the <a href="http://search.cpan.org/~andya/Test-Harness/bin/prove"><samp><span class="command">prove</span></samp> utility</a>, at least for the simpler usages.

   <p>TAP started its life as part of the test harness for Perl, but today
it has been (mostly) standardized, and has various independent
implementations in different languages; among them, C, C++, Perl,
Python, PHP, and Java.  For a semi-official specification of the
TAP protocol, please refer to the documentation of
<a href="http://search.cpan.org/~petdance/Test-Harness/lib/Test/Harness/TAP.pod">&lsquo;<samp><span class="samp">Test::Harness::TAP</span></samp>&rsquo;</a>.

   <p>The most relevant real-world usages of TAP are obviously in the testsuites
of <samp><span class="command">perl</span></samp> and of many perl modules.  Still, also other important
third-party packages, such as <a href="http://git-scm.com/"><samp><span class="command">git</span></samp></a>,
use TAP in their testsuite.

<div class="node">
<a name="Use-TAP-with-the-Automake-test-harness"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Incompatibilities-with-other-TAP-parsers-and-drivers">Incompatibilities with other TAP parsers and drivers</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Introduction-to-TAP">Introduction to TAP</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-the-TAP-test-protocol">Using the TAP test protocol</a>

</div>

<h4 class="subsection">15.4.2 Use TAP with the Automake test harness</h4>

<p>Currently, the TAP driver that comes with Automake requires some by-hand
steps on the developer's part (this situation should hopefully be improved
in future Automake versions).  You'll have to grab the <samp><span class="file">tap-driver.sh</span></samp>
script from the Automake distribution by hand, copy it in your source tree,
add a call to <code>AC_PROG_AWK</code> in <samp><span class="file">configure.ac</span></samp> to search for a
proper awk program, and use the Automake support for third-party test
drivers to instruct the harness to use the <samp><span class="file">tap-driver.sh</span></samp> script
and that awk program to run your TAP-producing tests.  See the example
below for clarification.

   <p>Apart from the options common to all the Automake test drivers
(see <a href="#Command_002dline-arguments-for-test-drivers">Command-line arguments for test drivers</a>), the <samp><span class="file">tap-driver.sh</span></samp>
supports the following options, whose names are chosen for enhanced
compatibility with the <samp><span class="command">prove</span></samp> utility.

     <dl>
<!-- Keep in sync with 'tap-exit.sh' and 'tap-signal.tap'. -->
<dt><samp><span class="option">--ignore-exit</span></samp><dd>Causes the test driver to ignore the exit status of the test scripts;
by default, the driver will report an error if the script exits with a
non-zero status.  This option has effect also on non-zero exit statuses
due to termination by a signal. 
<br><dt><samp><span class="option">--comments</span></samp><dd>Instruct the test driver to display TAP diagnostic (i.e., lines beginning
with the &lsquo;<samp><span class="samp">#</span></samp>&rsquo; character) in the testsuite progress output too; by
default, TAP diagnostic is only copied to the <samp><span class="file">.log</span></samp> file. 
<br><dt><samp><span class="option">--no-comments</span></samp><dd>Revert the effects of <samp><span class="option">--comments</span></samp>. 
<br><dt><samp><span class="option">--merge</span></samp><dd>Instruct the test driver to merge the test scripts' standard error into
their standard output.  This is necessary if you want to ensure that
diagnostics from the test scripts are displayed in the correct order
relative to test results; this can be of great help in debugging
(especially if your test scripts are shell scripts run with shell
tracing active).  As a downside, this option might cause the test
harness to get confused if anything that appears on standard error
looks like a test result. 
<br><dt><samp><span class="option">--no-merge</span></samp><dd>Revert the effects of <samp><span class="option">--merge</span></samp>. 
<br><dt><samp><span class="option">--diagnostic-string=</span><var>STRING</var></samp><dd>Change the string that introduces TAP diagnostic from the default value
of &ldquo;<code>#</code>&rdquo; to <var>STRING</var>.  This can be useful if your
TAP-based test scripts produce verbose output on which they have limited
control (because, say, the output comes from other tools invoked in the
scripts), and it might contain text that gets spuriously interpreted as
TAP diagnostic: such an issue can be solved by redefining the string that
activates TAP diagnostic to a value you know won't appear by chance in
the tests' output.  Note however that this feature is non-standard, as
the &ldquo;official&rdquo; TAP protocol does not allow for such a customization; so
don't use it if you can avoid it. 
</dl>

<p class="noindent">Here is an example of how the TAP driver can be set up and used.

<!-- Keep in sync with tap-doc2.sh -->
<pre class="example">     % <kbd>cat configure.ac</kbd>
     AC_INIT([GNU Try Tap], [1.0], [bug-automake@gnu.org])
     AC_CONFIG_AUX_DIR([build-aux])
     AM_INIT_AUTOMAKE([foreign parallel-tests -Wall -Werror])
     AC_CONFIG_FILES([Makefile])
     AC_REQUIRE_AUX_FILE([tap-driver.sh])
     AC_PROG_AWK
     AC_OUTPUT
     
     % <kbd>cat Makefile.am</kbd>
     TEST_LOG_DRIVER = env AM_TAP_AWK='$(AWK)' $(SHELL) \
                       $(top_srcdir)/build-aux/tap-driver.sh
     TESTS = foo.test bar.test baz.test
     EXTRA_DIST = $(TESTS)
     
     % <kbd>cat foo.test</kbd>
     #!/bin/sh
     echo 1..4 # Number of tests to be executed.
     echo 'ok 1 - Swallows fly'
     echo 'not ok 2 - Caterpillars fly # TODO metamorphosis in progress'
     echo 'ok 3 - Pigs fly # SKIP not enough acid'
     echo '# I just love word plays ...'
     echo 'ok 4 - Flies fly too :-)'
     
     % <kbd>cat bar.test</kbd>
     #!/bin/sh
     echo 1..3
     echo 'not ok 1 - Bummer, this test has failed.'
     echo 'ok 2 - This passed though.'
     echo 'Bail out! Ennui kicking in, sorry...'
     echo 'ok 3 - This will not be seen.'
     
     % <kbd>cat baz.test</kbd>
     #!/bin/sh
     echo 1..1
     echo ok 1
     # Exit with error, even if all the tests have been successful.
     exit 7
     
     % <kbd>cp </kbd><var>PREFIX</var><kbd>/share/automake-</kbd><var>APIVERSION</var><kbd>/tap-driver.pl .</kbd>
     % <kbd>autoreconf -vi &amp;&amp; ./configure &amp;&amp; make check</kbd>
     ...
     PASS: foo.test 1 - Swallows fly
     XFAIL: foo.test 2 - Caterpillars fly # TODO metamorphosis in progress
     SKIP: foo.test 3 - Pigs fly # SKIP not enough acid
     PASS: foo.test 4 - Flies fly too :-)
     FAIL: bar.test 1 - Bummer, this test has failed.
     PASS: bar.test 2 - This passed though.
     ERROR: bar.test - Bail out! Ennui kicking in, sorry...
     PASS: baz.test 1
     ERROR: baz.test - exited with status 7
     ...
     Please report to bug-automake@gnu.org
     ...
     % <kbd>echo exit status: $?</kbd>
     exit status: 1
     
     <!-- Keep the "skewed" indentation below, it produces pretty PDF output. -->
     % <kbd>env TEST_LOG_DRIVER_FLAGS='--comments --ignore-exit' \
           TESTS='foo.test baz.test' make -e check</kbd>
     ...
     PASS: foo.test 1 - Swallows fly
     XFAIL: foo.test 2 - Caterpillars fly # TODO metamorphosis in progress
     SKIP: foo.test 3 - Pigs fly # SKIP not enough acid
     # foo.test: I just love word plays...
     PASS: foo.test 4 - Flies fly too :-)
     PASS: baz.test 1
     ...
     % <kbd>echo exit status: $?</kbd>
     exit status: 0
</pre>
   <div class="node">
<a name="Incompatibilities-with-other-TAP-parsers-and-drivers"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Links-and-external-resources-on-TAP">Links and external resources on TAP</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Use-TAP-with-the-Automake-test-harness">Use TAP with the Automake test harness</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-the-TAP-test-protocol">Using the TAP test protocol</a>

</div>

<h4 class="subsection">15.4.3 Incompatibilities with other TAP parsers and drivers</h4>

<p>For implementation or historical reasons, the TAP driver and harness as
implemented by Automake have some minors incompatibilities with the
mainstream versions, which you should be aware of.

     <ul>
<li>A <code>Bail out!</code> directive doesn't stop the whole testsuite, but only
the test script it occurs in.  This doesn't follow TAP specifications,
but on the other hand it maximizes compatibility (and code sharing) with
the &ldquo;hard error&rdquo; concept of the default <samp><span class="option">parallel-tests</span></samp> driver. 
<li>The <code>version</code> and <code>pragma</code> directives are not supported. 
<li>The <samp><span class="option">--diagnostic-string</span></samp> option of our driver allows to modify
the string that introduces TAP diagnostic from the default value
of &ldquo;<code>#</code>&rdquo;.  The standard TAP protocol has currently no way to
allow this, so if you use it your diagnostic will be lost to more
compliant tools like <samp><span class="command">prove</span></samp> and <code>Test::Harness</code>
<li>And there are probably some other small and yet undiscovered
incompatibilities, especially in corner cases or with rare usages. 
</ul>

<div class="node">
<a name="Links-and-external-resources-on-TAP"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Incompatibilities-with-other-TAP-parsers-and-drivers">Incompatibilities with other TAP parsers and drivers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-the-TAP-test-protocol">Using the TAP test protocol</a>

</div>

<h4 class="subsection">15.4.4 Links and external resources on TAP</h4>

<p class="noindent">Here are some links to more extensive official or third-party
documentation and resources about the TAP protocol and related
tools and libraries.
     <ul>
<li><a href="http://search.cpan.org/~petdance/Test-Harness/lib/Test/Harness/TAP.pod">&lsquo;<samp><span class="samp">Test::Harness::TAP</span></samp>&rsquo;</a>,
the (mostly) official documentation about the TAP format and protocol. 
<li><a href="http://search.cpan.org/~andya/Test-Harness/bin/prove"><samp><span class="command">prove</span></samp></a>,
the most famous command-line TAP test driver, included in the distribution
of <samp><span class="command">perl</span></samp> and
<a href="http://search.cpan.org/~andya/Test-Harness/lib/Test/Harness.pm">&lsquo;<samp><span class="samp">Test::Harness</span></samp>&rsquo;</a>. 
<li>The <a href="http://testanything.org/wiki/index.php/Main_Page">TAP wiki</a>. 
<li>A &ldquo;gentle introduction&rdquo; to testing for perl coders:
<a href="http://search.cpan.org/dist/Test-Simple/lib/Test/Tutorial.pod">&lsquo;<samp><span class="samp">Test::Tutorial</span></samp>&rsquo;</a>. 
<li><a href="http://search.cpan.org/~mschwern/Test-Simple/lib/Test/Simple.pm">&lsquo;<samp><span class="samp">Test::Simple</span></samp>&rsquo;</a>
and
<a href="http://search.cpan.org/~mschwern/Test-Simple/lib/Test/More.pm">&lsquo;<samp><span class="samp">Test::More</span></samp>&rsquo;</a>,
the standard perl testing libraries, which are based on TAP. 
<li><a href="http://www.eyrie.org/~eagle/software/c-tap-harness/">C TAP Harness</a>,
a C-based project implementing both a TAP producer and a TAP consumer. 
<li><a href="http://www.tap4j.org/">tap4j</a>,
a Java-based project implementing both a TAP producer and a TAP consumer. 
</ul>

<div class="node">
<a name="DejaGnu-Tests"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Install-Tests">Install Tests</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-the-TAP-test-protocol">Using the TAP test protocol</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Tests">Tests</a>

</div>

<h3 class="section">15.5 DejaGnu Tests</h3>

<p>If <a href="ftp://ftp.gnu.org/gnu/dejagnu/"><samp><span class="command">dejagnu</span></samp></a> appears in
<code>AUTOMAKE_OPTIONS</code>, then a <samp><span class="command">dejagnu</span></samp>-based test suite is
assumed.  The variable <code>DEJATOOL</code> is a list of names that are
passed, one at a time, as the <samp><span class="option">--tool</span></samp> argument to
<samp><span class="command">runtest</span></samp> invocations; it defaults to the name of the package.

   <p>The variable <code>RUNTESTDEFAULTFLAGS</code> holds the <samp><span class="option">--tool</span></samp> and
<samp><span class="option">--srcdir</span></samp> flags that are passed to dejagnu by default; this can be
overridden if necessary. 
<a name="index-RUNTESTDEFAULTFLAGS-896"></a>
The variables <code>EXPECT</code> and <code>RUNTEST</code> can
also be overridden to provide project-specific values.  For instance,
you will need to do this if you are testing a compiler toolchain,
because the default values do not take into account host and target
names. 
<a name="index-dejagnu-897"></a><a name="index-DEJATOOL-898"></a><a name="index-EXPECT-899"></a><a name="index-RUNTEST-900"></a>
The contents of the variable <code>RUNTESTFLAGS</code> are passed to the
<code>runtest</code> invocation.  This is considered a &ldquo;user variable&rdquo;
(see <a href="#User-Variables">User Variables</a>).  If you need to set <samp><span class="command">runtest</span></samp> flags in
<samp><span class="file">Makefile.am</span></samp>, you can use <code>AM_RUNTESTFLAGS</code> instead. 
<a name="index-RUNTESTFLAGS-901"></a><a name="index-AM_005fRUNTESTFLAGS-902"></a>
<a name="index-g_t_0040file_007bsite_002eexp_007d-903"></a>Automake will generate rules to create a local <samp><span class="file">site.exp</span></samp> file,
defining various variables detected by <samp><span class="command">configure</span></samp>.  This file
is automatically read by DejaGnu.  It is OK for the user of a package
to edit this file in order to tune the test suite.  However this is
not the place where the test suite author should define new variables:
this should be done elsewhere in the real test suite code. 
Especially, <samp><span class="file">site.exp</span></samp> should not be distributed.

   <p>Still, if the package author has legitimate reasons to extend
<samp><span class="file">site.exp</span></samp> at <samp><span class="command">make</span></samp> time, he can do so by defining
the variable <code>EXTRA_DEJAGNU_SITE_CONFIG</code>; the files listed
there will be considered <samp><span class="file">site.exp</span></samp> prerequisites, and their
content will be appended to it (in the same order in which they
appear in <code>EXTRA_DEJAGNU_SITE_CONFIG</code>).  Note that files are
<em>not</em> distributed by default.

   <p>For more information regarding DejaGnu test suites, see <a href="dejagnu.html#Top">Top</a>.

<div class="node">
<a name="Install-Tests"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#DejaGnu-Tests">DejaGnu Tests</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Tests">Tests</a>

</div>

<h3 class="section">15.6 Install Tests</h3>

<p>The <code>installcheck</code> target is available to the user as a way to
run any tests after the package has been installed.  You can add tests
to this by writing an <code>installcheck-local</code> rule.

<div class="node">
<a name="Rebuilding"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Options">Options</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Tests">Tests</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">16 Rebuilding Makefiles</h2>

<p><a name="index-rebuild-rules-904"></a>
Automake generates rules to automatically rebuild <samp><span class="file">Makefile</span></samp>s,
<samp><span class="file">configure</span></samp>, and other derived files like <samp><span class="file">Makefile.in</span></samp>.

   <p><a name="index-AM_005fMAINTAINER_005fMODE-905"></a>If you are using <code>AM_MAINTAINER_MODE</code> in <samp><span class="file">configure.ac</span></samp>, then
these automatic rebuilding rules are only enabled in maintainer mode.

   <p><a name="index-ACLOCAL_005fAMFLAGS-906"></a>Sometimes you need to run <samp><span class="command">aclocal</span></samp> with an argument like
<samp><span class="option">-I</span></samp> to tell it where to find <samp><span class="file">.m4</span></samp> files.  Since
sometimes <samp><span class="command">make</span></samp> will automatically run <samp><span class="command">aclocal</span></samp>, you
need a way to specify these arguments.  You can do this by defining
<code>ACLOCAL_AMFLAGS</code>; this holds arguments that are passed verbatim
to <samp><span class="command">aclocal</span></samp>.  This variable is only useful in the top-level
<samp><span class="file">Makefile.am</span></samp>.

   <p><a name="index-CONFIG_005fSTATUS_005fDEPENDENCIES-907"></a><a name="index-CONFIGURE_005fDEPENDENCIES-908"></a><a name="index-g_t_0040file_007bversion_002esh_007d_002c-example-909"></a><a name="index-g_t_0040file_007bversion_002em4_007d_002c-example-910"></a>
Sometimes it is convenient to supplement the rebuild rules for
<samp><span class="file">configure</span></samp> or <samp><span class="file">config.status</span></samp> with additional dependencies. 
The variables <code>CONFIGURE_DEPENDENCIES</code> and
<code>CONFIG_STATUS_DEPENDENCIES</code> can be used to list these extra
dependencies.  These variables should be defined in all
<samp><span class="file">Makefile</span></samp>s of the tree (because these two rebuild rules are
output in all them), so it is safer and easier to <code>AC_SUBST</code> them
from <samp><span class="file">configure.ac</span></samp>.  For instance, the following statement will
cause <samp><span class="file">configure</span></samp> to be rerun each time <samp><span class="file">version.sh</span></samp> is
changed.

<pre class="example">     AC_SUBST([CONFIG_STATUS_DEPENDENCIES], ['$(top_srcdir)/version.sh'])
</pre>
   <p class="noindent">Note the &lsquo;<samp><span class="samp">$(top_srcdir)/</span></samp>&rsquo; in the file name.  Since this variable
is to be used in all <samp><span class="file">Makefile</span></samp>s, its value must be sensible at
any level in the build hierarchy.

   <p>Beware not to mistake <code>CONFIGURE_DEPENDENCIES</code> for
<code>CONFIG_STATUS_DEPENDENCIES</code>.

   <p><code>CONFIGURE_DEPENDENCIES</code> adds dependencies to the
<samp><span class="file">configure</span></samp> rule, whose effect is to run <samp><span class="command">autoconf</span></samp>.  This
variable should be seldom used, because <samp><span class="command">automake</span></samp> already tracks
<code>m4_include</code>d files.  However it can be useful when playing
tricky games with <code>m4_esyscmd</code> or similar non-recommendable
macros with side effects.

   <p><code>CONFIG_STATUS_DEPENDENCIES</code> adds dependencies to the
<samp><span class="file">config.status</span></samp> rule, whose effect is to run <samp><span class="file">configure</span></samp>. 
This variable should therefore carry any non-standard source that may
be read as a side effect of running <samp><span class="command">configure</span></samp>, like <samp><span class="file">version.sh</span></samp>
in the example above.

   <p>Speaking of <samp><span class="file">version.sh</span></samp> scripts, we recommend against them
today.  They are mainly used when the version of a package is updated
automatically by a script (e.g., in daily builds).  Here is what some
old-style <samp><span class="file">configure.ac</span></samp>s may look like:

<pre class="example">     AC_INIT
     . $srcdir/version.sh
     AM_INIT_AUTOMAKE([name], $VERSION_NUMBER)
     ...
</pre>
   <p class="noindent">Here, <samp><span class="file">version.sh</span></samp> is a shell fragment that sets
<code>VERSION_NUMBER</code>.  The problem with this example is that
<samp><span class="command">automake</span></samp> cannot track dependencies (listing <samp><span class="file">version.sh</span></samp>
in <samp><span class="command">CONFIG_STATUS_DEPENDENCIES</span></samp>, and distributing this file is up
to the user), and that it uses the obsolete form of <code>AC_INIT</code> and
<code>AM_INIT_AUTOMAKE</code>.  Upgrading to the new syntax is not
straightforward, because shell variables are not allowed in
<code>AC_INIT</code>'s arguments.  We recommend that <samp><span class="file">version.sh</span></samp> be
replaced by an M4 file that is included by <samp><span class="file">configure.ac</span></samp>:

<pre class="example">     m4_include([version.m4])
     AC_INIT([name], VERSION_NUMBER)
     AM_INIT_AUTOMAKE
     ...
</pre>
   <p class="noindent">Here <samp><span class="file">version.m4</span></samp> could contain something like
&lsquo;<samp><span class="samp">m4_define([VERSION_NUMBER], [1.2])</span></samp>&rsquo;.  The advantage of this
second form is that <samp><span class="command">automake</span></samp> will take care of the
dependencies when defining the rebuild rule, and will also distribute
the file automatically.  An inconvenience is that <samp><span class="command">autoconf</span></samp>
will now be rerun each time the version number is bumped, when only
<samp><span class="file">configure</span></samp> had to be rerun in the previous setup.

<div class="node">
<a name="Options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Miscellaneous">Miscellaneous</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Rebuilding">Rebuilding</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">17 Changing Automake's Behavior</h2>

<ul class="menu">
<li><a accesskey="1" href="#Options-generalities">Options generalities</a>:         Semantics of Automake option
<li><a accesskey="2" href="#List-of-Automake-options">List of Automake options</a>:     A comprehensive list of Automake options
</ul>

<div class="node">
<a name="Options-generalities"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#List-of-Automake-options">List of Automake options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Options">Options</a>

</div>

<h3 class="section">17.1 Options generalities</h3>

<p>Various features of Automake can be controlled by options.  Except where
noted otherwise, options can be specified in one of several ways.  Most
options can be applied on a per-<samp><span class="file">Makefile</span></samp> basis when listed in a
special <samp><span class="file">Makefile</span></samp> variable named <code>AUTOMAKE_OPTIONS</code>.  Some
of these options only make sense when specified in the toplevel
<samp><span class="file">Makefile.am</span></samp> file.  Options are applied globally to all processed
<samp><span class="file">Makefile</span></samp> files when listed in the first argument of
<code>AM_INIT_AUTOMAKE</code> in <samp><span class="file">configure.ac</span></samp>, and some options which
require changes to the <samp><span class="command">configure</span></samp> script can only be specified
there.  These are annotated below.

   <p>As a general rule, options specified in <code>AUTOMAKE_OPTIONS</code> take
precedence over those specified in <code>AM_INIT_AUTOMAKE</code>, which in
turn take precedence over those specified on the command line.

   <p>Also, some care must be taken about the interactions among strictness
level and warning categories.  As a general rule, strictness-implied
warnings are overridden by those specified by explicit options.  For
example, even if &lsquo;<samp><span class="samp">portability</span></samp>&rsquo; warnings are disabled by default
in <samp><span class="option">foreign</span></samp> strictness, an usage like this will end up enabling
them:

<pre class="example">     AUTOMAKE_OPTIONS = -Wportability foreign
</pre>
   <p>However, a strictness level specified in a higher-priority context
will override all the explicit warnings specified in a lower-priority
context.  For example, if <samp><span class="file">configure.ac</span></samp> contains:

<pre class="example">     AM_INIT_AUTOMAKE([-Wportability])
</pre>
   <p class="noindent">and <samp><span class="file">Makefile.am</span></samp> contains:

<pre class="example">     AUTOMAKE_OPTIONS = foreign
</pre>
   <p class="noindent">then &lsquo;<samp><span class="samp">portability</span></samp>&rsquo; warnings will be <em>disabled</em> in
<samp><span class="file">Makefile.am</span></samp>.

<div class="node">
<a name="List-of-Automake-options"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Options-generalities">Options generalities</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Options">Options</a>

</div>

<h3 class="section">17.2 List of Automake options</h3>

<p><a name="index-AUTOMAKE_005fOPTIONS-911"></a>
     <dl>
<dt><samp><span class="option">gnits</span></samp><dt><samp><span class="option">gnu</span></samp><dt><samp><span class="option">foreign</span></samp><dt><samp><span class="option">cygnus</span></samp><dd><a name="index-Option_002c-_0040option_007bgnits_007d-912"></a><a name="index-Option_002c-_0040option_007bgnu_007d-913"></a><a name="index-Option_002c-_0040option_007bforeign_007d-914"></a><a name="index-Option_002c-_0040option_007bcygnus_007d-915"></a><a name="index-gnits-916"></a><a name="index-gnu-917"></a><a name="index-foreign-918"></a><a name="index-cygnus-919"></a>
Set the strictness as appropriate.  The <samp><span class="option">gnits</span></samp> option also
implies options <samp><span class="option">readme-alpha</span></samp> and <samp><span class="option">check-news</span></samp>.

     <br><dt><samp><span class="option">check-news</span></samp><dd><a name="index-Option_002c-_0040option_007bcheck_002dnews_007d-920"></a><a name="index-check_002dnews-921"></a>Cause &lsquo;<samp><span class="samp">make dist</span></samp>&rsquo; to fail unless the current version number appears
in the first few lines of the <samp><span class="file">NEWS</span></samp> file.

     <br><dt><samp><span class="option">color-tests</span></samp><dd><a name="index-Option_002c-_0040option_007bcolor_002dtests_007d-922"></a><a name="index-color_002dtests-923"></a>Cause output of the serial and parallel test harnesses (see <a href="#Simple-Tests">Simple Tests</a>) and of properly-written custom test drivers (see <a href="#Custom-Test-Drivers">Custom Test Drivers</a>) to be colorized on capable terminals.

     <br><dt><samp><span class="option">dejagnu</span></samp><dd><a name="index-Option_002c-_0040option_007bdejagnu_007d-924"></a><a name="index-dejagnu-925"></a>Cause <samp><span class="command">dejagnu</span></samp>-specific rules to be generated.  See <a href="#DejaGnu-Tests">DejaGnu Tests</a>.

     <br><dt><samp><span class="option">dist-bzip2</span></samp><dd><a name="index-Option_002c-_0040option_007bdist_002dbzip2_007d-926"></a><a name="index-dist_002dbzip2-927"></a>Hook <code>dist-bzip2</code> to <code>dist</code>. 
<a name="index-dist_002dbzip2-928"></a>
<br><dt><samp><span class="option">dist-lzip</span></samp><dd><a name="index-Option_002c-_0040option_007bdist_002dlzip_007d-929"></a><a name="index-dist_002dlzip-930"></a>Hook <code>dist-lzip</code> to <code>dist</code>. 
<a name="index-dist_002dlzip-931"></a>
<br><dt><samp><span class="option">dist-shar</span></samp><dd><a name="index-Option_002c-_0040option_007bdist_002dshar_007d-932"></a><a name="index-dist_002dshar-933"></a>Hook <code>dist-shar</code> to <code>dist</code>. 
<a name="index-dist_002dshar-934"></a>
<br><dt><samp><span class="option">dist-zip</span></samp><dd><a name="index-Option_002c-_0040option_007bdist_002dzip_007d-935"></a><a name="index-dist_002dzip-936"></a>Hook <code>dist-zip</code> to <code>dist</code>. 
<a name="index-dist_002dzip-937"></a>
<br><dt><samp><span class="option">dist-tarZ</span></samp><dd><a name="index-Option_002c-_0040option_007bdist_002dtarZ_007d-938"></a><a name="index-dist_002dtarZ-939"></a>Hook <code>dist-tarZ</code> to <code>dist</code>. 
<a name="index-dist_002dtarZ-940"></a>
<br><dt><samp><span class="option">filename-length-max=99</span></samp><dd><a name="index-Option_002c-_0040option_007bfilename_002dlength_002dmax_003d99_007d-941"></a><a name="index-filename_002dlength_002dmax_003d99-942"></a>Abort if file names longer than 99 characters are found during
&lsquo;<samp><span class="samp">make dist</span></samp>&rsquo;.  Such long file names are generally considered not to
be portable in tarballs.  See the <samp><span class="option">tar-v7</span></samp> and <samp><span class="option">tar-ustar</span></samp>
options below.  This option should be used in the top-level
<samp><span class="file">Makefile.am</span></samp> or as an argument of <code>AM_INIT_AUTOMAKE</code> in
<samp><span class="file">configure.ac</span></samp>, it will be ignored otherwise.  It will also be
ignored in sub-packages of nested packages (see <a href="#Subpackages">Subpackages</a>).

     <br><dt><samp><span class="option">no-define</span></samp><dd><a name="index-Option_002c-_0040option_007bno_002ddefine_007d-943"></a><a name="index-no_002ddefine-944"></a>This option is meaningful only when passed as an argument to
<code>AM_INIT_AUTOMAKE</code>.  It will prevent the <code>PACKAGE</code> and
<code>VERSION</code> variables from being <code>AC_DEFINE</code>d.

     <br><dt><samp><span class="option">no-dependencies</span></samp><dd><a name="index-Option_002c-_0040option_007bno_002ddependencies_007d-945"></a><a name="index-no_002ddependencies-946"></a>This is similar to using <samp><span class="option">--ignore-deps</span></samp> on the command line,
but is useful for those situations where you don't have the necessary
bits to make automatic dependency tracking work
(see <a href="#Dependencies">Dependencies</a>).  In this case the effect is to effectively
disable automatic dependency tracking.

     <br><dt><samp><span class="option">no-dist</span></samp><dd><a name="index-Option_002c-_0040option_007bno_002ddist_007d-947"></a><a name="index-no_002ddist-948"></a>Don't emit any code related to <code>dist</code> target.  This is useful
when a package has its own method for making distributions.

     <br><dt><samp><span class="option">no-dist-gzip</span></samp><dd><a name="index-Option_002c-_0040option_007bno_002ddist_002dgzip_007d-949"></a><a name="index-no_002ddist_002dgzip-950"></a>Do not hook <code>dist-gzip</code> to <code>dist</code>. 
<a name="index-no_002ddist_002dgzip-951"></a>
<br><dt><samp><span class="option">no-exeext</span></samp><dd><a name="index-Option_002c-_0040option_007bno_002dexeext_007d-952"></a><a name="index-no_002dexeext-953"></a>If your <samp><span class="file">Makefile.am</span></samp> defines a rule for target <code>foo</code>, it
will override a rule for a target named &lsquo;<samp><span class="samp">foo$(EXEEXT)</span></samp>&rsquo;.  This is
necessary when <code>EXEEXT</code> is found to be empty.  However, by
default <samp><span class="command">automake</span></samp> will generate an error for this use.  The
<samp><span class="option">no-exeext</span></samp> option will disable this error.  This is intended for
use only where it is known in advance that the package will not be
ported to Windows, or any other operating system using extensions on
executables.

     <br><dt><samp><span class="option">no-installinfo</span></samp><dd><a name="index-Option_002c-_0040option_007bno_002dinstallinfo_007d-954"></a><a name="index-no_002dinstallinfo-955"></a>The generated <samp><span class="file">Makefile.in</span></samp> will not cause info pages to be built
or installed by default.  However, <code>info</code> and <code>install-info</code>
targets will still be available.  This option is disallowed at
<samp><span class="option">gnu</span></samp> strictness and above. 
<a name="index-info-956"></a><a name="index-install_002dinfo-957"></a>
<br><dt><samp><span class="option">no-installman</span></samp><dd><a name="index-Option_002c-_0040option_007bno_002dinstallman_007d-958"></a><a name="index-no_002dinstallman-959"></a>The generated <samp><span class="file">Makefile.in</span></samp> will not cause man pages to be
installed by default.  However, an <code>install-man</code> target will still
be available for optional installation.  This option is disallowed at
<samp><span class="option">gnu</span></samp> strictness and above. 
<a name="index-install_002dman-960"></a>
<br><dt><samp><span class="option">nostdinc</span></samp><dd><a name="index-Option_002c-_0040option_007bnostdinc_007d-961"></a><a name="index-nostdinc-962"></a>This option can be used to disable the standard <samp><span class="option">-I</span></samp> options that
are ordinarily automatically provided by Automake.

     <br><dt><samp><span class="option">no-texinfo.tex</span></samp><dd><a name="index-Option_002c-_0040option_007bno_002dtexinfo_002etex_007d-963"></a><a name="index-no_002dtexinfo_002etex-964"></a>Don't require <samp><span class="file">texinfo.tex</span></samp>, even if there are texinfo files in
this directory.

     <br><dt><samp><span class="option">parallel-tests</span></samp><dd><a name="index-Option_002c-_0040option_007bparallel_002dtests_007d-965"></a><a name="index-parallel_002dtests-966"></a>Enable test suite harness for <code>TESTS</code> that can run tests in parallel
(see <a href="#Parallel-Test-Harness">Parallel Test Harness</a>, for more information).

     <br><dt><samp><span class="option">serial-tests</span></samp><dd><a name="index-Option_002c-_0040option_007bserial_002dtests_007d-967"></a><a name="index-serial_002dtests-968"></a>Enable the older serial test suite harness for <code>TESTS</code> (see <a href="#Serial-Test-Harness">Serial Test Harness</a>, for more information).  This is still the default for the
moment.

     <br><dt><samp><span class="option">readme-alpha</span></samp><dd><a name="index-Option_002c-_0040option_007breadme_002dalpha_007d-969"></a><a name="index-readme_002dalpha-970"></a>If this release is an alpha release, and the file <samp><span class="file">README-alpha</span></samp>
exists, then it will be added to the distribution.  If this option is
given, version numbers are expected to follow one of two forms.  The
first form is &lsquo;<samp><var>major</var><span class="samp">.</span><var>minor</var><span class="samp">.</span><var>alpha</var></samp>&rsquo;, where each
element is a number; the final period and number should be left off for
non-alpha releases.  The second form is
&lsquo;<samp><var>major</var><span class="samp">.</span><var>minor</var><var>alpha</var></samp>&rsquo;, where <var>alpha</var> is a
letter; it should be omitted for non-alpha releases.

     <br><dt><samp><span class="option">silent-rules</span></samp><dd><a name="index-Option_002c-_0040option_007bsilent_002drules_007d-971"></a><a name="index-silent_002drules-972"></a>Enable less verbose build rules.  This can be used to let build rules
output status lines of the form:
     <pre class="example">          GEN <var>output-file</var>
           CC <var>object-file</var>
</pre>
     <p class="noindent">instead of printing the command that will be executed to update
<var>output-file</var> or to compile <var>object-file</var>.  It can also
silence <samp><span class="command">libtool</span></samp> output.

     <p>For more information about how to use, enable, or disable silent
rules, see <a href="#Automake-silent_002drules-Option">Automake silent-rules Option</a>.

     <br><dt><samp><span class="option">std-options</span></samp><dd><a name="index-Options_002c-_0040option_007bstd_002doptions_007d-973"></a><a name="index-g_t_0040samp_007bmake-installcheck_007d_002c-testing-_0040option_007b_002d_002dhelp_007d-and-_0040option_007b_002d_002dversion_007d-974"></a><a name="index-g_t_0040option_007b_002d_002dhelp_007d-check-975"></a><a name="index-g_t_0040option_007b_002d_002dversion_007d-check-976"></a><a name="index-std_002doptions-977"></a>
Make the <code>installcheck</code> rule check that installed scripts and
programs support the <samp><span class="option">--help</span></samp> and <samp><span class="option">--version</span></samp> options. 
This also provides a basic check that the program's
run-time dependencies are satisfied after installation.

     <p><a name="index-AM_005fINSTALLCHECK_005fSTD_005fOPTIONS_005fEXEMPT-978"></a>In a few situations, programs (or scripts) have to be exempted from this
test.  For instance, <samp><span class="command">false</span></samp> (from GNU coreutils) is never
successful, even for <samp><span class="option">--help</span></samp> or <samp><span class="option">--version</span></samp>.  You can list
such programs in the variable <code>AM_INSTALLCHECK_STD_OPTIONS_EXEMPT</code>. 
Programs (not scripts) listed in this variable should be suffixed by
&lsquo;<samp><span class="samp">$(EXEEXT)</span></samp>&rsquo; for the sake of Windows or OS/2.  For instance, suppose we
build <samp><span class="file">false</span></samp> as a program but <samp><span class="file">true.sh</span></samp> as a script, and that
neither of them support <samp><span class="option">--help</span></samp> or <samp><span class="option">--version</span></samp>:

     <pre class="example">          AUTOMAKE_OPTIONS = std-options
          bin_PROGRAMS = false ...
          bin_SCRIPTS = true.sh ...
          AM_INSTALLCHECK_STD_OPTIONS_EXEMPT = false$(EXEEXT) true.sh
</pre>
     <br><dt><samp><span class="option">subdir-objects</span></samp><dd><a name="index-Options_002c-_0040option_007bsubdir_002dobjects_007d-979"></a><a name="index-subdir_002dobjects-980"></a>If this option is specified, then objects are placed into the
subdirectory of the build directory corresponding to the subdirectory of
the source file.  For instance, if the source file is
<samp><span class="file">subdir/file.cxx</span></samp>, then the output file would be
<samp><span class="file">subdir/file.o</span></samp>.

     <p>In order to use this option with C sources, you should add
<code>AM_PROG_CC_C_O</code> to <samp><span class="file">configure.ac</span></samp>.

     <p><a name="tar_002dformats"></a><br><dt><samp><span class="option">tar-v7</span></samp><dt><samp><span class="option">tar-ustar</span></samp><dt><samp><span class="option">tar-pax</span></samp><dd><a name="index-Option_002c-_0040option_007btar_002dv7_007d-981"></a><a name="index-Option_002c-_0040option_007btar_002dustar_007d-982"></a><a name="index-Option_002c-_0040option_007btar_002dpax_007d-983"></a><a name="index-g_t_0040command_007btar_007d-formats-984"></a><a name="index-v7-_0040command_007btar_007d-format-985"></a><a name="index-ustar-format-986"></a><a name="index-pax-format-987"></a><a name="index-tar_002dv7-988"></a><a name="index-tar_002dustar-989"></a><a name="index-tar_002dpax-990"></a>
These three mutually exclusive options select the tar format to use
when generating tarballs with &lsquo;<samp><span class="samp">make dist</span></samp>&rsquo;.  (The tar file created
is then compressed according to the set of <samp><span class="option">no-dist-gzip</span></samp>,
<samp><span class="option">dist-bzip2</span></samp>, <samp><span class="option">dist-lzip</span></samp>, <samp><span class="option">dist-xz</span></samp> and
<samp><span class="option">dist-tarZ</span></samp> options in use.)

     <p>These options must be passed as arguments to <code>AM_INIT_AUTOMAKE</code>
(see <a href="#Macros">Macros</a>) because they can require additional configure checks. 
Automake will complain if it sees such options in an
<code>AUTOMAKE_OPTIONS</code> variable.

     <p><samp><span class="option">tar-v7</span></samp> selects the old V7 tar format.  This is the historical
default.  This antiquated format is understood by all tar
implementations and supports file names with up to 99 characters.  When
given longer file names some tar implementations will diagnose the
problem while other will generate broken tarballs or use non-portable
extensions.  Furthermore, the V7 format cannot store empty
directories.  When using this format, consider using the
<samp><span class="option">filename-length-max=99</span></samp> option to catch file names too long.

     <p><samp><span class="option">tar-ustar</span></samp> selects the ustar format defined by POSIX
1003.1-1988.  This format is believed to be old enough to be portable. 
It fully supports empty directories.  It can store file names with up
to 256 characters, provided that the file name can be split at
directory separator in two parts, first of them being at most 155
bytes long.  So, in most cases the maximum file name length will be
shorter than 256 characters.  However you may run against broken tar
implementations that incorrectly handle file names longer than 99
characters (please report them to <a href="mailto:bug-automake@gnu.org">bug-automake@gnu.org</a> so we
can document this accurately).

     <p><samp><span class="option">tar-pax</span></samp> selects the new pax interchange format defined by POSIX
1003.1-2001.  It does not limit the length of file names.  However,
this format is very young and should probably be restricted to
packages that target only very modern platforms.  There are moves to
change the pax format in an upward-compatible way, so this option may
refer to a more recent version in the future.

     <p>See <a href="tar.html#Formats">Controlling the Archive Format</a>, for
further discussion about tar formats.

     <p><samp><span class="command">configure</span></samp> knows several ways to construct these formats.  It
will not abort if it cannot find a tool up to the task (so that the
package can still be built), but &lsquo;<samp><span class="samp">make dist</span></samp>&rsquo; will fail.

     <br><dt><var>version</var><dd><a name="index-Option_002c-_0040var_007bversion_007d-991"></a>A version number (e.g., &lsquo;<samp><span class="samp">0.30</span></samp>&rsquo;) can be specified.  If Automake is not
newer than the version specified, creation of the <samp><span class="file">Makefile.in</span></samp>
will be suppressed.

     <br><dt><samp><span class="option">-W</span><var>category</var></samp> or <samp><span class="option">--warnings=</span><var>category</var></samp><dd><a name="index-Option_002c-warnings-992"></a><a name="index-Option_002c-_0040option_007b_002dW_0040var_007bcategory_007d_007d-993"></a><a name="index-Option_002c-_0040option_007b_002d_002dwarnings_003d_0040var_007bcategory_007d_007d-994"></a>These options behave exactly like their command-line counterpart
(see <a href="#automake-Invocation">automake Invocation</a>).  This allows you to enable or disable some
warning categories on a per-file basis.  You can also setup some warnings
for your entire project; for instance, try &lsquo;<samp><span class="samp">AM_INIT_AUTOMAKE([-Wall])</span></samp>&rsquo;
in your <samp><span class="file">configure.ac</span></samp>.

   </dl>

   <p>Unrecognized options are diagnosed by <samp><span class="command">automake</span></samp>.

   <p>If you want an option to apply to all the files in the tree, you can use
the <code>AM_INIT_AUTOMAKE</code> macro in <samp><span class="file">configure.ac</span></samp>. 
See <a href="#Macros">Macros</a>.

<div class="node">
<a name="Miscellaneous"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Include">Include</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Options">Options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">18 Miscellaneous Rules</h2>

<p>There are a few rules and variables that didn't fit anywhere else.

<ul class="menu">
<li><a accesskey="1" href="#Tags">Tags</a>:                         Interfacing to cscope, etags and mkid
<li><a accesskey="2" href="#Suffixes">Suffixes</a>:                     Handling new file extensions
</ul>

<div class="node">
<a name="Tags"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Suffixes">Suffixes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Miscellaneous">Miscellaneous</a>

</div>

<h3 class="section">18.1 Interfacing to <samp><span class="command">etags</span></samp></h3>

<p><a name="index-g_t_0040file_007bTAGS_007d-support-995"></a>
Automake will generate rules to generate <samp><span class="file">TAGS</span></samp> files for use with
GNU Emacs under some circumstances.

   <p><a name="index-tags-996"></a>If any C, C++ or Fortran 77 source code or headers are present, then
<code>tags</code> and <code>TAGS</code> rules will be generated for the directory. 
All files listed using the <code>_SOURCES</code>, <code>_HEADERS</code>, and
<code>_LISP</code> primaries will be used to generate tags.  Note that
generated source files that are not distributed must be declared in
variables like <code>nodist_noinst_HEADERS</code> or
<code>nodist_</code><var>prog</var><code>_SOURCES</code> or they will be ignored.

   <p>A <code>tags</code> rule will be output at the topmost directory of a
multi-directory package.  When run from this topmost directory,
&lsquo;<samp><span class="samp">make tags</span></samp>&rsquo; will generate a <samp><span class="file">TAGS</span></samp> file that includes by
reference all <samp><span class="file">TAGS</span></samp> files from subdirectories.

   <p>The <code>tags</code> rule will also be generated if the variable
<code>ETAGS_ARGS</code> is defined.  This variable is intended for use in
directories that contain taggable source that <samp><span class="command">etags</span></samp> does
not understand.  The user can use the <code>ETAGSFLAGS</code> to pass
additional flags to <samp><span class="command">etags</span></samp>; <code>AM_ETAGSFLAGS</code> is also
available for use in <samp><span class="file">Makefile.am</span></samp>. 
<a name="index-ETAGS_005fARGS-997"></a><a name="index-ETAGSFLAGS-998"></a><a name="index-AM_005fETAGSFLAGS-999"></a>
Here is how Automake generates tags for its source, and for nodes in its
Texinfo file:

<pre class="example">     ETAGS_ARGS = automake.in --lang=none \
      --regex='/^@node[ \t]+\([^,]+\)/\1/' automake.texi
</pre>
   <p>If you add file names to <code>ETAGS_ARGS</code>, you will probably also
want to define <code>TAGS_DEPENDENCIES</code>.  The contents of this variable
are added directly to the dependencies for the <code>tags</code> rule. 
<a name="index-TAGS_005fDEPENDENCIES-1000"></a>
Automake also generates a <code>ctags</code> rule that can be used to
build <samp><span class="command">vi</span></samp>-style <samp><span class="file">tags</span></samp> files.  The variable <code>CTAGS</code>
is the name of the program to invoke (by default <samp><span class="command">ctags</span></samp>);
<code>CTAGSFLAGS</code> can be used by the user to pass additional flags,
and <code>AM_CTAGSFLAGS</code> can be used by the <samp><span class="file">Makefile.am</span></samp>.

   <p><a name="index-id-1001"></a>Automake will also generate an <code>ID</code> rule that will run
<samp><span class="command">mkid</span></samp> on the source.  This is only supported on a
directory-by-directory basis.

   <p>Similarly, the <code>cscope</code> rule will create a list of all the source
files in the tree and run <samp><span class="command">cscope</span></samp> to build an inverted index
database.  The variable <code>CSCOPE</code> is the name of the program to invoke
(by default <samp><span class="command">cscope</span></samp>); <code>CSCOPEFLAGS</code> and
<code>CSCOPE_ARGS</code> can be used by the user to pass additional flags and
file names respectively, while <code>AM_CSCOPEFLAGS</code> can be used by the
<samp><span class="file">Makefile.am</span></samp>.  Note that, currently, the Automake-provided
<code>cscope</code> support, when used in a VPATH build, might not work well
with non-GNU make implementations (especially with make implementations
performing <a href="autoconf.html#Automatic-Rule-Rewriting">VPATH rewrites</a>).

   <p>Finally, Automake also emits rules to support the
<a href="http://www.gnu.org/software/global/">GNU Global Tags program</a>. 
The <code>GTAGS</code> rule runs Global Tags and puts the
result in the top build directory.  The variable <code>GTAGS_ARGS</code>
holds arguments that are passed to <samp><span class="command">gtags</span></samp>. 
<a name="index-GTAGS_005fARGS-1002"></a>

<div class="node">
<a name="Suffixes"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Tags">Tags</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Miscellaneous">Miscellaneous</a>

</div>

<h3 class="section">18.2 Handling new file extensions</h3>

<p><a name="index-Adding-new-_0040code_007bSUFFIXES_007d-1003"></a><a name="index-g_t_0040code_007bSUFFIXES_007d_002c-adding-1004"></a><a name="index-SUFFIXES-1005"></a>
It is sometimes useful to introduce a new implicit rule to handle a file
type that Automake does not know about.

   <p>For instance, suppose you had a compiler that could compile <samp><span class="file">.foo</span></samp>
files to <samp><span class="file">.o</span></samp> files.  You would simply define a suffix rule for
your language:

<pre class="example">     .foo.o:
             foocc -c -o $@ $&lt;
</pre>
   <p>Then you could directly use a <samp><span class="file">.foo</span></samp> file in a <code>_SOURCES</code>
variable and expect the correct results:

<pre class="example">     bin_PROGRAMS = doit
     doit_SOURCES = doit.foo
</pre>
   <p>This was the simpler and more common case.  In other cases, you will
have to help Automake to figure out which extensions you are defining your
suffix rule for.  This usually happens when your extension does not
start with a dot.  Then, all you have to do is to put a list of new
suffixes in the <code>SUFFIXES</code> variable <strong>before</strong> you define your
implicit rule.

   <p>For instance, the following definition prevents Automake from misinterpreting
the &lsquo;<samp><span class="samp">.idlC.cpp:</span></samp>&rsquo; rule as an attempt to transform <samp><span class="file">.idlC</span></samp> files into
<samp><span class="file">.cpp</span></samp> files.

<!-- Keep in sync with suffix7.sh -->
<pre class="example">     SUFFIXES = .idl C.cpp
     .idlC.cpp:
             # whatever
</pre>
   <p>As you may have noted, the <code>SUFFIXES</code> variable behaves like the
<code>.SUFFIXES</code> special target of <samp><span class="command">make</span></samp>.  You should not touch
<code>.SUFFIXES</code> yourself, but use <code>SUFFIXES</code> instead and let
Automake generate the suffix list for <code>.SUFFIXES</code>.  Any given
<code>SUFFIXES</code> go at the start of the generated suffixes list, followed
by Automake generated suffixes not already in the list.

<div class="node">
<a name="Include"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Conditionals">Conditionals</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Miscellaneous">Miscellaneous</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">19 Include</h2>

<p><a name="index-include-1006"></a><a name="index-Including-_0040file_007bMakefile_007d-fragment-1007"></a><a name="index-g_t_0040file_007bMakefile_007d-fragment_002c-including-1008"></a>
Automake supports an <code>include</code> directive that  can be used to
include other <samp><span class="file">Makefile</span></samp> fragments when <samp><span class="command">automake</span></samp> is run. 
Note that these fragments are read and interpreted by <samp><span class="command">automake</span></samp>,
not by <samp><span class="command">make</span></samp>.  As with conditionals, <samp><span class="command">make</span></samp> has no idea that
<code>include</code> is in use.

   <p>There are two forms of <code>include</code>:

     <dl>
<dt><code>include $(srcdir)/file</code><dd>Include a fragment that is found relative to the current source
directory.

     <br><dt><code>include $(top_srcdir)/file</code><dd>Include a fragment that is found relative to the top source directory. 
</dl>

   <p>Note that if a fragment is included inside a conditional, then the
condition applies to the entire contents of that fragment.

   <p>Makefile fragments included this way are always distributed because
they are needed to rebuild <samp><span class="file">Makefile.in</span></samp>.

<div class="node">
<a name="Conditionals"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Silencing-Make">Silencing Make</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Include">Include</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">20 Conditionals</h2>

<p><a name="index-Conditionals-1009"></a>
Automake supports a simple type of conditionals.

   <p>These conditionals are not the same as conditionals in
GNU Make.  Automake conditionals are checked at configure time by the
<samp><span class="file">configure</span></samp> script, and affect the translation from
<samp><span class="file">Makefile.in</span></samp> to <samp><span class="file">Makefile</span></samp>.  They are based on options passed
to <samp><span class="file">configure</span></samp> and on results that <samp><span class="file">configure</span></samp> has discovered
about the host system.  GNU Make conditionals are checked at <samp><span class="command">make</span></samp>
time, and are based on variables passed to the make program or defined
in the <samp><span class="file">Makefile</span></samp>.

   <p>Automake conditionals will work with any make program.

<ul class="menu">
<li><a accesskey="1" href="#Usage-of-Conditionals">Usage of Conditionals</a>:        Declaring conditional content
<li><a accesskey="2" href="#Limits-of-Conditionals">Limits of Conditionals</a>:       Enclosing complete statements
</ul>

<div class="node">
<a name="Usage-of-Conditionals"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Limits-of-Conditionals">Limits of Conditionals</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Conditionals">Conditionals</a>

</div>

<h3 class="section">20.1 Usage of Conditionals</h3>

<p><a name="index-AM_005fCONDITIONAL-1010"></a>Before using a conditional, you must define it by using
<code>AM_CONDITIONAL</code> in the <samp><span class="file">configure.ac</span></samp> file (see <a href="#Macros">Macros</a>).

<div class="defun">
&mdash; Macro: <b>AM_CONDITIONAL</b> (<var>conditional, condition</var>)<var><a name="index-AM_005fCONDITIONAL-1011"></a></var><br>
<blockquote><p>The conditional name, <var>conditional</var>, should be a simple string
starting with a letter and containing only letters, digits, and
underscores.  It must be different from &lsquo;<samp><span class="samp">TRUE</span></samp>&rsquo; and &lsquo;<samp><span class="samp">FALSE</span></samp>&rsquo;
that are reserved by Automake.

        <p>The shell <var>condition</var> (suitable for use in a shell <code>if</code>
statement) is evaluated when <samp><span class="command">configure</span></samp> is run.  Note that you
must arrange for <em>every</em> <code>AM_CONDITIONAL</code> to be invoked every
time <samp><span class="command">configure</span></samp> is run.  If <code>AM_CONDITIONAL</code> is run
conditionally (e.g., in a shell <code>if</code> statement), then the result
will confuse <samp><span class="command">automake</span></samp>. 
</p></blockquote></div>

   <p><a name="index-g_t_0040option_007b_002d_002denable_002ddebug_007d_002c-example-1012"></a><a name="index-Example-conditional-_0040option_007b_002d_002denable_002ddebug_007d-1013"></a><a name="index-Conditional-example_002c-_0040option_007b_002d_002denable_002ddebug_007d-1014"></a>
Conditionals typically depend upon options that the user provides to
the <samp><span class="command">configure</span></samp> script.  Here is an example of how to write a
conditional that is true if the user uses the <samp><span class="option">--enable-debug</span></samp>
option.

<pre class="example">     AC_ARG_ENABLE([debug],
     [  --enable-debug    Turn on debugging],
     [case "${enableval}" in
       yes) debug=true ;;
       no)  debug=false ;;
       *) AC_MSG_ERROR([bad value ${enableval} for --enable-debug]) ;;
     esac],[debug=false])
     AM_CONDITIONAL([DEBUG], [test x$debug = xtrue])
</pre>
   <p>Here is an example of how to use that conditional in <samp><span class="file">Makefile.am</span></samp>:

   <p><a name="index-if-1015"></a><a name="index-endif-1016"></a><a name="index-else-1017"></a>
<pre class="example">     if DEBUG
     DBG = debug
     else
     DBG =
     endif
     noinst_PROGRAMS = $(DBG)
</pre>
   <p>This trivial example could also be handled using <code>EXTRA_PROGRAMS</code>
(see <a href="#Conditional-Programs">Conditional Programs</a>).

   <p>You may only test a single variable in an <code>if</code> statement, possibly
negated using &lsquo;<samp><span class="samp">!</span></samp>&rsquo;.  The <code>else</code> statement may be omitted. 
Conditionals may be nested to any depth.  You may specify an argument to
<code>else</code> in which case it must be the negation of the condition used
for the current <code>if</code>.  Similarly you may specify the condition
that is closed on the <code>endif</code> line:

<pre class="example">     if DEBUG
     DBG = debug
     else !DEBUG
     DBG =
     endif !DEBUG
</pre>
   <p class="noindent">Unbalanced conditions are errors.  The <code>if</code>, <code>else</code>, and
<code>endif</code> statements should not be indented, i.e., start on column
one.

   <p>The <code>else</code> branch of the above two examples could be omitted,
since assigning the empty string to an otherwise undefined variable
makes no difference.

   <p><a name="index-AM_005fCOND_005fIF-1018"></a>In order to allow access to the condition registered by
<code>AM_CONDITIONAL</code> inside <samp><span class="file">configure.ac</span></samp>, and to allow
conditional <code>AC_CONFIG_FILES</code>, <code>AM_COND_IF</code> may be used:

<div class="defun">
&mdash; Macro: <b>AM_COND_IF</b> (<var>conditional, </var><span class="roman">[</span><var>if-true</var><span class="roman">]</span><var>, </var><span class="roman">[</span><var>if-false</var><span class="roman">]</span>)<var><a name="index-AM_005fCOND_005fIF-1019"></a></var><br>
<blockquote><p>If <var>conditional</var> is fulfilled, execute <var>if-true</var>, otherwise
execute <var>if-false</var>.  If either branch contains <code>AC_CONFIG_FILES</code>,
it will cause <samp><span class="command">automake</span></samp> to output the rules for the respective
files only for the given condition. 
</p></blockquote></div>

   <p><code>AM_COND_IF</code> macros may be nested when m4 quotation is used
properly (see <a href="autoconf.html#M4-Quotation">M4 Quotation</a>).

   <p><a name="index-Example-conditional-_0040code_007bAC_005fCONFIG_005fFILES_007d-1020"></a><a name="index-g_t_0040code_007bAC_005fCONFIG_005fFILES_007d_002c-conditional-1021"></a>
Here is an example of how to define a conditional config file:

<pre class="example">     AM_CONDITIONAL([SHELL_WRAPPER], [test "x$with_wrapper" = xtrue])
     AM_COND_IF([SHELL_WRAPPER],
                [AC_CONFIG_FILES([wrapper:wrapper.in])])
</pre>
   <div class="node">
<a name="Limits-of-Conditionals"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Usage-of-Conditionals">Usage of Conditionals</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Conditionals">Conditionals</a>

</div>

<h3 class="section">20.2 Limits of Conditionals</h3>

<p>Conditionals should enclose complete statements like variables or
rules definitions.  Automake cannot deal with conditionals used inside
a variable definition, for instance, and is not even able to diagnose
this situation.  The following example would not work:

<pre class="example">     # This syntax is not understood by Automake
     AM_CPPFLAGS = \
       -DFEATURE_A \
     if WANT_DEBUG
       -DDEBUG \
     endif
       -DFEATURE_B
</pre>
   <p>However the intended definition of <code>AM_CPPFLAGS</code> can be achieved
with

<pre class="example">     if WANT_DEBUG
       DEBUGFLAGS = -DDEBUG
     endif
     AM_CPPFLAGS = -DFEATURE_A $(DEBUGFLAGS) -DFEATURE_B
</pre>
   <p class="noindent">or

<pre class="example">     AM_CPPFLAGS = -DFEATURE_A
     if WANT_DEBUG
     AM_CPPFLAGS += -DDEBUG
     endif
     AM_CPPFLAGS += -DFEATURE_B
</pre>
   <p>More details and examples of conditionals are described alongside
various Automake features in this manual (see <a href="#Conditional-Subdirectories">Conditional Subdirectories</a>, see <a href="#Conditional-Sources">Conditional Sources</a>, see <a href="#Conditional-Programs">Conditional Programs</a>, see <a href="#Conditional-Libtool-Libraries">Conditional Libtool Libraries</a>, see <a href="#Conditional-Libtool-Sources">Conditional Libtool Sources</a>).

<div class="node">
<a name="Silencing-Make"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Gnits">Gnits</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditionals">Conditionals</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">21 Silencing <samp><span class="command">make</span></samp></h2>

<p><a name="index-Silent-_0040command_007bmake_007d-1022"></a><a name="index-Silencing-_0040command_007bmake_007d-1023"></a><a name="index-Silent-rules-1024"></a><a name="index-Silent-_0040command_007bmake_007d-rules-1025"></a>

<ul class="menu">
<li><a accesskey="1" href="#Make-verbosity">Make verbosity</a>:                Make is verbose by default
<li><a accesskey="2" href="#Tricks-For-Silencing-Make">Tricks For Silencing Make</a>:     Standard and generic ways to silence make
<li><a accesskey="3" href="#Automake-silent_002drules-Option">Automake silent-rules Option</a>:  How Automake can help in silencing make
</ul>

<div class="node">
<a name="Make-verbosity"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Tricks-For-Silencing-Make">Tricks For Silencing Make</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Silencing-Make">Silencing Make</a>

</div>

<h3 class="section">21.1 Make is verbose by default</h3>

<p>Normally, when executing the set of rules associated with a target,
<samp><span class="command">make</span></samp> prints each rule before it is executed.  This behaviour,
while having been in place for a long time, and being even mandated by
the POSIX standard, starkly violates the &ldquo;silence is golden&rdquo; UNIX
principle<a rel="footnote" href="#fn-7" name="fnd-7"><sup>7</sup></a>:

   <blockquote>
When a program has nothing interesting or surprising to say, it should
say nothing.  Well-behaved Unix programs do their jobs unobtrusively,
with a minimum of fuss and bother.  Silence is golden. 
</blockquote>

   <p>In fact, while such verbosity of <samp><span class="command">make</span></samp> can theoretically be
useful to track bugs and understand reasons of failures right away, it
can also hide warning and error messages from <samp><span class="command">make</span></samp>-invoked
tools, drowning them in a flood of uninteresting and seldom useful
messages, and thus allowing them to go easily undetected.

   <p>This problem can be very annoying, especially for developers, who usually
know quite well what's going on behind the scenes, and for whom the
verbose output from <samp><span class="command">make</span></samp> ends up being mostly noise that hampers
the easy detection of potentially important warning messages.

<div class="node">
<a name="Tricks-For-Silencing-Make"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Automake-silent_002drules-Option">Automake silent-rules Option</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Make-verbosity">Make verbosity</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Silencing-Make">Silencing Make</a>

</div>

<h3 class="section">21.2 Standard and generic ways to silence make</h3>

<p>Here we describe some common idioms/tricks to obtain a quieter make
output, with their relative advantages and drawbacks.  In the next
section (<a href="#Automake-silent_002drules-Option">Automake silent-rules Option</a>) we'll see how Automake
can help in this respect.

     <ul>
<li><samp><span class="command">make -s</span></samp>

     <p>This simply causes <samp><span class="command">make</span></samp> not to print <em>any</em> rule before
executing it.

     <p>The <samp><span class="option">-s</span></samp> flag is mandated by POSIX, universally supported, and
its purpose and function are easy to understand.

     <p>But it also has its serious limitations too.  First of all, it embodies
an &ldquo;all or nothing&rdquo; strategy, i.e., either everything is silenced, or
nothing is; this lack of granularity can sometimes be a fatal flaw. 
Moreover, when the <samp><span class="option">-s</span></samp> flag is used, the <samp><span class="command">make</span></samp> output
might turn out to be too much terse; in case of errors, the user won't
be able to easily see what rule or command have caused them, or even,
in case of tools with poor error reporting, what the errors were!

     <li><samp><span class="command">make &gt;/dev/null || make</span></samp>

     <p>Apparently, this perfectly obeys the &ldquo;silence is golden&rdquo; rule: warnings
from stderr are passed through, output reporting is done only in case of
error, and in that case it should provide a verbose-enough report to allow
an easy determination of the error location and causes.

     <p>However, calling <samp><span class="command">make</span></samp> two times in a row might hide errors
(especially intermittent ones), or subtly change the expected semantic
of the <samp><span class="command">make</span></samp> calls &mdash; things these which can clearly make
debugging and error assessment very difficult.

     <li><samp><span class="command">make --no-print-directory</span></samp>

     <p>This is GNU <samp><span class="command">make</span></samp> specific.  When called with the
<samp><span class="option">--no-print-directory</span></samp> option, GNU <samp><span class="command">make</span></samp> will disable
printing of the working directory by invoked sub-<samp><span class="command">make</span></samp>s (the
well-known &ldquo;<i>Entering/Leaving directory ...</i>&rdquo; messages).  This helps
to decrease the verbosity of the output, but experience has shown that
it can also often render debugging considerably harder in projects using
deeply-nested <samp><span class="command">make</span></samp> recursion.

     <p>As an aside, notice that the <samp><span class="option">--no-print-directory</span></samp> option is
automatically activated if the <samp><span class="option">-s</span></samp> flag is used.

     <!-- TODO: Other tricks? -->
     <!-- TODO: Maybe speak about the @code{.SILENT} target? -->
     <!-- TODO:  - Pros: More granularity on what to silence. -->
     <!-- TODO:  - Cons: No easy way to temporarily override. -->
   </ul>

<div class="node">
<a name="Automake-silent-rules-Option"></a>
<a name="Automake-silent_002drules-Option"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Tricks-For-Silencing-Make">Tricks For Silencing Make</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Silencing-Make">Silencing Make</a>

</div>

<h3 class="section">21.3 How Automake can help in silencing make</h3>

<p>The tricks and idioms for silencing <samp><span class="command">make</span></samp> described in the
previous section can be useful from time to time, but we've seen that
they all have their serious drawbacks and limitations.  That's why
automake provides support for a more advanced and flexible way of
obtaining quieter output from <samp><span class="command">make</span></samp>: the <samp><span class="option">silent-rules</span></samp>
mode.

<!-- TODO: Maybe describe in brief the precedent set by the build system -->
<!-- of the Linux Kernel, from which Automake took inspiration ... Links? -->
   <p>To give the gist of what <samp><span class="option">silent-rules</span></samp> can do, here is a simple
comparison between a typical <samp><span class="command">make</span></samp> output (where silent rules
are disabled) and one with silent rules enabled:

<pre class="example">     % <kbd>cat Makefile.am</kbd>
     bin_PROGRAMS = foo
     foo_SOURCES = main.c func.c
     % <kbd>cat main.c</kbd>
     int main (void) { return func (); }  /* func used undeclared */
     % <kbd>cat func.c</kbd>
     int func (void) { int i; return i; } /* i used uninitialized */
     
     <i>The make output is by default very verbose.  This causes warnings
     from the compiler to be somewhat hidden, and not immediate to spot.</i>
     % <kbd>make CFLAGS=-Wall</kbd>
     gcc -DPACKAGE_NAME=\"foo\" -DPACKAGE_TARNAME=\"foo\" ...
     -DPACKAGE_STRING=\"foo\ 1.0\" -DPACKAGE_BUGREPORT=\"\" ...
     -DPACKAGE=\"foo\" -DVERSION=\"1.0\" -I. -Wall -MT main.o
     -MD -MP -MF .deps/main.Tpo -c -o main.o main.c
     main.c: In function ‘main’:
     main.c:3:3: warning: implicit declaration of function ‘func’
     mv -f .deps/main.Tpo .deps/main.Po
     gcc -DPACKAGE_NAME=\"foo\" -DPACKAGE_TARNAME=\"foo\" ...
     -DPACKAGE_STRING=\"foo\ 1.0\" -DPACKAGE_BUGREPORT=\"\" ...
     -DPACKAGE=\"foo\" -DVERSION=\"1.0\" -I. -Wall -MT func.o
     -MD -MP -MF .deps/func.Tpo -c -o func.o func.c
     func.c: In function ‘func’:
     func.c:4:3: warning: ‘i’ used uninitialized in this function
     mv -f .deps/func.Tpo .deps/func.Po
     gcc -Wall -o foo main.o func.o
     
     <i>Clean up, so that we we can rebuild everything from scratch.</i>
     % <kbd>make clean</kbd>
     test -z "foo" || rm -f foo
     rm -f *.o
     
     <i>Silent rules enabled: the output is minimal but informative.  In
     particular, the warnings from the compiler stick out very clearly.</i>
     % <kbd>make V=0 CFLAGS=-Wall</kbd>
       CC     main.o
     main.c: In function ‘main’:
     main.c:3:3: warning: implicit declaration of function ‘func’
       CC     func.o
     func.c: In function ‘func’:
     func.c:4:3: warning: ‘i’ used uninitialized in this function
       CCLD   foo
</pre>
   <p><a name="index-silent_002drules-and-libtool-1026"></a>Also, in projects using <samp><span class="command">libtool</span></samp>, the use of silent rules can
automatically enable the <samp><span class="command">libtool</span></samp>'s <samp><span class="option">--silent</span></samp> option:

<pre class="example">     % <kbd>cat Makefile.am</kbd>
     lib_LTLIBRARIES = libx.la
     
     % <kbd>make # Both make and libtool are verbose by default.</kbd>
     ...
     libtool: compile: gcc -DPACKAGE_NAME=\"foo\" ... -DLT_OBJDIR=\".libs/\"
       -I. -g -O2 -MT libx.lo -MD -MP -MF .deps/libx.Tpo -c libx.c -fPIC
       -DPIC -o .libs/libx.o
     mv -f .deps/libx.Tpo .deps/libx.Plo
     /bin/sh ./libtool --tag=CC --mode=link gcc -g -O2 -o libx.la -rpath
       /usr/local/lib libx.lo
     libtool: link: gcc -shared .libs/libx.o -Wl,-soname -Wl,libx.so.0
       -o .libs/libx.so.0.0.0
     libtool: link: cd .libs &amp;&amp; rm -f libx.so &amp;&amp; ln -s libx.so.0.0.0 libx.so
     ...
     
     % <kbd>make V=0</kbd>
       CC     libx.lo
       CCLD   libx.la
</pre>
   <p>Let's now see how the <samp><span class="option">silent-rules</span></samp> mode interfaces with the
package developer and the package user.

   <p>To enable the use of <samp><span class="option">silent-rules</span></samp> in his package, a developer
needs to do either of the following:

     <ul>
<li>Add the <samp><span class="option">silent-rules</span></samp> option as argument to <code>AM_INIT_AUTOMAKE</code>. 
<li>Call the <code>AM_SILENT_RULES</code> macro from within the <samp><span class="file">configure.ac</span></samp>
file. 
</ul>

   <p>It is not possible to instead specify <samp><span class="option">silent-rules</span></samp> in a
<samp><span class="file">Makefile.am</span></samp> file.

   <p>If the developer has done either of the above, then the user of the
package may influence the verbosity at <samp><span class="command">configure</span></samp> run time as
well as at <samp><span class="command">make</span></samp> run time:

     <ul>
<li><a name="index-g_t_002d_002denable_002dsilent_002drules-1027"></a><a name="index-g_t_002d_002ddisable_002dsilent_002drules-1028"></a>Passing <samp><span class="option">--enable-silent-rules</span></samp> to <samp><span class="command">configure</span></samp> will cause
build rules to be less verbose; the option <samp><span class="option">--disable-silent-rules</span></samp>
will cause normal verbose output. 
<li><a name="index-g_t_0040code_007bV_007d-1029"></a>At <samp><span class="command">make</span></samp> run time, the default chosen at <samp><span class="command">configure</span></samp>
time may be overridden: <code>make V=1</code> will produce verbose output,
<code>make V=0</code> less verbose output. 
</ul>

   <p><a name="index-default-verbosity-for-silent_002drules-1030"></a>Note that silent rules are <em>disabled</em> by default; the user must
enable them explicitly at either <samp><span class="command">configure</span></samp> run time or at
<samp><span class="command">make</span></samp> run time.  We think that this is a good policy, since
it provides the casual user with enough information to prepare a good
bug report in case anything breaks.

   <p>Still, notwithstanding the rationales above, a developer who wants to
make silent rules enabled by default in his own package can do so by
adding a &lsquo;<samp><span class="samp">yes</span></samp>&rsquo; argument to the <code>AM_SILENT_RULES</code> call in
<samp><span class="file">configure.ac</span></samp>.  We advise against this approach, though.

<!-- Keep in sync with silent-configsite.sh -->
   <p>Users who prefer to have silent rules enabled by default can edit their
<samp><span class="file">config.site</span></samp> file to make the variable <code>enable_silent_rules</code>
default to &lsquo;<samp><span class="samp">yes</span></samp>&rsquo;.  This should still allow disabling silent rules
at <samp><span class="command">configure</span></samp> time and at <samp><span class="command">make</span></samp> time.

<!-- FIXME: there's really a need to specify this explicitly? -->
   <p>For portability to different <samp><span class="command">make</span></samp> implementations, package authors
are advised to not set the variable <code>V</code> inside the <samp><span class="file">Makefile.am</span></samp>
file, to allow the user to override the value for subdirectories as well.

   <p>The current implementation of this feature normally uses nested
variable expansion &lsquo;<samp><span class="samp">$(</span><var>var1</var><span class="samp">$(V))</span></samp>&rsquo;, a <samp><span class="file">Makefile</span></samp> feature
that is not required by POSIX 2008 but is widely supported in
practice.  The <samp><span class="option">silent-rules</span></samp> option thus turns off warnings
about recursive variable expansion, which are in turn enabled by
<samp><span class="option">-Wportability</span></samp> (see <a href="#automake-Invocation">automake Invocation</a>).  On the rare
<samp><span class="command">make</span></samp> implementations that do not support nested variable
expansion, whether rules are silent is always determined at configure
time, and cannot be overridden at make time.  Future versions of POSIX
are likely to require nested variable expansion, so this minor
limitation should go away with time.

   <p><a name="index-g_t_0040code_007bAM_005fV_005fGEN_007d-1031"></a><a name="index-g_t_0040code_007bAM_005fV_005fat_007d-1032"></a><a name="index-g_t_0040code_007bAM_005fDEFAULT_005fVERBOSITY_007d-1033"></a><a name="index-g_t_0040code_007bAM_005fV_007d-1034"></a><a name="index-g_t_0040code_007bAM_005fDEFAULT_005fV_007d-1035"></a>To extend the silent mode to your own rules, you have few choices:

     <ul>
<li>You can use the predefined variable <code>AM_V_GEN</code> as a prefix to
commands that should output a status line in silent mode, and
<code>AM_V_at</code> as a prefix to commands that should not output anything
in silent mode.  When output is to be verbose, both of these variables
will expand to the empty string.

     <li>You can silence a recipe unconditionally with <code>@</code>, and then use
the predefined variable <code>AM_V_P</code> to know whether make is being run
in silent or verbose mode, adjust the verbose information your recipe
displays accordingly:

     <pre class="example">          generate-headers:
                  
                  ... [commands defining a shell variable '$headers'] ...; \
                  if $(AM_V_P); then set -x; else echo " GEN   [headers]"; fi; \
                  rm -f $$headers &amp;&amp; generate-header --flags $$headers
</pre>
     <li>You can add your own variables, so strings of your own choice are shown. 
The following snippet shows how you would define your own equivalent of
<code>AM_V_GEN</code>:

     <pre class="example">          pkg_verbose = $(pkg_verbose_@AM_V@)
          pkg_verbose_ = $(pkg_verbose_@AM_DEFAULT_V@)
          pkg_verbose_0 = @echo PKG-GEN $@;
          
          foo: foo.in
                  $(pkg_verbose)cp $(srcdir)/foo.in $@
</pre>
     </ul>

   <p>As a final note, observe that, even when silent rules are enabled,
the <samp><span class="option">--no-print-directory</span></samp> option is still required with GNU
<samp><span class="command">make</span></samp> if the &ldquo;<i>Entering/Leaving directory ...</i>&rdquo; messages
are to be disabled.

<div class="node">
<a name="Gnits"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Cygnus">Cygnus</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Silencing-Make">Silencing Make</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">22 The effect of <samp><span class="option">--gnu</span></samp> and <samp><span class="option">--gnits</span></samp></h2>

<p><a name="index-g_t_0040option_007b_002d_002dgnu_007d_002c-required-files-1036"></a><a name="index-g_t_0040option_007b_002d_002dgnu_007d_002c-complete-description-1037"></a>
The <samp><span class="option">--gnu</span></samp> option (or <samp><span class="option">gnu</span></samp> in the
<code>AUTOMAKE_OPTIONS</code> variable) causes <samp><span class="command">automake</span></samp> to check
the following:

     <ul>
<li>The files <samp><span class="file">INSTALL</span></samp>, <samp><span class="file">NEWS</span></samp>, <samp><span class="file">README</span></samp>, <samp><span class="file">AUTHORS</span></samp>,
and <samp><span class="file">ChangeLog</span></samp>, plus one of <samp><span class="file">COPYING.LIB</span></samp>, <samp><span class="file">COPYING.LESSER</span></samp>
or <samp><span class="file">COPYING</span></samp>, are required at the topmost directory of the package.

     <p>If the <samp><span class="option">--add-missing</span></samp> option is given, <samp><span class="command">automake</span></samp> will
add a generic version of the <samp><span class="file">INSTALL</span></samp> file as well as the
<samp><span class="file">COPYING</span></samp> file containing the text of the current version of the
GNU General Public License existing at the time of this Automake release
(version 3 as this is written, <a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a>). 
However, an existing <samp><span class="file">COPYING</span></samp> file will never be overwritten by
<samp><span class="command">automake</span></samp>.

     <li>The options <samp><span class="option">no-installman</span></samp> and <samp><span class="option">no-installinfo</span></samp> are
prohibited. 
</ul>

   <p>Note that this option will be extended in the future to do even more
checking; it is advisable to be familiar with the precise requirements
of the GNU standards.  Also, <samp><span class="option">--gnu</span></samp> can require certain
non-standard GNU programs to exist for use by various maintainer-only
rules; for instance, in the future <samp><span class="command">pathchk</span></samp> might be required for
&lsquo;<samp><span class="samp">make dist</span></samp>&rsquo;.

   <p><a name="index-g_t_0040option_007b_002d_002dgnits_007d_002c-complete-description-1038"></a>
The <samp><span class="option">--gnits</span></samp> option does everything that <samp><span class="option">--gnu</span></samp> does, and
checks the following as well:

     <ul>
<li>&lsquo;<samp><span class="samp">make installcheck</span></samp>&rsquo; will check to make sure that the <samp><span class="option">--help</span></samp>
and <samp><span class="option">--version</span></samp> really print a usage message and a version string,
respectively.  This is the <samp><span class="option">std-options</span></samp> option (see <a href="#Options">Options</a>).

     <li>&lsquo;<samp><span class="samp">make dist</span></samp>&rsquo; will check to make sure the <samp><span class="file">NEWS</span></samp> file has been
updated to the current version.

     <li><code>VERSION</code> is checked to make sure its format complies with Gnits
standards. 
<!-- FIXME xref when standards are finished -->

     <li><a name="index-g_t_0040file_007bREADME_002dalpha_007d-1039"></a>If <code>VERSION</code> indicates that this is an alpha release, and the file
<samp><span class="file">README-alpha</span></samp> appears in the topmost directory of a package, then
it is included in the distribution.  This is done in <samp><span class="option">--gnits</span></samp>
mode, and no other, because this mode is the only one where version
number formats are constrained, and hence the only mode where Automake
can automatically determine whether <samp><span class="file">README-alpha</span></samp> should be
included.

     <li>The file <samp><span class="file">THANKS</span></samp> is required. 
</ul>

<div class="node">
<a name="Cygnus"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Not-Enough">Not Enough</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Gnits">Gnits</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">23 The effect of <samp><span class="option">--cygnus</span></samp></h2>

<p><a name="index-g_t_0040option_007bcygnus_007d-strictness-1040"></a>
<em>The features described in this section are deprecated; you must
not use any of them in new code, and should remove their use from older
but still maintained code: they will be withdrawn the next major Automake
release (1.13).</em>

   <p>Some packages, notably GNU GCC and GNU gdb, used to have a build
environment originally written at Cygnus Support (subsequently renamed
Cygnus Solutions, and then later purchased by Red Hat).  Packages with
this ancestry are sometimes referred to as &ldquo;Cygnus&rdquo; trees.

   <p>A Cygnus tree has slightly different rules for how a
<samp><span class="file">Makefile.in</span></samp> is to be constructed.  Passing <samp><span class="option">--cygnus</span></samp> to
<samp><span class="command">automake</span></samp> will cause any generated <samp><span class="file">Makefile.in</span></samp> to
comply with Cygnus rules.

   <p>Here are the precise effects of <samp><span class="option">--cygnus</span></samp>:

     <ul>
<li>The <samp><span class="option">foreign</span></samp> strictness is implied.

     <li>The options <samp><span class="option">no-installinfo</span></samp>, <samp><span class="option">no-dependencies</span></samp> and
<samp><span class="option">no-dist</span></samp> are implied (see <a href="#Options">Options</a>).

     <li>The macro <code>AM_MAINTAINER_MODE</code> is required.

     <li>Info files are always created in the build directory, and not in the
source directory.  Packages that don't use the <samp><span class="option">cygnus</span></samp> option
can emulate this effect by using the <samp><span class="option">no-installinfo</span></samp> option
and listing the generated info files in the <code>CLEANFILES</code> variable.

     <li><samp><span class="file">texinfo.tex</span></samp> is not required if a Texinfo source file is
specified.  The assumption is that the file will be supplied, but in a
place that Automake cannot find &ndash; it is an artifact of how Cygnus
packages are typically bundled.  This effect can be emulated in
packages not using the <samp><span class="option">cygnus</span></samp> option with a proper definition
of the <code>TEXINFO_TEX</code> variable (see <a href="#Texinfo">Texinfo</a>).

     <li>Certain tools will be searched for in the build tree as well as in the
user's <samp><span class="env">PATH</span></samp>.  These tools are <samp><span class="command">runtest</span></samp>, <samp><span class="command">expect</span></samp>,
<samp><span class="command">makeinfo</span></samp> and <samp><span class="command">texi2dvi</span></samp>.

     <li>The <code>check</code> target doesn't depend on <code>all</code>. 
</ul>

<div class="node">
<a name="Not-Enough"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Distributing">Distributing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Cygnus">Cygnus</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">24 When Automake Isn't Enough</h2>

<p>In some situations, where Automake is not up to one task, one has to
resort to handwritten rules or even handwritten <samp><span class="file">Makefile</span></samp>s.

<ul class="menu">
<li><a accesskey="1" href="#Extending">Extending</a>:                    Adding new rules or overriding existing ones. 
<li><a accesskey="2" href="#Third_002dParty-Makefiles">Third-Party Makefiles</a>:        Integrating Non-Automake <samp><span class="file">Makefile</span></samp>s. 
</ul>

<div class="node">
<a name="Extending"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Third_002dParty-Makefiles">Third-Party Makefiles</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Not-Enough">Not Enough</a>

</div>

<h3 class="section">24.1 Extending Automake Rules</h3>

<p>With some minor exceptions (for example <code>_PROGRAMS</code> variables,
<code>TESTS</code>, or <code>XFAIL_TESTS</code>) being rewritten to append
&lsquo;<samp><span class="samp">$(EXEEXT)</span></samp>&rsquo;), the contents of a <samp><span class="file">Makefile.am</span></samp> is copied to
<samp><span class="file">Makefile.in</span></samp> verbatim.

   <p><a name="index-copying-semantics-1041"></a>
These copying semantics mean that many problems can be worked around
by simply adding some <samp><span class="command">make</span></samp> variables and rules to
<samp><span class="file">Makefile.am</span></samp>.  Automake will ignore these additions.

   <p><a name="index-conflicting-definitions-1042"></a><a name="index-rules_002c-conflicting-1043"></a><a name="index-variables_002c-conflicting-1044"></a><a name="index-definitions_002c-conflicts-1045"></a>
Since a <samp><span class="file">Makefile.in</span></samp> is built from data gathered from three
different places (<samp><span class="file">Makefile.am</span></samp>, <samp><span class="file">configure.ac</span></samp>, and
<samp><span class="command">automake</span></samp> itself), it is possible to have conflicting
definitions of rules or variables.  When building <samp><span class="file">Makefile.in</span></samp>
the following priorities are respected by <samp><span class="command">automake</span></samp> to ensure
the user always has the last word:

     <ul>
<li>User defined variables in <samp><span class="file">Makefile.am</span></samp> have priority over
variables <code>AC_SUBST</code>ed from <samp><span class="file">configure.ac</span></samp>, and
<code>AC_SUBST</code>ed variables have priority over
<samp><span class="command">automake</span></samp>-defined variables. 
<li>As far as rules are concerned, a user-defined rule overrides any
<samp><span class="command">automake</span></samp>-defined rule for the same target. 
</ul>

   <p><a name="index-overriding-rules-1046"></a><a name="index-overriding-semantics-1047"></a><a name="index-rules_002c-overriding-1048"></a>
These overriding semantics make it possible to fine tune some default
settings of Automake, or replace some of its rules.  Overriding
Automake rules is often inadvisable, particularly in the topmost
directory of a package with subdirectories.  The <samp><span class="option">-Woverride</span></samp>
option (see <a href="#automake-Invocation">automake Invocation</a>) comes in handy to catch overridden
definitions.

   <p>Note that Automake does not make any distinction between rules with
commands and rules that only specify dependencies.  So it is not
possible to append new dependencies to an <samp><span class="command">automake</span></samp>-defined
target without redefining the entire rule.

   <p><a name="index-g_t_0040option_007b_002dlocal_007d-targets-1049"></a><a name="index-local-targets-1050"></a>
However, various useful targets have a &lsquo;<samp><span class="samp">-local</span></samp>&rsquo; version you can
specify in your <samp><span class="file">Makefile.am</span></samp>.  Automake will supplement the
standard target with these user-supplied targets.

   <p><a name="index-all-1051"></a><a name="index-all_002dlocal-1052"></a><a name="index-info-1053"></a><a name="index-info_002dlocal-1054"></a><a name="index-dvi-1055"></a><a name="index-dvi_002dlocal-1056"></a><a name="index-ps-1057"></a><a name="index-ps_002dlocal-1058"></a><a name="index-pdf-1059"></a><a name="index-pdf_002dlocal-1060"></a><a name="index-html-1061"></a><a name="index-html_002dlocal-1062"></a><a name="index-check-1063"></a><a name="index-check_002dlocal-1064"></a><a name="index-install-1065"></a><a name="index-install_002ddata-1066"></a><a name="index-install_002ddata_002dlocal-1067"></a><a name="index-install_002ddvi-1068"></a><a name="index-install_002ddvi_002dlocal-1069"></a><a name="index-install_002dexec-1070"></a><a name="index-install_002dexec_002dlocal-1071"></a><a name="index-install_002dhtml-1072"></a><a name="index-install_002dhtml_002dlocal-1073"></a><a name="index-install_002dinfo-1074"></a><a name="index-install_002dinfo_002dlocal-1075"></a><a name="index-install_002dpdf-1076"></a><a name="index-install_002dpdf_002dlocal-1077"></a><a name="index-install_002dps-1078"></a><a name="index-install_002dps_002dlocal-1079"></a><a name="index-uninstall-1080"></a><a name="index-uninstall_002dlocal-1081"></a><a name="index-mostlyclean-1082"></a><a name="index-mostlyclean_002dlocal-1083"></a><a name="index-clean-1084"></a><a name="index-clean_002dlocal-1085"></a><a name="index-distclean-1086"></a><a name="index-distclean_002dlocal-1087"></a><a name="index-installdirs-1088"></a><a name="index-installdirs_002dlocal-1089"></a><a name="index-installcheck-1090"></a><a name="index-installcheck_002dlocal-1091"></a>
The targets that support a local version are <code>all</code>, <code>info</code>,
<code>dvi</code>, <code>ps</code>, <code>pdf</code>, <code>html</code>, <code>check</code>,
<code>install-data</code>, <code>install-dvi</code>, <code>install-exec</code>,
<code>install-html</code>, <code>install-info</code>, <code>install-pdf</code>,
<code>install-ps</code>, <code>uninstall</code>, <code>installdirs</code>,
<code>installcheck</code> and the various <code>clean</code> targets
(<code>mostlyclean</code>, <code>clean</code>, <code>distclean</code>, and
<code>maintainer-clean</code>).

   <p>Note that there are no <code>uninstall-exec-local</code> or
<code>uninstall-data-local</code> targets; just use <code>uninstall-local</code>. 
It doesn't make sense to uninstall just data or just executables.

   <p>For instance, here is one way to erase a subdirectory during
&lsquo;<samp><span class="samp">make clean</span></samp>&rsquo; (see <a href="#Clean">Clean</a>).

<pre class="example">     clean-local:
             -rm -rf testSubDir
</pre>
   <p>You may be tempted to use <code>install-data-local</code> to install a file
to some hard-coded location, but you should avoid this
(see <a href="#Hard_002dCoded-Install-Paths">Hard-Coded Install Paths</a>).

   <p>With the <code>-local</code> targets, there is no particular guarantee of
execution order; typically, they are run early, but with parallel
make, there is no way to be sure of that.

   <p><a name="index-g_t_0040option_007b_002dhook_007d-targets-1092"></a><a name="index-hook-targets-1093"></a><a name="index-install_002ddata_002dhook-1094"></a><a name="index-install_002dexec_002dhook-1095"></a><a name="index-uninstall_002dhook-1096"></a><a name="index-dist_002dhook-1097"></a>
In contrast, some rules also have a way to run another rule, called a
<dfn>hook</dfn>; hooks are always executed after the main rule's work is done. 
The hook is named after the principal target, with &lsquo;<samp><span class="samp">-hook</span></samp>&rsquo; appended. 
The targets allowing hooks are <code>install-data</code>,
<code>install-exec</code>, <code>uninstall</code>, <code>dist</code>, and
<code>distcheck</code>.

   <p>For instance, here is how to create a hard link to an installed program:

<pre class="example">     install-exec-hook:
             ln $(DESTDIR)$(bindir)/program$(EXEEXT) \
                $(DESTDIR)$(bindir)/proglink$(EXEEXT)
</pre>
   <p>Although cheaper and more portable than symbolic links, hard links
will not work everywhere (for instance, OS/2 does not have
<samp><span class="command">ln</span></samp>).  Ideally you should fall back to &lsquo;<samp><span class="samp">cp -p</span></samp>&rsquo; when
<samp><span class="command">ln</span></samp> does not work.  An easy way, if symbolic links are
acceptable to you, is to add <code>AC_PROG_LN_S</code> to
<samp><span class="file">configure.ac</span></samp> (see <a href="autoconf.html#Particular-Programs">Particular Program Checks</a>) and use &lsquo;<samp><span class="samp">$(LN_S)</span></samp>&rsquo; in
<samp><span class="file">Makefile.am</span></samp>.

   <p><a name="index-versioned-binaries_002c-installing-1098"></a><a name="index-installing-versioned-binaries-1099"></a><a name="index-g_t_0040code_007bLN_005fS_007d-example-1100"></a>For instance, here is how you could install a versioned copy of a
program using &lsquo;<samp><span class="samp">$(LN_S)</span></samp>&rsquo;:

<!-- Keep in sync with insthook.sh -->
<pre class="example">     install-exec-hook:
             cd $(DESTDIR)$(bindir) &amp;&amp; \
               mv -f prog$(EXEEXT) prog-$(VERSION)$(EXEEXT) &amp;&amp; \
               $(LN_S) prog-$(VERSION)$(EXEEXT) prog$(EXEEXT)
</pre>
   <p>Note that we rename the program so that a new version will erase the
symbolic link, not the real binary.  Also we <samp><span class="command">cd</span></samp> into the
destination directory in order to create relative links.

   <p>When writing <code>install-exec-hook</code> or <code>install-data-hook</code>,
please bear in mind that the exec/data distinction is based on the
installation directory, not on the primary used (see <a href="#The-Two-Parts-of-Install">The Two Parts of Install</a>). 
<!-- Keep in sync with primary-prefix-couples-documented-valid.sh -->
So a <code>foo_SCRIPTS</code> will be installed by
<code>install-data</code>, and a <code>barexec_SCRIPTS</code> will be installed by
<code>install-exec</code>.  You should define your hooks consequently.

<!-- FIXME should include discussion of variables you can use in these -->
<!-- rules -->
<div class="node">
<a name="Third-Party-Makefiles"></a>
<a name="Third_002dParty-Makefiles"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Extending">Extending</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Not-Enough">Not Enough</a>

</div>

<h3 class="section">24.2 Third-Party <samp><span class="file">Makefile</span></samp>s</h3>

<p><a name="index-Third_002dparty-packages_002c-interfacing-with-1101"></a><a name="index-Interfacing-with-third_002dparty-packages-1102"></a>
In most projects all <samp><span class="file">Makefile</span></samp>s are generated by Automake.  In
some cases, however, projects need to embed subdirectories with
handwritten <samp><span class="file">Makefile</span></samp>s.  For instance, one subdirectory could be
a third-party project with its own build system, not using Automake.

   <p>It is possible to list arbitrary directories in <code>SUBDIRS</code> or
<code>DIST_SUBDIRS</code> provided each of these directories has a
<samp><span class="file">Makefile</span></samp> that recognizes all the following recursive targets.

   <p><a name="index-recursive-targets-and-third_002dparty-_0040file_007bMakefile_007ds-1103"></a>When a user runs one of these targets, that target is run recursively
in all subdirectories.  This is why it is important that even
third-party <samp><span class="file">Makefile</span></samp>s support them.

     <dl>
<dt><code>all</code><dd>Compile the entire package.  This is the default target in
Automake-generated <samp><span class="file">Makefile</span></samp>s, but it does not need to be the
default in third-party <samp><span class="file">Makefile</span></samp>s.

     <br><dt><code>distdir</code><dd><a name="index-distdir-1104"></a><a name="index-distdir-1105"></a><a name="index-top_005fdistdir-1106"></a>Copy files to distribute into &lsquo;<samp><span class="samp">$(distdir)</span></samp>&rsquo;, before a tarball is
constructed.  Of course this target is not required if the
<samp><span class="option">no-dist</span></samp> option (see <a href="#Options">Options</a>) is used.

     <p>The variables &lsquo;<samp><span class="samp">$(top_distdir)</span></samp>&rsquo; and &lsquo;<samp><span class="samp">$(distdir)</span></samp>&rsquo;
(see <a href="#The-dist-Hook">The dist Hook</a>) will be passed from the outer package to the subpackage
when the <code>distdir</code> target is invoked.  These two variables have
been adjusted for the directory that is being recursed into, so they
are ready to use.

     <br><dt><code>install</code><dt><code>install-data</code><dt><code>install-exec</code><dt><code>uninstall</code><dd>Install or uninstall files (see <a href="#Install">Install</a>).

     <br><dt><code>install-dvi</code><dt><code>install-html</code><dt><code>install-info</code><dt><code>install-ps</code><dt><code>install-pdf</code><dd>Install only some specific documentation format (see <a href="#Texinfo">Texinfo</a>).

     <br><dt><code>installdirs</code><dd>Create install directories, but do not install any files.

     <br><dt><code>check</code><dt><code>installcheck</code><dd>Check the package (see <a href="#Tests">Tests</a>).

     <br><dt><code>mostlyclean</code><dt><code>clean</code><dt><code>distclean</code><dt><code>maintainer-clean</code><dd>Cleaning rules (see <a href="#Clean">Clean</a>).

     <br><dt><code>dvi</code><dt><code>pdf</code><dt><code>ps</code><dt><code>info</code><dt><code>html</code><dd>Build the documentation in various formats (see <a href="#Texinfo">Texinfo</a>).

     <br><dt><code>tags</code><dt><code>ctags</code><dd>Build <samp><span class="file">TAGS</span></samp> and <samp><span class="file">CTAGS</span></samp> (see <a href="#Tags">Tags</a>). 
</dl>

   <p>If you have ever used Gettext in a project, this is a good example of
how third-party <samp><span class="file">Makefile</span></samp>s can be used with Automake.  The
<samp><span class="file">Makefile</span></samp>s <samp><span class="command">gettextize</span></samp> puts in the <samp><span class="file">po/</span></samp> and
<samp><span class="file">intl/</span></samp> directories are handwritten <samp><span class="file">Makefile</span></samp>s that
implement all of these targets.  That way they can be added to
<code>SUBDIRS</code> in Automake packages.

   <p>Directories that are only listed in <code>DIST_SUBDIRS</code> but not in
<code>SUBDIRS</code> need only the <code>distclean</code>,
<code>maintainer-clean</code>, and <code>distdir</code> rules (see <a href="#Conditional-Subdirectories">Conditional Subdirectories</a>).

   <p>Usually, many of these rules are irrelevant to the third-party
subproject, but they are required for the whole package to work.  It's
OK to have a rule that does nothing, so if you are integrating a
third-party project with no documentation or tag support, you could
simply augment its <samp><span class="file">Makefile</span></samp> as follows:

<pre class="example">     EMPTY_AUTOMAKE_TARGETS = dvi pdf ps info html tags ctags
     .PHONY: $(EMPTY_AUTOMAKE_TARGETS)
     $(EMPTY_AUTOMAKE_TARGETS):
</pre>
   <p>Another aspect of integrating third-party build systems is whether
they support VPATH builds (see <a href="#VPATH-Builds">VPATH Builds</a>).  Obviously if the
subpackage does not support VPATH builds the whole package will not
support VPATH builds.  This in turns means that &lsquo;<samp><span class="samp">make distcheck</span></samp>&rsquo;
will not work, because it relies on VPATH builds.  Some people can
live without this (actually, many Automake users have never heard of
&lsquo;<samp><span class="samp">make distcheck</span></samp>&rsquo;).  Other people may prefer to revamp the
existing <samp><span class="file">Makefile</span></samp>s to support VPATH.  Doing so does not
necessarily require Automake, only Autoconf is needed (see <a href="autoconf.html#Build-Directories">Build Directories</a>). 
The necessary substitutions: &lsquo;<samp><span class="samp">@srcdir@</span></samp>&rsquo;, &lsquo;<samp><span class="samp">@top_srcdir@</span></samp>&rsquo;,
and &lsquo;<samp><span class="samp">@top_builddir@</span></samp>&rsquo; are defined by <samp><span class="file">configure</span></samp> when it
processes a <samp><span class="file">Makefile</span></samp> (see <a href="autoconf.html#Preset-Output-Variables">Preset Output Variables</a>), they are not
computed by the Makefile like the aforementioned &lsquo;<samp><span class="samp">$(distdir)</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">$(top_distdir)</span></samp>&rsquo; variables.

   <p>It is sometimes inconvenient to modify a third-party <samp><span class="file">Makefile</span></samp>
to introduce the above required targets.  For instance, one may want to
keep the third-party sources untouched to ease upgrades to new
versions.

   <p><a name="index-g_t_0040file_007bGNUmakefile_007d-including-_0040file_007bMakefile_007d-1107"></a>Here are two other ideas.  If GNU make is assumed, one possibility is
to add to that subdirectory a <samp><span class="file">GNUmakefile</span></samp> that defines the
required targets and includes the third-party <samp><span class="file">Makefile</span></samp>.  For
this to work in VPATH builds, <samp><span class="file">GNUmakefile</span></samp> must lie in the build
directory; the easiest way to do this is to write a
<samp><span class="file">GNUmakefile.in</span></samp> instead, and have it processed with
<code>AC_CONFIG_FILES</code> from the outer package.  For example if we
assume <samp><span class="file">Makefile</span></samp> defines all targets except the documentation
targets, and that the <code>check</code> target is actually called
<code>test</code>, we could write <samp><span class="file">GNUmakefile</span></samp> (or
<samp><span class="file">GNUmakefile.in</span></samp>) like this:

<pre class="example">     # First, include the real Makefile
     include Makefile
     # Then, define the other targets needed by Automake Makefiles.
     .PHONY: dvi pdf ps info html check
     dvi pdf ps info html:
     check: test
</pre>
   <p><a name="index-Proxy-_0040file_007bMakefile_007d-for-third_002dparty-packages-1108"></a>A similar idea that does not use <code>include</code> is to write a proxy
<samp><span class="file">Makefile</span></samp> that dispatches rules to the real <samp><span class="file">Makefile</span></samp>,
either with &lsquo;<samp><span class="samp">$(MAKE) -f Makefile.real $(AM_MAKEFLAGS) target</span></samp>&rsquo; (if
it's OK to rename the original <samp><span class="file">Makefile</span></samp>) or with &lsquo;<samp><span class="samp">cd
subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) target</span></samp>&rsquo; (if it's OK to store the
subdirectory project one directory deeper).  The good news is that
this proxy <samp><span class="file">Makefile</span></samp> can be generated with Automake.  All we
need are <samp><span class="option">-local</span></samp> targets (see <a href="#Extending">Extending</a>) that perform the
dispatch.  Of course the other Automake features are available, so you
could decide to let Automake perform distribution or installation. 
Here is a possible <samp><span class="file">Makefile.am</span></samp>:

<pre class="example">     all-local:
             cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) all
     check-local:
             cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) test
     clean-local:
             cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) clean
     
     # Assuming the package knows how to install itself
     install-data-local:
             cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) install-data
     install-exec-local:
             cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) install-exec
     uninstall-local:
             cd subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) uninstall
     
     # Distribute files from here.
     EXTRA_DIST = subdir/Makefile subdir/program.c ...
</pre>
   <p>Pushing this idea to the extreme, it is also possible to ignore the
subproject build system and build everything from this proxy
<samp><span class="file">Makefile.am</span></samp>.  This might sound very sensible if you need VPATH
builds but the subproject does not support them.

<div class="node">
<a name="Distributing"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#API-Versioning">API Versioning</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Not-Enough">Not Enough</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">25 Distributing <samp><span class="file">Makefile.in</span></samp>s</h2>

<p>Automake places no restrictions on the distribution of the resulting
<samp><span class="file">Makefile.in</span></samp>s.  We still encourage software authors to
distribute their work under terms like those of the GPL, but doing so
is not required to use Automake.

   <p>Some of the files that can be automatically installed via the
<samp><span class="option">--add-missing</span></samp> switch do fall under the GPL.  However, these also
have a special exception allowing you to distribute them with your
package, regardless of the licensing you choose.

<div class="node">
<a name="API-Versioning"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Upgrading">Upgrading</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Distributing">Distributing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">26 Automake API Versioning</h2>

<p>New Automake releases usually include bug fixes and new features. 
Unfortunately they may also introduce new bugs and incompatibilities. 
This makes four reasons why a package may require a particular Automake
version.

   <p>Things get worse when maintaining a large tree of packages, each one
requiring a different version of Automake.  In the past, this meant that
any developer (and sometimes users) had to install several versions of
Automake in different places, and switch &lsquo;<samp><span class="samp">$PATH</span></samp>&rsquo; appropriately for
each package.

   <p>Starting with version 1.6, Automake installs versioned binaries.  This
means you can install several versions of Automake in the same
&lsquo;<samp><span class="samp">$prefix</span></samp>&rsquo;, and can select an arbitrary Automake version by running
<samp><span class="command">automake-1.6</span></samp> or <samp><span class="command">automake-1.7</span></samp> without juggling with
&lsquo;<samp><span class="samp">$PATH</span></samp>&rsquo;.  Furthermore, <samp><span class="file">Makefile</span></samp>'s generated by Automake 1.6
will use <samp><span class="command">automake-1.6</span></samp> explicitly in their rebuild rules.

   <p>The number &lsquo;<samp><span class="samp">1.6</span></samp>&rsquo; in <samp><span class="command">automake-1.6</span></samp> is Automake's API version,
not Automake's version.  If a bug fix release is made, for instance
Automake 1.6.1, the API version will remain 1.6.  This means that a
package that works with Automake 1.6 should also work with 1.6.1; after
all, this is what people expect from bug fix releases.

   <p>If your package relies on a feature or a bug fix introduced in
a release, you can pass this version as an option to Automake to ensure
older releases will not be used.  For instance, use this in your
<samp><span class="file">configure.ac</span></samp>:

<pre class="example">       AM_INIT_AUTOMAKE([1.6.1])    dnl Require Automake 1.6.1 or better.
</pre>
   <p class="noindent">or, in a particular <samp><span class="file">Makefile.am</span></samp>:

<pre class="example">       AUTOMAKE_OPTIONS = 1.6.1   # Require Automake 1.6.1 or better.
</pre>
   <p class="noindent">Automake will print an error message if its version is
older than the requested version.

<h3 class="heading">What is in the API</h3>

<p>Automake's programming interface is not easy to define.  Basically it
should include at least all <strong>documented</strong> variables and targets
that a <samp><span class="file">Makefile.am</span></samp> author can use, any behavior associated with
them (e.g., the places where &lsquo;<samp><span class="samp">-hook</span></samp>&rsquo;'s are run), the command line
interface of <samp><span class="command">automake</span></samp> and <samp><span class="command">aclocal</span></samp>, <small class="dots">...</small>

<h3 class="heading">What is not in the API</h3>

<p>Every undocumented variable, target, or command line option, is not part
of the API.  You should avoid using them, as they could change from one
version to the other (even in bug fix releases, if this helps to fix a
bug).

   <p>If it turns out you need to use such an undocumented feature, contact
<a href="mailto:automake@gnu.org">automake@gnu.org</a> and try to get it documented and exercised by
the test-suite.

<div class="node">
<a name="Upgrading"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#FAQ">FAQ</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#API-Versioning">API Versioning</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">27 Upgrading a Package to a Newer Automake Version</h2>

<p>Automake maintains three kind of files in a package.

     <ul>
<li><samp><span class="file">aclocal.m4</span></samp>
<li><samp><span class="file">Makefile.in</span></samp>s
<li>auxiliary tools like <samp><span class="file">install-sh</span></samp> or <samp><span class="file">py-compile</span></samp>
</ul>

   <p><samp><span class="file">aclocal.m4</span></samp> is generated by <samp><span class="command">aclocal</span></samp> and contains some
Automake-supplied M4 macros.  Auxiliary tools are installed by
&lsquo;<samp><span class="samp">automake --add-missing</span></samp>&rsquo; when needed.  <samp><span class="file">Makefile.in</span></samp>s are
built from <samp><span class="file">Makefile.am</span></samp> by <samp><span class="command">automake</span></samp>, and rely on the
definitions of the M4 macros put in <samp><span class="file">aclocal.m4</span></samp> as well as the
behavior of the auxiliary tools installed.

   <p>Because all of these files are closely related, it is important to
regenerate all of them when upgrading to a newer Automake release. 
The usual way to do that is

<pre class="example">     aclocal # with any option needed (such a -I m4)
     autoconf
     automake --add-missing --force-missing
</pre>
   <p class="noindent">or more conveniently:

<pre class="example">     autoreconf -vfi
</pre>
   <p>The use of <samp><span class="option">--force-missing</span></samp> ensures that auxiliary tools will be
overridden by new versions (see <a href="#automake-Invocation">automake Invocation</a>).

   <p>It is important to regenerate all of these files each time Automake is
upgraded, even between bug fixes releases.  For instance, it is not
unusual for a bug fix to involve changes to both the rules generated
in <samp><span class="file">Makefile.in</span></samp> and the supporting M4 macros copied to
<samp><span class="file">aclocal.m4</span></samp>.

   <p>Presently <samp><span class="command">automake</span></samp> is able to diagnose situations where
<samp><span class="file">aclocal.m4</span></samp> has been generated with another version of
<samp><span class="command">aclocal</span></samp>.  However it never checks whether auxiliary scripts
are up-to-date.  In other words, <samp><span class="command">automake</span></samp> will tell you when
<samp><span class="command">aclocal</span></samp> needs to be rerun, but it will never diagnose a
missing <samp><span class="option">--force-missing</span></samp>.

   <p>Before upgrading to a new major release, it is a good idea to read the
file <samp><span class="file">NEWS</span></samp>.  This file lists all changes between releases: new
features, obsolete constructs, known incompatibilities, and
workarounds.

<div class="node">
<a name="FAQ"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Copying-This-Manual">Copying This Manual</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Upgrading">Upgrading</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">28 Frequently Asked Questions about Automake</h2>

<p>This chapter covers some questions that often come up on the mailing
lists.

<ul class="menu">
<li><a accesskey="1" href="#CVS">CVS</a>:                          CVS and generated files
<li><a accesskey="2" href="#maintainer_002dmode">maintainer-mode</a>:              missing and AM_MAINTAINER_MODE
<li><a accesskey="3" href="#Wildcards">Wildcards</a>:                    Why doesn't Automake support wildcards? 
<li><a accesskey="4" href="#Limitations-on-File-Names">Limitations on File Names</a>:    Limitations on source and installed file names
<li><a accesskey="5" href="#Errors-with-distclean">Errors with distclean</a>:        Files left in build directory after distclean
<li><a accesskey="6" href="#Flag-Variables-Ordering">Flag Variables Ordering</a>:      CFLAGS vs. AM_CFLAGS vs. mumble_CFLAGS
<li><a accesskey="7" href="#Renamed-Objects">Renamed Objects</a>:              Why are object files sometimes renamed? 
<li><a accesskey="8" href="#Per_002dObject-Flags">Per-Object Flags</a>:             How to simulate per-object flags? 
<li><a accesskey="9" href="#Multiple-Outputs">Multiple Outputs</a>:             Writing rules for tools with many output files
<li><a href="#Hard_002dCoded-Install-Paths">Hard-Coded Install Paths</a>:     Installing to hard-coded locations
<li><a href="#Debugging-Make-Rules">Debugging Make Rules</a>:         Strategies when things don't work as expected
<li><a href="#Reporting-Bugs">Reporting Bugs</a>:               Feedback on bugs and feature requests
</ul>

<div class="node">
<a name="CVS"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#maintainer_002dmode">maintainer-mode</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>

</div>

<h3 class="section">28.1 CVS and generated files</h3>

<h4 class="subheading">Background: distributed generated Files</h4>

<p><a name="index-generated-files_002c-distributed-1109"></a><a name="index-rebuild-rules-1110"></a>
Packages made with Autoconf and Automake ship with some generated
files like <samp><span class="file">configure</span></samp> or <samp><span class="file">Makefile.in</span></samp>.  These files were
generated on the developer's host and are distributed so that
end-users do not have to install the maintainer tools required to
rebuild them.  Other generated files like Lex scanners, Yacc parsers,
or Info documentation, are usually distributed on similar grounds.

   <p>Automake outputs rules in <samp><span class="file">Makefile</span></samp>s to rebuild these files.  For
instance, <samp><span class="command">make</span></samp> will run <samp><span class="command">autoconf</span></samp> to rebuild
<samp><span class="file">configure</span></samp> whenever <samp><span class="file">configure.ac</span></samp> is changed.  This makes
development safer by ensuring a <samp><span class="file">configure</span></samp> is never out-of-date
with respect to <samp><span class="file">configure.ac</span></samp>.

   <p>As generated files shipped in packages are up-to-date, and because
<samp><span class="command">tar</span></samp> preserves times-tamps, these rebuild rules are not
triggered when a user unpacks and builds a package.

<h4 class="subheading">Background: CVS and Timestamps</h4>

<p><a name="index-timestamps-and-CVS-1111"></a><a name="index-CVS-and-timestamps-1112"></a>
Unless you use CVS keywords (in which case files must be updated at
commit time), CVS preserves timestamp during &lsquo;<samp><span class="samp">cvs commit</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">cvs import -d</span></samp>&rsquo; operations.

   <p>When you check out a file using &lsquo;<samp><span class="samp">cvs checkout</span></samp>&rsquo; its timestamp is
set to that of the revision that is being checked out.

   <p>However, during <samp><span class="command">cvs update</span></samp>, files will have the date of the
update, not the original timestamp of this revision.  This is meant to
make sure that <samp><span class="command">make</span></samp> notices sources files have been updated.

   <p>This timestamp shift is troublesome when both sources and generated
files are kept under CVS.  Because CVS processes files in lexical
order, <samp><span class="file">configure.ac</span></samp> will appear newer than <samp><span class="file">configure</span></samp>
after a <samp><span class="command">cvs update</span></samp> that updates both files, even if
<samp><span class="file">configure</span></samp> was newer than <samp><span class="file">configure.ac</span></samp> when it was
checked in.  Calling <samp><span class="command">make</span></samp> will then trigger a spurious rebuild
of <samp><span class="file">configure</span></samp>.

<h4 class="subheading">Living with CVS in Autoconfiscated Projects</h4>

<p><a name="index-CVS-and-generated-files-1113"></a><a name="index-generated-files-and-CVS-1114"></a>
There are basically two clans amongst maintainers: those who keep all
distributed files under CVS, including generated files, and those who
keep generated files <em>out</em> of CVS.

<h5 class="subsubheading">All Files in CVS</h5>

     <ul>
<li>The CVS repository contains all distributed files so you know exactly
what is distributed, and you can checkout any prior version entirely.

     <li>Maintainers can see how generated files evolve (for instance, you can
see what happens to your <samp><span class="file">Makefile.in</span></samp>s when you upgrade Automake
and make sure they look OK).

     <li>Users do not need the autotools to build a checkout of the project, it
works just like a released tarball.

     <li>If users use <samp><span class="command">cvs update</span></samp> to update their copy, instead of
<samp><span class="command">cvs checkout</span></samp> to fetch a fresh one, timestamps will be
inaccurate.  Some rebuild rules will be triggered and attempt to
run developer tools such as <samp><span class="command">autoconf</span></samp> or <samp><span class="command">automake</span></samp>.

     <p>Actually, calls to such tools are all wrapped into a call to the
<samp><span class="command">missing</span></samp> script discussed later (see <a href="#maintainer_002dmode">maintainer-mode</a>). 
<samp><span class="command">missing</span></samp> will take care of fixing the timestamps when these
tools are not installed, so that the build can continue.

     <li>In distributed development, developers are likely to have different
version of the maintainer tools installed.  In this case rebuilds
triggered by timestamp lossage will lead to spurious changes
to generated files.  There are several solutions to this:

          <ul>
<li>All developers should use the same versions, so that the rebuilt files
are identical to files in CVS.  (This starts to be difficult when each
project you work on uses different versions.) 
<li>Or people use a script to fix the timestamp after a checkout (the GCC
folks have such a script). 
<li>Or <samp><span class="file">configure.ac</span></samp> uses <code>AM_MAINTAINER_MODE</code>, which will
disable all of these rebuild rules by default.  This is further discussed
in <a href="#maintainer_002dmode">maintainer-mode</a>. 
</ul>

     <li>Although we focused on spurious rebuilds, the converse can also
happen.  CVS's timestamp handling can also let you think an
out-of-date file is up-to-date.

     <p>For instance, suppose a developer has modified <samp><span class="file">Makefile.am</span></samp> and
has rebuilt <samp><span class="file">Makefile.in</span></samp>, and then decides to do a last-minute
change to <samp><span class="file">Makefile.am</span></samp> right before checking in both files
(without rebuilding <samp><span class="file">Makefile.in</span></samp> to account for the change).

     <p>This last change to <samp><span class="file">Makefile.am</span></samp> makes the copy of
<samp><span class="file">Makefile.in</span></samp> out-of-date.  Since CVS processes files
alphabetically, when another developer &lsquo;<samp><span class="samp">cvs update</span></samp>&rsquo;s his or her
tree, <samp><span class="file">Makefile.in</span></samp> will happen to be newer than
<samp><span class="file">Makefile.am</span></samp>.  This other developer will not see that
<samp><span class="file">Makefile.in</span></samp> is out-of-date.

</ul>

<h5 class="subsubheading">Generated Files out of CVS</h5>

<p>One way to get CVS and <samp><span class="command">make</span></samp> working peacefully is to never
store generated files in CVS, i.e., do not CVS-control files that
are <samp><span class="file">Makefile</span></samp> targets (also called <em>derived</em> files).

   <p>This way developers are not annoyed by changes to generated files.  It
does not matter if they all have different versions (assuming they are
compatible, of course).  And finally, timestamps are not lost, changes
to sources files can't be missed as in the
<samp><span class="file">Makefile.am</span></samp>/<samp><span class="file">Makefile.in</span></samp> example discussed earlier.

   <p>The drawback is that the CVS repository is not an exact copy of what
is distributed and that users now need to install various development
tools (maybe even specific versions) before they can build a checkout. 
But, after all, CVS's job is versioning, not distribution.

   <p>Allowing developers to use different versions of their tools can also
hide bugs during distributed development.  Indeed, developers will be
using (hence testing) their own generated files, instead of the
generated files that will be released actually.  The developer who
prepares the tarball might be using a version of the tool that
produces bogus output (for instance a non-portable C file), something
other developers could have noticed if they weren't using their own
versions of this tool.

<h4 class="subheading">Third-party Files</h4>

<p><a name="index-CVS-and-third_002dparty-files-1115"></a><a name="index-third_002dparty-files-and-CVS-1116"></a>
Another class of files not discussed here (because they do not cause
timestamp issues) are files that are shipped with a package, but
maintained elsewhere.  For instance, tools like <samp><span class="command">gettextize</span></samp>
and <samp><span class="command">autopoint</span></samp> (from Gettext) or <samp><span class="command">libtoolize</span></samp> (from
Libtool), will install or update files in your package.

   <p>These files, whether they are kept under CVS or not, raise similar
concerns about version mismatch between developers' tools.  The
Gettext manual has a section about this, see <a href="gettext.html#CVS-Issues">CVS Issues</a>.

<div class="node">
<a name="maintainer-mode"></a>
<a name="maintainer_002dmode"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Wildcards">Wildcards</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#CVS">CVS</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>

</div>

<h3 class="section">28.2 <samp><span class="command">missing</span></samp> and <code>AM_MAINTAINER_MODE</code></h3>

<h4 class="subheading"><samp><span class="command">missing</span></samp></h4>

<p><a name="index-g_t_0040command_007bmissing_007d_002c-purpose-1117"></a>
The <samp><span class="command">missing</span></samp> script is a wrapper around several maintainer
tools, designed to warn users if a maintainer tool is required but
missing.  Typical maintainer tools are <samp><span class="command">autoconf</span></samp>,
<samp><span class="command">automake</span></samp>, <samp><span class="command">bison</span></samp>, etc.  Because file generated by
these tools are shipped with the other sources of a package, these
tools shouldn't be required during a user build and they are not
checked for in <samp><span class="file">configure</span></samp>.

   <p>However, if for some reason a rebuild rule is triggered and involves a
missing tool, <samp><span class="command">missing</span></samp> will notice it and warn the user. 
Besides the warning, when a tool is missing, <samp><span class="command">missing</span></samp> will
attempt to fix timestamps in a way that allows the build to continue. 
For instance, <samp><span class="command">missing</span></samp> will touch <samp><span class="file">configure</span></samp> if
<samp><span class="command">autoconf</span></samp> is not installed.  When all distributed files are
kept under version control, this feature of <samp><span class="command">missing</span></samp> allows a
user <em>with no maintainer tools</em> to build a package off its version
control repository, bypassing any timestamp inconsistency (implied by
e.g. &lsquo;<samp><span class="samp">cvs update</span></samp>&rsquo; or &lsquo;<samp><span class="samp">git clone</span></samp>&rsquo;).

   <p>If the required tool is installed, <samp><span class="command">missing</span></samp> will run it and
won't attempt to continue after failures.  This is correct during
development: developers love fixing failures.  However, users with
wrong versions of maintainer tools may get an error when the rebuild
rule is spuriously triggered, halting the build.  This failure to let
the build continue is one of the arguments of the
<code>AM_MAINTAINER_MODE</code> advocates.

<h4 class="subheading"><code>AM_MAINTAINER_MODE</code></h4>

<p><a name="index-g_t_0040code_007bAM_005fMAINTAINER_005fMODE_007d_002c-purpose-1118"></a><a name="index-AM_005fMAINTAINER_005fMODE-1119"></a>
<code>AM_MAINTAINER_MODE</code> allows you to choose whether the so called
"rebuild rules" should be enabled or disabled.  With
<code>AM_MAINTAINER_MODE([enable])</code>, they are enabled by default,
otherwise they are disabled by default.  In the latter case, if
you have <code>AM_MAINTAINER_MODE</code> in <samp><span class="file">configure.ac</span></samp>, and run
&lsquo;<samp><span class="samp">./configure &amp;&amp; make</span></samp>&rsquo;, then <samp><span class="command">make</span></samp> will *never* attempt to
rebuild <samp><span class="file">configure</span></samp>, <samp><span class="file">Makefile.in</span></samp>s, Lex or Yacc outputs, etc. 
I.e., this disables build rules for files that are usually distributed
and that users should normally not have to update.

   <p>The user can override the default setting by passing either
&lsquo;<samp><span class="samp">--enable-maintainer-mode</span></samp>&rsquo; or &lsquo;<samp><span class="samp">--disable-maintainer-mode</span></samp>&rsquo;
to <samp><span class="command">configure</span></samp>.

   <p>People use <code>AM_MAINTAINER_MODE</code> either because they do not want their
users (or themselves) annoyed by timestamps lossage (see <a href="#CVS">CVS</a>), or
because they simply can't stand the rebuild rules and prefer running
maintainer tools explicitly.

   <p><code>AM_MAINTAINER_MODE</code> also allows you to disable some custom build
rules conditionally.  Some developers use this feature to disable
rules that need exotic tools that users may not have available.

   <p>Several years ago Fran&ccedil;ois Pinard pointed out several arguments
against this <code>AM_MAINTAINER_MODE</code> macro.  Most of them relate to
insecurity.  By removing dependencies you get non-dependable builds:
changes to sources files can have no effect on generated files and this
can be very confusing when unnoticed.  He adds that security shouldn't
be reserved to maintainers (what <samp><span class="option">--enable-maintainer-mode</span></samp>
suggests), on the contrary.  If one user has to modify a
<samp><span class="file">Makefile.am</span></samp>, then either <samp><span class="file">Makefile.in</span></samp> should be updated
or a warning should be output (this is what Automake uses
<samp><span class="command">missing</span></samp> for) but the last thing you want is that nothing
happens and the user doesn't notice it (this is what happens when
rebuild rules are disabled by <code>AM_MAINTAINER_MODE</code>).

   <p>Jim Meyering, the inventor of the <code>AM_MAINTAINER_MODE</code> macro was
swayed by Fran&ccedil;ois's arguments, and got rid of
<code>AM_MAINTAINER_MODE</code> in all of his packages.

   <p>Still many people continue to use <code>AM_MAINTAINER_MODE</code>, because
it helps them working on projects where all files are kept under version
control, and because <samp><span class="command">missing</span></samp> isn't enough if you have the
wrong version of the tools.

<div class="node">
<a name="Wildcards"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Limitations-on-File-Names">Limitations on File Names</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#maintainer_002dmode">maintainer-mode</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>

</div>

<h3 class="section">28.3 Why doesn't Automake support wildcards?</h3>

<p><a name="index-wildcards-1120"></a>
Developers are lazy.  They would often like to use wildcards in
<samp><span class="file">Makefile.am</span></samp>s, so that they would not need to remember to
update <samp><span class="file">Makefile.am</span></samp>s every time they add, delete, or rename
a file.

   <p>There are several objections to this:
     <ul>
<li>When using CVS (or similar) developers need to remember they have to
run &lsquo;<samp><span class="samp">cvs add</span></samp>&rsquo; or &lsquo;<samp><span class="samp">cvs rm</span></samp>&rsquo; anyway.  Updating
<samp><span class="file">Makefile.am</span></samp> accordingly quickly becomes a reflex.

     <p>Conversely, if your application doesn't compile
because you forgot to add a file in <samp><span class="file">Makefile.am</span></samp>, it will help
you remember to &lsquo;<samp><span class="samp">cvs add</span></samp>&rsquo; it.

     <li>Using wildcards makes it easy to distribute files by mistake.  For
instance, some code a developer is experimenting with (a test case,
say) that should not be part of the distribution.

     <li>Using wildcards it's easy to omit some files by mistake.  For
instance, one developer creates a new file, uses it in many places,
but forgets to commit it.  Another developer then checks out the
incomplete project and is able to run &lsquo;<samp><span class="samp">make dist</span></samp>&rsquo; successfully,
even though a file is missing. By listing files, &lsquo;<samp><span class="samp">make dist</span></samp>&rsquo;
<em>will</em> complain.

     <li>Wildcards are not portable to some non-GNU <samp><span class="command">make</span></samp> implementations,
e.g., NetBSD <samp><span class="command">make</span></samp> will not expand globs such as &lsquo;<samp><span class="samp">*</span></samp>&rsquo; in
prerequisites of a target.

     <li>Finally, it's really hard to <em>forget</em> to add a file to
<samp><span class="file">Makefile.am</span></samp>: files that are not listed in <samp><span class="file">Makefile.am</span></samp> are
not compiled or installed, so you can't even test them. 
</ul>

   <p>Still, these are philosophical objections, and as such you may disagree,
or find enough value in wildcards to dismiss all of them.  Before you
start writing a patch against Automake to teach it about wildcards,
let's see the main technical issue: portability.

   <p>Although &lsquo;<samp><span class="samp">$(wildcard ...)</span></samp>&rsquo; works with GNU <samp><span class="command">make</span></samp>, it is
not portable to other <samp><span class="command">make</span></samp> implementations.

   <p>The only way Automake could support <samp><span class="command">$(wildcard ...)</span></samp> is by
expending <samp><span class="command">$(wildcard ...)</span></samp> when <samp><span class="command">automake</span></samp> is run. 
The resulting <samp><span class="file">Makefile.in</span></samp>s would be portable since they would
list all files and not use &lsquo;<samp><span class="samp">$(wildcard ...)</span></samp>&rsquo;.  However that
means developers would need to remember to run <samp><span class="command">automake</span></samp> each
time they add, delete, or rename files.

   <p>Compared to editing <samp><span class="file">Makefile.am</span></samp>, this is a very small gain.  Sure,
it's easier and faster to type &lsquo;<samp><span class="samp">automake; make</span></samp>&rsquo; than to type
&lsquo;<samp><span class="samp">emacs Makefile.am; make</span></samp>&rsquo;.  But nobody bothered enough to write a
patch to add support for this syntax.  Some people use scripts to
generate file lists in <samp><span class="file">Makefile.am</span></samp> or in separate
<samp><span class="file">Makefile</span></samp> fragments.

   <p>Even if you don't care about portability, and are tempted to use
&lsquo;<samp><span class="samp">$(wildcard ...)</span></samp>&rsquo; anyway because you target only GNU Make, you
should know there are many places where Automake needs to know exactly
which files should be processed.  As Automake doesn't know how to
expand &lsquo;<samp><span class="samp">$(wildcard ...)</span></samp>&rsquo;, you cannot use it in these places. 
&lsquo;<samp><span class="samp">$(wildcard ...)</span></samp>&rsquo; is a black box comparable to <code>AC_SUBST</code>ed
variables as far Automake is concerned.

   <p>You can get warnings about &lsquo;<samp><span class="samp">$(wildcard ...</span></samp>&rsquo;) constructs using the
<samp><span class="option">-Wportability</span></samp> flag.

<div class="node">
<a name="Limitations-on-File-Names"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Errors-with-distclean">Errors with distclean</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Wildcards">Wildcards</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>

</div>

<h3 class="section">28.4 Limitations on File Names</h3>

<p><a name="index-file-names_002c-limitations-on-1121"></a>
Automake attempts to support all kinds of file names, even those that
contain unusual characters or are unusually long.  However, some
limitations are imposed by the underlying operating system and tools.

   <p>Most operating systems prohibit the use of the null byte in file
names, and reserve &lsquo;<samp><span class="samp">/</span></samp>&rsquo; as a directory separator.  Also, they
require that file names are properly encoded for the user's locale. 
Automake is subject to these limits.

   <p>Portable packages should limit themselves to POSIX file
names.  These can contain ASCII letters and digits,
&lsquo;<samp><span class="samp">_</span></samp>&rsquo;, &lsquo;<samp><span class="samp">.</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">-</span></samp>&rsquo;.  File names consist of components
separated by &lsquo;<samp><span class="samp">/</span></samp>&rsquo;.  File name components cannot begin with
&lsquo;<samp><span class="samp">-</span></samp>&rsquo;.

   <p>Portable POSIX file names cannot contain components that exceed a
14-byte limit, but nowadays it's normally safe to assume the
more-generous XOPEN limit of 255 bytes.  POSIX
limits file names to 255 bytes (XOPEN allows 1023 bytes),
but you may want to limit a source tarball to file names of 99 bytes
to avoid interoperability problems with old versions of <samp><span class="command">tar</span></samp>.

   <p>If you depart from these rules (e.g., by using non-ASCII
characters in file names, or by using lengthy file names), your
installers may have problems for reasons unrelated to Automake. 
However, if this does not concern you, you should know about the
limitations imposed by Automake itself.  These limitations are
undesirable, but some of them seem to be inherent to underlying tools
like Autoconf, Make, M4, and the shell.  They fall into three
categories: install directories, build directories, and file names.

   <p>The following characters:

<pre class="example">     <span class="roman">newline</span> " # $ ' `
</pre>
   <p>should not appear in the names of install directories.  For example,
the operand of <samp><span class="command">configure</span></samp>'s <samp><span class="option">--prefix</span></samp> option should
not contain these characters.

   <p>Build directories suffer the same limitations as install directories,
and in addition should not contain the following characters:

<pre class="example">     &amp; @ \
</pre>
   <p>For example, the full name of the directory containing the source
files should not contain these characters.

   <p>Source and installation file names like <samp><span class="file">main.c</span></samp> are limited even
further: they should conform to the POSIX/XOPEN
rules described above.  In addition, if you plan to port to
non-POSIX environments, you should avoid file names that
differ only in case (e.g., <samp><span class="file">makefile</span></samp> and <samp><span class="file">Makefile</span></samp>). 
Nowadays it is no longer worth worrying about the 8.3 limits of
DOS file systems.

<!-- FIXME This should probably be moved in the "Checking the Distribution" -->
<!-- FIXME section... -->
<div class="node">
<a name="Errors-with-distclean"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Flag-Variables-Ordering">Flag Variables Ordering</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Limitations-on-File-Names">Limitations on File Names</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>

</div>

<h3 class="section">28.5 Errors with distclean</h3>

<p><a name="index-g_t_0040code_007bdistclean_007d_002c-diagnostic-1122"></a><a name="index-g_t_0040samp_007bmake-distclean_007d_002c-diagnostic-1123"></a><a name="index-dependencies-and-distributed-files-1124"></a><a name="index-distclean-1125"></a>
This is a diagnostic you might encounter while running &lsquo;<samp><span class="samp">make
distcheck</span></samp>&rsquo;.

   <p>As explained in <a href="#Checking-the-Distribution">Checking the Distribution</a>, &lsquo;<samp><span class="samp">make distcheck</span></samp>&rsquo;
attempts to build and check your package for errors like this one.

   <p>&lsquo;<samp><span class="samp">make distcheck</span></samp>&rsquo; will perform a <code>VPATH</code> build of your
package (see <a href="#VPATH-Builds">VPATH Builds</a>), and then call &lsquo;<samp><span class="samp">make distclean</span></samp>&rsquo;. 
Files left in the build directory after &lsquo;<samp><span class="samp">make distclean</span></samp>&rsquo; has run
are listed after this error.

   <p>This diagnostic really covers two kinds of errors:

     <ul>
<li>files that are forgotten by distclean;
<li>distributed files that are erroneously rebuilt. 
</ul>

   <p>The former left-over files are not distributed, so the fix is to mark
them for cleaning (see <a href="#Clean">Clean</a>), this is obvious and doesn't deserve
more explanations.

   <p>The latter bug is not always easy to understand and fix, so let's
proceed with an example.  Suppose our package contains a program for
which we want to build a man page using <samp><span class="command">help2man</span></samp>.  GNU
<samp><span class="command">help2man</span></samp> produces simple manual pages from the <samp><span class="option">--help</span></samp>
and <samp><span class="option">--version</span></samp> output of other commands (see <a href="help2man.html#Top">Overview</a>).  Because we don't want to force our
users to install <samp><span class="command">help2man</span></samp>, we decide to distribute the
generated man page using the following setup.

<pre class="example">     # This Makefile.am is bogus.
     bin_PROGRAMS = foo
     foo_SOURCES = foo.c
     dist_man_MANS = foo.1
     
     foo.1: foo$(EXEEXT)
             help2man --output=foo.1 ./foo$(EXEEXT)
</pre>
   <p>This will effectively distribute the man page.  However,
&lsquo;<samp><span class="samp">make distcheck</span></samp>&rsquo; will fail with:

<pre class="example">     ERROR: files left in build directory after distclean:
     ./foo.1
</pre>
   <p>Why was <samp><span class="file">foo.1</span></samp> rebuilt?  Because although distributed,
<samp><span class="file">foo.1</span></samp> depends on a non-distributed built file:
<samp><span class="file">foo$(EXEEXT)</span></samp>.  <samp><span class="file">foo$(EXEEXT)</span></samp> is built by the user, so it
will always appear to be newer than the distributed <samp><span class="file">foo.1</span></samp>.

   <p>&lsquo;<samp><span class="samp">make distcheck</span></samp>&rsquo; caught an inconsistency in our package.  Our
intent was to distribute <samp><span class="file">foo.1</span></samp> so users do not need to install
<samp><span class="command">help2man</span></samp>, however since this rule causes this file to be
always rebuilt, users <em>do</em> need <samp><span class="command">help2man</span></samp>.  Either we
should ensure that <samp><span class="file">foo.1</span></samp> is not rebuilt by users, or there is
no point in distributing <samp><span class="file">foo.1</span></samp>.

   <p>More generally, the rule is that distributed files should never depend
on non-distributed built files.  If you distribute something
generated, distribute its sources.

   <p>One way to fix the above example, while still distributing
<samp><span class="file">foo.1</span></samp> is to not depend on <samp><span class="file">foo$(EXEEXT)</span></samp>.  For instance,
assuming <samp><span class="command">foo --version</span></samp> and <samp><span class="command">foo --help</span></samp> do not
change unless <samp><span class="file">foo.c</span></samp> or <samp><span class="file">configure.ac</span></samp> change, we could
write the following <samp><span class="file">Makefile.am</span></samp>:

<pre class="example">     bin_PROGRAMS = foo
     foo_SOURCES = foo.c
     dist_man_MANS = foo.1
     
     foo.1: foo.c $(top_srcdir)/configure.ac
             $(MAKE) $(AM_MAKEFLAGS) foo$(EXEEXT)
             help2man --output=foo.1 ./foo$(EXEEXT)
</pre>
   <p>This way, <samp><span class="file">foo.1</span></samp> will not get rebuilt every time
<samp><span class="file">foo$(EXEEXT)</span></samp> changes.  The <samp><span class="command">make</span></samp> call makes sure
<samp><span class="file">foo$(EXEEXT)</span></samp> is up-to-date before <samp><span class="command">help2man</span></samp>.  Another
way to ensure this would be to use separate directories for binaries
and man pages, and set <code>SUBDIRS</code> so that binaries are built
before man pages.

   <p>We could also decide not to distribute <samp><span class="file">foo.1</span></samp>.  In
this case it's fine to have <samp><span class="file">foo.1</span></samp> dependent upon
<samp><span class="file">foo$(EXEEXT)</span></samp>, since both will have to be rebuilt. 
However it would be impossible to build the package in a
cross-compilation, because building <samp><span class="file">foo.1</span></samp> involves
an <em>execution</em> of <samp><span class="file">foo$(EXEEXT)</span></samp>.

   <p>Another context where such errors are common is when distributed files
are built by tools that are built by the package.  The pattern is
similar:

<pre class="example">     distributed-file: built-tools distributed-sources
             build-command
</pre>
   <p class="noindent">should be changed to

<pre class="example">     distributed-file: distributed-sources
             $(MAKE) $(AM_MAKEFLAGS) built-tools
             build-command
</pre>
   <p class="noindent">or you could choose not to distribute <samp><span class="file">distributed-file</span></samp>, if
cross-compilation does not matter.

   <p>The points made through these examples are worth a summary:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
     <ul>
<li>Distributed files should never depend upon non-distributed built
files. 
<li>Distributed files should be distributed with all their dependencies. 
<li>If a file is <em>intended</em> to be rebuilt by users, then there is no point
in distributing it. 
</ul>
   </td></tr></table>

   <p><a name="index-distcleancheck_005flistfiles-1126"></a>For desperate cases, it's always possible to disable this check by
setting <code>distcleancheck_listfiles</code> as documented in <a href="#Checking-the-Distribution">Checking the Distribution</a>. 
Make sure you do understand the reason why &lsquo;<samp><span class="samp">make distcheck</span></samp>&rsquo;
complains before you do this.  <code>distcleancheck_listfiles</code> is a
way to <em>hide</em> errors, not to fix them.  You can always do better.

<div class="node">
<a name="Flag-Variables-Ordering"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Renamed-Objects">Renamed Objects</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Errors-with-distclean">Errors with distclean</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>

</div>

<h3 class="section">28.6 Flag Variables Ordering</h3>

<p><a name="index-Ordering-flag-variables-1127"></a><a name="index-Flag-variables_002c-ordering-1128"></a>
<pre class="display">     What is the difference between <code>AM_CFLAGS</code>, <code>CFLAGS</code>, and
     <code>mumble_CFLAGS</code>?
</pre>
   <pre class="display">     Why does <samp><span class="command">automake</span></samp> output <code>CPPFLAGS</code> after
     <code>AM_CPPFLAGS</code> on compile lines?  Shouldn't it be the converse?
</pre>
   <pre class="display">     My <samp><span class="file">configure</span></samp> adds some warning flags into <code>CXXFLAGS</code>.  In
     one <samp><span class="file">Makefile.am</span></samp> I would like to append a new flag, however if I
     put the flag into <code>AM_CXXFLAGS</code> it is prepended to the other
     flags, not appended.
</pre>
   <h4 class="subheading">Compile Flag Variables</h4>

<p><a name="index-Flag-Variables_002c-Ordering-1129"></a><a name="index-Compile-Flag-Variables-1130"></a><a name="index-g_t_0040code_007bAM_005fCCASFLAGS_007d-and-_0040code_007bCCASFLAGS_007d-1131"></a><a name="index-g_t_0040code_007bAM_005fCFLAGS_007d-and-_0040code_007bCFLAGS_007d-1132"></a><a name="index-g_t_0040code_007bAM_005fCPPFLAGS_007d-and-_0040code_007bCPPFLAGS_007d-1133"></a><a name="index-g_t_0040code_007bAM_005fCXXFLAGS_007d-and-_0040code_007bCXXFLAGS_007d-1134"></a><a name="index-g_t_0040code_007bAM_005fFCFLAGS_007d-and-_0040code_007bFCFLAGS_007d-1135"></a><a name="index-g_t_0040code_007bAM_005fFFLAGS_007d-and-_0040code_007bFFLAGS_007d-1136"></a><a name="index-g_t_0040code_007bAM_005fGCJFLAGS_007d-and-_0040code_007bGCJFLAGS_007d-1137"></a><a name="index-g_t_0040code_007bAM_005fLDFLAGS_007d-and-_0040code_007bLDFLAGS_007d-1138"></a><a name="index-g_t_0040code_007bAM_005fLFLAGS_007d-and-_0040code_007bLFLAGS_007d-1139"></a><a name="index-g_t_0040code_007bAM_005fLIBTOOLFLAGS_007d-and-_0040code_007bLIBTOOLFLAGS_007d-1140"></a><a name="index-g_t_0040code_007bAM_005fOBJCFLAGS_007d-and-_0040code_007bOBJCFLAGS_007d-1141"></a><a name="index-g_t_0040code_007bAM_005fOBJCXXFLAGS_007d-and-_0040code_007bOBJXXCFLAGS_007d-1142"></a><a name="index-g_t_0040code_007bAM_005fRFLAGS_007d-and-_0040code_007bRFLAGS_007d-1143"></a><a name="index-g_t_0040code_007bAM_005fUPCFLAGS_007d-and-_0040code_007bUPCFLAGS_007d-1144"></a><a name="index-g_t_0040code_007bAM_005fYFLAGS_007d-and-_0040code_007bYFLAGS_007d-1145"></a><a name="index-g_t_0040code_007bCCASFLAGS_007d-and-_0040code_007bAM_005fCCASFLAGS_007d-1146"></a><a name="index-g_t_0040code_007bCFLAGS_007d-and-_0040code_007bAM_005fCFLAGS_007d-1147"></a><a name="index-g_t_0040code_007bCPPFLAGS_007d-and-_0040code_007bAM_005fCPPFLAGS_007d-1148"></a><a name="index-g_t_0040code_007bCXXFLAGS_007d-and-_0040code_007bAM_005fCXXFLAGS_007d-1149"></a><a name="index-g_t_0040code_007bFCFLAGS_007d-and-_0040code_007bAM_005fFCFLAGS_007d-1150"></a><a name="index-g_t_0040code_007bFFLAGS_007d-and-_0040code_007bAM_005fFFLAGS_007d-1151"></a><a name="index-g_t_0040code_007bGCJFLAGS_007d-and-_0040code_007bAM_005fGCJFLAGS_007d-1152"></a><a name="index-g_t_0040code_007bLDFLAGS_007d-and-_0040code_007bAM_005fLDFLAGS_007d-1153"></a><a name="index-g_t_0040code_007bLFLAGS_007d-and-_0040code_007bAM_005fLFLAGS_007d-1154"></a><a name="index-g_t_0040code_007bLIBTOOLFLAGS_007d-and-_0040code_007bAM_005fLIBTOOLFLAGS_007d-1155"></a><a name="index-g_t_0040code_007bOBJCFLAGS_007d-and-_0040code_007bAM_005fOBJCFLAGS_007d-1156"></a><a name="index-g_t_0040code_007bOBJCXXFLAGS_007d-and-_0040code_007bAM_005fOBJCXXFLAGS_007d-1157"></a><a name="index-g_t_0040code_007bRFLAGS_007d-and-_0040code_007bAM_005fRFLAGS_007d-1158"></a><a name="index-g_t_0040code_007bUPCFLAGS_007d-and-_0040code_007bAM_005fUPCFLAGS_007d-1159"></a><a name="index-g_t_0040code_007bYFLAGS_007d-and-_0040code_007bAM_005fYFLAGS_007d-1160"></a>
This section attempts to answer all the above questions.  We will
mostly discuss <code>CPPFLAGS</code> in our examples, but actually the
answer holds for all the compile flags used in Automake:
<code>CCASFLAGS</code>, <code>CFLAGS</code>, <code>CPPFLAGS</code>, <code>CXXFLAGS</code>,
<code>FCFLAGS</code>, <code>FFLAGS</code>, <code>GCJFLAGS</code>, <code>LDFLAGS</code>,
<code>LFLAGS</code>, <code>LIBTOOLFLAGS</code>, <code>OBJCFLAGS</code>, <code>OBJCXXFLAGS</code>,
<code>RFLAGS</code>, <code>UPCFLAGS</code>, and <code>YFLAGS</code>.

   <p><code>CPPFLAGS</code>, <code>AM_CPPFLAGS</code>, and <code>mumble_CPPFLAGS</code> are
three variables that can be used to pass flags to the C preprocessor
(actually these variables are also used for other languages like C++
or preprocessed Fortran).  <code>CPPFLAGS</code> is the user variable
(see <a href="#User-Variables">User Variables</a>), <code>AM_CPPFLAGS</code> is the Automake variable,
and <code>mumble_CPPFLAGS</code> is the variable specific to the
<code>mumble</code> target (we call this a per-target variable,
see <a href="#Program-and-Library-Variables">Program and Library Variables</a>).

   <p>Automake always uses two of these variables when compiling C sources
files.  When compiling an object file for the <code>mumble</code> target,
the first variable will be <code>mumble_CPPFLAGS</code> if it is defined, or
<code>AM_CPPFLAGS</code> otherwise.  The second variable is always
<code>CPPFLAGS</code>.

   <p>In the following example,

<pre class="example">     bin_PROGRAMS = foo bar
     foo_SOURCES = xyz.c
     bar_SOURCES = main.c
     foo_CPPFLAGS = -DFOO
     AM_CPPFLAGS = -DBAZ
</pre>
   <p class="noindent"><samp><span class="file">xyz.o</span></samp> will be compiled with &lsquo;<samp><span class="samp">$(foo_CPPFLAGS) $(CPPFLAGS)</span></samp>&rsquo;,
(because <samp><span class="file">xyz.o</span></samp> is part of the <code>foo</code> target), while
<samp><span class="file">main.o</span></samp> will be compiled with &lsquo;<samp><span class="samp">$(AM_CPPFLAGS) $(CPPFLAGS)</span></samp>&rsquo;
(because there is no per-target variable for target <code>bar</code>).

   <p>The difference between <code>mumble_CPPFLAGS</code> and <code>AM_CPPFLAGS</code>
being clear enough, let's focus on <code>CPPFLAGS</code>.  <code>CPPFLAGS</code>
is a user variable, i.e., a variable that users are entitled to modify
in order to compile the package.  This variable, like many others,
is documented at the end of the output of &lsquo;<samp><span class="samp">configure --help</span></samp>&rsquo;.

   <p>For instance, someone who needs to add <samp><span class="file">/home/my/usr/include</span></samp> to
the C compiler's search path would configure a package with

<pre class="example">     ./configure CPPFLAGS='-I /home/my/usr/include'
</pre>
   <p class="noindent">and this flag would be propagated to the compile rules of all
<samp><span class="file">Makefile</span></samp>s.

   <p>It is also not uncommon to override a user variable at
<samp><span class="command">make</span></samp>-time.  Many installers do this with <code>prefix</code>, but
this can be useful with compiler flags too.  For instance, if, while
debugging a C++ project, you need to disable optimization in one
specific object file, you can run something like

<pre class="example">     rm file.o
     make CXXFLAGS=-O0 file.o
     make
</pre>
   <p>The reason &lsquo;<samp><span class="samp">$(CPPFLAGS)</span></samp>&rsquo; appears after &lsquo;<samp><span class="samp">$(AM_CPPFLAGS)</span></samp>&rsquo; or
&lsquo;<samp><span class="samp">$(mumble_CPPFLAGS)</span></samp>&rsquo; in the compile command is that users
should always have the last say.  It probably makes more sense if you
think about it while looking at the &lsquo;<samp><span class="samp">CXXFLAGS=-O0</span></samp>&rsquo; above, which
should supersede any other switch from <code>AM_CXXFLAGS</code> or
<code>mumble_CXXFLAGS</code> (and this of course replaces the previous value
of <code>CXXFLAGS</code>).

   <p>You should never redefine a user variable such as <code>CPPFLAGS</code> in
<samp><span class="file">Makefile.am</span></samp>.  Use &lsquo;<samp><span class="samp">automake -Woverride</span></samp>&rsquo; to diagnose such
mistakes.  Even something like

<pre class="example">     CPPFLAGS = -DDATADIR=\"$(datadir)\" @CPPFLAGS@
</pre>
   <p class="noindent">is erroneous.  Although this preserves <samp><span class="file">configure</span></samp>'s value of
<code>CPPFLAGS</code>, the definition of <code>DATADIR</code> will disappear if a
user attempts to override <code>CPPFLAGS</code> from the <samp><span class="command">make</span></samp>
command line.

<pre class="example">     AM_CPPFLAGS = -DDATADIR=\"$(datadir)\"
</pre>
   <p class="noindent">is all that is needed here if no per-target flags are used.

   <p>You should not add options to these user variables within
<samp><span class="file">configure</span></samp> either, for the same reason.  Occasionally you need
to modify these variables to perform a test, but you should reset
their values afterwards.  In contrast, it is OK to modify the
&lsquo;<samp><span class="samp">AM_</span></samp>&rsquo; variables within <samp><span class="file">configure</span></samp> if you <code>AC_SUBST</code>
them, but it is rather rare that you need to do this, unless you
really want to change the default definitions of the &lsquo;<samp><span class="samp">AM_</span></samp>&rsquo;
variables in all <samp><span class="file">Makefile</span></samp>s.

   <p>What we recommend is that you define extra flags in separate
variables.  For instance, you may write an Autoconf macro that computes
a set of warning options for the C compiler, and <code>AC_SUBST</code> them
in <code>WARNINGCFLAGS</code>; you may also have an Autoconf macro that
determines which compiler and which linker flags should be used to
link with library <samp><span class="file">libfoo</span></samp>, and <code>AC_SUBST</code> these in
<code>LIBFOOCFLAGS</code> and <code>LIBFOOLDFLAGS</code>.  Then, a
<samp><span class="file">Makefile.am</span></samp> could use these variables as follows:

<pre class="example">     AM_CFLAGS = $(WARNINGCFLAGS)
     bin_PROGRAMS = prog1 prog2
     prog1_SOURCES = ...
     prog2_SOURCES = ...
     prog2_CFLAGS = $(LIBFOOCFLAGS) $(AM_CFLAGS)
     prog2_LDFLAGS = $(LIBFOOLDFLAGS)
</pre>
   <p>In this example both programs will be compiled with the flags
substituted into &lsquo;<samp><span class="samp">$(WARNINGCFLAGS)</span></samp>&rsquo;, and <code>prog2</code> will
additionally be compiled with the flags required to link with
<samp><span class="file">libfoo</span></samp>.

   <p>Note that listing <code>AM_CFLAGS</code> in a per-target <code>CFLAGS</code>
variable is a common idiom to ensure that <code>AM_CFLAGS</code> applies to
every target in a <samp><span class="file">Makefile.in</span></samp>.

   <p>Using variables like this gives you full control over the ordering of
the flags.  For instance, if there is a flag in $(WARNINGCFLAGS) that
you want to negate for a particular target, you can use something like
&lsquo;<samp><span class="samp">prog1_CFLAGS = $(AM_CFLAGS) -no-flag</span></samp>&rsquo;.  If all of these flags had
been forcefully appended to <code>CFLAGS</code>, there would be no way to
disable one flag.  Yet another reason to leave user variables to
users.

   <p>Finally, we have avoided naming the variable of the example
<code>LIBFOO_LDFLAGS</code> (with an underscore) because that would cause
Automake to think that this is actually a per-target variable (like
<code>mumble_LDFLAGS</code>) for some non-declared <code>LIBFOO</code> target.

<h4 class="subheading">Other Variables</h4>

<p>There are other variables in Automake that follow similar principles
to allow user options.  For instance, Texinfo rules (see <a href="#Texinfo">Texinfo</a>)
use <code>MAKEINFOFLAGS</code> and <code>AM_MAKEINFOFLAGS</code>.  Similarly,
DejaGnu tests (see <a href="#DejaGnu-Tests">DejaGnu Tests</a>) use <code>RUNTESTDEFAULTFLAGS</code> and
<code>AM_RUNTESTDEFAULTFLAGS</code>.  The tags and ctags rules
(see <a href="#Tags">Tags</a>) use <code>ETAGSFLAGS</code>, <code>AM_ETAGSFLAGS</code>,
<code>CTAGSFLAGS</code>, and <code>AM_CTAGSFLAGS</code>.  Java rules
(see <a href="#Java">Java</a>) use <code>JAVACFLAGS</code> and <code>AM_JAVACFLAGS</code>.  None
of these rules support per-target flags (yet).

   <p>To some extent, even <code>AM_MAKEFLAGS</code> (see <a href="#Subdirectories">Subdirectories</a>)
obeys this naming scheme.  The slight difference is that
<code>MAKEFLAGS</code> is passed to sub-<samp><span class="command">make</span></samp>s implicitly by
<samp><span class="command">make</span></samp> itself.

   <p>However you should not think that all variables ending with
<code>FLAGS</code> follow this convention.  For instance,
<code>DISTCHECK_CONFIGURE_FLAGS</code> (see <a href="#Checking-the-Distribution">Checking the Distribution</a>) and
<code>ACLOCAL_AMFLAGS</code> (see <a href="#Rebuilding">Rebuilding</a> and <a href="#Local-Macros">Local Macros</a>),
are two variables that are only useful to the maintainer and have no
user counterpart.

   <p><code>ARFLAGS</code> (see <a href="#A-Library">A Library</a>) is usually defined by Automake and
has neither <code>AM_</code> nor per-target cousin.

   <p>Finally you should not think that the existence of a per-target
variable implies the existence of an <code>AM_</code> variable or of a user
variable.  For instance, the <code>mumble_LDADD</code> per-target variable
overrides the makefile-wide <code>LDADD</code> variable (which is not a user
variable), and <code>mumble_LIBADD</code> exists only as a per-target
variable.  See <a href="#Program-and-Library-Variables">Program and Library Variables</a>.

<div class="node">
<a name="Renamed-Objects"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Per_002dObject-Flags">Per-Object Flags</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Flag-Variables-Ordering">Flag Variables Ordering</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>

</div>

<h3 class="section">28.7 Why are object files sometimes renamed?</h3>

<p>This happens when per-target compilation flags are used.  Object
files need to be renamed just in case they would clash with object
files compiled from the same sources, but with different flags. 
Consider the following example.

<pre class="example">     bin_PROGRAMS = true false
     true_SOURCES = generic.c
     true_CPPFLAGS = -DEXIT_CODE=0
     false_SOURCES = generic.c
     false_CPPFLAGS = -DEXIT_CODE=1
</pre>
   <p class="noindent">Obviously the two programs are built from the same source, but it
would be bad if they shared the same object, because <samp><span class="file">generic.o</span></samp>
cannot be built with both &lsquo;<samp><span class="samp">-DEXIT_CODE=0</span></samp>&rsquo; <em>and</em>
&lsquo;<samp><span class="samp">-DEXIT_CODE=1</span></samp>&rsquo;.  Therefore <samp><span class="command">automake</span></samp> outputs rules to
build two different objects: <samp><span class="file">true-generic.o</span></samp> and
<samp><span class="file">false-generic.o</span></samp>.

   <p><samp><span class="command">automake</span></samp> doesn't actually look whether source files are
shared to decide if it must rename objects.  It will just rename all
objects of a target as soon as it sees per-target compilation flags
used.

   <p>It's OK to share object files when per-target compilation flags are not
used.  For instance, <samp><span class="file">true</span></samp> and <samp><span class="file">false</span></samp> will both use
<samp><span class="file">version.o</span></samp> in the following example.

<pre class="example">     AM_CPPFLAGS = -DVERSION=1.0
     bin_PROGRAMS = true false
     true_SOURCES = true.c version.c
     false_SOURCES = false.c version.c
</pre>
   <p>Note that the renaming of objects is also affected by the
<code>_SHORTNAME</code> variable (see <a href="#Program-and-Library-Variables">Program and Library Variables</a>).

<div class="node">
<a name="Per-Object-Flags"></a>
<a name="Per_002dObject-Flags"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Multiple-Outputs">Multiple Outputs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Renamed-Objects">Renamed Objects</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>

</div>

<h3 class="section">28.8 Per-Object Flags Emulation</h3>

<p><a name="index-Per_002dobject-flags_002c-emulated-1161"></a>
<pre class="display">     One of my source files needs to be compiled with different flags.  How
     do I do?
</pre>
   <p>Automake supports per-program and per-library compilation flags (see
<a href="#Program-and-Library-Variables">Program and Library Variables</a> and <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a>).  With this you can define compilation flags that apply to
all files compiled for a target.  For instance, in

<pre class="example">     bin_PROGRAMS = foo
     foo_SOURCES = foo.c foo.h bar.c bar.h main.c
     foo_CFLAGS = -some -flags
</pre>
   <p class="noindent"><samp><span class="file">foo-foo.o</span></samp>, <samp><span class="file">foo-bar.o</span></samp>, and <samp><span class="file">foo-main.o</span></samp> will all be
compiled with &lsquo;<samp><span class="samp">-some -flags</span></samp>&rsquo;.  (If you wonder about the names of
these object files, see <a href="#Renamed-Objects">Renamed Objects</a>.)  Note that
<code>foo_CFLAGS</code> gives the flags to use when compiling all the C
sources of the <em>program</em> <code>foo</code>, it has nothing to do with
<samp><span class="file">foo.c</span></samp> or <samp><span class="file">foo-foo.o</span></samp> specifically.

   <p>What if <samp><span class="file">foo.c</span></samp> needs to be compiled into <samp><span class="file">foo.o</span></samp> using some
specific flags, that none of the other files requires?  Obviously
per-program flags are not directly applicable here.  Something like
per-object flags are expected, i.e., flags that would be used only
when creating <samp><span class="file">foo-foo.o</span></samp>.  Automake does not support that,
however this is easy to simulate using a library that contains only
that object, and compiling this library with per-library flags.

<pre class="example">     bin_PROGRAMS = foo
     foo_SOURCES = bar.c bar.h main.c
     foo_CFLAGS = -some -flags
     foo_LDADD = libfoo.a
     noinst_LIBRARIES = libfoo.a
     libfoo_a_SOURCES = foo.c foo.h
     libfoo_a_CFLAGS = -some -other -flags
</pre>
   <p>Here <samp><span class="file">foo-bar.o</span></samp> and <samp><span class="file">foo-main.o</span></samp> will all be
compiled with &lsquo;<samp><span class="samp">-some -flags</span></samp>&rsquo;, while <samp><span class="file">libfoo_a-foo.o</span></samp> will
be compiled using &lsquo;<samp><span class="samp">-some -other -flags</span></samp>&rsquo;.  Eventually, all
three objects will be linked to form <samp><span class="file">foo</span></samp>.

   <p>This trick can also be achieved using Libtool convenience libraries,
for instance &lsquo;<samp><span class="samp">noinst_LTLIBRARIES = libfoo.la</span></samp>&rsquo; (see <a href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a>).

   <p>Another tempting idea to implement per-object flags is to override the
compile rules <samp><span class="command">automake</span></samp> would output for these files. 
Automake will not define a rule for a target you have defined, so you
could think about defining the &lsquo;<samp><span class="samp">foo-foo.o: foo.c</span></samp>&rsquo; rule yourself. 
We recommend against this, because this is error prone.  For instance,
if you add such a rule to the first example, it will break the day you
decide to remove <code>foo_CFLAGS</code> (because <samp><span class="file">foo.c</span></samp> will then be
compiled as <samp><span class="file">foo.o</span></samp> instead of <samp><span class="file">foo-foo.o</span></samp>, see <a href="#Renamed-Objects">Renamed Objects</a>).  Also in order to support dependency tracking, the two
<samp><span class="file">.o</span></samp>/<samp><span class="file">.obj</span></samp> extensions, and all the other flags variables
involved in a compilation, you will end up modifying a copy of the
rule previously output by <samp><span class="command">automake</span></samp> for this file.  If a new
release of Automake generates a different rule, your copy will need to
be updated by hand.

<div class="node">
<a name="Multiple-Outputs"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Hard_002dCoded-Install-Paths">Hard-Coded Install Paths</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Per_002dObject-Flags">Per-Object Flags</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>

</div>

<h3 class="section">28.9 Handling Tools that Produce Many Outputs</h3>

<p><a name="index-multiple-outputs_002c-rules-with-1162"></a><a name="index-many-outputs_002c-rules-with-1163"></a><a name="index-rules-with-multiple-outputs-1164"></a>
This section describes a <samp><span class="command">make</span></samp> idiom that can be used when a
tool produces multiple output files.  It is not specific to Automake
and can be used in ordinary <samp><span class="file">Makefile</span></samp>s.

   <p>Suppose we have a program called <samp><span class="command">foo</span></samp> that will read one file
called <samp><span class="file">data.foo</span></samp> and produce two files named <samp><span class="file">data.c</span></samp> and
<samp><span class="file">data.h</span></samp>.  We want to write a <samp><span class="file">Makefile</span></samp> rule that captures
this one-to-two dependency.

   <p>The naive rule is incorrect:

<pre class="example">     # This is incorrect.
     data.c data.h: data.foo
             foo data.foo
</pre>
   <p class="noindent">What the above rule really says is that <samp><span class="file">data.c</span></samp> and
<samp><span class="file">data.h</span></samp> each depend on <samp><span class="file">data.foo</span></samp>, and can each be built by
running &lsquo;<samp><span class="samp">foo data.foo</span></samp>&rsquo;.  In other words it is equivalent to:

<pre class="example">     # We do not want this.
     data.c: data.foo
             foo data.foo
     data.h: data.foo
             foo data.foo
</pre>
   <p class="noindent">which means that <samp><span class="command">foo</span></samp> can be run twice.  Usually it will not
be run twice, because <samp><span class="command">make</span></samp> implementations are smart enough
to check for the existence of the second file after the first one has
been built; they will therefore detect that it already exists. 
However there are a few situations where it can run twice anyway:

     <ul>
<li>The most worrying case is when running a parallel <samp><span class="command">make</span></samp>.  If
<samp><span class="file">data.c</span></samp> and <samp><span class="file">data.h</span></samp> are built in parallel, two &lsquo;<samp><span class="samp">foo
data.foo</span></samp>&rsquo; commands will run concurrently.  This is harmful. 
<li>Another case is when the dependency (here <samp><span class="file">data.foo</span></samp>) is
(or depends upon) a phony target. 
</ul>

   <p>A solution that works with parallel <samp><span class="command">make</span></samp> but not with
phony dependencies is the following:

<pre class="example">     data.c data.h: data.foo
             foo data.foo
     data.h: data.c
</pre>
   <p class="noindent">The above rules are equivalent to

<pre class="example">     data.c: data.foo
             foo data.foo
     data.h: data.foo data.c
             foo data.foo
</pre>
   <p class="noindent">therefore a parallel <samp><span class="command">make</span></samp> will have to serialize the builds
of <samp><span class="file">data.c</span></samp> and <samp><span class="file">data.h</span></samp>, and will detect that the second is
no longer needed once the first is over.

   <p>Using this pattern is probably enough for most cases.  However it does
not scale easily to more output files (in this scheme all output files
must be totally ordered by the dependency relation), so we will
explore a more complicated solution.

   <p>Another idea is to write the following:

<pre class="example">     # There is still a problem with this one.
     data.c: data.foo
             foo data.foo
     data.h: data.c
</pre>
   <p class="noindent">The idea is that &lsquo;<samp><span class="samp">foo data.foo</span></samp>&rsquo; is run only when <samp><span class="file">data.c</span></samp>
needs to be updated, but we further state that <samp><span class="file">data.h</span></samp> depends
upon <samp><span class="file">data.c</span></samp>.  That way, if <samp><span class="file">data.h</span></samp> is required and
<samp><span class="file">data.foo</span></samp> is out of date, the dependency on <samp><span class="file">data.c</span></samp> will
trigger the build.

   <p>This is almost perfect, but suppose we have built <samp><span class="file">data.h</span></samp> and
<samp><span class="file">data.c</span></samp>, and then we erase <samp><span class="file">data.h</span></samp>.  Then, running
&lsquo;<samp><span class="samp">make data.h</span></samp>&rsquo; will not rebuild <samp><span class="file">data.h</span></samp>.  The above rules
just state that <samp><span class="file">data.c</span></samp> must be up-to-date with respect to
<samp><span class="file">data.foo</span></samp>, and this is already the case.

   <p>What we need is a rule that forces a rebuild when <samp><span class="file">data.h</span></samp> is
missing.  Here it is:

<pre class="example">     data.c: data.foo
             foo data.foo
     data.h: data.c
     ## Recover from the removal of $@
             @if test -f $@; then :; else \
               rm -f data.c; \
               $(MAKE) $(AM_MAKEFLAGS) data.c; \
             fi
</pre>
   <p>The above scheme can be extended to handle more outputs and more
inputs.  One of the outputs is selected to serve as a witness to the
successful completion of the command, it depends upon all inputs, and
all other outputs depend upon it.  For instance, if <samp><span class="command">foo</span></samp>
should additionally read <samp><span class="file">data.bar</span></samp> and also produce
<samp><span class="file">data.w</span></samp> and <samp><span class="file">data.x</span></samp>, we would write:

<pre class="example">     data.c: data.foo data.bar
             foo data.foo data.bar
     data.h data.w data.x: data.c
     ## Recover from the removal of $@
             @if test -f $@; then :; else \
               rm -f data.c; \
               $(MAKE) $(AM_MAKEFLAGS) data.c; \
             fi
</pre>
   <p>However there are now three minor problems in this setup.  One is related
to the timestamp ordering of <samp><span class="file">data.h</span></samp>, <samp><span class="file">data.w</span></samp>,
<samp><span class="file">data.x</span></samp>, and <samp><span class="file">data.c</span></samp>.  Another one is a race condition
if a parallel <samp><span class="command">make</span></samp> attempts to run multiple instances of the
recover block at once.  Finally, the recursive rule breaks &lsquo;<samp><span class="samp">make -n</span></samp>&rsquo;
when run with GNU <samp><span class="command">make</span></samp> (as well as some other <samp><span class="command">make</span></samp>
implementations), as it may remove <samp><span class="file">data.h</span></samp> even when it should not
(see <a href="make.html#MAKE-Variable">How the <code>MAKE</code> Variable Works</a>).

   <p>Let us deal with the first problem.  <samp><span class="command">foo</span></samp> outputs four files,
but we do not know in which order these files are created.  Suppose
that <samp><span class="file">data.h</span></samp> is created before <samp><span class="file">data.c</span></samp>.  Then we have a
weird situation.  The next time <samp><span class="command">make</span></samp> is run, <samp><span class="file">data.h</span></samp>
will appear older than <samp><span class="file">data.c</span></samp>, the second rule will be
triggered, a shell will be started to execute the &lsquo;<samp><span class="samp">if...fi</span></samp>&rsquo;
command, but actually it will just execute the <code>then</code> branch,
that is: nothing.  In other words, because the witness we selected is
not the first file created by <samp><span class="command">foo</span></samp>, <samp><span class="command">make</span></samp> will start
a shell to do nothing each time it is run.

   <p>A simple riposte is to fix the timestamps when this happens.

<pre class="example">     data.c: data.foo data.bar
             foo data.foo data.bar
     data.h data.w data.x: data.c
             @if test -f $@; then \
               touch $@; \
             else \
     ## Recover from the removal of $@
               rm -f data.c; \
               $(MAKE) $(AM_MAKEFLAGS) data.c; \
             fi
</pre>
   <p>Another solution is to use a different and dedicated file as witness,
rather than using any of <samp><span class="command">foo</span></samp>'s outputs.

<pre class="example">     data.stamp: data.foo data.bar
             @rm -f data.tmp
             @touch data.tmp
             foo data.foo data.bar
             @mv -f data.tmp $@
     data.c data.h data.w data.x: data.stamp
     ## Recover from the removal of $@
             @if test -f $@; then :; else \
               rm -f data.stamp; \
               $(MAKE) $(AM_MAKEFLAGS) data.stamp; \
             fi
</pre>
   <p><samp><span class="file">data.tmp</span></samp> is created before <samp><span class="command">foo</span></samp> is run, so it has a
timestamp older than output files output by <samp><span class="command">foo</span></samp>.  It is then
renamed to <samp><span class="file">data.stamp</span></samp> after <samp><span class="command">foo</span></samp> has run, because we
do not want to update <samp><span class="file">data.stamp</span></samp> if <samp><span class="command">foo</span></samp> fails.

   <p>This solution still suffers from the second problem: the race
condition in the recover rule.  If, after a successful build, a user
erases <samp><span class="file">data.c</span></samp> and <samp><span class="file">data.h</span></samp>, and runs &lsquo;<samp><span class="samp">make -j</span></samp>&rsquo;, then
<samp><span class="command">make</span></samp> may start both recover rules in parallel.  If the two
instances of the rule execute &lsquo;<samp><span class="samp">$(MAKE) $(AM_MAKEFLAGS)
data.stamp</span></samp>&rsquo; concurrently the build is likely to fail (for instance, the
two rules will create <samp><span class="file">data.tmp</span></samp>, but only one can rename it).

   <p>Admittedly, such a weird situation does not arise during ordinary
builds.  It occurs only when the build tree is mutilated.  Here
<samp><span class="file">data.c</span></samp> and <samp><span class="file">data.h</span></samp> have been explicitly removed without
also removing <samp><span class="file">data.stamp</span></samp> and the other output files. 
<code>make clean; make</code> will always recover from these situations even
with parallel makes, so you may decide that the recover rule is solely
to help non-parallel make users and leave things as-is.  Fixing this
requires some locking mechanism to ensure only one instance of the
recover rule rebuilds <samp><span class="file">data.stamp</span></samp>.  One could imagine something
along the following lines.

<pre class="example">     data.c data.h data.w data.x: data.stamp
     ## Recover from the removal of $@
             @if test -f $@; then :; else \
               trap 'rm -rf data.lock data.stamp' 1 2 13 15; \
     ## mkdir is a portable test-and-set
               if mkdir data.lock 2&gt;/dev/null; then \
     ## This code is being executed by the first process.
                 rm -f data.stamp; \
                 $(MAKE) $(AM_MAKEFLAGS) data.stamp; \
                 result=$$?; rm -rf data.lock; exit $$result; \
               else \
     ## This code is being executed by the follower processes.
     ## Wait until the first process is done.
                 while test -d data.lock; do sleep 1; done; \
     ## Succeed if and only if the first process succeeded.
                 test -f data.stamp; \
               fi; \
             fi
</pre>
   <p>Using a dedicated witness, like <samp><span class="file">data.stamp</span></samp>, is very handy when
the list of output files is not known beforehand.  As an illustration,
consider the following rules to compile many <samp><span class="file">*.el</span></samp> files into
<samp><span class="file">*.elc</span></samp> files in a single command.  It does not matter how
<code>ELFILES</code> is defined (as long as it is not empty: empty targets
are not accepted by POSIX).

<pre class="example">     ELFILES = one.el two.el three.el ...
     ELCFILES = $(ELFILES:=c)
     
     elc-stamp: $(ELFILES)
             @rm -f elc-temp
             @touch elc-temp
             $(elisp_comp) $(ELFILES)
             @mv -f elc-temp $@
     
     $(ELCFILES): elc-stamp
             @if test -f $@; then :; else \
     ## Recover from the removal of $@
               trap 'rm -rf elc-lock elc-stamp' 1 2 13 15; \
               if mkdir elc-lock 2&gt;/dev/null; then \
     ## This code is being executed by the first process.
                 rm -f elc-stamp; \
                 $(MAKE) $(AM_MAKEFLAGS) elc-stamp; \
                 rmdir elc-lock; \
               else \
     ## This code is being executed by the follower processes.
     ## Wait until the first process is done.
                 while test -d elc-lock; do sleep 1; done; \
     ## Succeed if and only if the first process succeeded.
                 test -f elc-stamp; exit $$?; \
     <!-- $$ -->
               fi; \
             fi
</pre>
   <p>These solutions all still suffer from the third problem, namely that
they break the promise that &lsquo;<samp><span class="samp">make -n</span></samp>&rsquo; should not cause any actual
changes to the tree.  For those solutions that do not create lock files,
it is possible to split the recover rules into two separate recipe
commands, one of which does all work but the recursion, and the
other invokes the recursive &lsquo;<samp><span class="samp">$(MAKE)</span></samp>&rsquo;.  The solutions involving
locking could act upon the contents of the &lsquo;<samp><span class="samp">MAKEFLAGS</span></samp>&rsquo; variable,
but parsing that portably is not easy (see <a href="autoconf.html#The-Make-Macro-MAKEFLAGS">The Make Macro MAKEFLAGS</a>).  Here is an example:

<pre class="example">     ELFILES = one.el two.el three.el ...
     ELCFILES = $(ELFILES:=c)
     
     elc-stamp: $(ELFILES)
             @rm -f elc-temp
             @touch elc-temp
             $(elisp_comp) $(ELFILES)
             @mv -f elc-temp $@
     
     $(ELCFILES): elc-stamp
     ## Recover from the removal of $@
             @dry=; for f in x $$MAKEFLAGS; do \
               case $$f in \
                 *=*|--*);; \
                 *n*) dry=:;; \
               esac; \
             done; \
             if test -f $@; then :; else \
               $$dry trap 'rm -rf elc-lock elc-stamp' 1 2 13 15; \
               if $$dry mkdir elc-lock 2&gt;/dev/null; then \
     ## This code is being executed by the first process.
                 $$dry rm -f elc-stamp; \
                 $(MAKE) $(AM_MAKEFLAGS) elc-stamp; \
                 $$dry rmdir elc-lock; \
               else \
     ## This code is being executed by the follower processes.
     ## Wait until the first process is done.
                 while test -d elc-lock &amp;&amp; test -z "$$dry"; do \
     <!-- $$ -->
                   sleep 1; \
                 done; \
     ## Succeed if and only if the first process succeeded.
                 $$dry test -f elc-stamp; exit $$?; \
               fi; \
             fi
</pre>
   <p>For completeness it should be noted that GNU <samp><span class="command">make</span></samp> is able to
express rules with multiple output files using pattern rules
(see <a href="make.html#Pattern-Examples">Pattern Rule Examples</a>).  We do not discuss pattern rules here because they are not
portable, but they can be convenient in packages that assume GNU
<samp><span class="command">make</span></samp>.

<div class="node">
<a name="Hard-Coded-Install-Paths"></a>
<a name="Hard_002dCoded-Install-Paths"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Debugging-Make-Rules">Debugging Make Rules</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Multiple-Outputs">Multiple Outputs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>

</div>

<h3 class="section">28.10 Installing to Hard-Coded Locations</h3>

<pre class="display">     My package needs to install some configuration file.  I tried to use
     the following rule, but &lsquo;<samp><span class="samp">make distcheck</span></samp>&rsquo; fails.  Why?
     <pre class="example">          # Do not do this.
          install-data-local:
                  $(INSTALL_DATA) $(srcdir)/afile $(DESTDIR)/etc/afile
</pre>
</pre>
   <pre class="display">     My package needs to populate the installation directory of another
     package at install-time.  I can easily compute that installation
     directory in <samp><span class="file">configure</span></samp>, but if I install files therein,
     &lsquo;<samp><span class="samp">make distcheck</span></samp>&rsquo; fails.  How else should I do?
</pre>
   <p>These two setups share their symptoms: &lsquo;<samp><span class="samp">make distcheck</span></samp>&rsquo; fails
because they are installing files to hard-coded paths.  In the later
case the path is not really hard-coded in the package, but we can
consider it to be hard-coded in the system (or in whichever tool that
supplies the path).  As long as the path does not use any of the
standard directory variables (&lsquo;<samp><span class="samp">$(prefix)</span></samp>&rsquo;, &lsquo;<samp><span class="samp">$(bindir)</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">$(datadir)</span></samp>&rsquo;, etc.), the effect will be the same:
user-installations are impossible.

   <p>As a (non-root) user who wants to install a package, you usually have no
right to install anything in <samp><span class="file">/usr</span></samp> or <samp><span class="file">/usr/local</span></samp>.  So you
do something like &lsquo;<samp><span class="samp">./configure --prefix ~/usr</span></samp>&rsquo; to install a
package in your own <samp><span class="file">~/usr</span></samp> tree.

   <p>If a package attempts to install something to some hard-coded path
(e.g., <samp><span class="file">/etc/afile</span></samp>), regardless of this <samp><span class="option">--prefix</span></samp> setting,
then the installation will fail.  &lsquo;<samp><span class="samp">make distcheck</span></samp>&rsquo; performs such
a <samp><span class="option">--prefix</span></samp> installation, hence it will fail too.

   <p>Now, there are some easy solutions.

   <p>The above <code>install-data-local</code> example for installing
<samp><span class="file">/etc/afile</span></samp> would be better replaced by

<pre class="example">     sysconf_DATA = afile
</pre>
   <p class="noindent">by default <code>sysconfdir</code> will be &lsquo;<samp><span class="samp">$(prefix)/etc</span></samp>&rsquo;, because
this is what the GNU Standards require.  When such a package is
installed on an FHS compliant system, the installer will have to set
&lsquo;<samp><span class="samp">--sysconfdir=/etc</span></samp>&rsquo;.  As the maintainer of the package you
should not be concerned by such site policies: use the appropriate
standard directory variable to install your files so that the installer
can easily redefine these variables to match their site conventions.

   <p>Installing files that should be used by another package is slightly
more involved.  Let's take an example and assume you want to install
a shared library that is a Python extension module.  If you ask Python
where to install the library, it will answer something like this:

<pre class="example">     % <kbd>python -c 'from distutils import sysconfig;
                  print sysconfig.get_python_lib(1,0)'</kbd>
     /usr/lib/python2.5/site-packages
</pre>
   <p>If you indeed use this absolute path to install your shared library,
non-root users will not be able to install the package, hence
distcheck fails.

   <p>Let's do better.  The &lsquo;<samp><span class="samp">sysconfig.get_python_lib()</span></samp>&rsquo; function
actually accepts a third argument that will replace Python's
installation prefix.

<pre class="example">     % <kbd>python -c 'from distutils import sysconfig;
                  print sysconfig.get_python_lib(1,0,"${exec_prefix}")'</kbd>
     ${exec_prefix}/lib/python2.5/site-packages
</pre>
   <p>You can also use this new path.  If you do
     <ul>
<li>root users can install your package with the same <samp><span class="option">--prefix</span></samp>
as Python (you get the behavior of the previous attempt)

     <li>non-root users can install your package too, they will have the
extension module in a place that is not searched by Python but they
can work around this using environment variables (and if you installed
scripts that use this shared library, it's easy to tell Python were to
look in the beginning of your script, so the script works in both
cases). 
</ul>

   <p>The <code>AM_PATH_PYTHON</code> macro uses similar commands to define
&lsquo;<samp><span class="samp">$(pythondir)</span></samp>&rsquo; and &lsquo;<samp><span class="samp">$(pyexecdir)</span></samp>&rsquo; (see <a href="#Python">Python</a>).

   <p>Of course not all tools are as advanced as Python regarding that
substitution of <var>prefix</var>.  So another strategy is to figure the
part of the installation directory that must be preserved.  For
instance, here is how <code>AM_PATH_LISPDIR</code> (see <a href="#Emacs-Lisp">Emacs Lisp</a>)
computes &lsquo;<samp><span class="samp">$(lispdir)</span></samp>&rsquo;:

<pre class="example">     $EMACS -batch -q -eval '(while load-path
       (princ (concat (car load-path) "\n"))
       (setq load-path (cdr load-path)))' &gt;conftest.out
     lispdir=`sed -n
       -e 's,/$,,'
       -e '/.*\/lib\/x*emacs\/site-lisp$/{
             s,.*/lib/\(x*emacs/site-lisp\)$,${libdir}/\1,;p;q;
           }'
       -e '/.*\/share\/x*emacs\/site-lisp$/{
             s,.*/share/\(x*emacs/site-lisp\),${datarootdir}/\1,;p;q;
           }'
       conftest.out`
</pre>
   <p>I.e., it just picks the first directory that looks like
<samp><span class="file">*/lib/*emacs/site-lisp</span></samp> or <samp><span class="file">*/share/*emacs/site-lisp</span></samp> in
the search path of emacs, and then substitutes &lsquo;<samp><span class="samp">${libdir}</span></samp>&rsquo; or
&lsquo;<samp><span class="samp">${datadir}</span></samp>&rsquo; appropriately.

   <p>The emacs case looks complicated because it processes a list and
expects two possible layouts, otherwise it's easy, and the benefits for
non-root users are really worth the extra <samp><span class="command">sed</span></samp> invocation.

<div class="node">
<a name="Debugging-Make-Rules"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Reporting-Bugs">Reporting Bugs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Hard_002dCoded-Install-Paths">Hard-Coded Install Paths</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>

</div>

<h3 class="section">28.11 Debugging Make Rules</h3>

<p><a name="index-debugging-rules-1165"></a><a name="index-rules_002c-debugging-1166"></a>
The rules and dependency trees generated by <samp><span class="command">automake</span></samp> can get
rather complex, and leave the developer head-scratching when things
don't work as expected.  Besides the debug options provided by the
<samp><span class="command">make</span></samp> command (see <a href="make.html#Options-Summary">Options Summary</a>), here's a couple of further hints for debugging makefiles
generated by <samp><span class="command">automake</span></samp> effectively:

     <ul>
<li>If less verbose output has been enabled in the package with the
&lsquo;<samp><span class="samp">silent-rules</span></samp>&rsquo; option (see <a href="#Options">Options</a>), you can use
<code>make V=1</code> to see the commands being executed. 
<li><code>make -n</code> can help show what would be done without actually doing
it.  Note however, that this will <em>still execute</em> commands prefixed
with &lsquo;<samp><span class="samp">+</span></samp>&rsquo;, and, when using GNU <samp><span class="command">make</span></samp>, commands that contain
the strings &lsquo;<samp><span class="samp">$(MAKE)</span></samp>&rsquo; or &lsquo;<samp><span class="samp">${MAKE}</span></samp>&rsquo; (see <a href="make.html#Instead-of-Execution">Instead of Execution</a>). 
Typically, this is helpful to show what recursive rules would do, but it
means that, in your own rules, you should not mix such recursion with
actions that change any files.<a rel="footnote" href="#fn-8" name="fnd-8"><sup>8</sup></a>  Furthermore, note that GNU <samp><span class="command">make</span></samp> will update
prerequisites for the <samp><span class="file">Makefile</span></samp> file itself even with <samp><span class="option">-n</span></samp>
(see <a href="make.html#Remaking-Makefiles">Remaking Makefiles</a>). 
<li><code>make SHELL="/bin/bash -vx"</code> can help debug complex rules. 
See <a href="autoconf.html#The-Make-Macro-SHELL">The Make Macro SHELL</a>, for some
portability quirks associated with this construct. 
<li><code>echo 'print: ; @echo "$(VAR)"' | make -f Makefile -f - print</code>
can be handy to examine the expanded value of variables.  You may need
to use a target other than &lsquo;<samp><span class="samp">print</span></samp>&rsquo; if that is already used or a
file with that name exists. 
<li><a href="http://bashdb.sourceforge.net/remake/">http://bashdb.sourceforge.net/remake/</a> provides a modified
GNU <samp><span class="command">make</span></samp> command called <samp><span class="command">remake</span></samp> that copes with
complex GNU <samp><span class="command">make</span></samp>-specific Makefiles and allows to trace
execution, examine variables, and call rules interactively, much like
a debugger. 
</ul>

<div class="node">
<a name="Reporting-Bugs"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Debugging-Make-Rules">Debugging Make Rules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#FAQ">FAQ</a>

</div>

<h3 class="section">28.12 Reporting Bugs</h3>

<p>Most nontrivial software has bugs.  Automake is no exception.  Although
we cannot promise we can or will fix a bug, and we might not even agree
that it is a bug, we want to hear about problems you encounter. Often we
agree they are bugs and want to fix them.

   <p>To make it possible for us to fix a bug, please report it. In order to
do so effectively, it helps to know when and how to do it.

   <p>Before reporting a bug, it is a good idea to see if it is already known. 
You can look at the <a href="http://debbugs.gnu.org/">GNU Bug Tracker</a>
and the <a href="http://lists.gnu.org/archive/html/bug-automake/">bug-automake mailing list archives</a> for previous bug reports.  We
previously used a
<a href="http://sourceware.org/cgi-bin/gnatsweb.pl?database=automake">Gnats database</a> for bug tracking, so some bugs might have been reported
there already.  Please do not use it for new bug reports, however.

   <p>If the bug is not already known, it should be reported.  It is very
important to report bugs in a way that is useful and efficient.  For
this, please familiarize yourself with
<a href="http://www.chiark.greenend.org.uk/~sgtatham/bugs.html">How to Report Bugs Effectively</a> and
<a href="http://catb.org/~esr/faqs/smart-questions.html">How to Ask Questions the Smart Way</a>.  This helps you and developers to save time
which can then be spent on fixing more bugs and implementing more
features.

   <p>For a bug report, a feature request or other suggestions, please send
email to <a href="mailto:bug-automake@gnu.org">bug-automake@gnu.org</a>.  This will then open a new
bug in the <a href="http://debbugs.gnu.org/automake">bug tracker</a>.  Be
sure to include the versions of Autoconf and Automake that you use. 
Ideally, post a minimal <samp><span class="file">Makefile.am</span></samp> and <samp><span class="file">configure.ac</span></samp> that
reproduces the problem you encounter.  If you have encountered test
suite failures, please attach the <samp><span class="file">test-suite.log</span></samp> file.

<!-- ========================================================== Appendices -->
<div class="node">
<a name="Copying-This-Manual"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Indices">Indices</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#FAQ">FAQ</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix A Copying This Manual</h2>

<ul class="menu">
<li><a accesskey="1" href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>:   License for copying this manual
</ul>

<div class="node">
<a name="GNU-Free-Documentation-License"></a>
<p><hr>
Up:&nbsp;<a rel="up" accesskey="u" href="#Copying-This-Manual">Copying This Manual</a>

</div>

<h3 class="appendixsec">A.1 GNU Free Documentation License</h3>

<!-- The GNU Free Documentation License. -->
<div align="center">Version 1.3, 3 November 2008</div>

<!-- This file is intended to be included within another document, -->
<!-- hence no sectioning command or @node. -->
<pre class="display">     Copyright &copy; 2000-2012 Free Software Foundation, Inc.
     <a href="http://fsf.org/">http://fsf.org/</a>
     
     Everyone is permitted to copy and distribute verbatim copies
     of this license document, but changing it is not allowed.
</pre>
     <ol type=1 start=0>
<li>PREAMBLE

     <p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <dfn>free</dfn> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially. 
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.

     <p>This License is a kind of &ldquo;copyleft&rdquo;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.

     <p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.

     <li>APPLICABILITY AND DEFINITIONS

     <p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The &ldquo;Document&rdquo;, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as &ldquo;you&rdquo;.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.

     <p>A &ldquo;Modified Version&rdquo; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.

     <p>A &ldquo;Secondary Section&rdquo; is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.

     <p>The &ldquo;Invariant Sections&rdquo; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.

     <p>The &ldquo;Cover Texts&rdquo; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.

     <p>A &ldquo;Transparent&rdquo; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent. 
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not &ldquo;Transparent&rdquo; is called &ldquo;Opaque&rdquo;.

     <p>Examples of suitable formats for Transparent copies include plain
<span class="sc">ascii</span> without markup, Texinfo input format, LaTeX input
format, <acronym>SGML</acronym> or <acronym>XML</acronym> using a publicly available
<acronym>DTD</acronym>, and standard-conforming simple <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> designed for human modification.  Examples
of transparent image formats include <acronym>PNG</acronym>, <acronym>XCF</acronym> and
<acronym>JPG</acronym>.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, <acronym>SGML</acronym> or
<acronym>XML</acronym> for which the <acronym>DTD</acronym> and/or processing tools are
not generally available, and the machine-generated <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> produced by some word processors for
output purposes only.

     <p>The &ldquo;Title Page&rdquo; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &ldquo;Title Page&rdquo; means
the text near the most prominent appearance of the work's title,
preceding the beginning of the body of the text.

     <p>The &ldquo;publisher&rdquo; means any person or entity that distributes copies
of the Document to the public.

     <p>A section &ldquo;Entitled XYZ&rdquo; means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, &ldquo;Endorsements&rdquo;, or &ldquo;History&rdquo;.)  To &ldquo;Preserve the Title&rdquo;
of such a section when you modify the Document means that it remains a
section &ldquo;Entitled XYZ&rdquo; according to this definition.

     <p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.

     <li>VERBATIM COPYING

     <p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.

     <p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.

     <li>COPYING IN QUANTITY

     <p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all of these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition. 
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.

     <p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.

     <p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material. 
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.

     <p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.

     <li>MODIFICATIONS

     <p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:

          <ol type=A start=1>
<li>Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

          <li>List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

          <li>State on the Title page the name of the publisher of the
Modified Version, as the publisher.

          <li>Preserve all the copyright notices of the Document.

          <li>Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

          <li>Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

          <li>Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document's license notice.

          <li>Include an unaltered copy of this License.

          <li>Preserve the section Entitled &ldquo;History&rdquo;, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled &ldquo;History&rdquo; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

          <li>Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &ldquo;History&rdquo; section. 
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

          <li>For any section Entitled &ldquo;Acknowledgements&rdquo; or &ldquo;Dedications&rdquo;, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

          <li>Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

          <li>Delete any section Entitled &ldquo;Endorsements&rdquo;.  Such a section
may not be included in the Modified Version.

          <li>Do not retitle any existing section to be Entitled &ldquo;Endorsements&rdquo; or
to conflict in title with any Invariant Section.

          <li>Preserve any Warranty Disclaimers.
          </ol>

     <p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice. 
These titles must be distinct from any other section titles.

     <p>You may add a section Entitled &ldquo;Endorsements&rdquo;, provided it contains
nothing but endorsements of your Modified Version by various
parties&mdash;for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.

     <p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.

     <p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.

     <li>COMBINING DOCUMENTS

     <p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.

     <p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number. 
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.

     <p>In the combination, you must combine any sections Entitled &ldquo;History&rdquo;
in the various original documents, forming one section Entitled
&ldquo;History&rdquo;; likewise combine any sections Entitled &ldquo;Acknowledgements&rdquo;,
and any sections Entitled &ldquo;Dedications&rdquo;.  You must delete all
sections Entitled &ldquo;Endorsements.&rdquo;

     <li>COLLECTIONS OF DOCUMENTS

     <p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.

     <p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.

     <li>AGGREGATION WITH INDEPENDENT WORKS

     <p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an &ldquo;aggregate&rdquo; if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation's users beyond what the individual works permit. 
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.

     <p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form. 
Otherwise they must appear on printed covers that bracket the whole
aggregate.

     <li>TRANSLATION

     <p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4. 
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.

     <p>If a section in the Document is Entitled &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, or &ldquo;History&rdquo;, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.

     <li>TERMINATION

     <p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void, and
will automatically terminate your rights under this License.

     <p>However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.

     <p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

     <p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.

     <li>FUTURE REVISIONS OF THIS LICENSE

     <p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a>.

     <p>Each version of the License is given a distinguishing version number. 
If the Document specifies that a particular numbered version of this
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.  If the Document
specifies that a proxy can decide which future versions of this
License can be used, that proxy's public statement of acceptance of a
version permanently authorizes you to choose that version for the
Document.

     <li>RELICENSING

     <p>&ldquo;Massive Multiauthor Collaboration Site&rdquo; (or &ldquo;MMC Site&rdquo;) means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.  A
&ldquo;Massive Multiauthor Collaboration&rdquo; (or &ldquo;MMC&rdquo;) contained in the
site means any set of copyrightable works thus published on the MMC
site.

     <p>&ldquo;CC-BY-SA&rdquo; means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.

     <p>&ldquo;Incorporate&rdquo; means to publish or republish a Document, in whole or
in part, as part of another Document.

     <p>An MMC is &ldquo;eligible for relicensing&rdquo; if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole
or in part into the MMC, (1) had no cover texts or invariant sections,
and (2) were thus incorporated prior to November 1, 2008.

     <p>The operator of an MMC Site may republish an MMC contained in the site
under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.

        </ol>

<h3 class="heading">ADDENDUM: How to use this License for your documents</h3>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:

<pre class="smallexample">       Copyright (C)  <var>year</var>  <var>your name</var>.
       Permission is granted to copy, distribute and/or modify this document
       under the terms of the GNU Free Documentation License, Version 1.3
       or any later version published by the Free Software Foundation;
       with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
       Texts.  A copy of the license is included in the section entitled ``GNU
       Free Documentation License''.
</pre>
   <p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the &ldquo;with<small class="dots">...</small>Texts.&rdquo; line with this:

<pre class="smallexample">         with the Invariant Sections being <var>list their titles</var>, with
         the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
         being <var>list</var>.
</pre>
   <p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.

   <p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.

<!-- Local Variables: -->
<!-- ispell-local-pdict: "ispell-dict" -->
<!-- End: -->
<div class="node">
<a name="Indices"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Copying-This-Manual">Copying This Manual</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix B Indices</h2>

<ul class="menu">
<li><a accesskey="1" href="#Macro-Index">Macro Index</a>:                  Index of Autoconf macros
<li><a accesskey="2" href="#Variable-Index">Variable Index</a>:               Index of Makefile variables
<li><a accesskey="3" href="#General-Index">General Index</a>:                General index
</ul>

<div class="node">
<a name="Macro-Index"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Variable-Index">Variable Index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Indices">Indices</a>

</div>

<h3 class="appendixsec">B.1 Macro Index</h3>

<ul class="index-fn" compact>
<li><a href="#index-g_t_005fAM_005fDEPENDENCIES-338"><code>_AM_DEPENDENCIES</code></a>: <a href="#Private-Macros">Private Macros</a></li>
<li><a href="#index-AC_005fCANONICAL_005fBUILD-219"><code>AC_CANONICAL_BUILD</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fCANONICAL_005fHOST-220"><code>AC_CANONICAL_HOST</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fCANONICAL_005fTARGET-221"><code>AC_CANONICAL_TARGET</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fCONFIG_005fAUX_005fDIR-373"><code>AC_CONFIG_AUX_DIR</code></a>: <a href="#Subpackages">Subpackages</a></li>
<li><a href="#index-AC_005fCONFIG_005fAUX_005fDIR-225"><code>AC_CONFIG_AUX_DIR</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fCONFIG_005fFILES-215"><code>AC_CONFIG_FILES</code></a>: <a href="#Requirements">Requirements</a></li>
<li><a href="#index-AC_005fCONFIG_005fHEADERS-227"><code>AC_CONFIG_HEADERS</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fCONFIG_005fLIBOBJ_005fDIR-506"><code>AC_CONFIG_LIBOBJ_DIR</code></a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-AC_005fCONFIG_005fLIBOBJ_005fDIR-226"><code>AC_CONFIG_LIBOBJ_DIR</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fCONFIG_005fLINKS-228"><code>AC_CONFIG_LINKS</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fCONFIG_005fSUBDIRS-372"><code>AC_CONFIG_SUBDIRS</code></a>: <a href="#Subpackages">Subpackages</a></li>
<li><a href="#index-AC_005fDEFUN-287"><code>AC_DEFUN</code></a>: <a href="#Extending-aclocal">Extending aclocal</a></li>
<li><a href="#index-AC_005fF77_005fLIBRARY_005fLDFLAGS-238"><code>AC_F77_LIBRARY_LDFLAGS</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fFC_005fSRCEXT-239"><code>AC_FC_SRCEXT</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fINIT-297"><code>AC_INIT</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-AC_005fLIBOBJ-504"><code>AC_LIBOBJ</code></a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-AC_005fLIBOBJ-452"><code>AC_LIBOBJ</code></a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-AC_005fLIBOBJ-229"><code>AC_LIBOBJ</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fLIBSOURCE-505"><code>AC_LIBSOURCE</code></a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-AC_005fLIBSOURCE-230"><code>AC_LIBSOURCE</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fLIBSOURCES-231"><code>AC_LIBSOURCES</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fOUTPUT-216"><code>AC_OUTPUT</code></a>: <a href="#Requirements">Requirements</a></li>
<li><a href="#index-AC_005fPREREQ-288"><code>AC_PREREQ</code></a>: <a href="#Extending-aclocal">Extending aclocal</a></li>
<li><a href="#index-AC_005fPROG_005fCC_005fC_005fO-310"><code>AC_PROG_CC_C_O</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-AC_005fPROG_005fCXX-234"><code>AC_PROG_CXX</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fPROG_005fF77-237"><code>AC_PROG_F77</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fPROG_005fFC-240"><code>AC_PROG_FC</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fPROG_005fLEX-312"><code>AC_PROG_LEX</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-AC_005fPROG_005fLEX-244"><code>AC_PROG_LEX</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fPROG_005fLIBTOOL-241"><code>AC_PROG_LIBTOOL</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fPROG_005fOBJC-235"><code>AC_PROG_OBJC</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fPROG_005fOBJCXX-236"><code>AC_PROG_OBJCXX</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fPROG_005fRANLIB-233"><code>AC_PROG_RANLIB</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fPROG_005fYACC-242"><code>AC_PROG_YACC</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fREQUIRE_005fAUX_005fFILE-245"><code>AC_REQUIRE_AUX_FILE</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AC_005fSUBST-246"><code>AC_SUBST</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AM_005fCOND_005fIF-1018"><code>AM_COND_IF</code></a>: <a href="#Usage-of-Conditionals">Usage of Conditionals</a></li>
<li><a href="#index-AM_005fCOND_005fIF-248"><code>AM_COND_IF</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AM_005fCONDITIONAL-1010"><code>AM_CONDITIONAL</code></a>: <a href="#Usage-of-Conditionals">Usage of Conditionals</a></li>
<li><a href="#index-AM_005fCONDITIONAL-247"><code>AM_CONDITIONAL</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AM_005fCONFIG_005fHEADER-329"><code>AM_CONFIG_HEADER</code></a>: <a href="#Obsolete-Macros">Obsolete Macros</a></li>
<li><a href="#index-AM_005fDEP_005fTRACK-340"><code>AM_DEP_TRACK</code></a>: <a href="#Private-Macros">Private Macros</a></li>
<li><a href="#index-AM_005fGNU_005fGETTEXT-249"><code>AM_GNU_GETTEXT</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AM_005fGNU_005fGETTEXT_005fINTL_005fSUBDIR-250"><code>AM_GNU_GETTEXT_INTL_SUBDIR</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AM_005fHEADER_005fTIOCGWINSZ_005fNEEDS_005fSYS_005fIOCTL-330"><code>AM_HEADER_TIOCGWINSZ_NEEDS_SYS_IOCTL</code></a>: <a href="#Obsolete-Macros">Obsolete Macros</a></li>
<li><a href="#index-AM_005fINIT_005fAUTOMAKE-295"><code>AM_INIT_AUTOMAKE</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-AM_005fINIT_005fAUTOMAKE-214"><code>AM_INIT_AUTOMAKE</code></a>: <a href="#Requirements">Requirements</a></li>
<li><a href="#index-AM_005fMAINTAINER_005fMODE-1119"><code>AM_MAINTAINER_MODE</code></a>: <a href="#maintainer_002dmode">maintainer-mode</a></li>
<li><a href="#index-AM_005fMAINTAINER_005fMODE-905"><code>AM_MAINTAINER_MODE</code></a>: <a href="#Rebuilding">Rebuilding</a></li>
<li><a href="#index-AM_005fMAINTAINER_005fMODE_0028_0040ovar_007bdefault_002dmode_007d_0029-251"><code>AM_MAINTAINER_MODE(</code><span class="roman">[</span><var>default-mode</var><span class="roman">]</span><code>)</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AM_005fMAKE_005fINCLUDE-342"><code>AM_MAKE_INCLUDE</code></a>: <a href="#Private-Macros">Private Macros</a></li>
<li><a href="#index-AM_005fMISSING_005fPROG-320"><code>AM_MISSING_PROG</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-AM_005fOUTPUT_005fDEPENDENCY_005fCOMMANDS-341"><code>AM_OUTPUT_DEPENDENCY_COMMANDS</code></a>: <a href="#Private-Macros">Private Macros</a></li>
<li><a href="#index-AM_005fPATH_005fLISPDIR-301"><code>AM_PATH_LISPDIR</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-AM_005fPATH_005fPYTHON-687"><code>AM_PATH_PYTHON</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-AM_005fPROG_005fAR-304"><code>AM_PROG_AR</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-AM_005fPROG_005fAS-306"><code>AM_PROG_AS</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-AM_005fPROG_005fCC_005fC_005fO-309"><code>AM_PROG_CC_C_O</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-AM_005fPROG_005fGCJ-315"><code>AM_PROG_GCJ</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-AM_005fPROG_005fINSTALL_005fSTRIP-343"><code>AM_PROG_INSTALL_STRIP</code></a>: <a href="#Private-Macros">Private Macros</a></li>
<li><a href="#index-AM_005fPROG_005fLEX-311"><code>AM_PROG_LEX</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-AM_005fPROG_005fMKDIR_005fP-331"><code>AM_PROG_MKDIR_P</code></a>: <a href="#Obsolete-Macros">Obsolete Macros</a></li>
<li><a href="#index-AM_005fPROG_005fUPC-318"><code>AM_PROG_UPC</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-AM_005fPROG_005fVALAC-609"><code>AM_PROG_VALAC</code></a>: <a href="#Vala-Support">Vala Support</a></li>
<li><a href="#index-AM_005fSANITY_005fCHECK-344"><code>AM_SANITY_CHECK</code></a>: <a href="#Private-Macros">Private Macros</a></li>
<li><a href="#index-AM_005fSET_005fDEPDIR-339"><code>AM_SET_DEPDIR</code></a>: <a href="#Private-Macros">Private Macros</a></li>
<li><a href="#index-AM_005fSILENT_005fRULES-322"><code>AM_SILENT_RULES</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-AM_005fSUBST_005fNOTMAKE_0028_0040var_007bvar_007d_0029-254"><code>AM_SUBST_NOTMAKE(</code><var>var</var><code>)</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-AM_005fSYS_005fPOSIX_005fTERMIOS-335"><code>AM_SYS_POSIX_TERMIOS</code></a>: <a href="#Obsolete-Macros">Obsolete Macros</a></li>
<li><a href="#index-AM_005fWITH_005fDMALLOC-323"><code>AM_WITH_DMALLOC</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-m4_005finclude-789"><code>m4_include</code></a>: <a href="#Basics-of-Distribution">Basics of Distribution</a></li>
<li><a href="#index-m4_005finclude-255"><code>m4_include</code></a>: <a href="#Optional">Optional</a></li>
   </ul><div class="node">
<a name="Variable-Index"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#General-Index">General Index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Macro-Index">Macro Index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Indices">Indices</a>

</div>

<h3 class="appendixsec">B.2 Variable Index</h3>



<ul class="index-vr" compact>
<li><a href="#index-g_t_005fDATA-651"><code>_DATA</code></a>: <a href="#Data">Data</a></li>
<li><a href="#index-g_t_005fHEADERS-640"><code>_HEADERS</code></a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-g_t_005fLIBRARIES-409"><code>_LIBRARIES</code></a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-g_t_005fLISP-663"><code>_LISP</code></a>: <a href="#Emacs-Lisp">Emacs Lisp</a></li>
<li><a href="#index-g_t_005fLOG_005fCOMPILE-861"><code>_LOG_COMPILE</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-g_t_005fLOG_005fCOMPILER-862"><code>_LOG_COMPILER</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-g_t_005fLOG_005fDRIVER-876"><code>_LOG_DRIVER</code></a>: <a href="#Declaring-Custom-Test-Drivers">Declaring Custom Test Drivers</a></li>
<li><a href="#index-g_t_005fLOG_005fDRIVER_005fFLAGS-877"><code>_LOG_DRIVER_FLAGS</code></a>: <a href="#Declaring-Custom-Test-Drivers">Declaring Custom Test Drivers</a></li>
<li><a href="#index-g_t_005fLOG_005fFLAGS-863"><code>_LOG_FLAGS</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-g_t_005fLTLIBRARIES-428"><code>_LTLIBRARIES</code></a>: <a href="#Libtool-Libraries">Libtool Libraries</a></li>
<li><a href="#index-g_t_005fMANS-745"><code>_MANS</code></a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-g_t_005fPROGRAMS-375"><code>_PROGRAMS</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-g_t_005fPROGRAMS-123"><code>_PROGRAMS</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-g_t_005fPYTHON-686"><code>_PYTHON</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-g_t_005fSCRIPTS-626"><code>_SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-g_t_005fSOURCES-485"><code>_SOURCES</code></a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-g_t_005fSOURCES-385"><code>_SOURCES</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-g_t_005fTEXINFOS-704"><code>_TEXINFOS</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-ACLOCAL_005fAMFLAGS-906"><code>ACLOCAL_AMFLAGS</code></a>: <a href="#Rebuilding">Rebuilding</a></li>
<li><a href="#index-ACLOCAL_005fAMFLAGS-289"><code>ACLOCAL_AMFLAGS</code></a>: <a href="#Local-Macros">Local Macros</a></li>
<li><a href="#index-ALLOCA-503"><code>ALLOCA</code></a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-ALLOCA-451"><code>ALLOCA</code></a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-AM_005fCCASFLAGS-561"><code>AM_CCASFLAGS</code></a>: <a href="#Assembly-Support">Assembly Support</a></li>
<li><a href="#index-AM_005fCFLAGS-517"><code>AM_CFLAGS</code></a>: <a href="#Program-Variables">Program Variables</a></li>
<li><a href="#index-AM_005fCOLOR_005fTESTS-845"><code>AM_COLOR_TESTS</code></a>: <a href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a></li>
<li><a href="#index-AM_005fCPPFLAGS-562"><code>AM_CPPFLAGS</code></a>: <a href="#Assembly-Support">Assembly Support</a></li>
<li><a href="#index-AM_005fCPPFLAGS-515"><code>AM_CPPFLAGS</code></a>: <a href="#Program-Variables">Program Variables</a></li>
<li><a href="#index-AM_005fCXXFLAGS-534"><code>AM_CXXFLAGS</code></a>: <a href="#C_002b_002b-Support">C++ Support</a></li>
<li><a href="#index-AM_005fDEFAULT_005fSOURCE_005fEXT-489"><code>AM_DEFAULT_SOURCE_EXT</code></a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fDEFAULT_005fV_007d-1035"><code>AM_DEFAULT_V</code></a>: <a href="#Automake-silent_002drules-Option">Automake silent-rules Option</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fDEFAULT_005fVERBOSITY_007d-1033"><code>AM_DEFAULT_VERBOSITY</code></a>: <a href="#Automake-silent_002drules-Option">Automake silent-rules Option</a></li>
<li><a href="#index-AM_005fDISTCHECK_005fCONFIGURE_005fFLAGS-801"><code>AM_DISTCHECK_CONFIGURE_FLAGS</code></a>: <a href="#Checking-the-Distribution">Checking the Distribution</a></li>
<li><a href="#index-AM_005fETAGSFLAGS-999"><code>AM_ETAGSFLAGS</code></a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-AM_005f_0040var_007bext_007d_005fLOG_005fDRIVER_005fFLAGS-882"><code>AM_</code><var>ext</var><code>_LOG_DRIVER_FLAGS</code></a>: <a href="#Declaring-Custom-Test-Drivers">Declaring Custom Test Drivers</a></li>
<li><a href="#index-AM_005f_0040var_007bext_007d_005fLOG_005fFLAGS-870"><code>AM_</code><var>ext</var><code>_LOG_FLAGS</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-AM_005fFCFLAGS-598"><code>AM_FCFLAGS</code></a>: <a href="#Fortran-9x-Support">Fortran 9x Support</a></li>
<li><a href="#index-AM_005fFFLAGS-567"><code>AM_FFLAGS</code></a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-AM_005fGCJFLAGS-606"><code>AM_GCJFLAGS</code></a>: <a href="#Java-Support-with-gcj">Java Support with gcj</a></li>
<li><a href="#index-AM_005fINSTALLCHECK_005fSTD_005fOPTIONS_005fEXEMPT-978"><code>AM_INSTALLCHECK_STD_OPTIONS_EXEMPT</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-AM_005fJAVACFLAGS-680"><code>AM_JAVACFLAGS</code></a>: <a href="#Java">Java</a></li>
<li><a href="#index-AM_005fLDFLAGS-519"><code>AM_LDFLAGS</code></a>: <a href="#Program-Variables">Program Variables</a></li>
<li><a href="#index-AM_005fLDFLAGS-391"><code>AM_LDFLAGS</code></a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-AM_005fLFLAGS-524"><code>AM_LFLAGS</code></a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
<li><a href="#index-AM_005fLIBTOOLFLAGS-441"><code>AM_LIBTOOLFLAGS</code></a>: <a href="#Libtool-Flags">Libtool Flags</a></li>
<li><a href="#index-AM_005fLOG_005fDRIVER_005fFLAGS-883"><code>AM_LOG_DRIVER_FLAGS</code></a>: <a href="#Declaring-Custom-Test-Drivers">Declaring Custom Test Drivers</a></li>
<li><a href="#index-AM_005fLOG_005fFLAGS-871"><code>AM_LOG_FLAGS</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-AM_005fMAKEFLAGS-348"><code>AM_MAKEFLAGS</code></a>: <a href="#Subdirectories">Subdirectories</a></li>
<li><a href="#index-AM_005fMAKEINFOFLAGS-736"><code>AM_MAKEINFOFLAGS</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-AM_005fMAKEINFOHTMLFLAGS-737"><code>AM_MAKEINFOHTMLFLAGS</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-AM_005fOBJCFLAGS-541"><code>AM_OBJCFLAGS</code></a>: <a href="#Objective-C-Support">Objective C Support</a></li>
<li><a href="#index-AM_005fOBJCXXFLAGS-548"><code>AM_OBJCXXFLAGS</code></a>: <a href="#Objective-C_002b_002b-Support">Objective C++ Support</a></li>
<li><a href="#index-AM_005fRFLAGS-569"><code>AM_RFLAGS</code></a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-AM_005fRUNTESTFLAGS-902"><code>AM_RUNTESTFLAGS</code></a>: <a href="#DejaGnu-Tests">DejaGnu Tests</a></li>
<li><a href="#index-AM_005fTESTS_005fENVIRONMENT-849"><code>AM_TESTS_ENVIRONMENT</code></a>: <a href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a></li>
<li><a href="#index-AM_005fTESTS_005fFD_005fREDIRECT-850"><code>AM_TESTS_FD_REDIRECT</code></a>: <a href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a></li>
<li><a href="#index-AM_005fUPCFLAGS-555"><code>AM_UPCFLAGS</code></a>: <a href="#Unified-Parallel-C-Support">Unified Parallel C Support</a></li>
<li><a href="#index-AM_005fUPDATE_005fINFO_005fDIR-732"><code>AM_UPDATE_INFO_DIR</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fV_007d-1034"><code>AM_V</code></a>: <a href="#Automake-silent_002drules-Option">Automake silent-rules Option</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fV_005fat_007d-1032"><code>AM_V_at</code></a>: <a href="#Automake-silent_002drules-Option">Automake silent-rules Option</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fV_005fGEN_007d-1031"><code>AM_V_GEN</code></a>: <a href="#Automake-silent_002drules-Option">Automake silent-rules Option</a></li>
<li><a href="#index-AM_005fVALAFLAGS-612"><code>AM_VALAFLAGS</code></a>: <a href="#Vala-Support">Vala Support</a></li>
<li><a href="#index-AM_005fYFLAGS-522"><code>AM_YFLAGS</code></a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
<li><a href="#index-AR-305"><code>AR</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-AUTOCONF-176"><code>AUTOCONF</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-AUTOM4TE-260"><code>AUTOM4TE</code></a>: <a href="#aclocal-Invocation">aclocal Invocation</a></li>
<li><a href="#index-AUTOMAKE_005fJOBS-207"><code>AUTOMAKE_JOBS</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-AUTOMAKE_005fOPTIONS-911"><code>AUTOMAKE_OPTIONS</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-AUTOMAKE_005fOPTIONS-616"><code>AUTOMAKE_OPTIONS</code></a>: <a href="#Dependencies">Dependencies</a></li>
<li><a href="#index-AUTOMAKE_005fOPTIONS-296"><code>AUTOMAKE_OPTIONS</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-bin_005fPROGRAMS-376"><code>bin_PROGRAMS</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-bin_005fSCRIPTS-630"><code>bin_SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-build_005ftriplet-222"><code>build_triplet</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-BUILT_005fSOURCES-658"><code>BUILT_SOURCES</code></a>: <a href="#Sources">Sources</a></li>
<li><a href="#index-BZIP2-811"><code>BZIP2</code></a>: <a href="#The-Types-of-Distributions">The Types of Distributions</a></li>
<li><a href="#index-CC-509"><code>CC</code></a>: <a href="#Program-Variables">Program Variables</a></li>
<li><a href="#index-CCAS-558"><code>CCAS</code></a>: <a href="#Assembly-Support">Assembly Support</a></li>
<li><a href="#index-CCAS-307"><code>CCAS</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-CCASFLAGS-559"><code>CCASFLAGS</code></a>: <a href="#Assembly-Support">Assembly Support</a></li>
<li><a href="#index-CCASFLAGS-308"><code>CCASFLAGS</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-CFLAGS-510"><code>CFLAGS</code></a>: <a href="#Program-Variables">Program Variables</a></li>
<li><a href="#index-check_005f-143"><code>check_</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-check_005fLTLIBRARIES-434"><code>check_LTLIBRARIES</code></a>: <a href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a></li>
<li><a href="#index-check_005fPROGRAMS-491"><code>check_PROGRAMS</code></a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-check_005fPROGRAMS-381"><code>check_PROGRAMS</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-check_005fSCRIPTS-636"><code>check_SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-CLASSPATH_005fENV-682"><code>CLASSPATH_ENV</code></a>: <a href="#Java">Java</a></li>
<li><a href="#index-CLEANFILES-775"><code>CLEANFILES</code></a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-COMPILE-518"><code>COMPILE</code></a>: <a href="#Program-Variables">Program Variables</a></li>
<li><a href="#index-CONFIG_005fSTATUS_005fDEPENDENCIES-907"><code>CONFIG_STATUS_DEPENDENCIES</code></a>: <a href="#Rebuilding">Rebuilding</a></li>
<li><a href="#index-CONFIGURE_005fDEPENDENCIES-908"><code>CONFIGURE_DEPENDENCIES</code></a>: <a href="#Rebuilding">Rebuilding</a></li>
<li><a href="#index-CPPFLAGS-560"><code>CPPFLAGS</code></a>: <a href="#Assembly-Support">Assembly Support</a></li>
<li><a href="#index-CPPFLAGS-511"><code>CPPFLAGS</code></a>: <a href="#Program-Variables">Program Variables</a></li>
<li><a href="#index-CXX-532"><code>CXX</code></a>: <a href="#C_002b_002b-Support">C++ Support</a></li>
<li><a href="#index-CXXCOMPILE-535"><code>CXXCOMPILE</code></a>: <a href="#C_002b_002b-Support">C++ Support</a></li>
<li><a href="#index-CXXFLAGS-533"><code>CXXFLAGS</code></a>: <a href="#C_002b_002b-Support">C++ Support</a></li>
<li><a href="#index-CXXLINK-588"><code>CXXLINK</code></a>: <a href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a></li>
<li><a href="#index-CXXLINK-536"><code>CXXLINK</code></a>: <a href="#C_002b_002b-Support">C++ Support</a></li>
<li><a href="#index-DATA-652"><code>DATA</code></a>: <a href="#Data">Data</a></li>
<li><a href="#index-DATA-151"><code>DATA</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-data_005fDATA-653"><code>data_DATA</code></a>: <a href="#Data">Data</a></li>
<li><a href="#index-DEFS-512"><code>DEFS</code></a>: <a href="#Program-Variables">Program Variables</a></li>
<li><a href="#index-DEJATOOL-898"><code>DEJATOOL</code></a>: <a href="#DejaGnu-Tests">DejaGnu Tests</a></li>
<li><a href="#index-DESTDIR-769"><code>DESTDIR</code></a>: <a href="#Staged-Installs">Staged Installs</a></li>
<li><a href="#index-DESTDIR-60"><code>DESTDIR</code></a>: <a href="#DESTDIR">DESTDIR</a></li>
<li><a href="#index-DISABLE_005fHARD_005fERRORS-842"><code>DISABLE_HARD_ERRORS</code></a>: <a href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a></li>
<li><a href="#index-dist_005f-794"><code>dist_</code></a>: <a href="#Fine_002dgrained-Distribution-Control">Fine-grained Distribution Control</a></li>
<li><a href="#index-dist_005f-368"><code>dist_</code></a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-dist_005flisp_005fLISP-666"><code>dist_lisp_LISP</code></a>: <a href="#Emacs-Lisp">Emacs Lisp</a></li>
<li><a href="#index-dist_005fnoinst_005fLISP-667"><code>dist_noinst_LISP</code></a>: <a href="#Emacs-Lisp">Emacs Lisp</a></li>
<li><a href="#index-DIST_005fSUBDIRS-793"><code>DIST_SUBDIRS</code></a>: <a href="#Basics-of-Distribution">Basics of Distribution</a></li>
<li><a href="#index-DIST_005fSUBDIRS-356"><code>DIST_SUBDIRS</code></a>: <a href="#Subdirectories-with-AM_005fCONDITIONAL">Subdirectories with AM_CONDITIONAL</a></li>
<li><a href="#index-DISTCHECK_005fCONFIGURE_005fFLAGS-802"><code>DISTCHECK_CONFIGURE_FLAGS</code></a>: <a href="#Checking-the-Distribution">Checking the Distribution</a></li>
<li><a href="#index-distcleancheck_005flistfiles-1126"><code>distcleancheck_listfiles</code></a>: <a href="#Errors-with-distclean">Errors with distclean</a></li>
<li><a href="#index-distcleancheck_005flistfiles-807"><code>distcleancheck_listfiles</code></a>: <a href="#Checking-the-Distribution">Checking the Distribution</a></li>
<li><a href="#index-DISTCLEANFILES-806"><code>DISTCLEANFILES</code></a>: <a href="#Checking-the-Distribution">Checking the Distribution</a></li>
<li><a href="#index-DISTCLEANFILES-776"><code>DISTCLEANFILES</code></a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-distdir-1105"><code>distdir</code></a>: <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a></li>
<li><a href="#index-distdir-797"><code>distdir</code></a>: <a href="#The-dist-Hook">The dist Hook</a></li>
<li><a href="#index-distuninstallcheck_005flistfiles-810"><code>distuninstallcheck_listfiles</code></a>: <a href="#Checking-the-Distribution">Checking the Distribution</a></li>
<li><a href="#index-DVIPS-740"><code>DVIPS</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-EMACS-302"><code>EMACS</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-ETAGS_005fARGS-997"><code>ETAGS_ARGS</code></a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-ETAGSFLAGS-998"><code>ETAGSFLAGS</code></a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-EXPECT-899"><code>EXPECT</code></a>: <a href="#DejaGnu-Tests">DejaGnu Tests</a></li>
<li><a href="#index-g_t_0040var_007bext_007d_005fLOG_005fCOMPILE-867"><var>ext</var><code>_LOG_COMPILE</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-g_t_0040var_007bext_007d_005fLOG_005fCOMPILER-868"><var>ext</var><code>_LOG_COMPILER</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-g_t_0040var_007bext_007d_005fLOG_005fDRIVER-880"><var>ext</var><code>_LOG_DRIVER</code></a>: <a href="#Declaring-Custom-Test-Drivers">Declaring Custom Test Drivers</a></li>
<li><a href="#index-g_t_0040var_007bext_007d_005fLOG_005fDRIVER_005fFLAGS-881"><var>ext</var><code>_LOG_DRIVER_FLAGS</code></a>: <a href="#Declaring-Custom-Test-Drivers">Declaring Custom Test Drivers</a></li>
<li><a href="#index-g_t_0040var_007bext_007d_005fLOG_005fFLAGS-869"><var>ext</var><code>_LOG_FLAGS</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-EXTRA_005fDIST-791"><code>EXTRA_DIST</code></a>: <a href="#Basics-of-Distribution">Basics of Distribution</a></li>
<li><a href="#index-EXTRA_005fmaude_005fDEPENDENCIES-469"><code>EXTRA_maude_DEPENDENCIES</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-EXTRA_005fmaude_005fDEPENDENCIES-398"><code>EXTRA_maude_DEPENDENCIES</code></a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-EXTRA_005fmaude_005fSOURCES-462"><code>EXTRA_maude_SOURCES</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-EXTRA_005fPROGRAMS-404"><code>EXTRA_PROGRAMS</code></a>: <a href="#Conditional-Programs">Conditional Programs</a></li>
<li><a href="#index-F77-565"><code>F77</code></a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-F77COMPILE-570"><code>F77COMPILE</code></a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-F77LINK-589"><code>F77LINK</code></a>: <a href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a></li>
<li><a href="#index-FC-596"><code>FC</code></a>: <a href="#Fortran-9x-Support">Fortran 9x Support</a></li>
<li><a href="#index-FCCOMPILE-599"><code>FCCOMPILE</code></a>: <a href="#Fortran-9x-Support">Fortran 9x Support</a></li>
<li><a href="#index-FCFLAGS-597"><code>FCFLAGS</code></a>: <a href="#Fortran-9x-Support">Fortran 9x Support</a></li>
<li><a href="#index-FCLINK-600"><code>FCLINK</code></a>: <a href="#Fortran-9x-Support">Fortran 9x Support</a></li>
<li><a href="#index-FCLINK-590"><code>FCLINK</code></a>: <a href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a></li>
<li><a href="#index-FFLAGS-566"><code>FFLAGS</code></a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-FLIBS-581"><code>FLIBS</code></a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-FLINK-571"><code>FLINK</code></a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-GCJ-316"><code>GCJ</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-GCJFLAGS-605"><code>GCJFLAGS</code></a>: <a href="#Java-Support-with-gcj">Java Support with gcj</a></li>
<li><a href="#index-GCJFLAGS-317"><code>GCJFLAGS</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-GCJLINK-586"><code>GCJLINK</code></a>: <a href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a></li>
<li><a href="#index-GTAGS_005fARGS-1002"><code>GTAGS_ARGS</code></a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-GZIP_005fENV-786"><code>GZIP_ENV</code></a>: <a href="#Basics-of-Distribution">Basics of Distribution</a></li>
<li><a href="#index-HEADERS-152"><code>HEADERS</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-host_005ftriplet-223"><code>host_triplet</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-include_005fHEADERS-644"><code>include_HEADERS</code></a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-INCLUDES-516"><code>INCLUDES</code></a>: <a href="#Program-Variables">Program Variables</a></li>
<li><a href="#index-info_005fTEXINFOS-705"><code>info_TEXINFOS</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-JAVA-149"><code>JAVA</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-JAVAC-678"><code>JAVAC</code></a>: <a href="#Java">Java</a></li>
<li><a href="#index-JAVACFLAGS-679"><code>JAVACFLAGS</code></a>: <a href="#Java">Java</a></li>
<li><a href="#index-JAVAROOT-681"><code>JAVAROOT</code></a>: <a href="#Java">Java</a></li>
<li><a href="#index-LDADD-390"><code>LDADD</code></a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-LDFLAGS-513"><code>LDFLAGS</code></a>: <a href="#Program-Variables">Program Variables</a></li>
<li><a href="#index-LFLAGS-523"><code>LFLAGS</code></a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
<li><a href="#index-lib_005fLIBRARIES-410"><code>lib_LIBRARIES</code></a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-lib_005fLTLIBRARIES-426"><code>lib_LTLIBRARIES</code></a>: <a href="#Libtool-Libraries">Libtool Libraries</a></li>
<li><a href="#index-libexec_005fPROGRAMS-378"><code>libexec_PROGRAMS</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-libexec_005fSCRIPTS-632"><code>libexec_SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-LIBOBJS-501"><code>LIBOBJS</code></a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-LIBOBJS-449"><code>LIBOBJS</code></a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-LIBOBJS-232"><code>LIBOBJS</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-LIBRARIES-145"><code>LIBRARIES</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-LIBS-514"><code>LIBS</code></a>: <a href="#Program-Variables">Program Variables</a></li>
<li><a href="#index-LIBTOOLFLAGS-442"><code>LIBTOOLFLAGS</code></a>: <a href="#Libtool-Flags">Libtool Flags</a></li>
<li><a href="#index-LINK-593"><code>LINK</code></a>: <a href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a></li>
<li><a href="#index-LINK-520"><code>LINK</code></a>: <a href="#Program-Variables">Program Variables</a></li>
<li><a href="#index-LISP-147"><code>LISP</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-lisp_005fLISP-664"><code>lisp_LISP</code></a>: <a href="#Emacs-Lisp">Emacs Lisp</a></li>
<li><a href="#index-lispdir-303"><code>lispdir</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-localstate_005fDATA-656"><code>localstate_DATA</code></a>: <a href="#Data">Data</a></li>
<li><a href="#index-LOG_005fCOMPILE-864"><code>LOG_COMPILE</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-LOG_005fCOMPILER-865"><code>LOG_COMPILER</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-LOG_005fDRIVER-878"><code>LOG_DRIVER</code></a>: <a href="#Declaring-Custom-Test-Drivers">Declaring Custom Test Drivers</a></li>
<li><a href="#index-LOG_005fDRIVER_005fFLAGS-879"><code>LOG_DRIVER_FLAGS</code></a>: <a href="#Declaring-Custom-Test-Drivers">Declaring Custom Test Drivers</a></li>
<li><a href="#index-LOG_005fFLAGS-866"><code>LOG_FLAGS</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-LTALLOCA-502"><code>LTALLOCA</code></a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-LTALLOCA-450"><code>LTALLOCA</code></a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-LTLIBOBJS-500"><code>LTLIBOBJS</code></a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-LTLIBOBJS-448"><code>LTLIBOBJS</code></a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-LTLIBRARIES-146"><code>LTLIBRARIES</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-MAINTAINERCLEANFILES-777"><code>MAINTAINERCLEANFILES</code></a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-MAKE-347"><code>MAKE</code></a>: <a href="#Subdirectories">Subdirectories</a></li>
<li><a href="#index-MAKEINFO-733"><code>MAKEINFO</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-MAKEINFOFLAGS-735"><code>MAKEINFOFLAGS</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-MAKEINFOHTML-734"><code>MAKEINFOHTML</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-man_005fMANS-746"><code>man_MANS</code></a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-MANS-153"><code>MANS</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-maude_005fAR-463"><code>maude_AR</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fCCASFLAGS-471"><code>maude_CCASFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fCFLAGS-472"><code>maude_CFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fCPPFLAGS-473"><code>maude_CPPFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fCXXFLAGS-474"><code>maude_CXXFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fDEPENDENCIES-468"><code>maude_DEPENDENCIES</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fDEPENDENCIES-397"><code>maude_DEPENDENCIES</code></a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-maude_005fFFLAGS-475"><code>maude_FFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fGCJFLAGS-476"><code>maude_GCJFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fLDADD-465"><code>maude_LDADD</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fLDADD-393"><code>maude_LDADD</code></a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-maude_005fLDFLAGS-466"><code>maude_LDFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fLDFLAGS-395"><code>maude_LDFLAGS</code></a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-maude_005fLFLAGS-477"><code>maude_LFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fLIBADD-464"><code>maude_LIBADD</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fLIBADD-413"><code>maude_LIBADD</code></a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-maude_005fLIBTOOLFLAGS-467"><code>maude_LIBTOOLFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fLIBTOOLFLAGS-443"><code>maude_LIBTOOLFLAGS</code></a>: <a href="#Libtool-Flags">Libtool Flags</a></li>
<li><a href="#index-maude_005fLINK-470"><code>maude_LINK</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fOBJCFLAGS-478"><code>maude_OBJCFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fOBJCXXFLAGS-479"><code>maude_OBJCXXFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fRFLAGS-480"><code>maude_RFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fSHORTNAME-484"><code>maude_SHORTNAME</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fSOURCES-459"><code>maude_SOURCES</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fUPCFLAGS-481"><code>maude_UPCFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-maude_005fYFLAGS-482"><code>maude_YFLAGS</code></a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-MISSING-321"><code>MISSING</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-mkdir_005fp-334"><code>mkdir_p</code></a>: <a href="#Obsolete-Macros">Obsolete Macros</a></li>
<li><a href="#index-MKDIR_005fP-333"><code>MKDIR_P</code></a>: <a href="#Obsolete-Macros">Obsolete Macros</a></li>
<li><a href="#index-MOSTLYCLEANFILES-774"><code>MOSTLYCLEANFILES</code></a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-nobase_005f-361"><code>nobase_</code></a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-nodist_005f-795"><code>nodist_</code></a>: <a href="#Fine_002dgrained-Distribution-Control">Fine-grained Distribution Control</a></li>
<li><a href="#index-nodist_005f-369"><code>nodist_</code></a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-noinst_005f-141"><code>noinst_</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-noinst_005fHEADERS-641"><code>noinst_HEADERS</code></a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-noinst_005fLIBRARIES-412"><code>noinst_LIBRARIES</code></a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-noinst_005fLISP-665"><code>noinst_LISP</code></a>: <a href="#Emacs-Lisp">Emacs Lisp</a></li>
<li><a href="#index-noinst_005fLTLIBRARIES-433"><code>noinst_LTLIBRARIES</code></a>: <a href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a></li>
<li><a href="#index-noinst_005fPROGRAMS-380"><code>noinst_PROGRAMS</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-noinst_005fSCRIPTS-635"><code>noinst_SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-notrans_005f-753"><code>notrans_</code></a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-OBJC-539"><code>OBJC</code></a>: <a href="#Objective-C-Support">Objective C Support</a></li>
<li><a href="#index-OBJCCOMPILE-542"><code>OBJCCOMPILE</code></a>: <a href="#Objective-C-Support">Objective C Support</a></li>
<li><a href="#index-OBJCFLAGS-540"><code>OBJCFLAGS</code></a>: <a href="#Objective-C-Support">Objective C Support</a></li>
<li><a href="#index-OBJCLINK-591"><code>OBJCLINK</code></a>: <a href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a></li>
<li><a href="#index-OBJCLINK-543"><code>OBJCLINK</code></a>: <a href="#Objective-C-Support">Objective C Support</a></li>
<li><a href="#index-OBJCXX-546"><code>OBJCXX</code></a>: <a href="#Objective-C_002b_002b-Support">Objective C++ Support</a></li>
<li><a href="#index-OBJCXXCOMPILE-549"><code>OBJCXXCOMPILE</code></a>: <a href="#Objective-C_002b_002b-Support">Objective C++ Support</a></li>
<li><a href="#index-OBJCXXFLAGS-547"><code>OBJCXXFLAGS</code></a>: <a href="#Objective-C_002b_002b-Support">Objective C++ Support</a></li>
<li><a href="#index-OBJCXXLINK-587"><code>OBJCXXLINK</code></a>: <a href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a></li>
<li><a href="#index-OBJCXXLINK-550"><code>OBJCXXLINK</code></a>: <a href="#Objective-C_002b_002b-Support">Objective C++ Support</a></li>
<li><a href="#index-oldinclude_005fHEADERS-645"><code>oldinclude_HEADERS</code></a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-PACKAGE-783"><code>PACKAGE</code></a>: <a href="#Basics-of-Distribution">Basics of Distribution</a></li>
<li><a href="#index-pkgdata_005fDATA-657"><code>pkgdata_DATA</code></a>: <a href="#Data">Data</a></li>
<li><a href="#index-pkgdata_005fSCRIPTS-633"><code>pkgdata_SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-pkgdatadir-129"><code>pkgdatadir</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-pkginclude_005fHEADERS-646"><code>pkginclude_HEADERS</code></a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-pkgincludedir-130"><code>pkgincludedir</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-pkglib_005fLIBRARIES-411"><code>pkglib_LIBRARIES</code></a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-pkglib_005fLTLIBRARIES-427"><code>pkglib_LTLIBRARIES</code></a>: <a href="#Libtool-Libraries">Libtool Libraries</a></li>
<li><a href="#index-pkglibdir-131"><code>pkglibdir</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-pkglibexec_005fPROGRAMS-379"><code>pkglibexec_PROGRAMS</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-pkglibexec_005fSCRIPTS-634"><code>pkglibexec_SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-pkglibexecdir-132"><code>pkglibexecdir</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-pkgpyexecdir-696"><code>pkgpyexecdir</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-pkgpythondir-694"><code>pkgpythondir</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-PROGRAMS-124"><code>PROGRAMS</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-pyexecdir-695"><code>pyexecdir</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-PYTHON-688"><code>PYTHON</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-PYTHON-148"><code>PYTHON</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-PYTHON_005fEXEC_005fPREFIX-691"><code>PYTHON_EXEC_PREFIX</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-PYTHON_005fPLATFORM-692"><code>PYTHON_PLATFORM</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-PYTHON_005fPREFIX-690"><code>PYTHON_PREFIX</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-PYTHON_005fVERSION-689"><code>PYTHON_VERSION</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-pythondir-693"><code>pythondir</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-RECHECK_005fLOGS-872"><code>RECHECK_LOGS</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-RFLAGS-568"><code>RFLAGS</code></a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-RUNTEST-900"><code>RUNTEST</code></a>: <a href="#DejaGnu-Tests">DejaGnu Tests</a></li>
<li><a href="#index-RUNTESTDEFAULTFLAGS-896"><code>RUNTESTDEFAULTFLAGS</code></a>: <a href="#DejaGnu-Tests">DejaGnu Tests</a></li>
<li><a href="#index-RUNTESTFLAGS-901"><code>RUNTESTFLAGS</code></a>: <a href="#DejaGnu-Tests">DejaGnu Tests</a></li>
<li><a href="#index-sbin_005fPROGRAMS-377"><code>sbin_PROGRAMS</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-sbin_005fSCRIPTS-631"><code>sbin_SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-SCRIPTS-628"><code>SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-SCRIPTS-150"><code>SCRIPTS</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-sharedstate_005fDATA-655"><code>sharedstate_DATA</code></a>: <a href="#Data">Data</a></li>
<li><a href="#index-SOURCES-486"><code>SOURCES</code></a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-SOURCES-387"><code>SOURCES</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-SUBDIRS-792"><code>SUBDIRS</code></a>: <a href="#Basics-of-Distribution">Basics of Distribution</a></li>
<li><a href="#index-SUBDIRS-346"><code>SUBDIRS</code></a>: <a href="#Subdirectories">Subdirectories</a></li>
<li><a href="#index-SUFFIXES-1005"><code>SUFFIXES</code></a>: <a href="#Suffixes">Suffixes</a></li>
<li><a href="#index-sysconf_005fDATA-654"><code>sysconf_DATA</code></a>: <a href="#Data">Data</a></li>
<li><a href="#index-TAGS_005fDEPENDENCIES-1000"><code>TAGS_DEPENDENCIES</code></a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-target_005ftriplet-224"><code>target_triplet</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-TEST_005fEXTENSIONS-859"><code>TEST_EXTENSIONS</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-TEST_005fLOGS-860"><code>TEST_LOGS</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-TEST_005fSUITE_005fLOG-853"><code>TEST_SUITE_LOG</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-TESTS-854"><code>TESTS</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-TESTS-847"><code>TESTS</code></a>: <a href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a></li>
<li><a href="#index-TESTS_005fENVIRONMENT-848"><code>TESTS_ENVIRONMENT</code></a>: <a href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a></li>
<li><a href="#index-TEXI2DVI-738"><code>TEXI2DVI</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-TEXI2PDF-739"><code>TEXI2PDF</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-TEXINFO_005fTEX-741"><code>TEXINFO_TEX</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-TEXINFOS-723"><code>TEXINFOS</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-TEXINFOS-154"><code>TEXINFOS</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-top_005fdistdir-1106"><code>top_distdir</code></a>: <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a></li>
<li><a href="#index-top_005fdistdir-798"><code>top_distdir</code></a>: <a href="#The-dist-Hook">The dist Hook</a></li>
<li><a href="#index-UPC-553"><code>UPC</code></a>: <a href="#Unified-Parallel-C-Support">Unified Parallel C Support</a></li>
<li><a href="#index-UPC-319"><code>UPC</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-UPCCOMPILE-556"><code>UPCCOMPILE</code></a>: <a href="#Unified-Parallel-C-Support">Unified Parallel C Support</a></li>
<li><a href="#index-UPCFLAGS-554"><code>UPCFLAGS</code></a>: <a href="#Unified-Parallel-C-Support">Unified Parallel C Support</a></li>
<li><a href="#index-UPCLINK-592"><code>UPCLINK</code></a>: <a href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a></li>
<li><a href="#index-UPCLINK-557"><code>UPCLINK</code></a>: <a href="#Unified-Parallel-C-Support">Unified Parallel C Support</a></li>
<li><a href="#index-g_t_0040code_007bV_007d-1029"><code>V</code></a>: <a href="#Automake-silent_002drules-Option">Automake silent-rules Option</a></li>
<li><a href="#index-VALAC-610"><code>VALAC</code></a>: <a href="#Vala-Support">Vala Support</a></li>
<li><a href="#index-VALAFLAGS-611"><code>VALAFLAGS</code></a>: <a href="#Vala-Support">Vala Support</a></li>
<li><a href="#index-VERBOSE-858"><code>VERBOSE</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-VERSION-784"><code>VERSION</code></a>: <a href="#Basics-of-Distribution">Basics of Distribution</a></li>
<li><a href="#index-WARNINGS-279"><code>WARNINGS</code></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-WARNINGS-206"><code>WARNINGS</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-WITH_005fDMALLOC-325"><code>WITH_DMALLOC</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-XFAIL_005fTESTS-841"><code>XFAIL_TESTS</code></a>: <a href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a></li>
<li><a href="#index-XZ_005fOPT-816"><code>XZ_OPT</code></a>: <a href="#The-Types-of-Distributions">The Types of Distributions</a></li>
<li><a href="#index-YACC-243"><code>YACC</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-YFLAGS-521"><code>YFLAGS</code></a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
   </ul><div class="node">
<a name="General-Index"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Variable-Index">Variable Index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Indices">Indices</a>

</div>

<h3 class="appendixsec">B.3 General Index</h3>



<ul class="index-cp" compact>
<li><a href="#index-g_t_0040code_007b_0023_0023_007d-_0028special-Automake-comment_0029-105"><code>##</code> (special Automake comment)</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-g_t_0040code_007b_0023serial_007d-syntax-292"><code>#serial</code> syntax</a>: <a href="#Serials">Serials</a></li>
<li><a href="#index-g_t_0040samp_007b_0024_0028LIBOBJS_0029_007d-and-empty-libraries-508">&lsquo;<samp><span class="samp">$(LIBOBJS)</span></samp>&rsquo; and empty libraries</a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-g_t_002b_003d-92"><code>+=</code></a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-g_t_002d_002dadd_002dmissing-184"><code>--add-missing</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002d_002dautomake_002dacdir-264"><code>--automake-acdir</code></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-g_t_002d_002dbuild_003d_0040var_007bbuild_007d-49"><code>--build=</code><var>build</var></a>: <a href="#Cross_002dCompilation">Cross-Compilation</a></li>
<li><a href="#index-g_t_002d_002dcopy-188"><code>--copy</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002d_002dcygnus-189"><code>--cygnus</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002d_002ddiff-266"><code>--diff</code></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-g_t_002d_002ddisable_002ddependency_002dtracking-68"><code>--disable-dependency-tracking</code></a>: <a href="#Dependency-Tracking">Dependency Tracking</a></li>
<li><a href="#index-g_t_002d_002ddisable_002dmaintainer_002dmode-253"><code>--disable-maintainer-mode</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-g_t_002d_002ddisable_002dsilent_002drules-1028"><code>--disable-silent-rules</code></a>: <a href="#Automake-silent_002drules-Option">Automake silent-rules Option</a></li>
<li><a href="#index-g_t_002d_002ddry_002drun-267"><code>--dry-run</code></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-g_t_0040option_007b_002d_002denable_002ddebug_007d_002c-example-1012"><samp><span class="option">--enable-debug</span></samp>, example</a>: <a href="#Usage-of-Conditionals">Usage of Conditionals</a></li>
<li><a href="#index-g_t_002d_002denable_002ddependency_002dtracking-69"><code>--enable-dependency-tracking</code></a>: <a href="#Dependency-Tracking">Dependency Tracking</a></li>
<li><a href="#index-g_t_002d_002denable_002dmaintainer_002dmode-252"><code>--enable-maintainer-mode</code></a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-g_t_002d_002denable_002dsilent_002drules-1027"><code>--enable-silent-rules</code></a>: <a href="#Automake-silent_002drules-Option">Automake silent-rules Option</a></li>
<li><a href="#index-g_t_002d_002dforce-272"><code>--force</code></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-g_t_002d_002dforce_002dmissing-191"><code>--force-missing</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002d_002dforeign-192"><code>--foreign</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002d_002dgnits-193"><code>--gnits</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_0040option_007b_002d_002dgnits_007d_002c-complete-description-1038"><samp><span class="option">--gnits</span></samp>, complete description</a>: <a href="#Gnits">Gnits</a></li>
<li><a href="#index-g_t_002d_002dgnu-194"><code>--gnu</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_0040option_007b_002d_002dgnu_007d_002c-complete-description-1037"><samp><span class="option">--gnu</span></samp>, complete description</a>: <a href="#Gnits">Gnits</a></li>
<li><a href="#index-g_t_0040option_007b_002d_002dgnu_007d_002c-required-files-1036"><samp><span class="option">--gnu</span></samp>, required files</a>: <a href="#Gnits">Gnits</a></li>
<li><a href="#index-g_t_002d_002dhelp-268"><code>--help</code></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-g_t_002d_002dhelp-195"><code>--help</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_0040option_007b_002d_002dhelp_007d-check-975"><samp><span class="option">--help</span></samp> check</a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-g_t_002d_002dhelp_003drecursive-73"><code>--help=recursive</code></a>: <a href="#Nested-Packages">Nested Packages</a></li>
<li><a href="#index-g_t_002d_002dhost_003d_0040var_007bhost_007d-50"><code>--host=</code><var>host</var></a>: <a href="#Cross_002dCompilation">Cross-Compilation</a></li>
<li><a href="#index-g_t_002d_002dinclude_002ddeps-197"><code>--include-deps</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002d_002dinstall-270"><code>--install</code></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-g_t_002d_002dlibdir-185"><code>--libdir</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002d_002dno_002dforce-198"><code>--no-force</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002d_002doutput-273"><code>--output</code></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-g_t_002d_002doutput_002ddir-200"><code>--output-dir</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002d_002dprefix-33"><code>--prefix</code></a>: <a href="#Standard-Directory-Variables">Standard Directory Variables</a></li>
<li><a href="#index-g_t_002d_002dprint_002dac_002ddir-274"><code>--print-ac-dir</code></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-g_t_002d_002dprint_002dlibdir-186"><code>--print-libdir</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002d_002dprogram_002dprefix_003d_0040var_007bprefix_007d-57"><code>--program-prefix=</code><var>prefix</var></a>: <a href="#Renaming">Renaming</a></li>
<li><a href="#index-g_t_002d_002dprogram_002dsuffix_003d_0040var_007bsuffix_007d-58"><code>--program-suffix=</code><var>suffix</var></a>: <a href="#Renaming">Renaming</a></li>
<li><a href="#index-g_t_002d_002dprogram_002dtransform_002dname_003d_0040var_007bprogram_007d-59"><code>--program-transform-name=</code><var>program</var></a>: <a href="#Renaming">Renaming</a></li>
<li><a href="#index-g_t_002d_002dsystem_002dacdir-265"><code>--system-acdir</code></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-g_t_002d_002dtarget_003d_0040var_007btarget_007d-53"><code>--target=</code><var>target</var></a>: <a href="#Cross_002dCompilation">Cross-Compilation</a></li>
<li><a href="#index-g_t_002d_002dverbose-275"><code>--verbose</code></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-g_t_002d_002dverbose-202"><code>--verbose</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002d_002dversion-276"><code>--version</code></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-g_t_002d_002dversion-203"><code>--version</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_0040option_007b_002d_002dversion_007d-check-976"><samp><span class="option">--version</span></samp> check</a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-g_t_002d_002dwarnings-278"><code>--warnings</code></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-g_t_002d_002dwarnings-205"><code>--warnings</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002d_002dwith_002ddmalloc-326"><code>--with-dmalloc</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-g_t_002da-183"><code>-a</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002dc-187"><code>-c</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002df-190"><code>-f</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_0040option_007b_002dhook_007d-targets-1092"><samp><span class="option">-hook</span></samp> targets</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-g_t_002dI-269"><code>-I</code></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-g_t_002di-196"><code>-i</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_0040option_007b_002dl_007d-and-_0040code_007bLDADD_007d-400"><samp><span class="option">-l</span></samp> and <code>LDADD</code></a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-g_t_0040option_007b_002dlocal_007d-targets-1049"><samp><span class="option">-local</span></samp> targets</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-g_t_0040option_007b_002dmodule_007d_002c-libtool-437"><samp><span class="option">-module</span></samp>, libtool</a>: <a href="#Libtool-Modules">Libtool Modules</a></li>
<li><a href="#index-g_t_002do-199"><code>-o</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002dv-201"><code>-v</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002dW-277"><code>-W</code></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-g_t_002dW-204"><code>-W</code></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_002dWall-82"><code>-Wall</code></a>: <a href="#amhello_0027s-configure_002eac-Setup-Explained">amhello's configure.ac Setup Explained</a></li>
<li><a href="#index-g_t_002dWerror-83"><code>-Werror</code></a>: <a href="#amhello_0027s-configure_002eac-Setup-Explained">amhello's configure.ac Setup Explained</a></li>
<li><a href="#index-g_t_0040file_007b_002ela_007d-suffix_002c-defined-419"><samp><span class="file">.la</span></samp> suffix, defined</a>: <a href="#Libtool-Concept">Libtool Concept</a></li>
<li><a href="#index-g_t_0040file_007b_002elog_007d-files-855"><samp><span class="file">.log</span></samp> files</a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-g_t_0040file_007b_002etrs_007d-files-856"><samp><span class="file">.trs</span></samp> files</a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-g_t_003acopy_002din_002dglobal_002dlog_003a-892">:copy-in-global-log:</a>: <a href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a></li>
<li><a href="#index-g_t_003arecheck_003a-890">:recheck:</a>: <a href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a></li>
<li><a href="#index-g_t_003atest_002dglobal_002dresult_003a-894">:test-global-result:</a>: <a href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a></li>
<li><a href="#index-g_t_0040code_007b_003atest_002dresult_003a_007d-888"><code>:test-result:</code></a>: <a href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a></li>
<li><a href="#index-g_t_0040code_007b_005fDATA_007d-primary_002c-defined-648"><code>_DATA</code> primary, defined</a>: <a href="#Data">Data</a></li>
<li><a href="#index-g_t_0040code_007b_005fDEPENDENCIES_007d_002c-defined-396"><code>_DEPENDENCIES</code>, defined</a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-g_t_0040code_007b_005fHEADERS_007d-primary_002c-defined-637"><code>_HEADERS</code> primary, defined</a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-g_t_0040code_007b_005fJAVA_007d-primary_002c-defined-671"><code>_JAVA</code> primary, defined</a>: <a href="#Java">Java</a></li>
<li><a href="#index-g_t_0040code_007b_005fLDFLAGS_007d_002c-defined-394"><code>_LDFLAGS</code>, defined</a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-g_t_0040code_007b_005fLDFLAGS_007d_002c-libtool-439"><code>_LDFLAGS</code>, libtool</a>: <a href="#Libtool-Flags">Libtool Flags</a></li>
<li><a href="#index-g_t_0040code_007b_005fLIBADD_007d_002c-libtool-438"><code>_LIBADD</code>, libtool</a>: <a href="#Libtool-Flags">Libtool Flags</a></li>
<li><a href="#index-g_t_0040code_007b_005fLIBRARIES_007d-primary_002c-defined-406"><code>_LIBRARIES</code> primary, defined</a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-g_t_0040code_007b_005fLIBTOOLFLAGS_007d_002c-libtool-440"><code>_LIBTOOLFLAGS</code>, libtool</a>: <a href="#Libtool-Flags">Libtool Flags</a></li>
<li><a href="#index-g_t_0040code_007b_005fLISP_007d-primary_002c-defined-660"><code>_LISP</code> primary, defined</a>: <a href="#Emacs-Lisp">Emacs Lisp</a></li>
<li><a href="#index-g_t_0040code_007b_005fLTLIBRARIES_007d-primary_002c-defined-422"><code>_LTLIBRARIES</code> primary, defined</a>: <a href="#Libtool-Libraries">Libtool Libraries</a></li>
<li><a href="#index-g_t_0040code_007b_005fMANS_007d-primary_002c-defined-742"><code>_MANS</code> primary, defined</a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-g_t_0040code_007b_005fPROGRAMS_007d-primary-variable-119"><code>_PROGRAMS</code> primary variable</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-g_t_0040code_007b_005fPYTHON_007d-primary_002c-defined-683"><code>_PYTHON</code> primary, defined</a>: <a href="#Python">Python</a></li>
<li><a href="#index-g_t_0040code_007b_005fSCRIPTS_007d-primary_002c-defined-623"><code>_SCRIPTS</code> primary, defined</a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-g_t_0040code_007b_005fSOURCES_007d-and-header-files-389"><code>_SOURCES</code> and header files</a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-g_t_0040code_007b_005fSOURCES_007d-primary_002c-defined-382"><code>_SOURCES</code> primary, defined</a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-g_t_0040code_007b_005fSOURCES_007d_002c-default-487"><code>_SOURCES</code>, default</a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-g_t_0040code_007b_005fSOURCES_007d_002c-empty-495"><code>_SOURCES</code>, empty</a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-g_t_0040code_007b_005fTEXINFOS_007d-primary_002c-defined-697"><code>_TEXINFOS</code> primary, defined</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-g_t_0040code_007bAC_005fCONFIG_005fFILES_007d_002c-conditional-1021"><code>AC_CONFIG_FILES</code>, conditional</a>: <a href="#Usage-of-Conditionals">Usage of Conditionals</a></li>
<li><a href="#index-g_t_0040code_007bAC_005fSUBST_007d-and-_0040code_007bSUBDIRS_007d-358"><code>AC_SUBST</code> and <code>SUBDIRS</code></a>: <a href="#Subdirectories-with-AC_005fSUBST">Subdirectories with AC_SUBST</a></li>
<li><a href="#index-g_t_0040file_007bacinclude_002em4_007d_002c-defined-166"><samp><span class="file">acinclude.m4</span></samp>, defined</a>: <a href="#Complete">Complete</a></li>
<li><a href="#index-g_t_0040command_007baclocal_007d-and-serial-numbers-293"><samp><span class="command">aclocal</span></samp> and serial numbers</a>: <a href="#Serials">Serials</a></li>
<li><a href="#index-g_t_0040command_007baclocal_007d-program_002c-introduction-164"><samp><span class="command">aclocal</span></samp> program, introduction</a>: <a href="#Complete">Complete</a></li>
<li><a href="#index-g_t_0040command_007baclocal_007d-search-path-281"><samp><span class="command">aclocal</span></samp> search path</a>: <a href="#Macro-Search-Path">Macro Search Path</a></li>
<li><a href="#index-g_t_0040command_007baclocal_007d_0027s-scheduled-death-294"><samp><span class="command">aclocal</span></samp>'s scheduled death</a>: <a href="#Future-of-aclocal">Future of aclocal</a></li>
<li><a href="#index-g_t_0040command_007baclocal_007d_002c-extending-284"><samp><span class="command">aclocal</span></samp>, extending</a>: <a href="#Extending-aclocal">Extending aclocal</a></li>
<li><a href="#index-g_t_0040command_007baclocal_007d_002c-Invocation-257"><samp><span class="command">aclocal</span></samp>, Invocation</a>: <a href="#aclocal-Invocation">aclocal Invocation</a></li>
<li><a href="#index-g_t_0040command_007baclocal_007d_002c-Invoking-259"><samp><span class="command">aclocal</span></samp>, Invoking</a>: <a href="#aclocal-Invocation">aclocal Invocation</a></li>
<li><a href="#index-g_t_0040command_007baclocal_007d_002c-Options-262"><samp><span class="command">aclocal</span></samp>, Options</a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-g_t_0040command_007baclocal_007d_002c-using-211"><samp><span class="command">aclocal</span></samp>, using</a>: <a href="#configure">configure</a></li>
<li><a href="#index-g_t_0040file_007baclocal_002em4_007d_002c-preexisting-165"><samp><span class="file">aclocal.m4</span></samp>, preexisting</a>: <a href="#Complete">Complete</a></li>
<li><a href="#index-g_t_0040env_007bACLOCAL_005fPATH_007d-283"><samp><span class="env">ACLOCAL_PATH</span></samp></a>: <a href="#Macro-Search-Path">Macro Search Path</a></li>
<li><a href="#index-Adding-new-_0040code_007bSUFFIXES_007d-1003">Adding new <code>SUFFIXES</code></a>: <a href="#Suffixes">Suffixes</a></li>
<li><a href="#index-all-1051"><code>all</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-all-23"><code>all</code></a>: <a href="#Standard-Targets">Standard Targets</a></li>
<li><a href="#index-all_002dlocal-1052"><code>all-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-g_t_0040code_007bALLOCA_007d_002c-and-Libtool-447"><code>ALLOCA</code>, and Libtool</a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-g_t_0040code_007bALLOCA_007d_002c-example-497"><code>ALLOCA</code>, example</a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-g_t_0040code_007bALLOCA_007d_002c-special-handling-499"><code>ALLOCA</code>, special handling</a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fCCASFLAGS_007d-and-_0040code_007bCCASFLAGS_007d-1131"><code>AM_CCASFLAGS</code> and <code>CCASFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fCFLAGS_007d-and-_0040code_007bCFLAGS_007d-1132"><code>AM_CFLAGS</code> and <code>CFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fCONDITIONAL_007d-and-_0040code_007bSUBDIRS_007d-355"><code>AM_CONDITIONAL</code> and <code>SUBDIRS</code></a>: <a href="#Subdirectories-with-AM_005fCONDITIONAL">Subdirectories with AM_CONDITIONAL</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fCPPFLAGS_007d-and-_0040code_007bCPPFLAGS_007d-1133"><code>AM_CPPFLAGS</code> and <code>CPPFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fCXXFLAGS_007d-and-_0040code_007bCXXFLAGS_007d-1134"><code>AM_CXXFLAGS</code> and <code>CXXFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fFCFLAGS_007d-and-_0040code_007bFCFLAGS_007d-1135"><code>AM_FCFLAGS</code> and <code>FCFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fFFLAGS_007d-and-_0040code_007bFFLAGS_007d-1136"><code>AM_FFLAGS</code> and <code>FFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fGCJFLAGS_007d-and-_0040code_007bGCJFLAGS_007d-1137"><code>AM_GCJFLAGS</code> and <code>GCJFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fINIT_005fAUTOMAKE_007d_002c-example-use-163"><code>AM_INIT_AUTOMAKE</code>, example use</a>: <a href="#Complete">Complete</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fLDFLAGS_007d-and-_0040code_007bLDFLAGS_007d-1138"><code>AM_LDFLAGS</code> and <code>LDFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fLFLAGS_007d-and-_0040code_007bLFLAGS_007d-1139"><code>AM_LFLAGS</code> and <code>LFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fLIBTOOLFLAGS_007d-and-_0040code_007bLIBTOOLFLAGS_007d-1140"><code>AM_LIBTOOLFLAGS</code> and <code>LIBTOOLFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fMAINTAINER_005fMODE_007d_002c-purpose-1118"><code>AM_MAINTAINER_MODE</code>, purpose</a>: <a href="#maintainer_002dmode">maintainer-mode</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fOBJCFLAGS_007d-and-_0040code_007bOBJCFLAGS_007d-1141"><code>AM_OBJCFLAGS</code> and <code>OBJCFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fOBJCXXFLAGS_007d-and-_0040code_007bOBJXXCFLAGS_007d-1142"><code>AM_OBJCXXFLAGS</code> and <code>OBJXXCFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fRFLAGS_007d-and-_0040code_007bRFLAGS_007d-1143"><code>AM_RFLAGS</code> and <code>RFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fUPCFLAGS_007d-and-_0040code_007bUPCFLAGS_007d-1144"><code>AM_UPCFLAGS</code> and <code>UPCFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bAM_005fYFLAGS_007d-and-_0040code_007bYFLAGS_007d-1145"><code>AM_YFLAGS</code> and <code>YFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040file_007bamhello_002d1_002e0_002etar_002egz_007d_002c-creation-77"><samp><span class="file">amhello-1.0.tar.gz</span></samp>, creation</a>: <a href="#Hello-World">Hello World</a></li>
<li><a href="#index-g_t_0040file_007bamhello_002d1_002e0_002etar_002egz_007d_002c-location-16"><samp><span class="file">amhello-1.0.tar.gz</span></samp>, location</a>: <a href="#Use-Cases">Use Cases</a></li>
<li><a href="#index-g_t_0040file_007bamhello_002d1_002e0_002etar_002egz_007d_002c-use-cases-17"><samp><span class="file">amhello-1.0.tar.gz</span></samp>, use cases</a>: <a href="#Use-Cases">Use Cases</a></li>
<li><a href="#index-Append-operator-91">Append operator</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-ARG_005fMAX-156">ARG_MAX</a>: <a href="#Length-Limitations">Length Limitations</a></li>
<li><a href="#index-g_t_0040file_007bautogen_002esh_007d-and-_0040command_007bautoreconf_007d-458"><samp><span class="file">autogen.sh</span></samp> and <samp><span class="command">autoreconf</span></samp></a>: <a href="#Error-required-file-ltmain_002esh-not-found">Error required file ltmain.sh not found</a></li>
<li><a href="#index-autom4te-261">autom4te</a>: <a href="#aclocal-Invocation">aclocal Invocation</a></li>
<li><a href="#index-Automake-constraints-3">Automake constraints</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-g_t_0040command_007bautomake_007d-options-177"><samp><span class="command">automake</span></samp> options</a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-Automake-parser_002c-limitations-of-94">Automake parser, limitations of</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Automake-requirements-212">Automake requirements</a>: <a href="#Requirements">Requirements</a></li>
<li><a href="#index-Automake-requirements-4">Automake requirements</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-g_t_0040command_007bautomake_007d_002c-invocation-175"><samp><span class="command">automake</span></samp>, invocation</a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_0040command_007bautomake_007d_002c-invoking-173"><samp><span class="command">automake</span></samp>, invoking</a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-Automake_002c-recursive-operation-103">Automake, recursive operation</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Automatic-dependency-tracking-614">Automatic dependency tracking</a>: <a href="#Dependencies">Dependencies</a></li>
<li><a href="#index-Automatic-linker-selection-584">Automatic linker selection</a>: <a href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a></li>
<li><a href="#index-g_t_0040command_007bautoreconf_007d-and-_0040command_007blibtoolize_007d-456"><samp><span class="command">autoreconf</span></samp> and <samp><span class="command">libtoolize</span></samp></a>: <a href="#Error-required-file-ltmain_002esh-not-found">Error required file ltmain.sh not found</a></li>
<li><a href="#index-g_t_0040command_007bautoreconf_007d_002c-example-78"><samp><span class="command">autoreconf</span></samp>, example</a>: <a href="#Creating-amhello">Creating amhello</a></li>
<li><a href="#index-g_t_0040command_007bautoscan_007d-85"><samp><span class="command">autoscan</span></samp></a>: <a href="#amhello_0027s-configure_002eac-Setup-Explained">amhello's configure.ac Setup Explained</a></li>
<li><a href="#index-Autotools_002c-introduction-11">Autotools, introduction</a>: <a href="#GNU-Build-System">GNU Build System</a></li>
<li><a href="#index-Autotools_002c-purpose-74">Autotools, purpose</a>: <a href="#Why-Autotools">Why Autotools</a></li>
<li><a href="#index-autoupdate-328">autoupdate</a>: <a href="#Obsolete-Macros">Obsolete Macros</a></li>
<li><a href="#index-Auxiliary-programs-161">Auxiliary programs</a>: <a href="#Auxiliary-Programs">Auxiliary Programs</a></li>
<li><a href="#index-Avoiding-man-page-renaming-756">Avoiding man page renaming</a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-Avoiding-path-stripping-364">Avoiding path stripping</a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-Binary-package-62">Binary package</a>: <a href="#DESTDIR">DESTDIR</a></li>
<li><a href="#index-g_t_0040file_007bbootstrap_002esh_007d-and-_0040command_007bautoreconf_007d-457"><samp><span class="file">bootstrap.sh</span></samp> and <samp><span class="command">autoreconf</span></samp></a>: <a href="#Error-required-file-ltmain_002esh-not-found">Error required file ltmain.sh not found</a></li>
<li><a href="#index-Bugs_002c-reporting-6">Bugs, reporting</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-build-tree-and-source-tree-39">build tree and source tree</a>: <a href="#VPATH-Builds">VPATH Builds</a></li>
<li><a href="#index-g_t_0040code_007bBUILT_005fSOURCES_007d_002c-defined-659"><code>BUILT_SOURCES</code>, defined</a>: <a href="#Sources">Sources</a></li>
<li><a href="#index-C_002b_002b-support-530">C++ support</a>: <a href="#C_002b_002b-Support">C++ Support</a></li>
<li><a href="#index-canonicalizing-Automake-variables-157">canonicalizing Automake variables</a>: <a href="#Canonicalization">Canonicalization</a></li>
<li><a href="#index-g_t_0040code_007bCCASFLAGS_007d-and-_0040code_007bAM_005fCCASFLAGS_007d-1146"><code>CCASFLAGS</code> and <code>AM_CCASFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bCFLAGS_007d-and-_0040code_007bAM_005fCFLAGS_007d-1147"><code>CFLAGS</code> and <code>AM_CFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-cfortran-578">cfortran</a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-check-1063"><code>check</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-check-822"><code>check</code></a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-check-29"><code>check</code></a>: <a href="#Standard-Targets">Standard Targets</a></li>
<li><a href="#index-check_002dlocal-1064"><code>check-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-check_002dnews-921"><code>check-news</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-g_t_0040samp_007bcheck_005f_007d-primary-prefix_002c-definition-142">&lsquo;<samp><span class="samp">check_</span></samp>&rsquo; primary prefix, definition</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-g_t_0040code_007bcheck_005fPROGRAMS_007d-example-490"><code>check_PROGRAMS</code> example</a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-clean-1084"><code>clean</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-clean-27"><code>clean</code></a>: <a href="#Standard-Targets">Standard Targets</a></li>
<li><a href="#index-clean_002dlocal-1085"><code>clean-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-clean_002dlocal-779"><code>clean-local</code></a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-color_002dtests-923"><code>color-tests</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Colorized-testsuite-output-846">Colorized testsuite output</a>: <a href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a></li>
<li><a href="#index-command-line-length-limit-155">command line length limit</a>: <a href="#Length-Limitations">Length Limitations</a></li>
<li><a href="#index-Comment_002c-special-to-Automake-107">Comment, special to Automake</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Compilation-of-Java-to-bytecode-675">Compilation of Java to bytecode</a>: <a href="#Java">Java</a></li>
<li><a href="#index-Compilation-of-Java-to-native-code-604">Compilation of Java to native code</a>: <a href="#Java-Support-with-gcj">Java Support with gcj</a></li>
<li><a href="#index-Compile-Flag-Variables-1130">Compile Flag Variables</a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-Complete-example-162">Complete example</a>: <a href="#Complete">Complete</a></li>
<li><a href="#index-Conditional-example_002c-_0040option_007b_002d_002denable_002ddebug_007d-1014">Conditional example, <samp><span class="option">--enable-debug</span></samp></a>: <a href="#Usage-of-Conditionals">Usage of Conditionals</a></li>
<li><a href="#index-conditional-libtool-libraries-430">conditional libtool libraries</a>: <a href="#Conditional-Libtool-Libraries">Conditional Libtool Libraries</a></li>
<li><a href="#index-Conditional-programs-402">Conditional programs</a>: <a href="#Conditional-Programs">Conditional Programs</a></li>
<li><a href="#index-Conditional-subdirectories-350">Conditional subdirectories</a>: <a href="#Conditional-Subdirectories">Conditional Subdirectories</a></li>
<li><a href="#index-Conditional-_0040code_007bSUBDIRS_007d-352">Conditional <code>SUBDIRS</code></a>: <a href="#Conditional-Subdirectories">Conditional Subdirectories</a></li>
<li><a href="#index-Conditionals-1009">Conditionals</a>: <a href="#Conditionals">Conditionals</a></li>
<li><a href="#index-g_t_0040file_007bconfig_002eguess_007d-182"><samp><span class="file">config.guess</span></samp></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_0040file_007bconfig_002esite_007d-example-35"><samp><span class="file">config.site</span></samp> example</a>: <a href="#config_002esite">config.site</a></li>
<li><a href="#index-configuration-variables_002c-overriding-34">configuration variables, overriding</a>: <a href="#Standard-Configuration-Variables">Standard Configuration Variables</a></li>
<li><a href="#index-Configuration_002c-basics-18">Configuration, basics</a>: <a href="#Basic-Installation">Basic Installation</a></li>
<li><a href="#index-g_t_0040file_007bconfigure_002eac_007d_002c-Hello-World-81"><samp><span class="file">configure.ac</span></samp>, Hello World</a>: <a href="#amhello_0027s-configure_002eac-Setup-Explained">amhello's configure.ac Setup Explained</a></li>
<li><a href="#index-g_t_0040file_007bconfigure_002eac_007d_002c-scanning-208"><samp><span class="file">configure.ac</span></samp>, scanning</a>: <a href="#configure">configure</a></li>
<li><a href="#index-conflicting-definitions-1042">conflicting definitions</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-Constraints-of-Automake-2">Constraints of Automake</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-convenience-libraries_002c-libtool-431">convenience libraries, libtool</a>: <a href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a></li>
<li><a href="#index-copying-semantics-1041">copying semantics</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-g_t_0040command_007bcpio_007d-example-137"><samp><span class="command">cpio</span></samp> example</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-g_t_0040code_007bCPPFLAGS_007d-and-_0040code_007bAM_005fCPPFLAGS_007d-1148"><code>CPPFLAGS</code> and <code>AM_CPPFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-cross_002dcompilation-48">cross-compilation</a>: <a href="#Cross_002dCompilation">Cross-Compilation</a></li>
<li><a href="#index-cross_002dcompilation-example-52">cross-compilation example</a>: <a href="#Cross_002dCompilation">Cross-Compilation</a></li>
<li><a href="#index-CVS-and-generated-files-1113">CVS and generated files</a>: <a href="#CVS">CVS</a></li>
<li><a href="#index-CVS-and-third_002dparty-files-1115">CVS and third-party files</a>: <a href="#CVS">CVS</a></li>
<li><a href="#index-CVS-and-timestamps-1112">CVS and timestamps</a>: <a href="#CVS">CVS</a></li>
<li><a href="#index-g_t_0040code_007bCXXFLAGS_007d-and-_0040code_007bAM_005fCXXFLAGS_007d-1149"><code>CXXFLAGS</code> and <code>AM_CXXFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-cygnus-919"><code>cygnus</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-g_t_0040option_007bcygnus_007d-strictness-1040"><samp><span class="option">cygnus</span></samp> strictness</a>: <a href="#Cygnus">Cygnus</a></li>
<li><a href="#index-g_t_0040code_007bDATA_007d-primary_002c-defined-649"><code>DATA</code> primary, defined</a>: <a href="#Data">Data</a></li>
<li><a href="#index-debug-build_002c-example-42">debug build, example</a>: <a href="#VPATH-Builds">VPATH Builds</a></li>
<li><a href="#index-debugging-rules-1165">debugging rules</a>: <a href="#Debugging-Make-Rules">Debugging Make Rules</a></li>
<li><a href="#index-default-_0040code_007b_005fSOURCES_007d-488">default <code>_SOURCES</code></a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-default-source_002c-Libtool-modules-example-493">default source, Libtool modules example</a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-default-verbosity-for-silent_002drules-1030">default verbosity for silent-rules</a>: <a href="#Automake-silent_002drules-Option">Automake silent-rules Option</a></li>
<li><a href="#index-definitions_002c-conflicts-1045">definitions, conflicts</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-dejagnu-925"><code>dejagnu</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-dejagnu-897"><code>dejagnu</code></a>: <a href="#DejaGnu-Tests">DejaGnu Tests</a></li>
<li><a href="#index-g_t_0040command_007bdepcomp_007d-615"><samp><span class="command">depcomp</span></samp></a>: <a href="#Dependencies">Dependencies</a></li>
<li><a href="#index-dependencies-and-distributed-files-1124">dependencies and distributed files</a>: <a href="#Errors-with-distclean">Errors with distclean</a></li>
<li><a href="#index-Dependency-tracking-613">Dependency tracking</a>: <a href="#Dependencies">Dependencies</a></li>
<li><a href="#index-Dependency-tracking-67">Dependency tracking</a>: <a href="#Dependency-Tracking">Dependency Tracking</a></li>
<li><a href="#index-Dependency-tracking_002c-disabling-619">Dependency tracking, disabling</a>: <a href="#Dependencies">Dependencies</a></li>
<li><a href="#index-directory-variables-32">directory variables</a>: <a href="#Standard-Directory-Variables">Standard Directory Variables</a></li>
<li><a href="#index-g_t_0040file_007bdirlist_007d-282"><samp><span class="file">dirlist</span></samp></a>: <a href="#Macro-Search-Path">Macro Search Path</a></li>
<li><a href="#index-Disabling-dependency-tracking-618">Disabling dependency tracking</a>: <a href="#Dependencies">Dependencies</a></li>
<li><a href="#index-Disabling-hard-errors-843">Disabling hard errors</a>: <a href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a></li>
<li><a href="#index-dist-785"><code>dist</code></a>: <a href="#Basics-of-Distribution">Basics of Distribution</a></li>
<li><a href="#index-dist-31"><code>dist</code></a>: <a href="#Standard-Targets">Standard Targets</a></li>
<li><a href="#index-dist_002dbzip2-927"><code>dist-bzip2</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-dist_002dbzip2-812"><code>dist-bzip2</code></a>: <a href="#The-Types-of-Distributions">The Types of Distributions</a></li>
<li><a href="#index-dist_002dgzip-813"><code>dist-gzip</code></a>: <a href="#The-Types-of-Distributions">The Types of Distributions</a></li>
<li><a href="#index-dist_002dhook-1097"><code>dist-hook</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-dist_002dhook-796"><code>dist-hook</code></a>: <a href="#The-dist-Hook">The dist Hook</a></li>
<li><a href="#index-dist_002dlzip-930"><code>dist-lzip</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-dist_002dlzip-814"><code>dist-lzip</code></a>: <a href="#The-Types-of-Distributions">The Types of Distributions</a></li>
<li><a href="#index-dist_002dshar-933"><code>dist-shar</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-dist_002dshar-815"><code>dist-shar</code></a>: <a href="#The-Types-of-Distributions">The Types of Distributions</a></li>
<li><a href="#index-dist_002dtarZ-939"><code>dist-tarZ</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-dist_002dtarZ-819"><code>dist-tarZ</code></a>: <a href="#The-Types-of-Distributions">The Types of Distributions</a></li>
<li><a href="#index-dist_002dxz-817"><code>dist-xz</code></a>: <a href="#The-Types-of-Distributions">The Types of Distributions</a></li>
<li><a href="#index-dist_002dzip-936"><code>dist-zip</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-dist_002dzip-818"><code>dist-zip</code></a>: <a href="#The-Types-of-Distributions">The Types of Distributions</a></li>
<li><a href="#index-g_t_0040code_007bdist_005f_007d-and-_0040code_007bnobase_005f_007d-366"><code>dist_</code> and <code>nobase_</code></a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-g_t_0040code_007bdist_005f_007d-and-_0040code_007bnotrans_005f_007d-758"><code>dist_</code> and <code>notrans_</code></a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-g_t_0040code_007bDIST_005fSUBDIRS_007d_002c-explained-353"><code>DIST_SUBDIRS</code>, explained</a>: <a href="#SUBDIRS-vs-DIST_005fSUBDIRS">SUBDIRS vs DIST_SUBDIRS</a></li>
<li><a href="#index-distcheck-800"><code>distcheck</code></a>: <a href="#Checking-the-Distribution">Checking the Distribution</a></li>
<li><a href="#index-distcheck-79"><code>distcheck</code></a>: <a href="#Creating-amhello">Creating amhello</a></li>
<li><a href="#index-g_t_0040code_007bdistcheck_007d-better-than-_0040code_007bdist_007d-66"><code>distcheck</code> better than <code>dist</code></a>: <a href="#Preparing-Distributions">Preparing Distributions</a></li>
<li><a href="#index-g_t_0040code_007bdistcheck_007d-example-80"><code>distcheck</code> example</a>: <a href="#Creating-amhello">Creating amhello</a></li>
<li><a href="#index-distcheck_002dhook-803"><code>distcheck-hook</code></a>: <a href="#Checking-the-Distribution">Checking the Distribution</a></li>
<li><a href="#index-distclean-1125"><code>distclean</code></a>: <a href="#Errors-with-distclean">Errors with distclean</a></li>
<li><a href="#index-distclean-1086"><code>distclean</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-distclean-28"><code>distclean</code></a>: <a href="#Standard-Targets">Standard Targets</a></li>
<li><a href="#index-g_t_0040code_007bdistclean_007d_002c-diagnostic-1122"><code>distclean</code>, diagnostic</a>: <a href="#Errors-with-distclean">Errors with distclean</a></li>
<li><a href="#index-distclean_002dlocal-1087"><code>distclean-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-distclean_002dlocal-780"><code>distclean-local</code></a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-distcleancheck-805"><code>distcleancheck</code></a>: <a href="#Checking-the-Distribution">Checking the Distribution</a></li>
<li><a href="#index-distdir-1104"><code>distdir</code></a>: <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a></li>
<li><a href="#index-Distinction-between-errors-and-failures-in-testsuites-836">Distinction between errors and failures in testsuites</a>: <a href="#Generalities-about-Testing">Generalities about Testing</a></li>
<li><a href="#index-Distributions_002c-preparation-65">Distributions, preparation</a>: <a href="#Preparing-Distributions">Preparing Distributions</a></li>
<li><a href="#index-distuninstallcheck-809"><code>distuninstallcheck</code></a>: <a href="#Checking-the-Distribution">Checking the Distribution</a></li>
<li><a href="#index-g_t_0040command_007bdmalloc_007d_002c-support-for-324"><samp><span class="command">dmalloc</span></samp>, support for</a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-dvi-1055"><code>dvi</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-dvi-706"><code>dvi</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-DVI-output-using-Texinfo-703">DVI output using Texinfo</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-dvi_002dlocal-1056"><code>dvi-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-E_002dmail_002c-bug-reports-8">E-mail, bug reports</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-g_t_0040code_007bEDITION_007d-Texinfo-flag-720"><code>EDITION</code> Texinfo flag</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-else-1017"><code>else</code></a>: <a href="#Usage-of-Conditionals">Usage of Conditionals</a></li>
<li><a href="#index-empty-_0040code_007b_005fSOURCES_007d-494">empty <code>_SOURCES</code></a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-Empty-libraries-414">Empty libraries</a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-Empty-libraries-and-_0040samp_007b_0024_0028LIBOBJS_0029_007d-507">Empty libraries and &lsquo;<samp><span class="samp">$(LIBOBJS)</span></samp>&rsquo;</a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-endif-1016"><code>endif</code></a>: <a href="#Usage-of-Conditionals">Usage of Conditionals</a></li>
<li><a href="#index-Example-conditional-_0040option_007b_002d_002denable_002ddebug_007d-1013">Example conditional <samp><span class="option">--enable-debug</span></samp></a>: <a href="#Usage-of-Conditionals">Usage of Conditionals</a></li>
<li><a href="#index-Example-conditional-_0040code_007bAC_005fCONFIG_005fFILES_007d-1020">Example conditional <code>AC_CONFIG_FILES</code></a>: <a href="#Usage-of-Conditionals">Usage of Conditionals</a></li>
<li><a href="#index-Example-Hello-World-75">Example Hello World</a>: <a href="#Hello-World">Hello World</a></li>
<li><a href="#index-Example-of-recursive-operation-104">Example of recursive operation</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Example-of-shared-libraries-425">Example of shared libraries</a>: <a href="#Libtool-Libraries">Libtool Libraries</a></li>
<li><a href="#index-Example_002c-_0040code_007bEXTRA_005fPROGRAMS_007d-136">Example, <code>EXTRA_PROGRAMS</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-Example_002c-_0040command_007bfalse_007d-and-_0040command_007btrue_007d-168">Example, <samp><span class="command">false</span></samp> and <samp><span class="command">true</span></samp></a>: <a href="#true">true</a></li>
<li><a href="#index-Example_002c-mixed-language-583">Example, mixed language</a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-Executable-extension-620">Executable extension</a>: <a href="#EXEEXT">EXEEXT</a></li>
<li><a href="#index-Exit-status-77_002c-special-interpretation-837">Exit status 77, special interpretation</a>: <a href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a></li>
<li><a href="#index-Exit-status-99_002c-special-interpretation-838">Exit status 99, special interpretation</a>: <a href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a></li>
<li><a href="#index-expected-failure-830">expected failure</a>: <a href="#Generalities-about-Testing">Generalities about Testing</a></li>
<li><a href="#index-Expected-test-failure-840">Expected test failure</a>: <a href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a></li>
<li><a href="#index-expected-test-failure-831">expected test failure</a>: <a href="#Generalities-about-Testing">Generalities about Testing</a></li>
<li><a href="#index-Extending-_0040command_007baclocal_007d-285">Extending <samp><span class="command">aclocal</span></samp></a>: <a href="#Extending-aclocal">Extending aclocal</a></li>
<li><a href="#index-Extending-list-of-installation-directories-138">Extending list of installation directories</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-Extension_002c-executable-621">Extension, executable</a>: <a href="#EXEEXT">EXEEXT</a></li>
<li><a href="#index-Extra-files-distributed-with-Automake-180">Extra files distributed with Automake</a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_0040code_007bEXTRA_005f_007d_002c-prepending-134"><code>EXTRA_</code>, prepending</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-g_t_0040code_007bEXTRA_005fprog_005fSOURCES_007d_002c-defined-401"><code>EXTRA_prog_SOURCES</code>, defined</a>: <a href="#Conditional-Sources">Conditional Sources</a></li>
<li><a href="#index-g_t_0040code_007bEXTRA_005fPROGRAMS_007d_002c-defined-405"><code>EXTRA_PROGRAMS</code>, defined</a>: <a href="#Conditional-Programs">Conditional Programs</a></li>
<li><a href="#index-g_t_0040code_007bEXTRA_005fPROGRAMS_007d_002c-defined-135"><code>EXTRA_PROGRAMS</code>, defined</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-g_t_0040command_007bfalse_007d-Example-169"><samp><span class="command">false</span></samp> Example</a>: <a href="#true">true</a></li>
<li><a href="#index-g_t_0040code_007bFCFLAGS_007d-and-_0040code_007bAM_005fFCFLAGS_007d-1150"><code>FCFLAGS</code> and <code>AM_FCFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-Features-of-the-GNU-Build-System-14">Features of the GNU Build System</a>: <a href="#Use-Cases">Use Cases</a></li>
<li><a href="#index-g_t_0040code_007bFFLAGS_007d-and-_0040code_007bAM_005fFFLAGS_007d-1151"><code>FFLAGS</code> and <code>AM_FFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-file-names_002c-limitations-on-1121">file names, limitations on</a>: <a href="#Limitations-on-File-Names">Limitations on File Names</a></li>
<li><a href="#index-filename_002dlength_002dmax_003d99-942"><code>filename-length-max=99</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Files-distributed-with-Automake-181">Files distributed with Automake</a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-First-line-of-Makefile_002eam-109">First line of Makefile.am</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Flag-Variables_002c-Ordering-1129">Flag Variables, Ordering</a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-Flag-variables_002c-ordering-1128">Flag variables, ordering</a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bFLIBS_007d_002c-defined-580"><code>FLIBS</code>, defined</a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-foreign-918"><code>foreign</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-foreign-84"><code>foreign</code></a>: <a href="#amhello_0027s-configure_002eac-Setup-Explained">amhello's configure.ac Setup Explained</a></li>
<li><a href="#index-g_t_0040option_007bforeign_007d-strictness-113"><samp><span class="option">foreign</span></samp> strictness</a>: <a href="#Strictness">Strictness</a></li>
<li><a href="#index-Fortran-77-support-563">Fortran 77 support</a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-Fortran-77_002c-mixing-with-C-and-C_002b_002b-575">Fortran 77, mixing with C and C++</a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-Fortran-77_002c-Preprocessing-573">Fortran 77, Preprocessing</a>: <a href="#Preprocessing-Fortran-77">Preprocessing Fortran 77</a></li>
<li><a href="#index-Fortran-9x-support-594">Fortran 9x support</a>: <a href="#Fortran-9x-Support">Fortran 9x Support</a></li>
<li><a href="#index-g_t_0040code_007bGCJFLAGS_007d-and-_0040code_007bAM_005fGCJFLAGS_007d-1152"><code>GCJFLAGS</code> and <code>AM_GCJFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-generated-files-and-CVS-1114">generated files and CVS</a>: <a href="#CVS">CVS</a></li>
<li><a href="#index-generated-files_002c-distributed-1109">generated files, distributed</a>: <a href="#CVS">CVS</a></li>
<li><a href="#index-Gettext-support-669">Gettext support</a>: <a href="#gettext">gettext</a></li>
<li><a href="#index-git_002ddist-89"><code>git-dist</code></a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-g_t_0040code_007bgit_002ddist_007d_002c-non_002dstandard-example-88"><code>git-dist</code>, non-standard example</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-gnits-916"><code>gnits</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-g_t_0040option_007bgnits_007d-strictness-117"><samp><span class="option">gnits</span></samp> strictness</a>: <a href="#Strictness">Strictness</a></li>
<li><a href="#index-gnu-917"><code>gnu</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-GNU-Build-System_002c-basics-20">GNU Build System, basics</a>: <a href="#Basic-Installation">Basic Installation</a></li>
<li><a href="#index-GNU-Build-System_002c-features-13">GNU Build System, features</a>: <a href="#Use-Cases">Use Cases</a></li>
<li><a href="#index-GNU-Build-System_002c-introduction-9">GNU Build System, introduction</a>: <a href="#GNU-Build-System">GNU Build System</a></li>
<li><a href="#index-GNU-Build-System_002c-use-cases-12">GNU Build System, use cases</a>: <a href="#Use-Cases">Use Cases</a></li>
<li><a href="#index-GNU-Coding-Standards-10">GNU Coding Standards</a>: <a href="#GNU-Build-System">GNU Build System</a></li>
<li><a href="#index-GNU-Gettext-support-668">GNU Gettext support</a>: <a href="#gettext">gettext</a></li>
<li><a href="#index-GNU-make-extensions-90">GNU make extensions</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-GNU-Makefile-standards-1">GNU Makefile standards</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-g_t_0040option_007bgnu_007d-strictness-115"><samp><span class="option">gnu</span></samp> strictness</a>: <a href="#Strictness">Strictness</a></li>
<li><a href="#index-g_t_0040file_007bGNUmakefile_007d-including-_0040file_007bMakefile_007d-1107"><samp><span class="file">GNUmakefile</span></samp> including <samp><span class="file">Makefile</span></samp></a>: <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a></li>
<li><a href="#index-hard-error-835">hard error</a>: <a href="#Generalities-about-Testing">Generalities about Testing</a></li>
<li><a href="#index-Header-files-in-_0040code_007b_005fSOURCES_007d-388">Header files in <code>_SOURCES</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-g_t_0040code_007bHEADERS_007d-primary_002c-defined-638"><code>HEADERS</code> primary, defined</a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-g_t_0040code_007bHEADERS_007d_002c-installation-directories-642"><code>HEADERS</code>, installation directories</a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-Hello-World-example-76">Hello World example</a>: <a href="#Hello-World">Hello World</a></li>
<li><a href="#index-hook-targets-1093">hook targets</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-HP_002dUX-10_002c-_0040command_007blex_007d-problems-313">HP-UX 10, <samp><span class="command">lex</span></samp> problems</a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-html-1061"><code>html</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-html-707"><code>html</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-HTML-output-using-Texinfo-700">HTML output using Texinfo</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-html_002dlocal-1062"><code>html-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-id-1001"><code>id</code></a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-if-1015"><code>if</code></a>: <a href="#Usage-of-Conditionals">Usage of Conditionals</a></li>
<li><a href="#index-include-1006"><code>include</code></a>: <a href="#Include">Include</a></li>
<li><a href="#index-include-790"><code>include</code></a>: <a href="#Basics-of-Distribution">Basics of Distribution</a></li>
<li><a href="#index-g_t_0040code_007binclude_007d_002c-distribution-788"><code>include</code>, distribution</a>: <a href="#Basics-of-Distribution">Basics of Distribution</a></li>
<li><a href="#index-Including-_0040file_007bMakefile_007d-fragment-1007">Including <samp><span class="file">Makefile</span></samp> fragment</a>: <a href="#Include">Include</a></li>
<li><a href="#index-indentation-in-Makefile_002eam-95">indentation in Makefile.am</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-info-1053"><code>info</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-info-956"><code>info</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-info_002dlocal-1054"><code>info-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install-1065"><code>install</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install-764"><code>install</code></a>: <a href="#The-Two-Parts-of-Install">The Two Parts of Install</a></li>
<li><a href="#index-install-24"><code>install</code></a>: <a href="#Standard-Targets">Standard Targets</a></li>
<li><a href="#index-Install-hook-768">Install hook</a>: <a href="#Extending-Installation">Extending Installation</a></li>
<li><a href="#index-Install_002c-two-parts-of-765">Install, two parts of</a>: <a href="#The-Two-Parts-of-Install">The Two Parts of Install</a></li>
<li><a href="#index-install_002ddata-1066"><code>install-data</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002ddata-762"><code>install-data</code></a>: <a href="#The-Two-Parts-of-Install">The Two Parts of Install</a></li>
<li><a href="#index-install_002ddata-47"><code>install-data</code></a>: <a href="#Two_002dPart-Install">Two-Part Install</a></li>
<li><a href="#index-install_002ddata_002dhook-1094"><code>install-data-hook</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002ddata_002dlocal-1067"><code>install-data-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002ddata_002dlocal-767"><code>install-data-local</code></a>: <a href="#Extending-Installation">Extending Installation</a></li>
<li><a href="#index-install_002ddvi-1068"><code>install-dvi</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002ddvi-710"><code>install-dvi</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-install_002ddvi_002dlocal-1069"><code>install-dvi-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002dexec-1070"><code>install-exec</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002dexec-763"><code>install-exec</code></a>: <a href="#The-Two-Parts-of-Install">The Two Parts of Install</a></li>
<li><a href="#index-install_002dexec-46"><code>install-exec</code></a>: <a href="#Two_002dPart-Install">Two-Part Install</a></li>
<li><a href="#index-install_002dexec_002dhook-1095"><code>install-exec-hook</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002dexec_002dlocal-1071"><code>install-exec-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002dexec_002dlocal-766"><code>install-exec-local</code></a>: <a href="#Extending-Installation">Extending Installation</a></li>
<li><a href="#index-install_002dhtml-1072"><code>install-html</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002dhtml-711"><code>install-html</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-install_002dhtml_002dlocal-1073"><code>install-html-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002dinfo-1074"><code>install-info</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002dinfo-957"><code>install-info</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-install_002dinfo-731"><code>install-info</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-g_t_0040code_007binstall_002dinfo_007d-target-728"><code>install-info</code> target</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-install_002dinfo_002dlocal-1075"><code>install-info-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002dman-960"><code>install-man</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-install_002dman-752"><code>install-man</code></a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-g_t_0040code_007binstall_002dman_007d-target-749"><code>install-man</code> target</a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-install_002dpdf-1076"><code>install-pdf</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002dpdf-712"><code>install-pdf</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-install_002dpdf_002dlocal-1077"><code>install-pdf-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002dps-1078"><code>install-ps</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002dps-713"><code>install-ps</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-install_002dps_002dlocal-1079"><code>install-ps-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-install_002dstrip-772"><code>install-strip</code></a>: <a href="#Install-Rules-for-the-User">Install Rules for the User</a></li>
<li><a href="#index-install_002dstrip-25"><code>install-strip</code></a>: <a href="#Standard-Targets">Standard Targets</a></li>
<li><a href="#index-Installation-directories_002c-extending-list-139">Installation directories, extending list</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-Installation-support-760">Installation support</a>: <a href="#Install">Install</a></li>
<li><a href="#index-Installation_002c-basics-19">Installation, basics</a>: <a href="#Basic-Installation">Basic Installation</a></li>
<li><a href="#index-installcheck-1090"><code>installcheck</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-installcheck-30"><code>installcheck</code></a>: <a href="#Standard-Targets">Standard Targets</a></li>
<li><a href="#index-installcheck_002dlocal-1091"><code>installcheck-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-installdirs-1088"><code>installdirs</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-installdirs-771"><code>installdirs</code></a>: <a href="#Install-Rules-for-the-User">Install Rules for the User</a></li>
<li><a href="#index-installdirs_002dlocal-1089"><code>installdirs-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-Installing-headers-643">Installing headers</a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-Installing-scripts-627">Installing scripts</a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-installing-versioned-binaries-1099">installing versioned binaries</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-Interfacing-with-third_002dparty-packages-1102">Interfacing with third-party packages</a>: <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a></li>
<li><a href="#index-Invocation-of-_0040command_007baclocal_007d-256">Invocation of <samp><span class="command">aclocal</span></samp></a>: <a href="#aclocal-Invocation">aclocal Invocation</a></li>
<li><a href="#index-Invocation-of-_0040command_007bautomake_007d-174">Invocation of <samp><span class="command">automake</span></samp></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-Invoking-_0040command_007baclocal_007d-258">Invoking <samp><span class="command">aclocal</span></samp></a>: <a href="#aclocal-Invocation">aclocal Invocation</a></li>
<li><a href="#index-Invoking-_0040command_007bautomake_007d-172">Invoking <samp><span class="command">automake</span></samp></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-g_t_0040code_007bJAVA_007d-primary_002c-defined-672"><code>JAVA</code> primary, defined</a>: <a href="#Java">Java</a></li>
<li><a href="#index-g_t_0040code_007bJAVA_007d-restrictions-676"><code>JAVA</code> restrictions</a>: <a href="#Java">Java</a></li>
<li><a href="#index-Java-support-with-gcj-601">Java support with gcj</a>: <a href="#Java-Support-with-gcj">Java Support with gcj</a></li>
<li><a href="#index-Java-to-bytecode_002c-compilation-674">Java to bytecode, compilation</a>: <a href="#Java">Java</a></li>
<li><a href="#index-Java-to-native-code_002c-compilation-603">Java to native code, compilation</a>: <a href="#Java-Support-with-gcj">Java Support with gcj</a></li>
<li><a href="#index-lazy-test-execution-873">lazy test execution</a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-g_t_0040code_007bLDADD_007d-and-_0040option_007b_002dl_007d-399"><code>LDADD</code> and <samp><span class="option">-l</span></samp></a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-g_t_0040code_007bLDFLAGS_007d-and-_0040code_007bAM_005fLDFLAGS_007d-1153"><code>LDFLAGS</code> and <code>AM_LDFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040command_007blex_007d-problems-with-HP_002dUX-10-314"><samp><span class="command">lex</span></samp> problems with HP-UX 10</a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-g_t_0040command_007blex_007d_002c-multiple-lexers-529"><samp><span class="command">lex</span></samp>, multiple lexers</a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
<li><a href="#index-g_t_0040code_007bLFLAGS_007d-and-_0040code_007bAM_005fLFLAGS_007d-1154"><code>LFLAGS</code> and <code>AM_LFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040file_007blibltdl_007d_002c-introduction-421"><samp><span class="file">libltdl</span></samp>, introduction</a>: <a href="#Libtool-Concept">Libtool Concept</a></li>
<li><a href="#index-g_t_0040code_007bLIBOBJS_007d_002c-and-Libtool-445"><code>LIBOBJS</code>, and Libtool</a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-g_t_0040code_007bLIBOBJS_007d_002c-example-496"><code>LIBOBJS</code>, example</a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-g_t_0040code_007bLIBOBJS_007d_002c-special-handling-498"><code>LIBOBJS</code>, special handling</a>: <a href="#LIBOBJS">LIBOBJS</a></li>
<li><a href="#index-g_t_0040code_007bLIBRARIES_007d-primary_002c-defined-407"><code>LIBRARIES</code> primary, defined</a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-libtool-convenience-libraries-432">libtool convenience libraries</a>: <a href="#Libtool-Convenience-Libraries">Libtool Convenience Libraries</a></li>
<li><a href="#index-libtool-libraries_002c-conditional-429">libtool libraries, conditional</a>: <a href="#Conditional-Libtool-Libraries">Conditional Libtool Libraries</a></li>
<li><a href="#index-libtool-library_002c-definition-417">libtool library, definition</a>: <a href="#Libtool-Concept">Libtool Concept</a></li>
<li><a href="#index-libtool-modules-436">libtool modules</a>: <a href="#Libtool-Modules">Libtool Modules</a></li>
<li><a href="#index-Libtool-modules_002c-default-source-example-492">Libtool modules, default source example</a>: <a href="#Default-_005fSOURCES">Default _SOURCES</a></li>
<li><a href="#index-g_t_0040command_007blibtool_007d_002c-introduction-416"><samp><span class="command">libtool</span></samp>, introduction</a>: <a href="#Libtool-Concept">Libtool Concept</a></li>
<li><a href="#index-g_t_0040code_007bLIBTOOLFLAGS_007d-and-_0040code_007bAM_005fLIBTOOLFLAGS_007d-1155"><code>LIBTOOLFLAGS</code> and <code>AM_LIBTOOLFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040command_007blibtoolize_007d-and-_0040command_007bautoreconf_007d-455"><samp><span class="command">libtoolize</span></samp> and <samp><span class="command">autoreconf</span></samp></a>: <a href="#Error-required-file-ltmain_002esh-not-found">Error required file ltmain.sh not found</a></li>
<li><a href="#index-g_t_0040command_007blibtoolize_007d_002c-no-longer-run-by-_0040command_007bautomake_007d-454"><samp><span class="command">libtoolize</span></samp>, no longer run by <samp><span class="command">automake</span></samp></a>: <a href="#Error-required-file-ltmain_002esh-not-found">Error required file ltmain.sh not found</a></li>
<li><a href="#index-Limitations-of-automake-parser-93">Limitations of automake parser</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Linking-Fortran-77-with-C-and-C_002b_002b-577">Linking Fortran 77 with C and C++</a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-g_t_0040code_007bLISP_007d-primary_002c-defined-661"><code>LISP</code> primary, defined</a>: <a href="#Emacs-Lisp">Emacs Lisp</a></li>
<li><a href="#index-g_t_0040code_007bLN_005fS_007d-example-1100"><code>LN_S</code> example</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-local-targets-1050">local targets</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-g_t_0040code_007bLTALLOCA_007d_002c-special-handling-446"><code>LTALLOCA</code>, special handling</a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-g_t_0040code_007bLTLIBOBJS_007d_002c-special-handling-444"><code>LTLIBOBJS</code>, special handling</a>: <a href="#LTLIBOBJS">LTLIBOBJS</a></li>
<li><a href="#index-g_t_0040code_007bLTLIBRARIES_007d-primary_002c-defined-423"><code>LTLIBRARIES</code> primary, defined</a>: <a href="#Libtool-Libraries">Libtool Libraries</a></li>
<li><a href="#index-g_t_0040file_007bltmain_002esh_007d-not-found-453"><samp><span class="file">ltmain.sh</span></samp> not found</a>: <a href="#Error-required-file-ltmain_002esh-not-found">Error required file ltmain.sh not found</a></li>
<li><a href="#index-g_t_0040code_007bm4_005finclude_007d_002c-distribution-787"><code>m4_include</code>, distribution</a>: <a href="#Basics-of-Distribution">Basics of Distribution</a></li>
<li><a href="#index-Macro-search-path-280">Macro search path</a>: <a href="#Macro-Search-Path">Macro Search Path</a></li>
<li><a href="#index-macro-serial-numbers-291">macro serial numbers</a>: <a href="#Serials">Serials</a></li>
<li><a href="#index-Macros-Automake-recognizes-217">Macros Automake recognizes</a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-maintainer_002dclean_002dlocal-781"><code>maintainer-clean-local</code></a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-g_t_0040code_007bmake-check_007d-821"><code>make check</code></a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-g_t_0040samp_007bmake-clean_007d-support-773">&lsquo;<samp><span class="samp">make clean</span></samp>&rsquo; support</a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-g_t_0040samp_007bmake-dist_007d-782">&lsquo;<samp><span class="samp">make dist</span></samp>&rsquo;</a>: <a href="#Basics-of-Distribution">Basics of Distribution</a></li>
<li><a href="#index-g_t_0040samp_007bmake-distcheck_007d-799">&lsquo;<samp><span class="samp">make distcheck</span></samp>&rsquo;</a>: <a href="#Checking-the-Distribution">Checking the Distribution</a></li>
<li><a href="#index-g_t_0040samp_007bmake-distclean_007d_002c-diagnostic-1123">&lsquo;<samp><span class="samp">make distclean</span></samp>&rsquo;, diagnostic</a>: <a href="#Errors-with-distclean">Errors with distclean</a></li>
<li><a href="#index-g_t_0040samp_007bmake-distcleancheck_007d-804">&lsquo;<samp><span class="samp">make distcleancheck</span></samp>&rsquo;</a>: <a href="#Checking-the-Distribution">Checking the Distribution</a></li>
<li><a href="#index-g_t_0040samp_007bmake-distuninstallcheck_007d-808">&lsquo;<samp><span class="samp">make distuninstallcheck</span></samp>&rsquo;</a>: <a href="#Checking-the-Distribution">Checking the Distribution</a></li>
<li><a href="#index-g_t_0040samp_007bmake-install_007d-support-761">&lsquo;<samp><span class="samp">make install</span></samp>&rsquo; support</a>: <a href="#Install">Install</a></li>
<li><a href="#index-g_t_0040samp_007bmake-installcheck_007d_002c-testing-_0040option_007b_002d_002dhelp_007d-and-_0040option_007b_002d_002dversion_007d-974">&lsquo;<samp><span class="samp">make installcheck</span></samp>&rsquo;, testing <samp><span class="option">--help</span></samp> and <samp><span class="option">--version</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Make-rules_002c-overriding-97">Make rules, overriding</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Make-targets_002c-overriding-96">Make targets, overriding</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-g_t_0040file_007bMakefile_007d-fragment_002c-including-1008"><samp><span class="file">Makefile</span></samp> fragment, including</a>: <a href="#Include">Include</a></li>
<li><a href="#index-Makefile_002eam_002c-first-line-108">Makefile.am, first line</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-g_t_0040file_007bMakefile_002eam_007d_002c-Hello-World-86"><samp><span class="file">Makefile.am</span></samp>, Hello World</a>: <a href="#amhello_0027s-Makefile_002eam-Setup-Explained">amhello's Makefile.am Setup Explained</a></li>
<li><a href="#index-Man-page-renaming_002c-avoiding-755">Man page renaming, avoiding</a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-g_t_0040code_007bMANS_007d-primary_002c-defined-743"><code>MANS</code> primary, defined</a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-many-outputs_002c-rules-with-1163">many outputs, rules with</a>: <a href="#Multiple-Outputs">Multiple Outputs</a></li>
<li><a href="#index-g_t_0040file_007bmdate_002dsh_007d-722"><samp><span class="file">mdate-sh</span></samp></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-MinGW-cross_002dcompilation-example-51">MinGW cross-compilation example</a>: <a href="#Cross_002dCompilation">Cross-Compilation</a></li>
<li><a href="#index-g_t_0040command_007bmissing_007d_002c-purpose-1117"><samp><span class="command">missing</span></samp>, purpose</a>: <a href="#maintainer_002dmode">maintainer-mode</a></li>
<li><a href="#index-Mixed-language-example-582">Mixed language example</a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-Mixing-Fortran-77-with-C-and-C_002b_002b-576">Mixing Fortran 77 with C and C++</a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-Mixing-Fortran-77-with-C-and_002for-C_002b_002b-579">Mixing Fortran 77 with C and/or C++</a>: <a href="#Mixing-Fortran-77-With-C-and-C_002b_002b">Mixing Fortran 77 With C and C++</a></li>
<li><a href="#index-g_t_0040code_007bmkdir-_002dp_007d_002c-macro-check-332"><code>mkdir -p</code>, macro check</a>: <a href="#Obsolete-Macros">Obsolete Macros</a></li>
<li><a href="#index-modules_002c-libtool-435">modules, libtool</a>: <a href="#Libtool-Modules">Libtool Modules</a></li>
<li><a href="#index-mostlyclean-1082"><code>mostlyclean</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-mostlyclean_002dlocal-1083"><code>mostlyclean-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-mostlyclean_002dlocal-778"><code>mostlyclean-local</code></a>: <a href="#Clean">Clean</a></li>
<li><a href="#index-multiple-configurations_002c-example-41">multiple configurations, example</a>: <a href="#VPATH-Builds">VPATH Builds</a></li>
<li><a href="#index-Multiple-_0040file_007bconfigure_002eac_007d-files-171">Multiple <samp><span class="file">configure.ac</span></samp> files</a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-Multiple-_0040command_007blex_007d-lexers-528">Multiple <samp><span class="command">lex</span></samp> lexers</a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
<li><a href="#index-multiple-outputs_002c-rules-with-1162">multiple outputs, rules with</a>: <a href="#Multiple-Outputs">Multiple Outputs</a></li>
<li><a href="#index-Multiple-_0040command_007byacc_007d-parsers-527">Multiple <samp><span class="command">yacc</span></samp> parsers</a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
<li><a href="#index-Nested-packages-70">Nested packages</a>: <a href="#Nested-Packages">Nested Packages</a></li>
<li><a href="#index-Nesting-packages-370">Nesting packages</a>: <a href="#Subpackages">Subpackages</a></li>
<li><a href="#index-no_002ddefine-944"><code>no-define</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-no_002ddefine-300"><code>no-define</code></a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-no_002ddependencies-946"><code>no-dependencies</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-no_002ddependencies-617"><code>no-dependencies</code></a>: <a href="#Dependencies">Dependencies</a></li>
<li><a href="#index-no_002ddist-948"><code>no-dist</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-no_002ddist_002dgzip-950"><code>no-dist-gzip</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-no_002dexeext-953"><code>no-exeext</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-no_002dinstallinfo-955"><code>no-installinfo</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-no_002dinstallinfo-730"><code>no-installinfo</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-g_t_0040code_007bno_002dinstallinfo_007d-option-729"><code>no-installinfo</code> option</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-no_002dinstallman-959"><code>no-installman</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-no_002dinstallman-751"><code>no-installman</code></a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-g_t_0040option_007bno_002dinstallman_007d-option-750"><samp><span class="option">no-installman</span></samp> option</a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-no_002dtexinfo_002etex-964"><code>no-texinfo.tex</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-g_t_0040code_007bnobase_005f_007d-and-_0040code_007bdist_005f_007d-or-_0040code_007bnodist_005f_007d-365"><code>nobase_</code> and <code>dist_</code> or <code>nodist_</code></a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-g_t_0040code_007bnobase_005f_007d-prefix-362"><code>nobase_</code> prefix</a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-g_t_0040code_007bnodist_005f_007d-and-_0040code_007bnobase_005f_007d-367"><code>nodist_</code> and <code>nobase_</code></a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-g_t_0040code_007bnodist_005f_007d-and-_0040code_007bnotrans_005f_007d-759"><code>nodist_</code> and <code>notrans_</code></a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-g_t_0040samp_007bnoinst_005f_007d-primary-prefix_002c-definition-140">&lsquo;<samp><span class="samp">noinst_</span></samp>&rsquo; primary prefix, definition</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-Non_002dGNU-packages-110">Non-GNU packages</a>: <a href="#Strictness">Strictness</a></li>
<li><a href="#index-Non_002dstandard-targets-87">Non-standard targets</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-nostdinc-962"><code>nostdinc</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-g_t_0040code_007bnotrans_005f_007d-and-_0040code_007bdist_005f_007d-or-_0040code_007bnodist_005f_007d-757"><code>notrans_</code> and <code>dist_</code> or <code>nodist_</code></a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-g_t_0040code_007bnotrans_005f_007d-prefix-754"><code>notrans_</code> prefix</a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-g_t_0040code_007bOBJCFLAGS_007d-and-_0040code_007bAM_005fOBJCFLAGS_007d-1156"><code>OBJCFLAGS</code> and <code>AM_OBJCFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bOBJCXXFLAGS_007d-and-_0040code_007bAM_005fOBJCXXFLAGS_007d-1157"><code>OBJCXXFLAGS</code> and <code>AM_OBJCXXFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-Objective-C-support-537">Objective C support</a>: <a href="#Objective-C-Support">Objective C Support</a></li>
<li><a href="#index-Objective-C_002b_002b-support-544">Objective C++ support</a>: <a href="#Objective-C_002b_002b-Support">Objective C++ Support</a></li>
<li><a href="#index-Objects-in-subdirectory-461">Objects in subdirectory</a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-obsolete-macros-327">obsolete macros</a>: <a href="#Obsolete-Macros">Obsolete Macros</a></li>
<li><a href="#index-optimized-build_002c-example-43">optimized build, example</a>: <a href="#VPATH-Builds">VPATH Builds</a></li>
<li><a href="#index-Option_002c-_0040option_007b_002d_002dwarnings_003d_0040var_007bcategory_007d_007d-994">Option, <samp><span class="option">--warnings=</span><var>category</var></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007b_002dW_0040var_007bcategory_007d_007d-993">Option, <samp><span class="option">-W</span><var>category</var></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bcheck_002dnews_007d-920">Option, <samp><span class="option">check-news</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bcolor_002dtests_007d-922">Option, <samp><span class="option">color-tests</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bcygnus_007d-915">Option, <samp><span class="option">cygnus</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bdejagnu_007d-924">Option, <samp><span class="option">dejagnu</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bdist_002dbzip2_007d-926">Option, <samp><span class="option">dist-bzip2</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bdist_002dlzip_007d-929">Option, <samp><span class="option">dist-lzip</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bdist_002dshar_007d-932">Option, <samp><span class="option">dist-shar</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bdist_002dtarZ_007d-938">Option, <samp><span class="option">dist-tarZ</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bdist_002dzip_007d-935">Option, <samp><span class="option">dist-zip</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bfilename_002dlength_002dmax_003d99_007d-941">Option, <samp><span class="option">filename-length-max=99</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bforeign_007d-914">Option, <samp><span class="option">foreign</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bgnits_007d-912">Option, <samp><span class="option">gnits</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bgnu_007d-913">Option, <samp><span class="option">gnu</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bno_002ddefine_007d-943">Option, <samp><span class="option">no-define</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bno_002ddependencies_007d-945">Option, <samp><span class="option">no-dependencies</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bno_002ddist_007d-947">Option, <samp><span class="option">no-dist</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bno_002ddist_002dgzip_007d-949">Option, <samp><span class="option">no-dist-gzip</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bno_002dexeext_007d-952">Option, <samp><span class="option">no-exeext</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bno_002dinstallinfo_007d-954">Option, <samp><span class="option">no-installinfo</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040code_007bno_002dinstallinfo_007d-726">Option, <code>no-installinfo</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-Option_002c-_0040option_007bno_002dinstallman_007d-958">Option, <samp><span class="option">no-installman</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bno_002dinstallman_007d-748">Option, <samp><span class="option">no-installman</span></samp></a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-Option_002c-_0040option_007bno_002dtexinfo_002etex_007d-963">Option, <samp><span class="option">no-texinfo.tex</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bnostdinc_007d-961">Option, <samp><span class="option">nostdinc</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bparallel_002dtests_007d-965">Option, <samp><span class="option">parallel-tests</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007breadme_002dalpha_007d-969">Option, <samp><span class="option">readme-alpha</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bserial_002dtests_007d-967">Option, <samp><span class="option">serial-tests</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007bsilent_002drules_007d-971">Option, <samp><span class="option">silent-rules</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007btar_002dpax_007d-983">Option, <samp><span class="option">tar-pax</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007btar_002dustar_007d-982">Option, <samp><span class="option">tar-ustar</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040option_007btar_002dv7_007d-981">Option, <samp><span class="option">tar-v7</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-_0040var_007bversion_007d-991">Option, <var>version</var></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Option_002c-warnings-992">Option, warnings</a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Options_002c-_0040command_007baclocal_007d-263">Options, <samp><span class="command">aclocal</span></samp></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-Options_002c-_0040command_007bautomake_007d-178">Options, <samp><span class="command">automake</span></samp></a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-Options_002c-_0040option_007bstd_002doptions_007d-973">Options, <samp><span class="option">std-options</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Options_002c-_0040option_007bsubdir_002dobjects_007d-979">Options, <samp><span class="option">subdir-objects</span></samp></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Ordering-flag-variables-1127">Ordering flag variables</a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-Overriding-make-rules-98">Overriding make rules</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Overriding-make-targets-99">Overriding make targets</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Overriding-make-variables-101">Overriding make variables</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-overriding-rules-1046">overriding rules</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-overriding-semantics-1047">overriding semantics</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-g_t_0040code_007bPACKAGE_007d_002c-directory-133"><code>PACKAGE</code>, directory</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-g_t_0040code_007bPACKAGE_007d_002c-prevent-definition-298"><code>PACKAGE</code>, prevent definition</a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-Packages_002c-nested-71">Packages, nested</a>: <a href="#Nested-Packages">Nested Packages</a></li>
<li><a href="#index-Packages_002c-preparation-64">Packages, preparation</a>: <a href="#Preparing-Distributions">Preparing Distributions</a></li>
<li><a href="#index-Parallel-build-trees-36">Parallel build trees</a>: <a href="#VPATH-Builds">VPATH Builds</a></li>
<li><a href="#index-parallel_002dtests-966"><code>parallel-tests</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-g_t_0040option_007bparallel_002dtests_007d_002c-Using-852"><samp><span class="option">parallel-tests</span></samp>, Using</a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-Path-stripping_002c-avoiding-363">Path stripping, avoiding</a>: <a href="#Alternative">Alternative</a></li>
<li><a href="#index-pax-format-987">pax format</a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-pdf-1059"><code>pdf</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-pdf-708"><code>pdf</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-PDF-output-using-Texinfo-701">PDF output using Texinfo</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-pdf_002dlocal-1060"><code>pdf-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-Per_002dobject-flags_002c-emulated-1161">Per-object flags, emulated</a>: <a href="#Per_002dObject-Flags">Per-Object Flags</a></li>
<li><a href="#index-per_002dtarget-compilation-flags_002c-defined-483">per-target compilation flags, defined</a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-g_t_0040code_007bpkgdatadir_007d_002c-defined-125"><code>pkgdatadir</code>, defined</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-g_t_0040code_007bpkgincludedir_007d_002c-defined-126"><code>pkgincludedir</code>, defined</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-g_t_0040code_007bpkglibdir_007d_002c-defined-127"><code>pkglibdir</code>, defined</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-g_t_0040code_007bpkglibexecdir_007d_002c-defined-128"><code>pkglibexecdir</code>, defined</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-POSIX-termios-headers-336">POSIX termios headers</a>: <a href="#Obsolete-Macros">Obsolete Macros</a></li>
<li><a href="#index-Preparing-distributions-63">Preparing distributions</a>: <a href="#Preparing-Distributions">Preparing Distributions</a></li>
<li><a href="#index-Preprocessing-Fortran-77-572">Preprocessing Fortran 77</a>: <a href="#Preprocessing-Fortran-77">Preprocessing Fortran 77</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bDATA_007d-650">Primary variable, <code>DATA</code></a>: <a href="#Data">Data</a></li>
<li><a href="#index-Primary-variable_002c-defined-122">Primary variable, defined</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bHEADERS_007d-639">Primary variable, <code>HEADERS</code></a>: <a href="#Headers">Headers</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bJAVA_007d-673">Primary variable, <code>JAVA</code></a>: <a href="#Java">Java</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bLIBRARIES_007d-408">Primary variable, <code>LIBRARIES</code></a>: <a href="#A-Library">A Library</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bLISP_007d-662">Primary variable, <code>LISP</code></a>: <a href="#Emacs-Lisp">Emacs Lisp</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bLTLIBRARIES_007d-424">Primary variable, <code>LTLIBRARIES</code></a>: <a href="#Libtool-Libraries">Libtool Libraries</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bMANS_007d-744">Primary variable, <code>MANS</code></a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bPROGRAMS_007d-121">Primary variable, <code>PROGRAMS</code></a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bPYTHON_007d-685">Primary variable, <code>PYTHON</code></a>: <a href="#Python">Python</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bSCRIPTS_007d-625">Primary variable, <code>SCRIPTS</code></a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bSOURCES_007d-384">Primary variable, <code>SOURCES</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-Primary-variable_002c-_0040code_007bTEXINFOS_007d-699">Primary variable, <code>TEXINFOS</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-g_t_0040code_007bprog_005fLDADD_007d_002c-defined-392"><code>prog_LDADD</code>, defined</a>: <a href="#Linking">Linking</a></li>
<li><a href="#index-g_t_0040code_007bPROGRAMS_007d-primary-variable-120"><code>PROGRAMS</code> primary variable</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-Programs_002c-auxiliary-160">Programs, auxiliary</a>: <a href="#Auxiliary-Programs">Auxiliary Programs</a></li>
<li><a href="#index-g_t_0040code_007bPROGRAMS_007d_002c-_0040code_007bbindir_007d-374"><code>PROGRAMS</code>, <code>bindir</code></a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-Programs_002c-conditional-403">Programs, conditional</a>: <a href="#Conditional-Programs">Conditional Programs</a></li>
<li><a href="#index-Programs_002c-renaming-during-installation-56">Programs, renaming during installation</a>: <a href="#Renaming">Renaming</a></li>
<li><a href="#index-Proxy-_0040file_007bMakefile_007d-for-third_002dparty-packages-1108">Proxy <samp><span class="file">Makefile</span></samp> for third-party packages</a>: <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a></li>
<li><a href="#index-ps-1057"><code>ps</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-ps-709"><code>ps</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-PS-output-using-Texinfo-702">PS output using Texinfo</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-ps_002dlocal-1058"><code>ps-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-g_t_0040code_007bPYTHON_007d-primary_002c-defined-684"><code>PYTHON</code> primary, defined</a>: <a href="#Python">Python</a></li>
<li><a href="#index-Ratfor-programs-574">Ratfor programs</a>: <a href="#Preprocessing-Fortran-77">Preprocessing Fortran 77</a></li>
<li><a href="#index-read_002donly-source-tree-44">read-only source tree</a>: <a href="#VPATH-Builds">VPATH Builds</a></li>
<li><a href="#index-g_t_0040file_007bREADME_002dalpha_007d-1039"><samp><span class="file">README-alpha</span></samp></a>: <a href="#Gnits">Gnits</a></li>
<li><a href="#index-readme_002dalpha-970"><code>readme-alpha</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-rebuild-rules-1110">rebuild rules</a>: <a href="#CVS">CVS</a></li>
<li><a href="#index-rebuild-rules-904">rebuild rules</a>: <a href="#Rebuilding">Rebuilding</a></li>
<li><a href="#index-recheck-874"><code>recheck</code></a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-Recognized-macros-by-Automake-218">Recognized macros by Automake</a>: <a href="#Optional">Optional</a></li>
<li><a href="#index-Recursive-operation-of-Automake-102">Recursive operation of Automake</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-recursive-targets-and-third_002dparty-_0040file_007bMakefile_007ds-1103">recursive targets and third-party <samp><span class="file">Makefile</span></samp>s</a>: <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a></li>
<li><a href="#index-Register-test-case-result-885">Register test case result</a>: <a href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a></li>
<li><a href="#index-Register-test-result-884">Register test result</a>: <a href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a></li>
<li><a href="#index-Renaming-programs-54">Renaming programs</a>: <a href="#Renaming">Renaming</a></li>
<li><a href="#index-Reporting-bugs-7">Reporting bugs</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-Requirements-of-Automake-213">Requirements of Automake</a>: <a href="#Requirements">Requirements</a></li>
<li><a href="#index-Requirements_002c-Automake-5">Requirements, Automake</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-Restrictions-for-_0040code_007bJAVA_007d-677">Restrictions for <code>JAVA</code></a>: <a href="#Java">Java</a></li>
<li><a href="#index-reStructuredText-field_002c-_0040code_007b_003acopy_002din_002dglobal_002dlog_003a_007d-893">reStructuredText field, <code>:copy-in-global-log:</code></a>: <a href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a></li>
<li><a href="#index-reStructuredText-field_002c-_0040code_007b_003arecheck_003a_007d-891">reStructuredText field, <code>:recheck:</code></a>: <a href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a></li>
<li><a href="#index-reStructuredText-field_002c-_0040code_007b_003atest_002dglobal_002dresult_003a_007d-895">reStructuredText field, <code>:test-global-result:</code></a>: <a href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a></li>
<li><a href="#index-reStructuredText-field_002c-_0040code_007b_003atest_002dresult_003a_007d-889">reStructuredText field, <code>:test-result:</code></a>: <a href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a></li>
<li><a href="#index-g_t_0040code_007bRFLAGS_007d-and-_0040code_007bAM_005fRFLAGS_007d-1158"><code>RFLAGS</code> and <code>AM_RFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-rules-with-multiple-outputs-1164">rules with multiple outputs</a>: <a href="#Multiple-Outputs">Multiple Outputs</a></li>
<li><a href="#index-rules_002c-conflicting-1043">rules, conflicting</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-rules_002c-debugging-1166">rules, debugging</a>: <a href="#Debugging-Make-Rules">Debugging Make Rules</a></li>
<li><a href="#index-rules_002c-overriding-1048">rules, overriding</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-Scanning-_0040file_007bconfigure_002eac_007d-209">Scanning <samp><span class="file">configure.ac</span></samp></a>: <a href="#configure">configure</a></li>
<li><a href="#index-g_t_0040code_007bSCRIPTS_007d-primary_002c-defined-624"><code>SCRIPTS</code> primary, defined</a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-g_t_0040code_007bSCRIPTS_007d_002c-installation-directories-629"><code>SCRIPTS</code>, installation directories</a>: <a href="#Scripts">Scripts</a></li>
<li><a href="#index-Selecting-the-linker-automatically-585">Selecting the linker automatically</a>: <a href="#How-the-Linker-is-Chosen">How the Linker is Chosen</a></li>
<li><a href="#index-serial-number-and-_0040option_007b_002d_002dinstall_007d-271">serial number and <samp><span class="option">--install</span></samp></a>: <a href="#aclocal-Options">aclocal Options</a></li>
<li><a href="#index-serial-numbers-in-macros-290">serial numbers in macros</a>: <a href="#Serials">Serials</a></li>
<li><a href="#index-serial_002dtests-968"><code>serial-tests</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-g_t_0040option_007bserial_002dtests_007d_002c-Using-851"><samp><span class="option">serial-tests</span></samp>, Using</a>: <a href="#Serial-Test-Harness">Serial Test Harness</a></li>
<li><a href="#index-Shared-libraries_002c-support-for-415">Shared libraries, support for</a>: <a href="#A-Shared-Library">A Shared Library</a></li>
<li><a href="#index-Silencing-_0040command_007bmake_007d-1023">Silencing <samp><span class="command">make</span></samp></a>: <a href="#Silencing-Make">Silencing Make</a></li>
<li><a href="#index-Silent-_0040command_007bmake_007d-1022">Silent <samp><span class="command">make</span></samp></a>: <a href="#Silencing-Make">Silencing Make</a></li>
<li><a href="#index-Silent-_0040command_007bmake_007d-rules-1025">Silent <samp><span class="command">make</span></samp> rules</a>: <a href="#Silencing-Make">Silencing Make</a></li>
<li><a href="#index-Silent-rules-1024">Silent rules</a>: <a href="#Silencing-Make">Silencing Make</a></li>
<li><a href="#index-silent_002drules-972"><code>silent-rules</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-silent_002drules-and-libtool-1026">silent-rules and libtool</a>: <a href="#Automake-silent_002drules-Option">Automake silent-rules Option</a></li>
<li><a href="#index-g_t_0040file_007bsite_002eexp_007d-903"><samp><span class="file">site.exp</span></samp></a>: <a href="#DejaGnu-Tests">DejaGnu Tests</a></li>
<li><a href="#index-source-tree-and-build-tree-38">source tree and build tree</a>: <a href="#VPATH-Builds">VPATH Builds</a></li>
<li><a href="#index-source-tree_002c-read_002donly-45">source tree, read-only</a>: <a href="#VPATH-Builds">VPATH Builds</a></li>
<li><a href="#index-g_t_0040code_007bSOURCES_007d-primary_002c-defined-383"><code>SOURCES</code> primary, defined</a>: <a href="#Program-Sources">Program Sources</a></li>
<li><a href="#index-Special-Automake-comment-106">Special Automake comment</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-Staged-installation-61">Staged installation</a>: <a href="#DESTDIR">DESTDIR</a></li>
<li><a href="#index-std_002doptions-977"><code>std-options</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Strictness_002c-command-line-179">Strictness, command line</a>: <a href="#automake-Invocation">automake Invocation</a></li>
<li><a href="#index-Strictness_002c-defined-111">Strictness, defined</a>: <a href="#Strictness">Strictness</a></li>
<li><a href="#index-Strictness_002c-_0040option_007bforeign_007d-112">Strictness, <samp><span class="option">foreign</span></samp></a>: <a href="#Strictness">Strictness</a></li>
<li><a href="#index-Strictness_002c-_0040option_007bgnits_007d-116">Strictness, <samp><span class="option">gnits</span></samp></a>: <a href="#Strictness">Strictness</a></li>
<li><a href="#index-Strictness_002c-_0040option_007bgnu_007d-114">Strictness, <samp><span class="option">gnu</span></samp></a>: <a href="#Strictness">Strictness</a></li>
<li><a href="#index-su_002c-before-_0040code_007bmake-install_007d-22">su, before <code>make install</code></a>: <a href="#Basic-Installation">Basic Installation</a></li>
<li><a href="#index-subdir_002dobjects-980"><code>subdir-objects</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Subdirectories_002c-building-conditionally-349">Subdirectories, building conditionally</a>: <a href="#Conditional-Subdirectories">Conditional Subdirectories</a></li>
<li><a href="#index-Subdirectories_002c-configured-conditionally-359">Subdirectories, configured conditionally</a>: <a href="#Unconfigured-Subdirectories">Unconfigured Subdirectories</a></li>
<li><a href="#index-Subdirectories_002c-not-distributed-360">Subdirectories, not distributed</a>: <a href="#Unconfigured-Subdirectories">Unconfigured Subdirectories</a></li>
<li><a href="#index-Subdirectory_002c-objects-in-460">Subdirectory, objects in</a>: <a href="#Program-and-Library-Variables">Program and Library Variables</a></li>
<li><a href="#index-g_t_0040code_007bSUBDIRS_007d-and-_0040code_007bAC_005fSUBST_007d-357"><code>SUBDIRS</code> and <code>AC_SUBST</code></a>: <a href="#Subdirectories-with-AC_005fSUBST">Subdirectories with AC_SUBST</a></li>
<li><a href="#index-g_t_0040code_007bSUBDIRS_007d-and-_0040code_007bAM_005fCONDITIONAL_007d-354"><code>SUBDIRS</code> and <code>AM_CONDITIONAL</code></a>: <a href="#Subdirectories-with-AM_005fCONDITIONAL">Subdirectories with AM_CONDITIONAL</a></li>
<li><a href="#index-g_t_0040code_007bSUBDIRS_007d_002c-conditional-351"><code>SUBDIRS</code>, conditional</a>: <a href="#Conditional-Subdirectories">Conditional Subdirectories</a></li>
<li><a href="#index-g_t_0040code_007bSUBDIRS_007d_002c-explained-345"><code>SUBDIRS</code>, explained</a>: <a href="#Subdirectories">Subdirectories</a></li>
<li><a href="#index-Subpackages-371">Subpackages</a>: <a href="#Subpackages">Subpackages</a></li>
<li><a href="#index-Subpackages-72">Subpackages</a>: <a href="#Nested-Packages">Nested Packages</a></li>
<li><a href="#index-suffix-_0040file_007b_002ela_007d_002c-defined-418">suffix <samp><span class="file">.la</span></samp>, defined</a>: <a href="#Libtool-Concept">Libtool Concept</a></li>
<li><a href="#index-suffix-_0040file_007b_002elo_007d_002c-defined-420">suffix <samp><span class="file">.lo</span></samp>, defined</a>: <a href="#Libtool-Concept">Libtool Concept</a></li>
<li><a href="#index-g_t_0040code_007bSUFFIXES_007d_002c-adding-1004"><code>SUFFIXES</code>, adding</a>: <a href="#Suffixes">Suffixes</a></li>
<li><a href="#index-Support-for-C_002b_002b-531">Support for C++</a>: <a href="#C_002b_002b-Support">C++ Support</a></li>
<li><a href="#index-Support-for-Fortran-77-564">Support for Fortran 77</a>: <a href="#Fortran-77-Support">Fortran 77 Support</a></li>
<li><a href="#index-Support-for-Fortran-9x-595">Support for Fortran 9x</a>: <a href="#Fortran-9x-Support">Fortran 9x Support</a></li>
<li><a href="#index-Support-for-GNU-Gettext-670">Support for GNU Gettext</a>: <a href="#gettext">gettext</a></li>
<li><a href="#index-Support-for-Java-with-gcj-602">Support for Java with gcj</a>: <a href="#Java-Support-with-gcj">Java Support with gcj</a></li>
<li><a href="#index-Support-for-Objective-C-538">Support for Objective C</a>: <a href="#Objective-C-Support">Objective C Support</a></li>
<li><a href="#index-Support-for-Objective-C_002b_002b-545">Support for Objective C++</a>: <a href="#Objective-C_002b_002b-Support">Objective C++ Support</a></li>
<li><a href="#index-Support-for-Unified-Parallel-C-552">Support for Unified Parallel C</a>: <a href="#Unified-Parallel-C-Support">Unified Parallel C Support</a></li>
<li><a href="#index-Support-for-Vala-608">Support for Vala</a>: <a href="#Vala-Support">Vala Support</a></li>
<li><a href="#index-tags-996"><code>tags</code></a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-g_t_0040file_007bTAGS_007d-support-995"><samp><span class="file">TAGS</span></samp> support</a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-g_t_0040command_007btar_007d-formats-984"><samp><span class="command">tar</span></samp> formats</a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-tar_002dpax-990"><code>tar-pax</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-tar_002dustar-989"><code>tar-ustar</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-tar_002dv7-988"><code>tar-v7</code></a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Target_002c-_0040code_007binstall_002dinfo_007d-727">Target, <code>install-info</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-Target_002c-_0040code_007binstall_002dman_007d-747">Target, <code>install-man</code></a>: <a href="#Man-Pages">Man Pages</a></li>
<li><a href="#index-termios-POSIX-headers-337">termios POSIX headers</a>: <a href="#Obsolete-Macros">Obsolete Macros</a></li>
<li><a href="#index-test-case-823">test case</a>: <a href="#Generalities-about-Testing">Generalities about Testing</a></li>
<li><a href="#index-Test-case-result_002c-registering-887">Test case result, registering</a>: <a href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a></li>
<li><a href="#index-test-failure-827">test failure</a>: <a href="#Generalities-about-Testing">Generalities about Testing</a></li>
<li><a href="#index-test-harness-824">test harness</a>: <a href="#Generalities-about-Testing">Generalities about Testing</a></li>
<li><a href="#index-test-metadata-857">test metadata</a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-test-pass-826">test pass</a>: <a href="#Generalities-about-Testing">Generalities about Testing</a></li>
<li><a href="#index-Test-result_002c-registering-886">Test result, registering</a>: <a href="#Log-files-generation-and-test-results-recording">Log files generation and test results recording</a></li>
<li><a href="#index-test-skip-828">test skip</a>: <a href="#Generalities-about-Testing">Generalities about Testing</a></li>
<li><a href="#index-Test-suites-820">Test suites</a>: <a href="#Tests">Tests</a></li>
<li><a href="#index-Tests_002c-expected-failure-839">Tests, expected failure</a>: <a href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a></li>
<li><a href="#index-testsuite-harness-825">testsuite harness</a>: <a href="#Generalities-about-Testing">Generalities about Testing</a></li>
<li><a href="#index-Testsuite-progress-on-console-844">Testsuite progress on console</a>: <a href="#Scripts_002dbased-Testsuites">Scripts-based Testsuites</a></li>
<li><a href="#index-Texinfo-flag_002c-_0040code_007bEDITION_007d-716">Texinfo flag, <code>EDITION</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-Texinfo-flag_002c-_0040code_007bUPDATED_007d-715">Texinfo flag, <code>UPDATED</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-Texinfo-flag_002c-_0040code_007bUPDATED_002dMONTH_007d-717">Texinfo flag, <code>UPDATED-MONTH</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-Texinfo-flag_002c-_0040code_007bVERSION_007d-714">Texinfo flag, <code>VERSION</code></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-g_t_0040file_007btexinfo_002etex_007d-725"><samp><span class="file">texinfo.tex</span></samp></a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-g_t_0040code_007bTEXINFOS_007d-primary_002c-defined-698"><code>TEXINFOS</code> primary, defined</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-third_002dparty-files-and-CVS-1116">third-party files and CVS</a>: <a href="#CVS">CVS</a></li>
<li><a href="#index-Third_002dparty-packages_002c-interfacing-with-1101">Third-party packages, interfacing with</a>: <a href="#Third_002dParty-Makefiles">Third-Party Makefiles</a></li>
<li><a href="#index-timestamps-and-CVS-1111">timestamps and CVS</a>: <a href="#CVS">CVS</a></li>
<li><a href="#index-Transforming-program-names-55">Transforming program names</a>: <a href="#Renaming">Renaming</a></li>
<li><a href="#index-trees_002c-source-vs_002e_0040_003a-build-40">trees, source vs. build</a>: <a href="#VPATH-Builds">VPATH Builds</a></li>
<li><a href="#index-g_t_0040command_007btrue_007d-Example-170"><samp><span class="command">true</span></samp> Example</a>: <a href="#true">true</a></li>
<li><a href="#index-underquoted-_0040code_007bAC_005fDEFUN_007d-286">underquoted <code>AC_DEFUN</code></a>: <a href="#Extending-aclocal">Extending aclocal</a></li>
<li><a href="#index-unexpected-pass-833">unexpected pass</a>: <a href="#Generalities-about-Testing">Generalities about Testing</a></li>
<li><a href="#index-unexpected-test-pass-834">unexpected test pass</a>: <a href="#Generalities-about-Testing">Generalities about Testing</a></li>
<li><a href="#index-Unified-Parallel-C-support-551">Unified Parallel C support</a>: <a href="#Unified-Parallel-C-Support">Unified Parallel C Support</a></li>
<li><a href="#index-Uniform-naming-scheme-118">Uniform naming scheme</a>: <a href="#Uniform">Uniform</a></li>
<li><a href="#index-uninstall-1080"><code>uninstall</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-uninstall-770"><code>uninstall</code></a>: <a href="#Install-Rules-for-the-User">Install Rules for the User</a></li>
<li><a href="#index-uninstall-26"><code>uninstall</code></a>: <a href="#Standard-Targets">Standard Targets</a></li>
<li><a href="#index-uninstall_002dhook-1096"><code>uninstall-hook</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-uninstall_002dlocal-1081"><code>uninstall-local</code></a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-Unit-tests-875">Unit tests</a>: <a href="#Parallel-Test-Harness">Parallel Test Harness</a></li>
<li><a href="#index-Unpacking-21">Unpacking</a>: <a href="#Basic-Installation">Basic Installation</a></li>
<li><a href="#index-g_t_0040code_007bUPCFLAGS_007d-and-_0040code_007bAM_005fUPCFLAGS_007d-1159"><code>UPCFLAGS</code> and <code>AM_UPCFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040code_007bUPDATED_007d-Texinfo-flag-719"><code>UPDATED</code> Texinfo flag</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-g_t_0040code_007bUPDATED_002dMONTH_007d-Texinfo-flag-721"><code>UPDATED-MONTH</code> Texinfo flag</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-Use-Cases-for-the-GNU-Build-System-15">Use Cases for the GNU Build System</a>: <a href="#Use-Cases">Use Cases</a></li>
<li><a href="#index-user-variables-159">user variables</a>: <a href="#User-Variables">User Variables</a></li>
<li><a href="#index-Using-_0040command_007baclocal_007d-210">Using <samp><span class="command">aclocal</span></samp></a>: <a href="#configure">configure</a></li>
<li><a href="#index-ustar-format-986">ustar format</a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-v7-_0040command_007btar_007d-format-985">v7 <samp><span class="command">tar</span></samp> format</a>: <a href="#List-of-Automake-options">List of Automake options</a></li>
<li><a href="#index-Vala-Support-607">Vala Support</a>: <a href="#Vala-Support">Vala Support</a></li>
<li><a href="#index-variables_002c-conflicting-1044">variables, conflicting</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-Variables_002c-overriding-100">Variables, overriding</a>: <a href="#General-Operation">General Operation</a></li>
<li><a href="#index-variables_002c-reserved-for-the-user-158">variables, reserved for the user</a>: <a href="#User-Variables">User Variables</a></li>
<li><a href="#index-g_t_0040code_007bVERSION_007d-Texinfo-flag-718"><code>VERSION</code> Texinfo flag</a>: <a href="#Texinfo">Texinfo</a></li>
<li><a href="#index-g_t_0040code_007bVERSION_007d_002c-prevent-definition-299"><code>VERSION</code>, prevent definition</a>: <a href="#Public-Macros">Public Macros</a></li>
<li><a href="#index-g_t_0040file_007bversion_002em4_007d_002c-example-910"><samp><span class="file">version.m4</span></samp>, example</a>: <a href="#Rebuilding">Rebuilding</a></li>
<li><a href="#index-g_t_0040file_007bversion_002esh_007d_002c-example-909"><samp><span class="file">version.sh</span></samp>, example</a>: <a href="#Rebuilding">Rebuilding</a></li>
<li><a href="#index-versioned-binaries_002c-installing-1098">versioned binaries, installing</a>: <a href="#Extending">Extending</a></li>
<li><a href="#index-VPATH-builds-37">VPATH builds</a>: <a href="#VPATH-Builds">VPATH Builds</a></li>
<li><a href="#index-wildcards-1120">wildcards</a>: <a href="#Wildcards">Wildcards</a></li>
<li><a href="#index-Windows-622">Windows</a>: <a href="#EXEEXT">EXEEXT</a></li>
<li><a href="#index-xfail-829">xfail</a>: <a href="#Generalities-about-Testing">Generalities about Testing</a></li>
<li><a href="#index-xpass-832">xpass</a>: <a href="#Generalities-about-Testing">Generalities about Testing</a></li>
<li><a href="#index-g_t_0040command_007byacc_007d_002c-multiple-parsers-526"><samp><span class="command">yacc</span></samp>, multiple parsers</a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
<li><a href="#index-g_t_0040code_007bYFLAGS_007d-and-_0040code_007bAM_005fYFLAGS_007d-1160"><code>YFLAGS</code> and <code>AM_YFLAGS</code></a>: <a href="#Flag-Variables-Ordering">Flag Variables Ordering</a></li>
<li><a href="#index-g_t_0040command_007bylwrap_007d-525"><samp><span class="command">ylwrap</span></samp></a>: <a href="#Yacc-and-Lex">Yacc and Lex</a></li>
<li><a href="#index-g_t_0040command_007bzardoz_007d-example-167"><samp><span class="command">zardoz</span></samp> example</a>: <a href="#Complete">Complete</a></li>
   </ul><div class="footnote">
<hr>
<a name="texinfo-footnotes-in-document"></a><h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> These variables are also called <dfn>make macros</dfn>
in Make terminology, however in this manual we reserve the term
<dfn>macro</dfn> for Autoconf's macros.</p>

   <p class="footnote"><small>[<a name="fn-2" href="#fnd-2">2</a>]</small> We
believe.  This work is new and there are probably warts. 
See <a href="#Introduction">Introduction</a>, for information on reporting bugs.</p>

   <p class="footnote"><small>[<a name="fn-3" href="#fnd-3">3</a>]</small> There are other, more obscure reasons for
this limitation as well.</p>

   <p class="footnote"><small>[<a name="fn-4" href="#fnd-4">4</a>]</small> Please note that <samp><span class="command">automake</span></samp> recognizes
<samp><span class="option">-d</span></samp> in <code>AM_YFLAGS</code> only if it is not clustered with other
options; for example, it won't be recognized if <code>AM_YFLAGS</code> is
<samp><span class="option">-dt</span></samp>, but it will be if <code>AM_YFLAGS</code> is <samp><span class="option">-d -t</span></samp> or
<samp><span class="option">-t -d</span></samp>.</p>

   <p class="footnote"><small>[<a name="fn-5" href="#fnd-5">5</a>]</small> Much, if not most, of the
information in the following sections pertaining to preprocessing
Fortran 77 programs was taken almost verbatim from <a href="make.html#Catalogue-of-Rules">Catalogue of Rules</a>.</p>

   <p class="footnote"><small>[<a name="fn-6" href="#fnd-6">6</a>]</small> For example,
<a href="http://www-zeus.desy.de/~burow/cfortran/">the cfortran package</a>
addresses all of these inter-language issues, and runs under nearly all
Fortran 77, C and C++ compilers on nearly all platforms.  However,
<samp><span class="command">cfortran</span></samp> is not yet Free Software, but it will be in the next
major release.</p>

   <p class="footnote"><small>[<a name="fn-7" href="#fnd-7">7</a>]</small> See also
<a href="http://catb.org/~esr/writings/taoup/html/ch11s09.html">http://catb.org/~esr/writings/taoup/html/ch11s09.html</a>.</p>

   <p class="footnote"><small>[<a name="fn-8" href="#fnd-8">8</a>]</small> Automake's &lsquo;<samp><span class="samp">dist</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">distcheck</span></samp>&rsquo; rules had a bug in this regard in that they created
directories even with <samp><span class="option">-n</span></samp>, but this has been fixed in Automake
1.11.</p>

   <hr></div>

</body></html>

